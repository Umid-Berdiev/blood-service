import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-6eeebdac.js";import{_ as n,a as s}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as l}from"./NoDataPlaceholder-50105cc5.js";import{_ as r,a as o}from"./PrintButton-f6d3e2ec.js";import{_ as i}from"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";import{_ as u}from"./VButtons.vue_vue_type_script_setup_true_lang-5f42cc67.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import{o as p,a as m,w as d,i as c,t as g,q as f,E as v,H as y,C as b,x as h,r as j,J as x,y as k,j as w,d as C,k as V,K as $,m as B,e as F,g as I,F as P,l as D}from"./index-202d6ef0.js";import{_ as O}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as R}from"./VFlexItem.vue_vue_type_style_index_0_lang-cfd608a5.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e8162493.js";import{u as U}from"./viewWrapper-93d6f948.js";import{i as A}from"./patient-4b952528.js";import{u as G}from"./main-1fdef032.js";import"./VCard.vue_vue_type_script_setup_true_lang-8d45bf90.js";import"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import"./ClearButton.vue_vue_type_script_setup_true_lang-422ea292.js";import"./VInput.vue_vue_type_script_setup_true_lang-6aad6843.js";import"./VControl-90e6c9df.js";import"./VIMaskInput.vue_vue_type_script_lang-ed3b3d4f.js";import"./lodash-82655619.js";const L=O({},[["render",function(e,a){const t=_;return p(),m(t,{outlined:"",rounded:"",color:"primary",icon:"feather:plus"},{default:d((()=>[c(g(e.$t("Add")),1)])),_:1})}]]),S={class:"page-content-inner"},q={class:"columns mt-1"},z={class:"column"},E={class:"columns"},H={class:"column is-12"},J={key:0,class:"is-flex-grow-0",textContent:"#"},K={key:0,class:"flex-list-inner"},M=f({__name:"index",setup(_){const f=v();y();const{t:O}=b(),M=G(),N=h(!1),W=j({lastname:"",firstname:"",middlename:"",passpordId:""});U().setPageTitle(O("Registration")),x({title:`${O("Unified-donor-register")} - ${M.app.name}`});const Z=j({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),Q=j({page:1}),X={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:O("Category"),format:e=>e.name},name:{label:O("Fullname")},gender:{label:O("Gender"),format:e=>O(e)},birth_date:{label:O("Date-of-birth")},full_address:{label:O("Address")},phone_number:{label:O("Phone_number")},isDiverted:{label:O("Diverted_from_donation")}};async function Y(e){var a,t;try{Object.assign(Q,e),N.value=!0;const a=await A(e);Object.assign(Z,a.result)}catch(n){Object.assign(W,null==(t=null==(a=n.response)?void 0:a.data)?void 0:t.errors)}finally{N.value=!1}}async function ee(){await Y(Q)}function ae(){f.push("/app/registration/register-donors")}function te(){}return k((()=>Z.pagination.current_page),(async e=>{e&&(Q.page=e,await Y(Q))}),{immediate:!0}),(_,f)=>{const v=T,y=R,b=L,h=r,j=u,x=i,k=o,O=n,U=e,A=l,G=w("RouterLink"),W=a,Q=s,ne=t;return p(),C("div",S,[V(x,{"justify-content":"space-between","flex-wrap":"wrap"},{default:d((()=>[V(y,null,{default:d((()=>[V(v,{"with-icons":"",separator:"bullet",items:[{label:$(M).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:_.$t("Registration")},{label:_.$t("Unified-donor-register")}]},null,8,["items"])])),_:1}),V(y,null,{default:d((()=>[V(j,null,{default:d((()=>[V(b,{onClick:B(ae,["prevent"])},null,8,["onClick"]),V(h,{onClick:B(te,["prevent"])},null,8,["onClick"])])),_:1})])),_:1})])),_:1}),F("div",q,[F("div",z,[V(k,{"is-loading":$(N),onSearch:Y,onClearForm:ee},null,8,["is-loading"])])]),F("div",E,[F("div",H,[V(ne,{columns:$(X),data:$(Z).data,limit:$(Z).pagination.per_page,total:$(Z).pagination.total},{default:d((()=>[V(W,{rounded:"","no-header":!$(N)&&0===$(Z).data.length},{"header-column":d((({column:e})=>["#"===e.key?(p(),C("span",J)):I("",!0)])),body:d((()=>[$(N)?(p(),C("div",K,[(p(!0),C(P,null,D($(Z).pagination.per_page,(e=>(p(),C("div",{key:e,class:"flex-table-item"},[V(U,null,{default:d((()=>[V(O,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):I("",!0),0===$(Z).data.length?(p(),m(A,{key:1})):I("",!0)])),"body-cell":d((({row:e,column:a,value:t})=>["name"===a.key?(p(),m(G,{key:0,class:"has-text-primary",to:`${_.$route.path}/${e.id}#details`},{default:d((()=>[c(g(e.first_name)+" "+g(e.last_name)+" "+g(e.father_name),1)])),_:2},1032,["to"])):I("",!0)])),_:1},8,["no-header"]),$(Z).data.length?(p(),m(Q,{key:0,"current-page":$(Z).pagination.current_page,"onUpdate:current-page":f[0]||(f[0]=e=>$(Z).pagination.current_page=e),class:"mt-5","item-per-page":$(Z).pagination.per_page,"total-items":$(Z).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):I("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{M as default};
