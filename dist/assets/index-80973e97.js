import{_ as a}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-b5488b87.js";import{_ as e,a as t,b as l}from"./VFlexTable.vue_vue_type_style_index_0_lang-6eeebdac.js";import{_ as i,a as s}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as n}from"./NoDataPlaceholder-50105cc5.js";import{_ as o,a as r}from"./VControl-90e6c9df.js";import{_ as u}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e8162493.js";import{q as d,H as _,C as p,x as c,J as m,r as v,A as f,y,j as g,o as b,d as h,e as x,k as j,K as k,w,U as V,g as C,F as $,l as P,a as A,i as D,t as M}from"./index-202d6ef0.js";import{u as F}from"./main-1fdef032.js";import{u as z}from"./viewWrapper-93d6f948.js";import{b as B}from"./patient-4b952528.js";import{f as N,a as T}from"./index-6a7f1daa.js";import{_ as U}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VModal.vue_vue_type_style_index_0_lang-98b95306.js";import"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";const L={class:"page-content-inner"},O={class:"columns mb-3"},S={class:"column"},q={class:"column is-3"},H={class:"columns"},I={class:"column is-12"},J={key:0,class:"is-flex-grow-0",textContent:"#"},K={key:0,class:"flex-list-inner"},R=["onClick"],W=U(d({__name:"index",setup(d){const U=_(),{t:W}=p(),Z=F(),E=c(!1);z().setPageTitle(W("Physician-therapist")),m({title:`${W("Donors-list-for-examination")} - ${Z.app.name}`});const G=v({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),Q={orderNumber:{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:W("Fullname")},birth_date:{label:W("Date-of-birth")},visit_date:{label:W("Visit_date"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.created_at}},visit_type:{label:W("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&W(null==(l=e.last_visit)?void 0:l.visit_type)}},directed_by:{label:W("Directed_by"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.directed_by)&&W(null==(l=e.last_visit)?void 0:l.directed_by)}},personalized_donation:{label:W("Personalized_donation"),format:(a,e)=>{var t;return(null==(t=e.last_visit)?void 0:t.personalized_donation)||"-"},align:"center"},visit_status:{label:W("Visit_status"),format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.status)?void 0:l.name}},actions:{label:W("Actions")}},X=c([{id:0,name:W("All")}]),Y=c(1),aa=c(null);async function ea(a=1){var e,t;try{E.value=!0;const e={page:a,status_id:Y.value},t=await B(e);Object.assign(G,t.result)}catch(l){U.error(W(null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors))}finally{E.value=!1}}async function ta(){var a,e;try{E.value=!0,await T(null==(a=aa.value)?void 0:a.id,null==(e=aa.value)?void 0:e.last_visit.id),await ea(),aa.value=null}catch(t){U.error(t.message)}finally{E.value=!1}}return f((async()=>{const a=await N();X.value=a.result})),y((()=>G.pagination.current_page),(async a=>{a&&await ea(a)})),y((()=>Y.value),(async a=>{a&&await ea()}),{immediate:!0}),(d,_)=>{const p=u,c=g("Multiselect"),m=o,v=r,f=i,y=e,F=n,z=g("RouterLink"),B=t,N=s,T=l,U=a;return b(),h("div",L,[x("div",O,[x("div",S,[j(p,{"with-icons":"",separator:"bullet",items:[{label:k(Z).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:d.$t("Physician-therapist")},{label:d.$t("Donors-list-for-examination")}]},null,8,["items"])]),x("div",q,[j(v,{class:"is-curved-select"},{default:w((({id:a})=>[j(m,null,{default:w((()=>[j(c,{modelValue:k(Y),"onUpdate:modelValue":_[0]||(_[0]=a=>V(Y)?Y.value=a:null),attrs:{id:a},options:k(X),placeholder:d.$t("Select_donor_status"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"])])),_:2},1024)])),_:1})])]),x("div",H,[x("div",I,[j(T,{columns:k(Q),data:k(G).data,limit:k(G).pagination.per_page,total:k(G).pagination.total},{default:w((()=>[j(B,{rounded:"","no-header":!k(E)&&0===k(G).data.length},{"header-column":w((({column:a})=>["orderNumber"===a.key?(b(),h("span",J)):C("",!0)])),body:w((()=>[k(E)?(b(),h("div",K,[(b(!0),h($,null,P(k(G).pagination.per_page,(a=>(b(),h("div",{key:a,class:"flex-table-item"},[j(y,null,{default:w((()=>[j(f,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):C("",!0),0===k(G).data.length?(b(),A(F,{key:1})):C("",!0)])),"body-cell":w((({row:a,column:e})=>["name"===e.key?(b(),A(z,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${a.id}`},{default:w((()=>[D(M(a.first_name)+" "+M(a.last_name)+" "+M(a.father_name)+" ",1)])),_:2},1032,["to"])):C("",!0),"actions"===e.key?(b(),h("a",{key:1,href:"javascript:;",class:"has-text-warning",onClick:e=>async function(a){aa.value=a,Z.$patch({confirmModalState:!0}),Z.$patch({confirmModalOkButtonColor:"warning"})}(a)},M(d.$t("Complete")),9,R)):C("",!0)])),_:1},8,["no-header"]),k(G).data.length?(b(),A(N,{key:0,"current-page":k(G).pagination.current_page,"onUpdate:current-page":_[1]||(_[1]=a=>k(G).pagination.current_page=a),class:"mt-5","item-per-page":k(G).pagination.per_page,"total-items":k(G).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):C("",!0)])),_:1},8,["columns","data","limit","total"])])]),j(U,{onConfirmAction:ta})])}}}),[["__scopeId","data-v-644e465e"]]);export{W as default};
