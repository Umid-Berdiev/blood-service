import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-ac88dda5.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-96021f2c.js";import{_ as a}from"./VCheckbox.vue_vue_type_style_index_0_lang-d46d394c.js";import{_ as t}from"./DatePicker.vue_vue_type_script_setup_true_lang-8beaf1b4.js";import{_ as n}from"./VInput.vue_vue_type_script_setup_true_lang-9c010bca.js";import{_ as s,a as o,b as i}from"./VControl-e7b2630d.js";import{q as d,H as u,C as r,x as _,r as c,A as p,j as m,o as f,a as b,w as v,e as g,t as h,k as y,K as V,i as $,g as x,d as j,F as k,L as w,M as C,y as U,m as S,E as O,J as z,l as D,U as F}from"./index-21286bdb.js";import{a as B}from"./additional-f442439b.js";import{_ as E}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as q}from"./VCard.vue_vue_type_script_setup_true_lang-1043f916.js";import{a as I,_ as L,b as M,c as P,d as R}from"./search-7-dark-81286176.js";import{_ as T}from"./ClearButton.vue_vue_type_script_setup_true_lang-7aff0300.js";import{_ as W}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-69f615bd.js";import{u as A}from"./main-16751c88.js";import{u as H}from"./viewWrapper-6ae5f61c.js";import"./VButton.vue_vue_type_style_index_0_lang-b78df6f3.js";import"./ClientOnly.vue_vue_type_script_lang-52200b90.js";import"./VFlex.vue_vue_type_style_index_0_lang-57370b27.js";const N=e=>(w("data-v-b709ab91"),e=e(),C(),e),Q={class:"box"},G={class:"table is-fullwidth"},J={class:""},K={class:"has-text-info"},Z={class:""},X={class:"has-text-info"},Y={class:""},ee={class:"has-text-info"},le={class:""},ae={class:"has-text-info"},te={class:""},ne={class:"has-text-info"},se=N((()=>g("hr",{class:"is-divider"},null,-1))),oe={class:"box"},ie={class:"table is-fullwidth"},de={class:"is-flex is-align-items-center"},ue={class:"mr-5"},re=N((()=>g("br",null,null,-1))),_e={class:"is-flex is-align-items-center"},ce={class:"is-flex is-align-items-center"},pe=E(d({__name:"ProductReleaseFormModal",props:{product:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(d,{emit:w}){const C=u(),{t:U}=r(),S=_(!1),O=_(U("Product_release")),z=c({sent_to_id:null,medical_organization_id:null,subdivision_id:null,issue_date:"",basis_id:null,received_by:"",sent_by:"",tsgsen:"",transfer_date:"",defect_reasons:[]}),D=c({sent_to_id:[],medical_organization_id:[],subdivision_id:[],issue_date:[],basis_id:[],received_by:[],sent_by:[],tsgsen:[],transfer_date:[],defect_reasons:[]}),F=_([]),E=_([{id:1,name:"Отдел перепаратов"},{id:2,name:"Имуннологическое отделение"},{id:3,name:"Отдел переработки"}]),q=_([{id:1,name:"На трансфузию"},{id:2,name:"На переработку"},{id:3,name:"В ЦГСЭН"},{id:4,name:"На списание"}]),I=_([{id:1,name:"По требованию"},{id:2,name:"За наличный расчет"},{id:4,name:"По справке"}]);async function L(){var e,l;try{S.value=!0,C.success(U("Data_saved_successfully")),M()}catch(a){C.error(a.message),Object.assign(D,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{S.value=!1}}function M(){w("update:isOpen",!1)}return p((async()=>{await B().then((e=>F.value=e.result))})),(u,r)=>{const _=m("Multiselect"),c=s,p=o,w=i,C=n,U=t,D=a,B=l,P=e;return f(),b(P,{open:d.isOpen,size:"big",title:V(O),actions:"right",onClose:M},{content:v((()=>[g("div",Q,[g("table",G,[g("tbody",null,[g("tr",null,[g("td",null,[g("span",J,h(u.$t("Component_name"))+": ",1),g("span",K,h(d.product.component_name),1)]),g("td",null,[g("span",Z,h(u.$t("Donation_code"))+": ",1),g("span",X,h(d.product.donation_code),1)])]),g("tr",null,[g("td",null,[g("span",Y,h(u.$t("Donation_date"))+": ",1),g("span",ee,h(d.product.donation_date),1)]),g("td",null,[g("span",le,h(u.$t("Expiry_date"))+": ",1),g("span",ae,h(d.product.expiry_date),1)])]),g("tr",null,[g("td",null,[g("span",te,h(u.$t("Quantity_ml"))+": ",1),g("span",ne,h(d.product.quantity),1)])])])])]),se,g("div",oe,[g("table",ie,[g("tbody",null,[g("tr",null,[g("td",null,[g("div",de,[g("div",ue,h(u.$t("Send_to")),1),y(p,null,{default:v((()=>[y(c,null,{default:v((()=>[y(_,{modelValue:V(z).sent_to_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(z).sent_to_id=e),options:V(q),placeholder:u.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})]),re,1===V(z).sent_to_id?(f(),b(p,{key:0},{default:v((()=>[y(w,null,{default:v((()=>[$(h(u.$t("Healthcare_facilities_list")),1)])),_:1}),y(c,null,{default:v((()=>[y(_,{modelValue:V(z).medical_organization_id,"onUpdate:modelValue":r[1]||(r[1]=e=>V(z).medical_organization_id=e),options:V(F),placeholder:u.$t("Select"),label:"name",searchable:"","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})):x("",!0),2===V(z).sent_to_id?(f(),b(p,{key:1},{default:v((()=>[y(w,null,{default:v((()=>[$(h(u.$t("Subdivision")),1)])),_:1}),y(c,null,{default:v((()=>[y(_,{modelValue:V(z).subdivision_id,"onUpdate:modelValue":r[2]||(r[2]=e=>V(z).subdivision_id=e),options:V(E),placeholder:u.$t("Select"),label:"name",searchable:"","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})):x("",!0),3===V(z).sent_to_id?(f(),b(p,{key:2,label:u.$t("TsGSEN")},{default:v((()=>[y(c,null,{default:v((()=>[y(C,{modelValue:V(z).tsgsen,"onUpdate:modelValue":r[3]||(r[3]=e=>V(z).tsgsen=e),placeholder:u.$t("Enter_tsgsen_title")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])):x("",!0),4===V(z).sent_to_id?(f(),j(k,{key:3},[g("div",_e,[g("div",null,h(u.$t("Transfer_date_for_debiting")),1),y(U,{modelValue:V(z).transfer_date,"onUpdate:modelValue":r[4]||(r[4]=e=>V(z).transfer_date=e),class:"ml-5"},null,8,["modelValue"])]),g("div",ce,[g("div",null,h(u.$t("Defect_reasons")),1),y(p,{class:"ml-auto"},{default:v((()=>[y(c,{raw:"",subcontrol:""},{default:v((()=>[y(D,{modelValue:V(z).defect_reasons,"onUpdate:modelValue":r[5]||(r[5]=e=>V(z).defect_reasons=e),label:u.$t("Shelf_life_expired"),value:"shelf_life_expired"},null,8,["modelValue","label"])])),_:1}),y(c,{raw:"",subcontrol:""},{default:v((()=>[y(D,{modelValue:V(z).defect_reasons,"onUpdate:modelValue":r[6]||(r[6]=e=>V(z).defect_reasons=e),label:u.$t("Container_damage"),value:"container_damage"},null,8,["modelValue","label"])])),_:1}),y(c,{raw:"",subcontrol:""},{default:v((()=>[y(D,{modelValue:V(z).defect_reasons,"onUpdate:modelValue":r[7]||(r[7]=e=>V(z).defect_reasons=e),label:u.$t("Other"),value:"other"},null,8,["modelValue","label"])])),_:1})])),_:1})])],64)):x("",!0)]),g("td",null,[y(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[y(w,null,{default:v((()=>[$(h(u.$t("Issue_date")),1)])),_:1}),y(U,{modelValue:V(z).issue_date,"onUpdate:modelValue":r[8]||(r[8]=e=>V(z).issue_date=e)},null,8,["modelValue"])])),_:1}),y(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[y(w,null,{default:v((()=>[$(h(u.$t("Basis_for_issuance")),1)])),_:1}),y(c,null,{default:v((()=>[y(_,{modelValue:V(z).basis_id,"onUpdate:modelValue":r[9]||(r[9]=e=>V(z).basis_id=e),options:V(I),placeholder:u.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1}),y(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[y(w,null,{default:v((()=>[$(h(u.$t("Received_by")),1)])),_:1}),y(c,null,{default:v((()=>[y(C,{modelValue:V(z).received_by,"onUpdate:modelValue":r[10]||(r[10]=e=>V(z).received_by=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),y(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[y(w,null,{default:v((()=>[$(h(u.$t("Sent_by")),1)])),_:1}),y(c,null,{default:v((()=>[y(C,{modelValue:V(z).sent_by,"onUpdate:modelValue":r[11]||(r[11]=e=>V(z).sent_by=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1})])])])])])])),action:v((()=>[y(B,{type:"button",loading:V(S),onClick:L},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-b709ab91"]]),me=["onSubmit"],fe={class:"columns"},be={class:"column is-3"},ve={class:"help has-text-danger"},ge={class:"column is-3"},he={class:"help has-text-danger"},ye={class:"column is-narrow mt-auto ml-auto pb-4"},Ve={class:"buttons"},$e=d({__name:"StorageTransferredProductsFilter",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],setup(e,{emit:a}){r(),u();const t=c({component_id:null,donation_code:""}),i=_([]),d=_(!1);U(t,(e=>{e&&(d.value=Object.values(e).some((e=>!!e)))}),{deep:!0});const p=async()=>{a("search",t)},x=async()=>{Object.assign(t,{component_id:null,donation_code:""}),a("clearForm")};return(a,u)=>{const r=m("Multiselect"),_=s,c=o,j=n,k=T,w=l,C=q;return f(),b(C,null,{default:v((()=>[g("form",{onSubmit:S(p,["prevent"])},[g("div",fe,[g("div",be,[y(c,{class:"is-curved-select",label:a.$t("Component_name")},{default:v((({id:l})=>[y(_,null,{default:v((()=>[y(r,{modelValue:V(t).component_id,"onUpdate:modelValue":u[0]||(u[0]=e=>V(t).component_id=e),attrs:{id:l},options:V(i),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),g("p",ve,h(e.errors.component_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),g("div",ge,[y(c,{class:"is-curved-select",label:a.$t("Donation_code")},{default:v((({id:l})=>[y(_,null,{default:v((()=>[y(j,{modelValue:V(t).donation_code,"onUpdate:modelValue":u[1]||(u[1]=e=>V(t).donation_code=e),attrs:{id:l},placeholder:a.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),g("p",he,h(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])]),g("div",ye,[g("div",Ve,[y(k,{disabled:e.isLoading||!V(d),onClear:x},null,8,["disabled"]),y(w,{loading:e.isLoading},{default:v((()=>[$(h(a.$t("Search")),1)])),_:1},8,["loading"])])])])],40,me)])),_:1})}}}),xe=e=>(w("data-v-f074d0a3"),e=e(),C(),e),je={class:"page-content-inner"},ke={class:"columns mb-5"},we={class:"column is-narrow"},Ce={class:"columns"},Ue={class:"column"},Se={class:"columns"},Oe={class:"column"},ze={class:"table-container"},De={key:0,class:"flex-list-inner"},Fe=xe((()=>g("img",{class:"light-image",src:P,alt:""},null,-1))),Be=xe((()=>g("img",{class:"dark-image",src:R,alt:""},null,-1))),Ee={key:1,class:"table is-hoverable is-fullwidth"},qe={colspan:"10"},Ie=["onClick"],Le=E(d({__name:"index",setup(e){O(),u();const{t:l}=r(),a=A(),t=_(!1),n=H();_(null),n.setPageTitle(l("Forwarding")),z({title:`${l("Storage_transferred_products")} - ${a.app.name}`});const s=c({data:[{id:11,donation_date:"10.12.2022",donation_code:"130100123400",blood_type:"O(I)",rh_factor:"Rh+",component_name:"Эритроцитная масса",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),o=c({}),i=_(!1),d=c({donation_code:[],component_id:[]});async function p(e){var l,a;try{t.value=!0;s.pagination.current_page}catch(n){Object.assign(d,null==(a=null==(l=n.response)?void 0:l.data)?void 0:a.errors)}finally{t.value=!1}}function m(e){errors[e]=""}async function $(){s.data=[]}return U(i,(function(e){!1===e&&Object.assign(o,{})})),(e,l)=>{const n=W,u=$e,r=I,_=L,c=M,w=q,C=pe;return f(),j("div",je,[g("div",ke,[g("div",we,[y(n,{"with-icons":"",separator:"bullet",items:[{label:V(a).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Forwarding")},{label:e.$t("Storage_transferred_products")}]},null,8,["items"])])]),g("div",Ce,[g("div",Ue,[y(u,{"is-loading":V(t),errors:V(d),onSearch:p,onClearForm:$,onClearError:m},null,8,["is-loading","errors"])])]),g("div",Se,[g("div",Oe,[y(w,null,{default:v((()=>[g("div",ze,[0===V(s).data.length?(f(),j("div",De,[y(r,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:v((()=>[Fe,Be])),_:1},8,["title","subtitle"])])):(f(),j("table",Ee,[g("thead",null,[g("tr",null,[g("th",null,h(e.$t("Donation_date")),1),g("th",null,h(e.$t("Donation_code")),1),g("th",null,h(e.$t("Blood_type")),1),g("th",null,h(e.$t("Rh_factor")),1),g("th",null,h(e.$t("Component_name")),1),g("th",null,h(e.$t("Dose")),1),g("th",null,h(e.$t("Quantity_ml")),1),g("th",null,h(e.$t("Come_from")),1),g("th",null,h(e.$t("Recipient_surname")),1),g("th",null,h(e.$t("Expiry_date")),1)])]),g("tbody",null,[V(t)?(f(!0),j(k,{key:0},D(V(s).pagination.per_page,(e=>(f(),j("tr",{key:e},[g("td",qe,[y(_,{lines:2,"last-line-width":"70%"})])])))),128)):(f(!0),j(k,{key:1},D(V(s).data,((e,l)=>(f(),j("tr",{key:l},[g("td",null,h(e.donation_date),1),g("td",null,[g("a",{href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){Object.assign(o,e),i.value=!0}(e)},h(e.donation_code),9,Ie)]),g("td",null,h(e.blood_type),1),g("td",null,h(e.rh_factor),1),g("td",null,h(e.component_name),1),g("td",null,h(e.dose),1),g("td",null,h(e.quantity),1),g("td",null,h(e.come_from),1),g("td",null,h(e.personalized_donation),1),g("td",null,h(e.expiry_date),1)])))),128))])]))]),V(s).data.length?(f(),b(c,{key:0,"current-page":V(s).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>V(s).pagination.current_page=e),class:"mt-5","item-per-page":V(s).pagination.per_page,"total-items":V(s).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):x("",!0)])),_:1})])]),y(C,{"is-open":V(i),"onUpdate:is-open":l[1]||(l[1]=e=>F(i)?i.value=e:null),product:V(o),"onUpdate:list":p},null,8,["is-open","product"])])}}}),[["__scopeId","data-v-f074d0a3"]]);export{Le as default};
