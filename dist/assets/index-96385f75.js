import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{_ as l,a as s,b as r,c as n,d as i}from"./search-7-dark-f0facebe.js";import{_ as o}from"./VCard.vue_vue_type_script_setup_true_lang-a9232da9.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as u,a as _}from"./VControl-fc151345.js";import{_ as c}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-5ce26ef4.js";import{a as p,r as m,ac as v,b as g,s as y,l as b,t as f,q as h,Q as j,X as V,p as x,u as $,V as k,v as D,c as w,m as S,y as C,M as F,W as M,i as Y,$ as U,a0 as E}from"./chunk-BGPNDDXN-dcda8805.js";import{u as N}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as P}from"./useNotyf-1536ae84.js";import{p as I}from"./patient-3eef0e53.js";import{_ as L}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as O}from"./chunk-DRAQDPQ2-4514f14e.js";import{f as B}from"./@vueuse_core-098eb702.js";import{u as A}from"./@vueuse_head-0d019878.js";import{_ as G}from"./lodash-94527813.js";import{u as Q}from"./main-a3a6220c.js";import{u as T}from"./viewWrapper-c60f0ce7.js";import{f as q}from"./index-423938b0.js";import{_ as W}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import"./VPlaceload-2a65ae53.js";import"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import"./moment-e00bdeae.js";import"./userSession-0c0e9684.js";import"./pinia-3af6ce52.js";const X=["onSubmit"],H={class:"columns"},R={class:"column"},z={class:"help has-text-danger"},J={class:"column"},K={class:"help has-text-danger"},Z={class:"column"},ee={class:"help has-text-danger"},ae={class:"column"},te={class:"help has-text-danger"},le={class:"navigation-buttons"},se={class:"buttons is-right"},re=p({__name:"ScreeningPassedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(e,{emit:a}){let t,l;const{t:s}=N();P();const r=m({start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),n=([t,l]=v((()=>I().then((e=>e.result)))),t=await t,l(),t),i=g([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),p=async()=>{a("search",r)},w=async()=>{Object.assign(r,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),a("clearForm")};return(a,t)=>{const l=c,s=u,m=_,v=y("Multiselect"),g=d,S=o;return b(),f(S,null,{default:h((()=>[j("form",{onSubmit:V(p,["prevent"])},[j("div",H,[j("div",R,[x(m,{label:a.$t("Start_date")},{default:h((()=>[x(s,null,{default:h((()=>[x(l,{modelValue:$(r).start_date,"onUpdate:modelValue":t[0]||(t[0]=e=>$(r).start_date=e)},null,8,["modelValue"]),j("p",z,k(e.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",J,[x(m,{label:a.$t("End_date")},{default:h((()=>[x(s,null,{default:h((()=>[x(l,{modelValue:$(r).end_date,"onUpdate:modelValue":t[1]||(t[1]=e=>$(r).end_date=e)},null,8,["modelValue"]),j("p",K,k(e.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",Z,[x(m,{class:"is-curved-select",label:a.$t("Donor_categories")},{default:h((({id:l})=>[x(s,null,{default:h((()=>[x(v,{modelValue:$(r).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=e=>$(r).donor_category_id=e),attrs:{id:l},options:$(n),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",ee,k(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",ae,[x(m,{class:"is-curved-select",label:a.$t("Visit_type")},{default:h((({id:l})=>[x(s,null,{default:h((()=>[x(v,{modelValue:$(r).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=e=>$(r).visit_type_id=e),attrs:{id:l},options:$(i),placeholder:a.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),j("p",te,k(e.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),j("div",le,[j("div",se,[x(g,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:w},{default:h((()=>[D(k(a.$t("Clear")),1)])),_:1},8,["disabled"]),x(g,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:h((()=>[D(k(a.$t("Search")),1)])),_:1},8,["loading"])])])],40,X)])),_:1})}}}),ne=e=>(U("data-v-20b93ee3"),e=e(),E(),e),ie={class:"page-content-inner"},oe={class:"columns mb-3"},de={class:"column"},ue={class:"columns mt-1"},_e={class:"column"},ce={class:"columns"},pe={class:"column is-12"},me=["textContent"],ve={key:0,class:"flex-list-inner"},ge={key:1,class:"flex-list-inner"},ye=ne((()=>j("img",{class:"light-image",src:n,alt:""},null,-1))),be=ne((()=>j("img",{class:"dark-image",src:i,alt:""},null,-1))),fe={key:0},he=G.isEmpty,je=W(p({__name:"index",async setup(n){let i,o;O();const d=P(),{t:u}=N(),_=Q(),c=g(!1);T().setPageTitle(u("Screening")),A({title:`${u("Screening-passed-donors-list")} - ${_.app.name}`});const p=m({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),y=w({get:()=>p.pagination.current_page,set:async e=>{U.page=e,await E(U)}}),V={orderNumber:{format:(e,a,t)=>`${t+1}`,align:"center"},screening_date:{label:u("Screening_date"),format:(e,a)=>{var t,l,s;return(null==(t=a.last_visit)?void 0:t.primary_screening_result)&&B(new Date(null==(s=null==(l=a.last_visit)?void 0:l.primary_screening_result)?void 0:s.created_at),"YYYY-MM-DD")}},name:{label:u("Donor_fullname")},birth_date:{label:u("Date-of-birth")},visit_date:{label:u("Visit_date"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.created_at)&&B(new Date(null==(l=a.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:u("Visit_type"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.visit_type)&&u(null==(l=a.last_visit)?void 0:l.visit_type)}},hemoglobin:{label:`${u("Hemoglobin")}, ${u("g/l")}`,format:(e,a)=>{var t,l;return null==(l=null==(t=a.last_visit)?void 0:t.primary_screening_result)?void 0:l.value},align:"center"},preliminary_blood_type:{label:u("Preliminary_blood_type"),format:(e,a)=>{var t,l,s;return null==(s=null==(l=null==(t=a.last_visit)?void 0:t.primary_screening_result)?void 0:l.blood_type)?void 0:s.label},align:"center"},laboratory_assistant_fullname:{label:u("Laboratory_assistant_fullname"),format:(e,a)=>{var t,l;return null==(l=null==(t=a.last_visit)?void 0:t.primary_screening_result)?void 0:l.created_by}}};g();const D=m({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[]}),U=m({page:1});async function E(e){var a,t;try{Object.assign(U,e),c.value=!0;const a=await q(e);Object.assign(p,a.result),he(a.result.data)?d.warning(u("Data_not_found")):d.success(`${u("Found")}: ${a.result.pagination.total} ${u("records")}`)}catch(l){Object.assign(D,null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.errors)}finally{c.value=!1}}function I(e){D[e]=""}async function G(){p.data=[]}return[i,o]=v((()=>E(U))),await i,o(),(n,i)=>{const o=L,d=re,u=l,m=e,v=s,g=a,w=r,U=t;return b(),S("div",ie,[j("div",oe,[j("div",de,[x(o,{"with-icons":"",separator:"bullet",items:[{label:$(_).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:n.$t("Screening")},{label:n.$t("Screening-passed-donors-list")}]},null,8,["items"])])]),j("div",ue,[j("div",_e,[x(d,{"is-loading":$(c),errors:$(D),onSearch:E,onClearForm:G,onClearError:I},null,8,["is-loading","errors"])])]),j("div",ce,[j("div",pe,[x(U,{columns:$(V),data:$(p).data,limit:$(p).pagination.per_page,total:$(p).pagination.total},{default:h((()=>[x(g,{rounded:"","no-header":!$(c)&&0===$(p).data.length},{"header-column":h((({column:e})=>["orderNumber"===e.key?(b(),S("span",{key:0,textContent:k(n.$t("donor_no"))},null,8,me)):C("",!0)])),body:h((()=>[$(c)?(b(),S("div",ve,[(b(!0),S(F,null,M($(p).pagination.per_page,(e=>(b(),S("div",{key:e,class:"flex-table-item"},[x(m,null,{default:h((()=>[x(u,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):C("",!0),0===$(p).data.length?(b(),S("div",ge,[x(v,{title:n.$t("No_data"),subtitle:n.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:h((()=>[ye,be])),_:1},8,["title","subtitle"])])):C("",!0)])),"body-cell":h((({row:e,column:a})=>["name"===a.key?(b(),S("span",fe,k(e.first_name)+" "+k(e.last_name)+" "+k(e.father_name),1)):C("",!0)])),_:1},8,["no-header"]),$(p).data.length?(b(),f(w,{key:0,"current-page":$(y),"onUpdate:current-page":i[0]||(i[0]=e=>Y(y)?y.value=e:null),class:"mt-5","item-per-page":$(p).pagination.per_page,"total-items":$(p).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):C("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-20b93ee3"]]);export{je as default};
