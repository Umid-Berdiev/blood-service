import{_ as a,a as e,b as t,c as l,d as s,e as o,f as i,g as n}from"./search-7-dark.102b5390.js";import{_ as r}from"./VProgress.vue_vue_type_style_index_0_lang.25603c48.js";import{_ as d}from"./VCard.vue_vue_type_script_setup_true_lang.66705bb8.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang.108743ff.js";import{_ as u,a as c}from"./VControl.c83da2bc.js";import{_ as p}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.7de6c203.js";import{q as m,C as v,H as g,r as b,a2 as y,x as f,j as h,o as x,a as V,w as j,e as $,m as k,k as w,t as D,K as C,i as F,E,J as M,c as L,a1 as P,d as U,g as I,F as S,l as z,a3 as B,L as O,M as Y}from"./index.7c55eebc.js";import{_ as A}from"./lodash.ee52b868.js";import{g as N,f as q}from"./patient.8ce28ef6.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.014f9ced.js";import{u as W}from"./main.77f12ddf.js";import{u as G}from"./viewWrapper.36a4ca30.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VFlex.vue_vue_type_style_index_0_lang.7a5f3769.js";import"./VPlaceload.b6410537.js";import"./VIMaskInput.vue_vue_type_script_lang.ee999b64.js";import"./moment.6db5fb47.js";const J=["onSubmit"],K={class:"columns"},R={class:"column"},Q={class:"help has-text-danger"},X={class:"column"},Z={class:"help has-text-danger"},aa={class:"column"},ea={class:"help has-text-danger"},ta={class:"column"},la={class:"help has-text-danger"},sa={class:"column"},oa={class:"help has-text-danger"},ia={class:"navigation-buttons"},na={class:"buttons is-right"},ra=A.isEmpty,da=A.values,_a=m({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=v(),o=g(),i=b({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),n=([t,l]=y((()=>N().then((a=>a.result)))),t=await t,l(),t),r=f([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),m=f([{id:1,name:s("Whole_blood_donation")},{id:2,name:s("Plasmapheresis")},{id:3,name:s("Plateletpheresis")}]),E=async()=>{da(i).every(ra)?o.error(s("Form_fields_are_empty")):e("search",i)},M=async()=>{Object.assign(i,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),e("clearForm")};return(e,t)=>{const l=p,s=u,o=c,v=h("Multiselect"),g=_,b=d;return x(),V(b,{radius:"regular"},{default:j((()=>[$("form",{onSubmit:k(E,["prevent"])},[$("div",K,[$("div",R,[w(o,{label:e.$t("Start_date")},{default:j((()=>[w(s,null,{default:j((()=>[w(l,{modelValue:i.start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>i.start_date=a)},null,8,["modelValue"]),$("p",Q,D(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),$("div",X,[w(o,{label:e.$t("End_date")},{default:j((()=>[w(s,null,{default:j((()=>[w(l,{modelValue:i.end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>i.end_date=a)},null,8,["modelValue"]),$("p",Z,D(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),$("div",aa,[w(o,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:j((({id:l})=>[w(s,null,{default:j((()=>[w(v,{modelValue:i.donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>i.donor_category_id=a),attrs:{id:l},options:C(n),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",ea,D(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",ta,[w(o,{class:"is-curved-select",label:e.$t("Visit_type")},{default:j((({id:l})=>[w(s,null,{default:j((()=>[w(v,{modelValue:i.visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>i.visit_type_id=a),attrs:{id:l},options:r.value,placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),$("p",la,D(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",sa,[w(o,{class:"is-curved-select",label:e.$t("Donation_type")},{default:j((({id:l})=>[w(s,null,{default:j((()=>[w(v,{modelValue:i.donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=a=>i.donation_type_id=a),attrs:{id:l},options:m.value,placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",oa,D(a.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),$("div",ia,[$("div",na,[w(g,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:M},{default:j((()=>[F(D(e.$t("Clear")),1)])),_:1},8,["disabled"]),w(g,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:j((()=>[F(D(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,J)])),_:1})}}}),ua=a=>(O("data-v-c50494a7"),a=a(),Y(),a),ca={class:"page-content-inner"},pa={class:"columns mb-3"},ma={class:"column"},va={class:"columns mt-1"},ga={class:"column"},ba={class:"columns"},ya={class:"column is-12"},fa=["textContent"],ha={key:0,class:"flex-list-inner"},xa={key:1,class:"flex-list-inner"},Va=ua((()=>$("img",{class:"light-image",src:i,alt:""},null,-1))),ja=ua((()=>$("img",{class:"dark-image",src:n,alt:""},null,-1))),$a=A.isEmpty,ka=H(m({__name:"index",setup(i){E();const n=g(),{t:d}=v(),_=W(),u=f(!1);G().setPageTitle(d("Physician-therapist")),M({title:`${d("Donors-list-for-examination")} - ${_.app.name}`});const c=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=L({get:()=>c.pagination.current_page,set:async a=>{O.page=a,await Y(O)}}),m={orderNumber:{format:(a,e,t)=>`${t+1}`},name:{label:d("Fullname")},birth_date:{label:d("Date-of-birth")},visit_date:{label:d("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&P(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:d("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&d(null==(l=e.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:d("Medical_inspection_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.directed_by)&&d(null==(l=e.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:d("Medical_inspection_conclusion"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},linked_donation_number:{label:d("Linked_donation_number"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},donation_type:{label:d("Donation_type"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:d("Blood_component_amount"),format:(a,e)=>{var t;return null==(t=e.status)?void 0:t.name}}},y=f(),k=b({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),O=b({page:1});async function Y(a){var e,t;try{Object.assign(O,a),u.value=!0;const e=await q(a);Object.assign(c,e.result),$a(e.result.data)?n.warning(d("Data_not_found")):n.success(`${d("Found")}: ${e.result.pagination.total} ${d("records")}`)}catch(l){Object.assign(k,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{u.value=!1}}function A(a){k[a]=""}async function N(){c.data=[]}return(i,n)=>{const d=T,v=_a,g=a,b=e,f=t,E=r,M=h("RouterLink"),L=l,P=s,O=o;return x(),U("div",ca,[$("div",pa,[$("div",ma,[w(d,{"with-icons":"",separator:"bullet",items:[{label:C(_).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Physician-therapist")},{label:i.$t("Examined-donor-register")}]},null,8,["items"])])]),$("div",va,[$("div",ga,[w(v,{"is-loading":u.value,errors:k,onSearch:Y,onClearForm:N,onClearError:A},null,8,["is-loading","errors"])])]),$("div",ba,[$("div",ya,[w(O,{columns:C(m),data:c.data,limit:c.pagination.per_page,total:c.pagination.total},{default:j((()=>[w(L,{rounded:"","no-header":!u.value&&0===c.data.length},{"header-column":j((({column:a})=>["orderNumber"===a.key?(x(),U("span",{key:0,textContent:D(i.$t("Donor_register_number"))},null,8,fa)):I("",!0)])),body:j((()=>[u.value?(x(),U("div",ha,[(x(!0),U(S,null,z(c.pagination.per_page,(a=>(x(),U("div",{key:a,class:"flex-table-item"},[w(b,null,{default:j((()=>[w(g,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):I("",!0),0===c.data.length?(x(),U("div",xa,[w(f,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:j((()=>[Va,ja])),_:1})])):I("",!0)])),"body-row-pre":j((({row:a})=>[a.id===y.value?(x(),V(E,{key:0,size:"tiny",class:"m-0 mb-1"})):I("",!0)])),"body-cell":j((({row:a,column:e})=>["name"===e.key?(x(),V(M,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${a.id}`},{default:j((()=>[F(D(a.first_name)+" "+D(a.last_name)+" "+D(a.father_name),1)])),_:2},1032,["to"])):I("",!0)])),_:1},8,["no-header"]),c.data.length?(x(),V(P,{key:0,"current-page":C(p),"onUpdate:current-page":n[0]||(n[0]=a=>B(p)?p.value=a:null),class:"mt-5","item-per-page":c.pagination.per_page,"total-items":c.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):I("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-c50494a7"]]);export{ka as default};
