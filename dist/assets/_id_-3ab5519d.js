import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-32d08ca3.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-fc4409cd.js";import{_ as t,a as l,b as i}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-bc74534f.js";import{_ as s,a as n}from"./VControl-b713a764.js";import{q as o,G as r,H as d,C as _,x as u,r as p,A as c,V as m,j as b,o as y,a as v,w as g,e as f,m as h,k as z,K as V,t as k,d as j,F as x,l as w,g as $,i as P,E as U,J as C,c as I,ag as S,y as M,S as O,L as E,M as T}from"./index-568ad137.js";import{u as q}from"./viewWrapper-feca89b2.js";import{_ as A}from"./VModal.vue_vue_type_style_index_0_lang-1ec5e12b.js";import{_ as D}from"./SubmitButton.vue_vue_type_script_setup_true_lang-ca217c20.js";import{_ as F}from"./VCheckbox.vue_vue_type_style_index_0_lang-1a73654b.js";import{_ as N}from"./VInput.vue_vue_type_script_setup_true_lang-dccc8f42.js";import{_ as H}from"./VRadio.vue_vue_type_style_index_0_lang-96440a75.js";import{_ as B}from"./lodash-c54dbb06.js";import{m as R,n as G,o as W,v as J,r as K,p as L,i as X,u as Z}from"./patient-33059bc9.js";import{f as Q}from"./additional-f4ff7b7d.js";import{_ as Y}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-36d5f650.js";import{_ as ee,a as ae,b as te}from"./VFlexTable.vue_vue_type_style_index_0_lang-68179e43.js";import{c as le,d as ie,_ as se,a as ne,b as oe}from"./search-7-dark-b6479367.js";import{_ as re}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-489d2dc8.js";import{_ as de}from"./VIcon.vue_vue_type_script_setup_true_lang-ff209696.js";import{_ as _e}from"./VFlex.vue_vue_type_style_index_0_lang-8f30b873.js";import{u as ue}from"./main-7fc6984e.js";import{_ as pe}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VPlaceload-33f57994.js";import"./VIMaskInput.vue_vue_type_script_lang-6492e1cb.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-2a7f6a68.js";import"./VDropdown.vue_vue_type_style_index_0_lang-0161f088.js";const ce=["onSubmit"],me={class:"help has-text-danger"},be=f("br",null,null,-1),ye={class:"help has-text-danger"},ve={class:"help has-text-danger"},ge={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},ke={class:"column is-6"},je=B.isEmpty,xe=o({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const l=e,i=r(),o=d(),{t:U}=_(),C=u(U("Add")),I=(null==(t=i.params)?void 0:t.id)||null,S=u(!1),M=p({patient_id:I,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),O=u([{value:"gratuitous",label:U("Gratuitous")},{value:"chargeable",label:U("Chargeable")}]),E=u([{value:"medical_organization",label:U("Healthcare_facilities")},{value:"public_organization",label:U("Public_organizations")},{value:"independently",label:U("Independently")}]),T=u([]),q=p({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function B(){var e,t;try{S.value=!0,l.cardId?await G(l.cardId,M):await W(M),a("update:list"),o.success(U("Updated_successfully")),J()}catch(i){Object.assign(q,null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors),o.error(i.message)}finally{S.value=!1}}function J(){C.value=U("Add"),Object.assign(M,{patient_id:I,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(q,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return c((async()=>{const e=await Q();je(e.result)||(T.value=e.result)})),m((async()=>{if(Number(l.cardId)){C.value=U("Edit");const e=await R(Number(l.cardId),I);Object.assign(M,e.result)}})),(a,t)=>{const l=b("Multiselect"),i=s,o=n,r=H,d=N,_=F,u=D,p=A;return y(),v(p,{open:e.isOpen,size:"large",title:V(C),actions:"right",onClose:J},{content:g((()=>[f("form",{id:"visitcard-form",class:"modal-form",onSubmit:h(B,["prevent"])},[z(o,{label:a.$t("Visit_type"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(l,{modelValue:V(M).visit_type,"onUpdate:modelValue":t[0]||(t[0]=e=>V(M).visit_type=e),options:V(O),placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),f("p",me,k(V(q).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,z(o,{label:a.$t("Directed_by"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[(y(!0),j(x,null,w(V(E),((e,a)=>(y(),v(r,{key:a,modelValue:V(M).directed_by,"onUpdate:modelValue":t[1]||(t[1]=e=>V(M).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===V(M).directed_by?(y(),v(o,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(l,{modelValue:V(M).medical_organization_id,"onUpdate:modelValue":t[2]||(t[2]=e=>V(M).medical_organization_id=e),options:V(T),placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",ye,k(V(q).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),"public_organization"===V(M).directed_by?(y(),v(o,{key:1,label:a.$t("Public_organization_title"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(d,{modelValue:V(M).public_organization,"onUpdate:modelValue":t[3]||(t[3]=e=>V(M).public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),f("p",ve,k(V(q).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),f("div",ge,[f("div",fe,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[z(_,{modelValue:V(M).is_personalized_donation,"onUpdate:modelValue":t[4]||(t[4]=e=>V(M).is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",he,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[V(M).is_personalized_donation?(y(),v(d,{key:0,modelValue:V(M).personalized_donation,"onUpdate:modelValue":t[5]||(t[5]=e=>V(M).personalized_donation=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])]),f("div",ze,[f("div",Ve,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[z(_,{modelValue:V(M).is_mobile_team,"onUpdate:modelValue":t[6]||(t[6]=e=>V(M).is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",ke,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[V(M).is_mobile_team?(y(),v(d,{key:0,modelValue:V(M).mobile_team,"onUpdate:modelValue":t[7]||(t[7]=e=>V(M).mobile_team=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])])],40,ce)])),action:g((({close:e})=>[z(u,{loading:V(S),form:"visitcard-form"},{default:g((()=>[P(k(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),we={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ue={key:0,class:"is-flex-grow-0",textContent:"#"},Ce={key:0,class:"flex-list-inner"},Ie={key:1,class:"flex-list-inner"},Se=f("img",{class:"light-image",src:le,alt:""},null,-1),Me=f("img",{class:"dark-image",src:ie,alt:""},null,-1),Oe={key:0,class:"dark-text"},Ee={key:1,class:"dark-text"},Te={key:3},qe={key:4},Ae=o({__name:"PatientVisitCardTable",async setup(e){var t;let l,i;const s=r();U();const n=d(),{t:o}=_(),c=ue();q().setPageTitle(o("Patient_cards_list")),C({title:`${o("Patient_cards")} - ${c.app.name}`});const m=p({current_page:1,per_page:10,total:10,data:[]}),b=u(null),h=(null==(t=s.params)?void 0:t.id)||null,E=u(!1),T=I({get:()=>m.current_page,set:async e=>{await F(e)}}),A={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:o("Visit_type")},directed_by:{label:o("Directed_by")},medical_organization:{label:o("Healthcare_facilities")},public_organization:{label:o("Public_organizations")},independently:{label:o("Independently")},is_personalized_donation:{label:o("Personalized_donation")},is_mobile_team:{label:o("Mobile_team")},actions:{label:"",align:"end"}},D=u(!1);async function F(e=1){try{D.value=!0;const a=await J(h,{page:e,per_page:m.per_page});Object.assign(m,a.result)}catch(a){n.error(o(a.message))}finally{D.value=!1}}function N(e){b.value=e,E.value=!0}async function H(){await K(h,b.value),F()}function B(){F(),b.value=null}return u(),[l,i]=S((()=>F())),await l,i(),M((()=>m.per_page),(async()=>{await F()})),(e,t)=>{const l=a,i=_e,s=se,n=ee,o=ne,r=de,d=re,_=ae,u=oe,p=te,h=Y,U=xe;return y(),j("div",we,[z(i,null,{default:g((()=>[z(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>N(null))},{default:g((()=>[P(k(e.$t("Add")),1)])),_:1})])),_:1}),f("div",$e,[f("div",Pe,[z(p,{class:"mt-4",columns:V(A),data:V(m).data,limit:V(m).per_page,total:V(m).total},{default:g((()=>[z(_,{rounded:"","no-header":!V(D)&&0===V(m).data.length},{"header-column":g((({column:e})=>["orderNumber"===e.key?(y(),j("span",Ue)):$("",!0)])),body:g((()=>[V(D)?(y(),j("div",Ce,[(y(!0),j(x,null,w(V(m).per_page,(e=>(y(),j("div",{key:e,class:"flex-table-item"},[z(n,null,{default:g((()=>[z(s,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===V(m).data.length?(y(),j("div",Ie,[z(o,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:g((()=>[Se,Me])),_:1})])):$("",!0)])),"body-cell":g((({row:a,column:t,value:l})=>["visit_type"===t.key?(y(),j("span",Oe,k(e.$t(l)),1)):$("",!0),"directed_by"===t.key?(y(),j("span",Ee,k(e.$t(l)),1)):$("",!0),"independently"===t.key?(y(),j(x,{key:2},["independently"===a.directed_by?(y(),v(r,{key:0,class:"has-text-primary",icon:"feather:check"})):(y(),v(r,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):$("",!0),"is_personalized_donation"===t.key?(y(),j("span",Te,k(a.personalized_donation),1)):$("",!0),"is_mobile_team"===t.key?(y(),j("span",qe,k(a.mobile_team),1)):$("",!0),"actions"===t.key?(y(),v(d,{key:5,onEdit:e=>N(a.id),onRemove:e=>async function(e){b.value=e,c.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),V(m).data.length?(y(),v(u,{key:0,"current-page":V(T),"onUpdate:current-page":t[1]||(t[1]=e=>O(T)?T.value=e:null),class:"mt-5","item-per-page":V(m).per_page,"total-items":V(m).total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),z(h,{onConfirmAction:H}),z(U,{"is-open":V(E),"onUpdate:is-open":t[2]||(t[2]=e=>O(E)?E.value=e:null),"card-id":V(b),"onUpdate:list":B,onClose:t[3]||(t[3]=e=>b.value=null)},null,8,["is-open","card-id"])])}}}),De={class:"patient-detail-wrapper"},Fe=["onSubmit"],Ne={class:"columns mt-5"},He={class:"column"},Be={class:"is-size-5"},Re=(e=>(E("data-v-848aa8e6"),e=e(),T(),e))((()=>f("br",null,null,-1))),Ge={class:"help has-text-danger"},We={class:"column"},Je={class:"is-size-5"},Ke={class:"column"},Le={class:"is-size-5"},Xe={class:"navigation-buttons"},Ze={class:"buttons is-right"},Qe={key:1,class:"mt-5"},Ye=pe(o({__name:"[id]",async setup(o){var m;let v,x;const w=r();U();const M=d(),{t:O}=_(),E=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:null,passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),T=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),A=u(!1),D=(null==(m=w.params)?void 0:m.id)||null,F=u([{label:O("Patient_details"),value:"#details",icon:"feather:info",to:`${w.path}#details`},{label:O("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${w.path}#patient_visit_cards`}]),N=u([]),H=u(w.hash||"#details");function B(e){T[e]=""}async function R(){var e,a;try{A.value=!0;await Z(D,E);M.success(O("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(T,null==(a=t.response)?void 0:a.data.errors):M.error(O("Something_went_wrong"))}finally{A.value=!1}}return q().setPageTitle(O("Patient_info")),C({title:I((()=>O("Patient_info")))}),[v,x]=S((()=>async function(){try{const e=await X(D);Object.assign(E,e.result)}catch(e){M.error(e.message)}}())),await v,x(),c((async()=>{const e=await L();N.value=e.result})),(o,r)=>{const d=t,_=b("Multiselect"),u=s,p=n,c=l,m=i,v=a,x=e;return y(),j("div",De,[z(x,{selected:V(H),tabs:V(F)},{tab:g((({activeValue:e})=>["#details"===e?(y(),j("form",{key:0,onSubmit:h(R,["prevent"])},[f("div",Ne,[f("div",He,[f("p",Be,k(o.$t("Personal_Info")),1),z(d,{patient:V(E),errors:V(T),onEditing:B},null,8,["patient","errors"]),Re,z(p,{label:o.$t("Category"),required:""},{default:g((()=>[z(u,null,{default:g((()=>[z(_,{modelValue:V(E).patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(E).patient_category_id=e),options:V(N),placeholder:o.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",Ge,k(V(T).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),f("div",We,[f("p",Je,k(o.$t("Passport_info")),1),z(c,{patient:V(E),errors:V(T),onEditing:B},null,8,["patient","errors"])]),f("div",Ke,[f("p",Le,k(o.$t("Address")),1),z(m,{patient:V(E),errors:V(T),onEditing:B},null,8,["patient","errors"])])]),f("div",Xe,[f("div",Ze,[z(v,{type:"submit",color:"primary",bold:"",loading:V(A),disabled:V(A),tabindex:"0"},{default:g((()=>[P(k(o.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Fe)):"#patient_visit_cards"===e?(y(),j("div",Qe,[z(Ae)])):$("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-848aa8e6"]]);export{Ye as default};
