import{a as e,b as l,c as a,f as t,d as s,e as o,s as i,_ as n}from"./DonationContainerFormModal.vue_vue_type_script_setup_true_lang-d5b86849.js";import{_ as d}from"./VModal.vue_vue_type_style_index_0_lang-929f8778.js";import{_ as r}from"./SubmitButton.vue_vue_type_script_setup_true_lang-3fd94ade.js";import{a as c,_ as u}from"./VControl-5569cf53.js";import{_ as m}from"./VInput.vue_vue_type_script_setup_true_lang-88e8cbff.js";import{q as _,c as p,j as v,o as f,d as b,e as h,t as y,k as g,K as V,i as $,w as x,L as k,M as S,F as U,g as D,H as j,C as z,x as C,a7 as w,r as L,A as F,y as M,a as W,m as Y,E as I,J as O,a8 as T,l as B,S as H}from"./index-10a7bb68.js";import{_ as P}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as A}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-369c18cd.js";import{_ as E}from"./VFlex.vue_vue_type_style_index_0_lang-4effb675.js";import{_ as N}from"./VFlexItem.vue_vue_type_style_index_0_lang-cf815e4d.js";import{_ as R,a as q,b as J}from"./VFlexTable.vue_vue_type_style_index_0_lang-9e54e133.js";import{_ as K,a as X,b as Z,c as G,d as Q}from"./search-7-dark-e44eeced.js";import{_ as ee}from"./VCard.vue_vue_type_script_setup_true_lang-2f7124ba.js";import{_ as le}from"./VButton.vue_vue_type_style_index_0_lang-73c8b1df.js";import{p as ae,a as te}from"./patient-d766edf9.js";import{v as se}from"./additionals-3f1de0f2.js";import{_ as oe}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d2aaa355.js";import{u as ie}from"./main-e68c1ccc.js";import{u as ne}from"./viewWrapper-dc426096.js";import{f as de}from"./additional-9e169b33.js";import"./VIMaskInput.vue_vue_type_script_lang-dbe9f41c.js";import"./moment-aa9a2fad.js";import"./VPlaceload-686e62ec.js";const re=e=>(k("data-v-91e8051b"),e=e(),S(),e),ce={class:"box"},ue={class:"is-size-5 mb-3"},me={class:"field is-horizontal"},_e={class:"field-label is-normal"},pe={class:"label"},ve={class:"field-body"},fe={class:"field"},be={class:"control is-expended"},he={class:"field is-horizontal"},ye={class:"field-label is-normal"},ge={class:"label"},Ve=re((()=>h("span",{class:"has-text-danger"},"*",-1))),$e={class:"field-body"},xe={class:"field is-horizontal"},ke={class:"field-label"},Se={class:"label"},Ue=re((()=>h("span",{class:"has-text-danger"},"*",-1))),De={class:"field-body"},je=P(_({__name:"WholeBloodDonationFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(e,{emit:l}){const a=e,t=p({get:()=>a.formState,set(e){l("update:formState",e)}});return(l,a)=>{const s=v("Multiselect"),o=m,i=c;return f(),b("div",ce,[h("h5",ue,y(l.$t("Whole_blood_donation")),1),h("div",me,[h("div",_e,[h("label",pe,y(l.$t("Container")),1)]),h("div",ve,[h("div",fe,[h("div",be,[g(s,{modelValue:V(t).container_id,"onUpdate:modelValue":a[0]||(a[0]=e=>V(t).container_id=e),options:e.containerList,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",he,[h("div",ye,[h("label",ge,[$(y(l.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Ve])]),h("div",$e,[g(i,null,{default:x((()=>[g(o,{modelValue:V(t).hemoconservative,"onUpdate:modelValue":a[1]||(a[1]=e=>V(t).hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),h("div",xe,[h("div",ke,[h("label",Se,[$(y(l.$t("Laboratory_taken_blood_amount_ml"))+" ",1),Ue])]),h("div",De,[g(i,null,{default:x((()=>[g(o,{modelValue:V(t).laboratory,"onUpdate:modelValue":a[2]||(a[2]=e=>V(t).laboratory=e),type:"text"},null,8,["modelValue"])])),_:1})])])])}}}),[["__scopeId","data-v-91e8051b"]]),ze=e=>(k("data-v-a331b33f"),e=e(),S(),e),Ce={class:"box"},we={class:"is-size-5 mb-3"},Le={class:"field is-horizontal"},Fe={class:"field-label is-normal"},Me={class:"label"},We={class:"field-body"},Ye={class:"field"},Ie={class:"control is-expended"},Oe=ze((()=>h("hr",{class:"is-divider"},null,-1))),Te={class:"mb-3"},Be={class:"field is-horizontal"},He={class:"field-label is-flex is-align-items-center"},Pe={class:"label"},Ae={class:"field-body"},Ee={class:"field"},Ne={class:"control is-expended"},Re={class:"field is-horizontal"},qe={class:"field-label is-normal"},Je={class:"label"},Ke=ze((()=>h("span",{class:"has-text-danger"},"*",-1))),Xe={class:"field-body"},Ze=ze((()=>h("hr",{class:"is-divider"},null,-1))),Ge={class:"mb-3"},Qe={class:"field is-horizontal"},el={class:"field-label is-flex is-align-items-center"},ll={class:"label"},al={class:"field-body"},tl={class:"field"},sl={class:"control is-expended"},ol={class:"field is-horizontal"},il={class:"field-label is-normal"},nl={class:"label"},dl=ze((()=>h("span",{class:"has-text-danger"},"*",-1))),rl={class:"field-body"},cl={class:"field is-horizontal"},ul={class:"field-label is-normal"},ml={class:"label"},_l={class:"field-body"},pl={class:"field is-horizontal"},vl={class:"field-label"},fl={class:"label"},bl={class:"field-body"},hl=P(_({__name:"PlasmapheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,s=p({get:()=>t.formState,set(e){a("update:formState",e)}});return(a,t)=>{const o=v("Multiselect"),i=m,n=c;return f(),b("div",Ce,[h("h5",we,y(a.$t("Plasmapheresis")),1),h("div",Le,[h("div",Fe,[h("label",Me,y(a.$t("Apheresis_method")),1)]),h("div",We,[h("div",Ye,[h("div",Ie,[g(o,{modelValue:V(s).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>V(s).apheresis_method=e),options:V(e),placeholder:a.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),"manual"===V(s).apheresis_method?(f(),b(U,{key:0},[Oe,h("h5",Te,y(a.$t("First_fence")),1),h("div",Be,[h("div",He,[h("label",Pe,y(a.$t("Container")),1)]),h("div",Ae,[h("div",Ee,[h("div",Ne,[g(o,{modelValue:V(s).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>V(s).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",Re,[h("div",qe,[h("label",Je,[$(y(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Ke])]),h("div",Xe,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>V(s).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),Ze,h("h5",Ge,y(a.$t("Second_fence")),1),h("div",Qe,[h("div",el,[h("label",ll,y(a.$t("Container")),1)]),h("div",al,[h("div",tl,[h("div",sl,[g(o,{modelValue:V(s).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>V(s).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",ol,[h("div",il,[h("label",nl,[$(y(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),dl])]),h("div",rl,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>V(s).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):"device"===V(s).apheresis_method?(f(),b(U,{key:1},[h("div",cl,[h("div",ul,[h("label",ml,y(a.$t("Received_plasma_amount_ml")),1)]),h("div",_l,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).plasma,"onUpdate:modelValue":t[5]||(t[5]=e=>V(s).plasma=e),type:"text"},null,8,["modelValue"])])),_:1})])]),h("div",pl,[h("div",vl,[h("label",fl,y(a.$t("Laboratory_taken_blood_amount_ml")),1)]),h("div",bl,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).laboratory,"onUpdate:modelValue":t[6]||(t[6]=e=>V(s).laboratory=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):D("",!0)])}}}),[["__scopeId","data-v-a331b33f"]]),yl=e=>(k("data-v-ac191bc4"),e=e(),S(),e),gl={class:"box"},Vl={class:"is-size-5 mb-3"},$l={class:"field is-horizontal"},xl={class:"field-label is-normal"},kl={class:"label"},Sl={class:"field-body"},Ul={class:"field"},Dl={class:"control is-expended"},jl=yl((()=>h("hr",{class:"is-divider"},null,-1))),zl={class:"mb-3"},Cl={class:"field is-horizontal"},wl={class:"field-label is-flex is-align-items-center"},Ll={class:"label"},Fl={class:"field-body"},Ml={class:"field"},Wl={class:"control is-expended"},Yl={class:"field is-horizontal"},Il={class:"field-label is-normal"},Ol={class:"label"},Tl=yl((()=>h("span",{class:"has-text-danger"},"*",-1))),Bl={class:"field-body"},Hl=yl((()=>h("hr",{class:"is-divider"},null,-1))),Pl={class:"mb-3"},Al={class:"field is-horizontal"},El={class:"field-label is-flex is-align-items-center"},Nl={class:"label"},Rl={class:"field-body"},ql={class:"field"},Jl={class:"control is-expended"},Kl={class:"field is-horizontal"},Xl={class:"field-label is-normal"},Zl={class:"label"},Gl=yl((()=>h("span",{class:"has-text-danger"},"*",-1))),Ql={class:"field-body"},ea=yl((()=>h("hr",{class:"is-divider"},null,-1))),la={class:"mb-3"},aa={class:"field is-horizontal"},ta={class:"field-label is-flex is-align-items-center"},sa={class:"label"},oa={class:"field-body"},ia={class:"field"},na={class:"control is-expended"},da={class:"field is-horizontal"},ra={class:"field-label is-normal"},ca={class:"label"},ua=yl((()=>h("span",{class:"has-text-danger"},"*",-1))),ma={class:"field-body"},_a=yl((()=>h("hr",{class:"is-divider"},null,-1))),pa={class:"mb-3"},va={class:"field is-horizontal"},fa={class:"field-label is-flex is-align-items-center"},ba={class:"label"},ha={class:"field-body"},ya={class:"field"},ga={class:"control is-expended"},Va={class:"field is-horizontal"},$a={class:"field-label is-normal"},xa={class:"label"},ka=yl((()=>h("span",{class:"has-text-danger"},"*",-1))),Sa={class:"field-body"},Ua=yl((()=>h("hr",{class:"is-divider"},null,-1))),Da={class:"field is-horizontal"},ja={class:"field-label is-normal"},za={class:"label"},Ca={class:"field-body"},wa=P(_({__name:"PlateletpheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,s=p({get:()=>t.formState,set(e){a("update:formState",e)}});return(a,t)=>{const o=v("Multiselect"),i=m,n=c;return f(),b("div",gl,[h("h5",Vl,y(a.$t("Plateletpheresis")),1),h("div",$l,[h("div",xl,[h("label",kl,y(a.$t("Apheresis_method")),1)]),h("div",Sl,[h("div",Ul,[h("div",Dl,[g(o,{modelValue:V(s).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>V(s).apheresis_method=e),options:V(e),placeholder:a.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),"manual"===l.formState.apheresis_method?(f(),b(U,{key:0},[jl,h("h5",zl,y(a.$t("First_fence")),1),h("div",Cl,[h("div",wl,[h("label",Ll,y(a.$t("Container")),1)]),h("div",Fl,[h("div",Ml,[h("div",Wl,[g(o,{modelValue:V(s).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>V(s).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",Yl,[h("div",Il,[h("label",Ol,[$(y(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Tl])]),h("div",Bl,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>V(s).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),Hl,h("h5",Pl,y(a.$t("Second_fence")),1),h("div",Al,[h("div",El,[h("label",Nl,y(a.$t("Container")),1)]),h("div",Rl,[h("div",ql,[h("div",Jl,[g(o,{modelValue:V(s).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>V(s).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",Kl,[h("div",Xl,[h("label",Zl,[$(y(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Gl])]),h("div",Ql,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>V(s).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),ea,h("h5",la,y(a.$t("Third_fence")),1),h("div",aa,[h("div",ta,[h("label",sa,y(a.$t("Container")),1)]),h("div",oa,[h("div",ia,[h("div",na,[g(o,{modelValue:V(s).third_container_id,"onUpdate:modelValue":t[5]||(t[5]=e=>V(s).third_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",da,[h("div",ra,[h("label",ca,[$(y(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),ua])]),h("div",ma,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).third_hemoconservative,"onUpdate:modelValue":t[6]||(t[6]=e=>V(s).third_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),_a,h("h5",pa,y(a.$t("Fourth_fence")),1),h("div",va,[h("div",fa,[h("label",ba,y(a.$t("Container")),1)]),h("div",ha,[h("div",ya,[h("div",ga,[g(o,{modelValue:V(s).fourth_container_id,"onUpdate:modelValue":t[7]||(t[7]=e=>V(s).fourth_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",Va,[h("div",$a,[h("label",xa,[$(y(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),ka])]),h("div",Sa,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).fourth_hemoconservative,"onUpdate:modelValue":t[8]||(t[8]=e=>V(s).fourth_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):"device"===l.formState.apheresis_method?(f(),b(U,{key:1},[Ua,h("div",Da,[h("div",ja,[h("label",za,y(a.$t("Received_platelet_concentrate_amount_ml")),1)]),h("div",Ca,[g(n,null,{default:x((()=>[g(i,{modelValue:V(s).thromboconcentrate,"onUpdate:modelValue":t[9]||(t[9]=e=>V(s).thromboconcentrate=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):D("",!0)])}}}),[["__scopeId","data-v-ac191bc4"]]),La=e=>(k("data-v-873fd626"),e=e(),S(),e),Fa={class:"box mt-3"},Ma={class:"is-size-5 mb-3"},Wa={class:"field is-horizontal"},Ya={class:"field-label is-normal"},Ia={class:"label"},Oa={class:"field-body"},Ta={class:"field"},Ba={class:"control is-expended"},Ha={class:"field is-horizontal"},Pa={class:"field-label is-normal"},Aa={class:"label"},Ea={class:"field-body"},Na={class:"field"},Ra={class:"control"},qa={class:"help has-text-danger"},Ja={class:"field is-horizontal"},Ka={class:"field-label is-normal"},Xa={class:"label"},Za={class:"field-body"},Ga={class:"field"},Qa={class:"control"},et={class:"field"},lt={class:"control"},at={class:"field is-horizontal"},tt={class:"field-label is-normal"},st={class:"label"},ot={class:"field-body"},it={class:"field"},nt={class:"control"},dt=La((()=>h("hr",{class:"is-divider"},null,-1))),rt=La((()=>h("hr",{class:"is-divider"},null,-1))),ct=La((()=>h("hr",{class:"is-divider"},null,-1))),ut={class:"box"},mt={class:"is-size-5 mb-3"},_t={class:"field is-horizontal"},pt={class:"field-label is-normal"},vt={class:"label"},ft={class:"field-body"},bt={class:"field"},ht={class:"control is-expended"},yt=P(_({__name:"DonationDataEntryFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null,donationTypes:null},emits:["update:isOpen","update:list","add:Container"],setup(e,{emit:c}){const u=e,m=j(),{t:_}=z(),p=C(_("Donation_data_entry_form")),k=C(!1),S=C({container_id:null,hemoconservative:null,laboratory:null}),W=C({}),Y=C({}),I=C({donation_type_id:null,date:w(new Date,"YYYY-MM-DD"),status:"",status_type:"",postinfusion_reaction_id:null,sent_to:""}),O=L({donation_type_id:[],date:[],status:[],status_type:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[]}),T=C([]),B=C([]),H=C(!1),P=C({});async function R(){var e,l,a,t,s,o,n,d,r,p;try{k.value=!0;const n=1===(null==(l=null==(e=u.patient)?void 0:e.last_visit)?void 0:l.donation_type_id)?Y.value:2===(null==(t=null==(a=u.patient)?void 0:a.last_visit)?void 0:t.donation_type_id)?W.value:S.value,d={...I.value,...n};await i(null==(o=null==(s=u.patient)?void 0:s.last_visit)?void 0:o.id,d),m.success(_("Data_saved_successfully")),c("update:list"),q()}catch(v){(null==(n=v.response)?void 0:n.data.error)?m.error(null==(d=v.response)?void 0:d.data.error):Object.assign(O,null==(p=null==(r=v.response)?void 0:r.data)?void 0:p.errors)}finally{k.value=!1}}function q(){I.value={date:w(new Date,"YYYY-MM-DD"),status:"",status_type:"",postinfusion_reaction_id:null,sent_to:""},Object.assign(O,{donation_type_id:[],date:[],status:[],status_type:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[]}),c("update:isOpen",!1)}async function J(){const e=await t();T.value=e.result.data}return F((async function(){await J();const e=await l();B.value=e.result})),M((()=>{var e,l;return null==(l=null==(e=u.patient)?void 0:e.last_visit)?void 0:l.id}),(async e=>{if(e){const l=await a(e);I.value=l.result}})),(l,a)=>{const t=N,i=E,c=v("Multiselect"),u=A,m=wa,_=hl,j=je,z=r,C=d,w=n;return f(),b(U,null,[g(C,{open:e.isOpen,size:"medium",title:p.value,actions:"right",onClose:q},{content:x((()=>{var n,d,r,p,v,k,z,C;return[g(i,{"column-gap":"1rem"},{default:x((()=>[g(t,null,{default:x((()=>[$(y(l.$t("Recommended_single_donation_volume_ml"))+":",1)])),_:1}),g(t,null,{default:x((()=>[$("0")])),_:1})])),_:1}),h("div",Fa,[h("h5",Ma,y(l.$t("Donation_results")),1),h("div",Wa,[h("div",Ya,[h("label",Ia,y(l.$t("Donation_type")),1)]),h("div",Oa,[h("div",Ta,[h("div",Ba,[g(c,{value:null==(d=null==(n=e.patient)?void 0:n.last_visit)?void 0:d.donation_type_id,options:e.donationTypes,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0},disabled:""},null,8,["value","options","placeholder"])])])])]),h("div",Ha,[h("div",Pa,[h("label",Aa,y(l.$t("Donation_date")),1)]),h("div",Ea,[h("div",Na,[h("div",Ra,[g(u,{modelValue:I.value.date,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.date=e)},null,8,["modelValue"]),h("p",qa,y(O.date[0]),1)])])])]),h("div",Ja,[h("div",Ka,[h("label",Xa,y(l.$t("Completed_donation_status")),1)]),h("div",Za,[h("div",Ga,[h("div",Qa,[g(c,{modelValue:I.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.status=e),options:V(s),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])]),h("div",et,[h("div",lt,[g(c,{modelValue:I.value.status_type,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value.status_type=e),options:V(o),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),h("div",at,[h("div",tt,[h("label",st,y(l.$t("Post-infusion_reaction")),1)]),h("div",ot,[h("div",it,[h("div",nt,[g(c,{modelValue:I.value.postinfusion_reaction_id,"onUpdate:modelValue":a[3]||(a[3]=e=>I.value.postinfusion_reaction_id=e),options:B.value,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])])]),1===(null==(p=null==(r=e.patient)?void 0:r.last_visit)?void 0:p.donation_type_id)?(f(),b(U,{key:0},[dt,g(m,{"form-state":Y.value,"onUpdate:form-state":a[4]||(a[4]=e=>Y.value=e),"container-list":T.value},null,8,["form-state","container-list"])],64)):2===(null==(k=null==(v=e.patient)?void 0:v.last_visit)?void 0:k.donation_type_id)?(f(),b(U,{key:1},[rt,g(_,{"form-state":W.value,"onUpdate:form-state":a[5]||(a[5]=e=>W.value=e),"container-list":T.value},null,8,["form-state","container-list"])],64)):3===(null==(C=null==(z=e.patient)?void 0:z.last_visit)?void 0:C.donation_type_id)?(f(),b(U,{key:2},[ct,g(j,{"form-state":S.value,"onUpdate:form-state":a[6]||(a[6]=e=>S.value=e),"container-list":T.value},null,8,["form-state","container-list"])],64)):D("",!0),h("div",ut,[h("h5",mt,y(l.$t("Component_Product_Transfer_Information")),1),h("div",_t,[h("div",pt,[h("label",vt,y(l.$t("Transferred")),1)]),h("div",ft,[h("div",bt,[h("div",ht,[g(c,{modelValue:I.value.sent_to,"onUpdate:modelValue":a[7]||(a[7]=e=>I.value.sent_to=e),options:[{value:"recycling",label:"на переработку"},{value:"sterility",label:"на контроль стерильности"}],placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","placeholder"])])])])])])]})),action:x((()=>[h("button",{class:"button is-info is-outlined",onClick:a[8]||(a[8]=e=>H.value=!0)},y(l.$t("Add_container")),1),g(z,{loading:k.value,onClick:R},null,8,["loading"])])),_:1},8,["open","title"]),g(w,{"is-open":H.value,"onUpdate:is-open":a[9]||(a[9]=e=>H.value=e),container:P.value,"onUpdate:list":J},null,8,["is-open","container"])],64)}}}),[["__scopeId","data-v-873fd626"]]),gt=["onSubmit"],Vt={class:"columns"},$t={class:"column"},xt={class:"help has-text-danger"},kt={class:"column"},St={class:"help has-text-danger"},Ut={class:"column"},Dt={class:"help has-text-danger"},jt={class:"column is-3"},zt={class:"help has-text-danger"},Ct={class:"navigation-buttons"},wt={class:"buttons is-right"},Lt=_({__name:"DonorsListFilterForm",props:{isLoading:{type:Boolean},errors:null,donationTypes:null},emits:["search","clearError","clearForm"],setup(e,{emit:l}){z(),j();const a=L({donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),t=C([]);F((async()=>{t.value=await ae().then((e=>e.result))}));const s=async()=>{l("search",a)},o=async()=>{Object.assign(a,{donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),l("clearForm")};return(l,i)=>{const n=v("Multiselect"),d=u,r=c,_=m,p=le,b=ee;return f(),W(b,null,{default:x((()=>[h("form",{onSubmit:Y(s,["prevent"])},[h("div",Vt,[h("div",$t,[g(r,{class:"is-curved-select",label:l.$t("Donor_categories")},{default:x((({id:s})=>[g(d,null,{default:x((()=>[g(n,{modelValue:V(a).donor_category_id,"onUpdate:modelValue":i[0]||(i[0]=e=>V(a).donor_category_id=e),attrs:{id:s},options:V(t),placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),h("p",xt,y(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),h("div",kt,[g(r,{class:"is-curved-select",label:l.$t("Visit_type")},{default:x((({id:t})=>[g(d,null,{default:x((()=>[g(n,{modelValue:V(a).visit_type,"onUpdate:modelValue":i[1]||(i[1]=e=>V(a).visit_type=e),attrs:{id:t},options:V(se),placeholder:l.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),h("p",St,y(e.errors.visit_type[0]),1)])),_:2},1024)])),_:1},8,["label"])]),h("div",Ut,[g(r,{class:"is-curved-select",label:l.$t("Donation_type")},{default:x((({id:t})=>[g(d,null,{default:x((()=>[g(n,{modelValue:V(a).donation_type_id,"onUpdate:modelValue":i[2]||(i[2]=e=>V(a).donation_type_id=e),attrs:{id:t},options:e.donationTypes,placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),h("p",Dt,y(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),h("div",jt,[g(r,{class:"is-curved-select",label:l.$t("Donation_code")},{default:x((({id:t})=>[g(d,null,{default:x((()=>[g(_,{modelValue:V(a).donation_code,"onUpdate:modelValue":i[3]||(i[3]=e=>V(a).donation_code=e),attrs:{id:t},placeholder:l.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),h("p",zt,y(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),h("div",Ct,[h("div",wt,[g(p,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:o},{default:x((()=>[$(y(l.$t("Clear")),1)])),_:1},8,["disabled"]),g(p,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:x((()=>[$(y(l.$t("Search")),1)])),_:1},8,["loading"])])])],40,gt)])),_:1})}}}),Ft=e=>(k("data-v-a346fcd3"),e=e(),S(),e),Mt={class:"page-content-inner"},Wt={class:"columns mb-3"},Yt={class:"column"},It={class:"columns mt-1"},Ot={class:"column"},Tt={class:"columns"},Bt={class:"column is-12"},Ht=["textContent"],Pt={key:0,class:"flex-list-inner"},At={key:1,class:"flex-list-inner"},Et=Ft((()=>h("img",{class:"light-image",src:G,alt:""},null,-1))),Nt=Ft((()=>h("img",{class:"dark-image",src:Q,alt:""},null,-1))),Rt=["onClick"],qt=P(_({__name:"index",async setup(e){let l,a;I(),j();const{t:t}=z(),s=ie(),o=C(!1);ne().setPageTitle(t("Donations")),O({title:`${t("Donors_for_donation")} - ${s.app.name}`});const i=L({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n={orderNumber:{format:(e,l,a)=>a+1},name:{label:t("Donor_fullname"),grow:!0},birth_date:{label:t("Date-of-birth")},visit_type:{label:t("Visit_type"),format:(e,l)=>{var a,s;return(null==(a=l.last_visit)?void 0:a.visit_type)&&t(null==(s=l.last_visit)?void 0:s.visit_type)}},visit_date:{label:t("Visit_date"),format:(e,l)=>{var a,t;return(null==(a=l.last_visit)?void 0:a.created_at)&&w(new Date(null==(t=l.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:t("Donation_type"),format:(e,l)=>{var a,t;return null==(t=null==(a=l.last_visit)?void 0:a.donation_type)?void 0:t.name}},donation_code:{label:t("Donation_code"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.donation_code}},donor_category:{label:t("Donor_category"),format:(e,l)=>{var a;return null==(a=l.category)?void 0:a.name}}},d=L({donor_category_id:[],visit_type:[],donation_type_id:[],donation_code:[]}),r=L({visit_type_id:"",donation_type_id:null,donation_code:"",category_id:""}),c=C(null),u=C(!1),m=C([]);async function _(e){var l,a;try{o.value=!0,Object.assign(r,e);const l={...e,page:i.pagination.current_page},a=await te(l);Object.assign(i,a.result)}catch(t){Object.assign(d,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{o.value=!1}}function p(e){d[e]=""}async function v(){i.data=[]}return[l,a]=T((()=>_(r))),await l,a(),F((async function(){const e=await de();m.value=e.result})),M(u,(e=>{e||(c.value=null)})),M((()=>i.pagination.current_page),(async e=>{e&&await _(r)})),(e,l)=>{const a=oe,t=Lt,r=K,$=R,k=X,S=q,j=Z,z=J,C=yt;return f(),b("div",Mt,[h("div",Wt,[h("div",Yt,[g(a,{"with-icons":"",separator:"bullet",items:[{label:V(s).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Donations")},{label:e.$t("Donors_for_donation")}]},null,8,["items"])])]),h("div",It,[h("div",Ot,[g(t,{"is-loading":V(o),"donation-types":V(m),errors:V(d),onSearch:_,onClearForm:v,onClearError:p},null,8,["is-loading","donation-types","errors"])])]),h("div",Tt,[h("div",Bt,[g(z,{columns:V(n),data:V(i).data,limit:V(i).pagination.per_page,total:V(i).pagination.total},{default:x((()=>[g(S,{rounded:"","no-header":!V(o)&&0===V(i).data.length},{"header-column":x((({column:l})=>["orderNumber"===l.key?(f(),b("span",{key:0,textContent:y(e.$t("Donor_#"))},null,8,Ht)):D("",!0)])),body:x((()=>[V(o)?(f(),b("div",Pt,[(f(!0),b(U,null,B(V(i).pagination.per_page,(e=>(f(),b("div",{key:e,class:"flex-table-item"},[g($,null,{default:x((()=>[g(r,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):D("",!0),0===V(i).data.length?(f(),b("div",At,[g(k,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:x((()=>[Et,Nt])),_:1},8,["title","subtitle"])])):D("",!0)])),"body-cell":x((({row:e,column:l})=>["name"===l.key?(f(),b("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){c.value=e,u.value=!0}(e)},y(e.first_name)+" "+y(e.last_name)+" "+y(e.father_name),9,Rt)):D("",!0)])),_:1},8,["no-header"]),V(i).data.length?(f(),W(j,{key:0,"current-page":V(i).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>V(i).pagination.current_page=e),class:"mt-5","item-per-page":V(i).pagination.per_page,"total-items":V(i).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):D("",!0)])),_:1},8,["columns","data","limit","total"])])]),g(C,{"is-open":V(u),"onUpdate:is-open":l[1]||(l[1]=e=>H(u)?u.value=e:null),patient:V(c),"donation-types":V(m)},null,8,["is-open","patient","donation-types"])])}}}),[["__scopeId","data-v-a346fcd3"]]);export{qt as default};
