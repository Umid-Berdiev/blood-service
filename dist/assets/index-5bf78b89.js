import{_ as a,a as e,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-68179e43.js";import{c as s,d as r,_ as n,a as l,b as i}from"./search-7-dark-b6479367.js";import{_ as o}from"./VFlex.vue_vue_type_style_index_0_lang-8f30b873.js";import{_}from"./VButtons.vue_vue_type_script_setup_true_lang-00840c6c.js";import{_ as p}from"./VButton.vue_vue_type_style_index_0_lang-fc4409cd.js";import{_ as u}from"./VFlexItem.vue_vue_type_style_index_0_lang-ce376e13.js";import{_ as d}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-faf20e2b.js";import{q as m,E as c,H as g,C as f,x as v,r as y,J as h,ag as b,o as w,d as j,k as x,w as $,K as k,m as V,i as C,t as F,e as I,g as W,F as D,l as P,a as T}from"./index-568ad137.js";import{u as q}from"./viewWrapper-feca89b2.js";import{_ as B}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang-9be05ac9.js";import{u as E}from"./main-7fc6984e.js";import{j as O}from"./patient-33059bc9.js";import{_ as R}from"./lodash-c54dbb06.js";import"./VPlaceload-33f57994.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VCard.vue_vue_type_script_setup_true_lang-3b674ece.js";import"./VInput.vue_vue_type_script_setup_true_lang-dccc8f42.js";import"./VControl-b713a764.js";import"./VIMaskInput.vue_vue_type_script_lang-6492e1cb.js";const S={class:"page-content-inner"},U={class:"columns mt-1"},G={class:"column"},H={class:"columns"},J={class:"column is-12"},K={key:0,class:"is-flex-grow-0",textContent:"#"},L={key:0,class:"flex-list-inner"},M={key:1,class:"flex-list-inner"},N=I("img",{class:"light-image",src:s,alt:""},null,-1),X=I("img",{class:"dark-image",src:r,alt:""},null,-1),Z=R.isEmpty,z=m({__name:"index",async setup(s){let r,m;c();const R=g(),{t:z}=f(),A=E(),Q=v(!1),Y=y({lastname:"",firstname:"",middlename:"",passpordId:""});q().setPageTitle(z("Registration")),h({title:`${z("Donation-diverted-register")} - ${A.app.name}`});const aa=y({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),ea=y({page:1}),ta={"#":{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:z("Fullname"),format:(a,e)=>`${e.first_name} ${e.last_name}`},birth_date:{label:z("Date-of-birth")},gender:{label:z("Gender"),format:a=>z(a)},passport:{label:z("Passport_series_number"),format:(a,e)=>`${e.passport_series}${e.passport_number}`},withdrawal_end_date:{label:z("Withdrawal_end_date"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.end_date}},withdrawal_reason:{label:z("Withdrawal_reason"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.reason}},withdrawal_created_by:{label:z("Withdrawal_created_by"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.created_by}}};async function sa(a){var e,t;try{Object.assign(ea,a),Q.value=!0;const e=await O(a);Object.assign(aa,e.result),Z(e.result.data)?R.warning(z("Data_not_found")):R.success(`${z("Found")}: ${e.result.pagination.total} ${z("records")}`)}catch(s){Object.assign(Y,null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.errors)}finally{Q.value=!1}}function ra(a){Y[a]=""}async function na(){aa.data=[]}function la(){}return v(),[r,m]=b((()=>sa(ea))),await r,m(),(s,r)=>{const m=d,c=u,g=p,f=_,v=o,y=n,h=a,b=l,q=e,E=i,O=t;return w(),j("div",S,[x(v,{"justify-content":"space-between","flex-wrap":"wrap"},{default:$((()=>[x(c,null,{default:$((()=>[x(m,{"with-icons":"",separator:"bullet",items:[{label:k(A).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:s.$t("Registration")},{label:s.$t("Donation-diverted-register"),to:{name:"/app/registration/donation-diverted-register/"}}]},null,8,["items"])])),_:1}),x(c,null,{default:$((()=>[x(f,null,{default:$((()=>[x(g,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:V(la,["prevent"])},{default:$((()=>[C(F(s.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),I("div",U,[I("div",G,[x(B,{"is-loading":k(Q),errors:k(Y),onSearch:sa,onClearForm:na,onClearError:ra},null,8,["is-loading","errors"])])]),I("div",H,[I("div",J,[x(O,{columns:k(ta),data:k(aa).data,limit:k(aa).pagination.per_page,total:k(aa).pagination.total},{default:$((()=>[x(q,{rounded:"","no-header":!k(Q)&&0===k(aa).data.length},{"header-column":$((({column:a})=>["#"===a.key?(w(),j("span",K)):W("",!0)])),body:$((()=>[k(Q)?(w(),j("div",L,[(w(!0),j(D,null,P(k(aa).pagination.per_page,(a=>(w(),j("div",{key:a,class:"flex-table-item"},[x(h,null,{default:$((()=>[x(y,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):W("",!0),0===k(aa).data.length?(w(),j("div",M,[x(b,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:$((()=>[N,X])),_:1})])):W("",!0)])),_:1},8,["no-header"]),k(aa).data.length?(w(),T(E,{key:0,"current-page":k(aa).pagination.current_page,"onUpdate:current-page":r[0]||(r[0]=a=>k(aa).pagination.current_page=a),class:"mt-5","item-per-page":k(aa).pagination.per_page,"total-items":k(aa).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):W("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{z as default};
