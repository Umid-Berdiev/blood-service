import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.510ec926.js";import{g as a,h as t,_ as l,a as s,b as n,c as o,d as r,e as i,f as u}from"./search-7-dark.d1f3fd2e.js";import{_ as p}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang.f93ce000.js";import{_ as m}from"./VAvatar.vue_vue_type_style_index_0_lang.5968b33e.js";import{q as c,E as d,H as _,C as g,J as v,r as y,x as f,c as b,y as h,o as x,d as w,k,K as j,e as V,w as C,Q as U,g as $,F as E,l as F,a as z,t as A,aJ as D}from"./index.64f80ae1.js";import{f as M,r as N,_ as R}from"./index.f49ee419.js";import{_ as T,a as q,b as I}from"./SearchInput.db01975a.js";import{_ as J}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.041d3875.js";import{u as L}from"./main.2122a746.js";import{u as S}from"./viewWrapper.a105c182.js";import"./VModal.vue_vue_type_style_index_0_lang.86329fc7.js";import"./VFlex.vue_vue_type_style_index_0_lang.9e42ca5f.js";import"./VDropdown.vue_vue_type_style_index_0_lang.c6ac5a69.js";import"./VIcon.vue_vue_type_script_setup_true_lang.ae68b462.js";import"./VControl.6c3280e9.js";const B={class:"page-content-inner"},H={class:"columns"},K={class:"column is-12"},O={key:0,class:"is-flex-grow-0",textContent:"#"},P={key:0,class:"flex-list-inner"},Q={key:1,class:"flex-list-inner"},W=V("img",{class:"light-image",src:a,alt:""},null,-1),G=V("img",{class:"dark-image",src:t,alt:""},null,-1),X={class:"dark-text"},Y={key:1},Z={class:"dark-text"},ee=c({__name:"index",setup(a){const t=d(),c=_(),{t:ee}=g(),ae=L();S().setPageTitle(ee("Users_List")),v({title:`${ee("Users")} - ${ae.app.name}`});const te=y({pagination:{current_page:1,per_page:10,total:10,total_pages:1},result:[]}),le=f(),se=b({get:()=>te.pagination.current_page,set:async e=>{await ue(e)}}),ne={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:"Fullname",media:!0,grow:!0,sortable:!0},email:{label:"Email",sortable:!0},role:{label:"Role",sortable:!0},department:{label:"Department",grow:!0,sortable:!0},actions:{label:"",align:"end"}},oe=f(!1),re=b({get:()=>"",async set(e){console.log(e)}}),ie=f();async function ue(e=1){var a,t,l;try{oe.value=!0;const a=await M({page:e,per_page:te.pagination.per_page});Object.assign(te,a)}catch(s){c.error(ee(null==(l=null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.error)?void 0:l.message))}finally{oe.value=!1}}async function pe(){await N(le.value),ue()}return h((()=>te.pagination.per_page),(async()=>{await ue()})),(a,c)=>{const d=J,_=T,g=q,v=I,y=R,f=l,b=s,h=D,M=n,N=o,L=m,S=p,ee=r,ue=i,me=u,ce=e;return x(),w("div",B,[k(d,{"with-icons":"",separator:"bullet",items:[{label:j(ae).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Users"),to:{name:"/app/users/"}}]},null,8,["items"]),V("div",H,[V("div",K,[k(me,{class:"mt-4",columns:j(ne),data:te.result,limit:te.pagination.per_page,total:te.pagination.total},{default:C((e=>[k(v,null,{left:C((()=>[k(_,{modelValue:j(re),"onUpdate:modelValue":c[0]||(c[0]=e=>U(re)?re.value=e:null)},null,8,["modelValue"])])),right:C((()=>[k(g,{modelValue:te.pagination.per_page,"onUpdate:modelValue":c[1]||(c[1]=e=>te.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),k(ee,{rounded:"","no-header":!oe.value&&0===te.result.length},{"header-column":C((({column:e})=>["orderNumber"===e.key?(x(),w("span",O)):$("",!0)])),body:C((()=>[oe.value?(x(),w("div",P,[(x(!0),w(E,null,F(te.pagination.per_page,(e=>(x(),w("div",{key:e,class:"flex-table-item"},[k(b,{column:{grow:!0,media:!0}},{default:C((()=>[k(y,{size:"medium"}),k(f,{lines:2,width:"60%","last-line-width":"20%",class:"mx-2"})])),_:1}),k(b,null,{default:C((()=>[k(h,{width:"60%",class:"mx-1"})])),_:1}),k(b,null,{default:C((()=>[k(h,{width:"60%",class:"mx-1"})])),_:1}),k(b,{column:{align:"end"}},{default:C((()=>[k(h,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===te.result.length?(x(),w("div",Q,[k(M,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:C((()=>[W,G])),_:1})])):$("",!0)])),"body-row-pre":C((({row:e})=>[e.id===ie.value?(x(),z(N,{key:0,size:"tiny",class:"m-0 mb-1"})):$("",!0)])),"body-cell":C((({row:e,column:a})=>["name"===a.key?(x(),w(E,{key:0},[k(L,{size:"medium",picture:e.avatar},null,8,["picture"]),V("div",null,[V("span",X,A(e.firstname)+" "+A(e.lastname),1)])],64)):$("",!0),"role"===a.key?(x(),w("div",Y,[V("span",Z,A(e.role.name),1)])):$("",!0),"actions"===a.key?(x(),z(S,{key:2,onEdit:a=>{return l=e.id,le.value=l,void t.push(`/app/users/${l}`);var l},onRemove:a=>async function(e){le.value=e,ae.$patch({confirmModalState:!0})}(e.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),te.result.length?(x(),z(ue,{key:0,"current-page":j(se),"onUpdate:current-page":c[2]||(c[2]=e=>U(se)?se.value=e:null),class:"mt-5","item-per-page":te.pagination.per_page,"total-items":te.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),k(ce,{onConfirmAction:pe})])}}});export{ee as default};
