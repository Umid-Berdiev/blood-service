import{_ as e,a as l}from"./FilterForm.vue_vue_type_script_setup_true_lang.c70f7577.js";import{_ as a,a as t,b as s,c as o,d as i,e as n,f as u,g as d}from"./search-7-dark.102b5390.js";import{_ as r}from"./VProgress.vue_vue_type_style_index_0_lang.25603c48.js";import{_}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.014f9ced.js";import{q as m,H as c,C as p,x as f,r as y,o as b,a as v,w as g,e as h,t as V,k as x,i as z,K as j,a1 as k,L as U,M as w,E as D,J as Y,c as M,a2 as $,d as C,g as O,F,l as I,a3 as B}from"./index.7c55eebc.js";import{_ as P}from"./lodash.ee52b868.js";import{_ as T}from"./VModal.vue_vue_type_style_index_0_lang.104fa26b.js";import{_ as E}from"./SubmitButton.vue_vue_type_script_setup_true_lang.f1b403aa.js";import{_ as L}from"./VCheckbox.vue_vue_type_style_index_0_lang.bc831a5c.js";import{_ as N}from"./VFlex.vue_vue_type_style_index_0_lang.7a5f3769.js";import{_ as S}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.7de6c203.js";import{_ as q}from"./VFlexItem.vue_vue_type_style_index_0_lang.6cd20929.js";import{b as A,_ as H,a as J}from"./VControl.c83da2bc.js";import{_ as K}from"./VInput.vue_vue_type_script_setup_true_lang.41205ab3.js";import{m as R}from"./moment.6db5fb47.js";import{_ as W}from"./_plugin-vue_export-helper.cdc0426e.js";import{u as Z}from"./main.77f12ddf.js";import{u as G}from"./viewWrapper.36a4ca30.js";import{f as Q}from"./patient.8ce28ef6.js";import"./VTextarea.vue_vue_type_script_setup_true_lang.9b77c7b3.js";import"./VRadio.vue_vue_type_style_index_0_lang.96ceec80.js";import"./VCard.vue_vue_type_script_setup_true_lang.66705bb8.js";import"./VButton.vue_vue_type_style_index_0_lang.108743ff.js";import"./VPlaceload.b6410537.js";import"./VIMaskInput.vue_vue_type_script_lang.ee999b64.js";const X=e=>(U("data-v-b1b55896"),e=e(),w(),e),ee={class:"columns"},le={class:"column"},ae={class:"is-size-5 has-text-weight-medium"},te={class:"box"},se={class:"has-text-weight-bold"},oe=X((()=>h("br",null,null,-1))),ie={class:"box"},ne=X((()=>h("hr",{class:"is-divider"},null,-1))),ue=X((()=>h("br",null,null,-1))),de={class:"columns is-multiline"},re={class:"column is-4-desktop is-6-tablet"},_e={class:"column is-4-desktop is-6-tablet"},me={class:"column is-4-desktop is-6-tablet"},ce={class:"column is-4-desktop is-6-tablet"},pe=X((()=>h("span",{class:"has-text-danger"},"*",-1))),fe={class:"column is-4-desktop is-6-tablet"},ye={class:"column is-4-desktop is-6-tablet"},be={class:"column is-4-desktop is-6-tablet"},ve=X((()=>h("span",{class:"has-text-danger"},"*",-1))),ge={class:"column is-4-desktop is-6-tablet"},he=X((()=>h("br",null,null,-1))),Ve=X((()=>h("p",{class:"has-text-danger"}," Красным цветом указаны показатели, заданные врачом-терапевтом, как обязательные для определения ",-1))),xe=X((()=>h("h5",{class:"is-size-5 py-1 has-text-centered"},"Лейкоформула",-1))),ze=X((()=>h("br",null,null,-1))),je={class:"box"},ke={class:"columns is-multiline"},Ue={class:"column is-4-desktop is-6-tablet"},we={class:"column is-4-desktop is-6-tablet"},De={class:"column is-4-desktop is-6-tablet"},Ye={class:"column is-4-desktop is-6-tablet"},Me={class:"column is-4-desktop is-6-tablet"},$e={class:"column is-4-desktop is-6-tablet"},Ce=X((()=>h("hr",{class:"is-divider"},null,-1))),Oe={class:"box"},Fe=R.__esModule?R.default:R,Ie=W(m({__name:"FormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list"],setup(e,{emit:l}){c();const{t:a}=p(),t=f(a("Hemotransmission_research_results")),s=f(!1),o=y({leykotsity:"",trombotsity:""}),i=y({blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]});function n(){Object.assign(o,{blood_samples_taken_date:Fe().format("YYYY-MM-DD"),analysis_date:Fe().format("YYYY-MM-DD"),clinical_biochemical_laboratory_date:Fe().format("YYYY-MM-DD")}),Object.assign(i,{blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]}),l("update:isOpen",!1)}return(l,a)=>{const i=A,u=K,d=H,r=J,_=q,m=S,c=N,p=L,f=E,y=T;return b(),v(y,{open:e.isOpen,size:"big",title:t.value,actions:"right",onClose:n},{content:g((()=>{var t;return[h("div",ee,[h("div",le,[h("h5",ae,V(l.$t("Donor_code"))+": "+V(null==(t=e.patient.last_visit)?void 0:t.donation_code),1)])]),h("div",te,[x(c,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:g((()=>[x(_,{"flex-basis":"45%"},{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(i,{class:"my-auto mr-3 is-size-6"},{default:g((()=>[z(V(l.$t("Blood_sampling_date")),1)])),_:1}),x(d,null,{default:g((()=>{var l;return[x(u,{value:j(k)(new Date(null==(l=e.patient.last_visit)?void 0:l.updated_at),"YYYY-MM-DD"),disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),x(_,{"flex-basis":"45%"},{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(i,{class:"my-auto mr-3 is-size-6"},{default:g((()=>[z(V(l.$t("Blood_samples_taken_date")),1)])),_:1}),x(d,null,{default:g((()=>[x(m,{modelValue:o.blood_samples_taken_date,"onUpdate:modelValue":a[0]||(a[0]=e=>o.blood_samples_taken_date=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(_,{"flex-basis":"45%"},{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(i,{class:"my-auto mr-3 is-size-6"},{default:g((()=>[z(V(l.$t("Analysis_date")),1)])),_:1}),x(d,null,{default:g((()=>[x(m,{modelValue:o.analysis_date,"onUpdate:modelValue":a[1]||(a[1]=e=>o.analysis_date=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(_,{"flex-basis":"45%"},{default:g((()=>{var a;return[h("h5",null,[h("span",se,V(l.$t("Visit_stage")),1),h("span",null,V(null==(a=e.patient.last_visit)?void 0:a.stage),1)])]})),_:1})])),_:1})]),oe,h("div",ie,[x(c,{"flex-wrap":"wrap","align-items":"center","column-gap":"2rem"},{default:g((()=>[x(_,null,{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3"},{default:g((()=>[z("ALT, ml. mol/l")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.alt,"onUpdate:modelValue":a[2]||(a[2]=e=>o.alt=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(_,null,{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3"},{default:g((()=>[z("Реагент")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.reagent,"onUpdate:modelValue":a[3]||(a[3]=e=>o.reagent=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(_,null,{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(d,null,{default:g((()=>[x(p,{modelValue:o.norma,"onUpdate:modelValue":a[4]||(a[4]=e=>o.norma=e),color:"primary",label:"Норма"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),ne,x(_,null,{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(d,null,{default:g((()=>[x(p,{modelValue:o.plmal,"onUpdate:modelValue":a[5]||(a[5]=e=>o.plmal=e),color:"primary",label:"Plmal"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),ue,h("div",de,[h("div",re,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Билирубин, мл.моль/л")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.bilirubin,"onUpdate:modelValue":a[6]||(a[6]=e=>o.bilirubin=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",_e,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Общий белок, ед.")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.obshiy_belok,"onUpdate:modelValue":a[7]||(a[7]=e=>o.obshiy_belok=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",me,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Тимоловые пробы")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.timolovye_proby,"onUpdate:modelValue":a[8]||(a[8]=e=>o.timolovye_proby=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",ce,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z(" Лейкоциты (Z), ед/л"),pe])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.leykotsity,"onUpdate:modelValue":a[9]||(a[9]=e=>o.leykotsity=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",fe,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("СОЭ, мл/ч")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.soe,"onUpdate:modelValue":a[10]||(a[10]=e=>o.soe=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",ye,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Эритроциты, ед/л")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.eritrotsity,"onUpdate:modelValue":a[11]||(a[11]=e=>o.eritrotsity=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",be,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z(" Тромбоциты, л"),ve])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.trombotsity,"onUpdate:modelValue":a[12]||(a[12]=e=>o.trombotsity=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",ge,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z(" Гематокрит, %")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.gematokrit,"onUpdate:modelValue":a[13]||(a[13]=e=>o.gematokrit=e)},null,8,["modelValue"])])),_:1})])),_:1})])]),he,Ve]),xe,ze,h("div",je,[h("div",ke,[h("div",Ue,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Базофилы, %")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.bazofily,"onUpdate:modelValue":a[14]||(a[14]=e=>o.bazofily=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",we,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Эозинофилы, %")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.eozinofily,"onUpdate:modelValue":a[15]||(a[15]=e=>o.eozinofily=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",De,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Палочкоядерные, %")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.palochkoyadernye,"onUpdate:modelValue":a[16]||(a[16]=e=>o.palochkoyadernye=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",Ye,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z(" Сегментоядерные, % ")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.segmentoyadernye,"onUpdate:modelValue":a[17]||(a[17]=e=>o.segmentoyadernye=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",Me,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Лимфоциты, %")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.limfotsity,"onUpdate:modelValue":a[18]||(a[18]=e=>o.limfotsity=e)},null,8,["modelValue"])])),_:1})])),_:1})]),h("div",$e,[x(r,{horizontal:"",class:"is-justify-content-end"},{default:g((()=>[x(i,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:g((()=>[z("Моноциты, %")])),_:1}),x(d,null,{default:g((()=>[x(u,{modelValue:o.monotsity,"onUpdate:modelValue":a[19]||(a[19]=e=>o.monotsity=e)},null,8,["modelValue"])])),_:1})])),_:1})])])]),Ce,h("div",Oe,[x(c,null,{default:g((()=>[x(_,null,{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(d,null,{default:g((()=>[x(p,{modelValue:o.hilez,"onUpdate:modelValue":a[20]||(a[20]=e=>o.hilez=e),color:"primary",label:"Хилез"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(_,null,{default:g((()=>[x(r,{horizontal:""},{default:g((()=>[x(d,null,{default:g((()=>[x(p,{modelValue:o.gemoliz,"onUpdate:modelValue":a[21]||(a[21]=e=>o.gemoliz=e),color:"primary",label:"Гемолиз"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])]})),action:g((()=>[x(f,{loading:s.value,form:"blood-sampling-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-b1b55896"]]),Be=e=>(U("data-v-c08bb0a8"),e=e(),w(),e),Pe={class:"page-content-inner"},Te={class:"columns mb-3"},Ee={class:"column"},Le={class:"columns mt-1"},Ne={class:"column"},Se={class:"columns"},qe={class:"column is-12"},Ae={key:0,class:"is-flex-grow-0",textContent:"#"},He={key:0,class:"flex-list-inner"},Je={key:1,class:"flex-list-inner"},Ke=Be((()=>h("img",{class:"light-image",src:u,alt:""},null,-1))),Re=Be((()=>h("img",{class:"dark-image",src:d,alt:""},null,-1))),We=["onClick"],Ze=P.isEmpty,Ge=W(m({__name:"index",async setup(u){let d,m;D();const z=c(),{t:U}=p(),w=Z(),P=f(!1);G().setPageTitle(U("Clinical-biochemical-laboratory")),Y({title:`${U("Donor_list_for_blood_sampling")} - ${w.app.name}`});const T=y({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),E=M({get:()=>T.pagination.current_page,set:async e=>{q.page=e,await K(q)}}),L={orderNumber:{format:(e,l,a)=>`${a+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:U("Donation_code")},blood_sampling_date:{label:U("Blood_sampling_date")},name:{label:U("Donor_fullname")},birth_date:{label:U("Date-of-birth")},visit_type:{label:U("Visit_type"),format:(e,l)=>{var a,t;return(null==(a=l.last_visit)?void 0:a.visit_type)&&U(null==(t=l.last_visit)?void 0:t.visit_type)}},visit_date:{label:U("Visit_date"),format:(e,l)=>{var a,t;return(null==(a=l.last_visit)?void 0:a.created_at)&&k(new Date(null==(t=l.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:U("Donation_type"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.personalized_donation}},visit_stage:{label:U("Visit_stage"),format:(e,l)=>{var a,t;return null==(t=null==(a=l.last_visit)?void 0:a.stage)?void 0:t.name}}},N=f(),S=y({visit_type_id:[],donation_type_id:[],donation_code:[]}),q=y({page:1}),A=y({}),H=f(!1),J=f(!0);async function K(e){var l,a;try{Object.assign(q,e),P.value=!0;const l=await Q(e);Object.assign(T,l.result),Ze(l.result.data)?z.warning(U("Data_not_found")):z.success(`${U("Found")}: ${l.result.pagination.total} ${U("records")}`)}catch(t){Object.assign(S,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{P.value=!1}}function R(e){S[e]=""}async function W(){T.data=[]}return[d,m]=$((()=>K(q))),await d,m(),(u,d)=>{const m=_,c=e,p=a,f=t,y=s,z=r,k=o,U=i,D=n,Y=l;return b(),C("div",Pe,[h("div",Te,[h("div",Ee,[x(m,{"with-icons":"",separator:"bullet",items:[{label:j(w).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:u.$t("Screening")},{label:u.$t("Donor_list_for_blood_sampling")}]},null,8,["items"])])]),h("div",Le,[h("div",Ne,[x(c,{"is-loading":P.value,errors:S,onSearch:K,onClearForm:W,onClearError:R},null,8,["is-loading","errors"])])]),h("div",Se,[h("div",qe,[x(D,{columns:j(L),data:T.data,limit:T.pagination.per_page,total:T.pagination.total},{default:g((()=>[x(k,{rounded:"","no-header":!P.value&&0===T.data.length},{"header-column":g((({column:e})=>["orderNumber"===e.key?(b(),C("span",Ae)):O("",!0)])),body:g((()=>[P.value?(b(),C("div",He,[(b(!0),C(F,null,I(T.pagination.per_page,(e=>(b(),C("div",{key:e,class:"flex-table-item"},[x(f,null,{default:g((()=>[x(p,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):O("",!0),0===T.data.length?(b(),C("div",Je,[x(y,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:g((()=>[Ke,Re])),_:1})])):O("",!0)])),"body-row-pre":g((({row:e})=>[e.id===N.value?(b(),v(z,{key:0,size:"tiny",class:"m-0 mb-1"})):O("",!0)])),"body-cell":g((({row:e,column:l})=>["name"===l.key?(b(),C("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:l=>{return a=e,Object.assign(A,a),void(H.value=!0);var a}},V(e.first_name)+" "+V(e.last_name)+" "+V(e.father_name),9,We)):O("",!0)])),_:1},8,["no-header"]),T.data.length?(b(),v(U,{key:0,"current-page":j(E),"onUpdate:current-page":d[0]||(d[0]=e=>B(E)?E.value=e:null),class:"mt-5","item-per-page":T.pagination.per_page,"total-items":T.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):O("",!0)])),_:1},8,["columns","data","limit","total"])])]),x(Ie,{"is-open":H.value,"onUpdate:is-open":d[1]||(d[1]=e=>H.value=e),patient:A},null,8,["is-open","patient"]),x(Y,{"is-open":J.value,"onUpdate:is-open":d[2]||(d[2]=e=>J.value=e),patient:A},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-c08bb0a8"]]);export{Ge as default};
