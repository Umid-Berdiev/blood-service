import{_ as e}from"./PrimaryScreeningFormModal.vue_vue_type_script_setup_true_lang.f4ce06b6.js";import{_ as a,a as t,b as l,c as o,d as s,e as n,f as i,g as r}from"./search-7-dark.607cbb05.js";import{_ as d}from"./VCard.vue_vue_type_script_setup_true_lang.1f6b49b7.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang.132fca0f.js";import{_ as c,a as p}from"./VControl.a4292c49.js";import{q as m,C as g,H as v,r as y,x as b,A as f,j as h,o as j,a as x,w as V,e as $,m as k,k as D,t as C,K as w,i as F,E as S,J as I,c as L,d as M,g as U,F as P,l as A,S as B,L as E,M as O}from"./index.5e313a07.js";import{p as N,a as q}from"./patient.83d02e12.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.141f26f3.js";import{_ as W}from"./lodash.6f8ef5ec.js";import{u as z}from"./main.a14c778c.js";import{u as G}from"./viewWrapper.74d08f31.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VModal.vue_vue_type_style_index_0_lang.e01de1da.js";import"./SubmitButton.vue_vue_type_script_setup_true_lang.ff8c9853.js";import"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import"./VFlexItem.vue_vue_type_style_index_0_lang.c03e68c9.js";import"./IMaskDateInput.vue_vue_type_script_setup_true_lang.2fa4ff12.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";import"./moment.bb668042.js";import"./VPlaceload.726b7e5d.js";const J=[{value:"gratuitous",label:"Gratuitous"},{value:"chargeable",label:"Chargeable"}],K=[{id:1,name:"Whole_blood_donation"},{id:2,name:"Plasmapheresis"},{id:3,name:"Plateletpheresis"}],Q=["onSubmit"],R={class:"columns"},X={class:"column"},Y={class:"help has-text-danger"},Z={class:"column"},ee={class:"help has-text-danger"},ae={class:"column"},te={class:"help has-text-danger"},le={class:"column is-3"},oe={class:"help has-text-danger"},se={class:"navigation-buttons"},ne={class:"buttons is-right"},ie=m({__name:"DonorsListFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],setup(e,{emit:a}){g(),v();const t=y({donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),l=b([]);f((async()=>{l.value=await N().then((e=>e.result))}));const o=async()=>{a("search",t)},s=async()=>{Object.assign(t,{donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),a("clearForm")};return(a,n)=>{const i=h("Multiselect"),r=c,m=p,g=u,v=_,y=d;return j(),x(y,{radius:"regular"},{default:V((()=>[$("form",{onSubmit:k(o,["prevent"])},[$("div",R,[$("div",X,[D(m,{class:"is-curved-select",label:a.$t("Donor_categories")},{default:V((({id:o})=>[D(r,null,{default:V((()=>[D(i,{modelValue:t.donor_category_id,"onUpdate:modelValue":n[0]||(n[0]=e=>t.donor_category_id=e),attrs:{id:o},options:l.value,placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",Y,C(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",Z,[D(m,{class:"is-curved-select",label:a.$t("Visit_type")},{default:V((({id:l})=>[D(r,null,{default:V((()=>[D(i,{modelValue:t.visit_type,"onUpdate:modelValue":n[1]||(n[1]=e=>t.visit_type=e),attrs:{id:l},options:w(J),placeholder:a.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),$("p",ee,C(e.errors.visit_type[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",ae,[D(m,{class:"is-curved-select",label:a.$t("Donation_type")},{default:V((({id:l})=>[D(r,null,{default:V((()=>[D(i,{modelValue:t.donation_type_id,"onUpdate:modelValue":n[2]||(n[2]=e=>t.donation_type_id=e),attrs:{id:l},options:w(K),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",te,C(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",le,[D(m,{class:"is-curved-select",label:a.$t("Donation_code")},{default:V((({id:l})=>[D(r,null,{default:V((()=>[D(g,{modelValue:t.donation_code,"onUpdate:modelValue":n[3]||(n[3]=e=>t.donation_code=e),attrs:{id:l},placeholder:a.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),$("p",oe,C(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),$("div",se,[$("div",ne,[D(v,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:s},{default:V((()=>[F(C(a.$t("Clear")),1)])),_:1},8,["disabled"]),D(v,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:V((()=>[F(C(a.$t("Search")),1)])),_:1},8,["loading"])])])],40,Q)])),_:1})}}}),re=e=>(E("data-v-644c5119"),e=e(),O(),e),de={class:"page-content-inner"},_e={class:"columns mb-3"},ue={class:"column"},ce={class:"columns mt-1"},pe={class:"column"},me={class:"columns"},ge={class:"column is-12"},ve=["textContent"],ye={key:0,class:"flex-list-inner"},be={key:1,class:"flex-list-inner"},fe=re((()=>$("img",{class:"light-image",src:i,alt:""},null,-1))),he=re((()=>$("img",{class:"dark-image",src:r,alt:""},null,-1))),je=["onClick"],xe=W.isEmpty,Ve=H(m({__name:"index",setup(i){S();const r=v(),{t:d}=g(),_=z(),u=b(!1);G().setPageTitle(d("Screening")),I({title:`${d("Donors-list-for-primary-screening")} - ${_.app.name}`});const c=y({data:[{id:11,donation_code:130100111800,blood_sampling_date:"22.05.2022",first_name:"Ренат",last_name:"Ахмеджанов",father_name:"Шамильевич",birth_date:"24.01.1990",last_visit:{visit_type:"Безвозмезные донации",created_at:"06.05.2022",donation_type:"Тромбоцитаферез",stage:"Мед. освидетельствование"},donor_category:"Донор резерва"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=L({get:()=>c.pagination.current_page,set:async e=>{h.page=e,await E(h)}}),m={orderNumber:{format:(e,a,t)=>`${t+1}`},name:{label:d("Donor_fullname")},birth_date:{label:d("Date-of-birth")},visit_type:{label:d("Visit_type"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.visit_type}},visit_date:{label:d("Visit_date"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.created_at}},donation_type:{label:d("Donation_type"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.personalized_donation}},donation_code:{label:d("Donation_number")},donor_category:{label:d("Donor_category")}},f=y({donor_category_id:[],visit_type:[],donation_type_id:[],donation_code:[]}),h=y({page:1}),k=y({}),F=b(!1);async function E(e){var a,t;try{Object.assign(h,e),u.value=!0;const a=await q(e);Object.assign(c,a.result),xe(a.result.data)?r.warning(d("Data_not_found")):r.success(`${d("Found")}: ${a.result.pagination.total} ${d("records")}`)}catch(l){Object.assign(f,null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.errors)}finally{u.value=!1}}function O(e){f[e]=""}async function N(){c.data=[]}return(i,r)=>{const d=T,g=ie,v=a,y=t,b=l,h=o,S=s,I=n,L=e;return j(),M("div",de,[$("div",_e,[$("div",ue,[D(d,{"with-icons":"",separator:"bullet",items:[{label:w(_).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Screening")},{label:i.$t("Donors-list-for-primary-screening")}]},null,8,["items"])])]),$("div",ce,[$("div",pe,[D(g,{"is-loading":u.value,errors:f,onSearch:E,onClearForm:N,onClearError:O},null,8,["is-loading","errors"])])]),$("div",me,[$("div",ge,[D(I,{columns:w(m),data:c.data,limit:c.pagination.per_page,total:c.pagination.total},{default:V((()=>[D(h,{rounded:"","no-header":!u.value&&0===c.data.length},{"header-column":V((({column:e})=>["orderNumber"===e.key?(j(),M("span",{key:0,textContent:C(i.$t("Donor_register_number"))},null,8,ve)):U("",!0)])),body:V((()=>[u.value?(j(),M("div",ye,[(j(!0),M(P,null,A(c.pagination.per_page,(e=>(j(),M("div",{key:e,class:"flex-table-item"},[D(y,null,{default:V((()=>[D(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):U("",!0),0===c.data.length?(j(),M("div",be,[D(b,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:V((()=>[fe,he])),_:1})])):U("",!0)])),"body-cell":V((({row:e,column:a})=>["name"===a.key?(j(),M("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:e=>{}},C(e.first_name)+" "+C(e.last_name)+" "+C(e.father_name),9,je)):U("",!0)])),_:1},8,["no-header"]),c.data.length?(j(),x(S,{key:0,"current-page":w(p),"onUpdate:current-page":r[0]||(r[0]=e=>B(p)?p.value=e:null),class:"mt-5","item-per-page":c.pagination.per_page,"total-items":c.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):U("",!0)])),_:1},8,["columns","data","limit","total"])])]),D(L,{"is-open":F.value,"onUpdate:is-open":r[1]||(r[1]=e=>F.value=e),patient:k},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-644c5119"]]);export{Ve as default};
