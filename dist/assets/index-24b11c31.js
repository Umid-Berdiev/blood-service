import{a as e,b as l,c as a,f as t,d as o,e as s,s as i,_ as n}from"./DonationContainerFormModal.vue_vue_type_script_setup_true_lang-7f62b428.js";import{_ as d}from"./VModal.vue_vue_type_style_index_0_lang-98b95306.js";import{_ as r}from"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-6aad6843.js";import{u as c,_,a as m,b as p}from"./VControl-90e6c9df.js";import{q as v,r as f,x as h,ah as b,y,c as V,o as g,d as $,$ as x,ai as U,K as k,e as z,b as S,Y as j,Z as D,p as C,U as w,f as F,t as L,k as B,w as O,F as W,l as M,a as P,i as T,L as H,M as I,j as A,g as Y,H as N,C as R,ag as E,A as Z,a7 as q,m as J,E as K,J as G}from"./index-202d6ef0.js";import{_ as Q}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as X}from"./DatePicker.vue_vue_type_script_setup_true_lang-181de8a9.js";import{_ as ee}from"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";import{_ as le}from"./VFlexItem.vue_vue_type_style_index_0_lang-cfd608a5.js";import{_ as ae,a as te,b as oe}from"./VFlexTable.vue_vue_type_style_index_0_lang-6eeebdac.js";import{_ as se,a as ie}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as ne}from"./NoDataPlaceholder-50105cc5.js";import{_ as de}from"./VCard.vue_vue_type_script_setup_true_lang-8d45bf90.js";import{_ as re}from"./ClearButton.vue_vue_type_script_setup_true_lang-422ea292.js";import{p as ue,a as ce}from"./patient-4b952528.js";import{v as _e}from"./additionals-8d72a378.js";import{_ as me}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e8162493.js";import{u as pe}from"./main-1fdef032.js";import{u as ve}from"./viewWrapper-93d6f948.js";import{f as fe}from"./additional-b8f03a9c.js";import"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import"./ClientOnly.vue_vue_type_script_lang-3cf31693.js";const he=["id","name","multiple"],be=v({__name:"VSelect",props:{raw:{type:Boolean},modelValue:{default:""},multiple:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:l}){var a;const t=e,o=f(c({create:!1,help:"VSelect"})),s=h((null==(a=null==o?void 0:o.field)?void 0:a.value)??t.modelValue),i=b();y(s,(()=>{l("update:modelValue",s.value)})),y((()=>t.modelValue),(()=>{s.value=t.modelValue}));const n=V((()=>t.raw?[]:["select",t.multiple&&"is-multiple"]));return(e,l)=>(g(),$("div",{class:F(k(n))},[x(z("select",C({id:k(o).id},k(i),{"onUpdate:modelValue":l[0]||(l[0]=e=>w(s)?s.value=e:null),name:k(o).id,multiple:t.multiple,onChange:l[1]||(l[1]=(...e)=>{var l,a;return(null==(l=k(o).field)?void 0:l.handleChange)&&(null==(a=k(o).field)?void 0:a.handleChange(...e))}),onBlur:l[2]||(l[2]=(...e)=>{var l,a;return(null==(l=k(o).field)?void 0:l.handleBlur)&&(null==(a=k(o).field)?void 0:a.handleBlur(...e))})}),[S(e.$slots,"default",j(D({selected:k(s),id:k(o).id})))],16,he),[[U,k(s)]])],2))}}),ye=v({__name:"VOption",setup(e){const l=f(c({create:!1,help:"VOption"}));return(e,a)=>(g(),$("option",null,[S(e.$slots,"default",j(D(k(l))))]))}}),Ve=e=>(H("data-v-25ab5158"),e=e(),I(),e),ge={class:"box"},$e={class:"is-size-5 mb-3"},xe={class:"field is-horizontal"},Ue={class:"field-label is-normal"},ke={class:"label"},ze={class:"field-body"},Se={class:"field is-horizontal"},je={class:"field-label is-normal"},De={class:"label"},Ce=Ve((()=>z("span",{class:"has-text-danger"},"*",-1))),we={class:"field-body"},Fe={class:"field is-horizontal"},Le={class:"field-label"},Be={class:"label"},Oe=Ve((()=>z("span",{class:"has-text-danger"},"*",-1))),We={class:"field-body"},Me=Q(v({__name:"WholeBloodDonationFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(e,{emit:l}){const a=e,t=V({get:()=>a.formState,set(e){l("update:formState",e)}});return(l,a)=>{const o=ye,s=be,i=_,n=m,d=u;return g(),$("div",ge,[z("h5",$e,L(l.$t("Whole_blood_donation")),1),z("div",xe,[z("div",Ue,[z("label",ke,L(l.$t("Container")),1)]),z("div",ze,[B(n,null,{default:O((()=>[B(i,{expanded:""},{default:O((()=>[B(s,{modelValue:k(t).container_id,"onUpdate:modelValue":a[0]||(a[0]=e=>k(t).container_id=e),class:"is-primary",placeholder:l.$t("Select")},{default:O((()=>[(g(!0),$(W,null,M(e.containerList,((e,l)=>(g(),P(o,{key:l,value:e.id},{default:O((()=>[T(L(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),z("div",Se,[z("div",je,[z("label",De,[T(L(l.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Ce])]),z("div",we,[B(n,null,{default:O((()=>[B(d,{modelValue:k(t).hemoconservative,"onUpdate:modelValue":a[1]||(a[1]=e=>k(t).hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),z("div",Fe,[z("div",Le,[z("label",Be,[T(L(l.$t("Laboratory_taken_blood_amount_ml"))+" ",1),Oe])]),z("div",We,[B(n,null,{default:O((()=>[B(d,{modelValue:k(t).laboratory,"onUpdate:modelValue":a[2]||(a[2]=e=>k(t).laboratory=e),type:"text"},null,8,["modelValue"])])),_:1})])])])}}}),[["__scopeId","data-v-25ab5158"]]),Pe=e=>(H("data-v-2a9a1b0d"),e=e(),I(),e),Te={class:"box"},He={class:"is-size-5 mb-3"},Ie={class:"field is-horizontal"},Ae={class:"field-label is-normal"},Ye={class:"label"},Ne={class:"field-body"},Re=Pe((()=>z("hr",{class:"is-divider"},null,-1))),Ee={class:"mb-3"},Ze={class:"field is-horizontal"},qe={class:"field-label is-flex is-align-items-center"},Je={class:"label"},Ke={class:"field-body"},Ge={class:"field"},Qe={class:"control is-expended"},Xe={class:"field is-horizontal"},el={class:"field-label is-normal"},ll={class:"label"},al=Pe((()=>z("span",{class:"has-text-danger"},"*",-1))),tl={class:"field-body"},ol=Pe((()=>z("hr",{class:"is-divider"},null,-1))),sl={class:"mb-3"},il={class:"field is-horizontal"},nl={class:"field-label is-flex is-align-items-center"},dl={class:"label"},rl={class:"field-body"},ul={class:"field"},cl={class:"control is-expended"},_l={class:"field is-horizontal"},ml={class:"field-label is-normal"},pl={class:"label"},vl=Pe((()=>z("span",{class:"has-text-danger"},"*",-1))),fl={class:"field-body"},hl={class:"field is-horizontal"},bl={class:"field-label is-normal"},yl={class:"label"},Vl={class:"field-body"},gl=Q(v({__name:"PlasmapheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,o=V({get:()=>t.formState,set(e){a("update:formState",e)}}),s=h(1);return y(s,(function(e){o.value.doses.length>e&&o.value.doses.pop(),o.value.doses.length<e&&o.value.doses.push(0)})),(a,t)=>{const i=ye,n=be,d=_,r=m,c=A("Multiselect"),v=u,f=p;return g(),$("div",Te,[z("h5",He,L(a.$t("Plasmapheresis")),1),z("div",Ie,[z("div",Ae,[z("label",Ye,L(a.$t("Apheresis_method")),1)]),z("div",Ne,[B(r,null,{default:O((()=>[B(d,{expended:""},{default:O((()=>[B(n,{modelValue:k(o).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>k(o).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:O((()=>[(g(!0),$(W,null,M(k(e),((e,l)=>(g(),P(i,{key:l,value:e.value},{default:O((()=>[T(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===k(o).apheresis_method?(g(),$(W,{key:0},[Re,z("h5",Ee,L(a.$t("First_fence")),1),z("div",Ze,[z("div",qe,[z("label",Je,L(a.$t("Container")),1)]),z("div",Ke,[z("div",Ge,[z("div",Qe,[B(c,{modelValue:k(o).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>k(o).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Xe,[z("div",el,[z("label",ll,[T(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),al])]),z("div",tl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>k(o).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),ol,z("h5",sl,L(a.$t("Second_fence")),1),z("div",il,[z("div",nl,[z("label",dl,L(a.$t("Container")),1)]),z("div",rl,[z("div",ul,[z("div",cl,[B(c,{modelValue:k(o).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>k(o).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",_l,[z("div",ml,[z("label",pl,[T(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),vl])]),z("div",fl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>k(o).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):"device"===k(o).apheresis_method?(g(),$(W,{key:1},[z("div",hl,[z("div",bl,[z("label",yl,L(a.$t("Received_plasma_amount_ml")),1)]),z("div",Vl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).plasma,"onUpdate:modelValue":t[5]||(t[5]=e=>k(o).plasma=e),type:"text"},null,8,["modelValue"])])),_:1})])]),B(r,{horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[T(L(a.$t("Divided_into_doses")),1)])),_:1}),B(d,null,{default:O((()=>[B(v,{modelValue:k(s),"onUpdate:modelValue":t[6]||(t[6]=e=>w(s)?s.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(g(!0),$(W,null,M(k(s),((e,l)=>(g(),P(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[T(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),B(d,{raw:"",subcontrol:""},{default:O((()=>[B(v,{modelValue:k(o).doses[l],"onUpdate:modelValue":e=>k(o).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):Y("",!0)])}}}),[["__scopeId","data-v-2a9a1b0d"]]),$l=e=>(H("data-v-24cb3ffd"),e=e(),I(),e),xl={class:"box"},Ul={class:"is-size-5 mb-3"},kl={class:"field is-horizontal"},zl={class:"field-label is-normal"},Sl={class:"label"},jl={class:"field-body"},Dl=$l((()=>z("hr",{class:"is-divider"},null,-1))),Cl={class:"mb-3"},wl={class:"field is-horizontal"},Fl={class:"field-label is-flex is-align-items-center"},Ll={class:"label"},Bl={class:"field-body"},Ol={class:"field"},Wl={class:"control is-expended"},Ml={class:"field is-horizontal"},Pl={class:"field-label is-normal"},Tl={class:"label"},Hl=$l((()=>z("span",{class:"has-text-danger"},"*",-1))),Il={class:"field-body"},Al=$l((()=>z("hr",{class:"is-divider"},null,-1))),Yl={class:"mb-3"},Nl={class:"field is-horizontal"},Rl={class:"field-label is-flex is-align-items-center"},El={class:"label"},Zl={class:"field-body"},ql={class:"field"},Jl={class:"control is-expended"},Kl={class:"field is-horizontal"},Gl={class:"field-label is-normal"},Ql={class:"label"},Xl={class:"field-body"},ea=$l((()=>z("hr",{class:"is-divider"},null,-1))),la={class:"mb-3"},aa={class:"field is-horizontal"},ta={class:"field-label is-flex is-align-items-center"},oa={class:"label"},sa={class:"field-body"},ia={class:"field"},na={class:"control is-expended"},da={class:"field is-horizontal"},ra={class:"field-label is-normal"},ua={class:"label"},ca={class:"field-body"},_a=$l((()=>z("hr",{class:"is-divider"},null,-1))),ma={class:"mb-3"},pa={class:"field is-horizontal"},va={class:"field-label is-flex is-align-items-center"},fa={class:"label"},ha={class:"field-body"},ba={class:"field"},ya={class:"control is-expended"},Va={class:"field is-horizontal"},ga={class:"field-label is-normal"},$a={class:"label"},xa={class:"field-body"},Ua=$l((()=>z("hr",{class:"is-divider"},null,-1))),ka=$l((()=>z("br",null,null,-1))),za={class:"field is-horizontal"},Sa={class:"field-label is-normal"},ja={class:"label"},Da={class:"field-body"},Ca=Q(v({__name:"PlateletpheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,o=V({get:()=>t.formState,set(e){a("update:formState",e)}}),s=h(1);return y(s,(function(e){o.value.doses.length>e&&o.value.doses.pop(),o.value.doses.length<e&&o.value.doses.push(0)})),(a,t)=>{const i=ye,n=be,d=_,r=m,c=A("Multiselect"),v=u,f=p;return g(),$("div",xl,[z("h5",Ul,L(a.$t("Plateletpheresis")),1),z("div",kl,[z("div",zl,[z("label",Sl,L(a.$t("Apheresis_method")),1)]),z("div",jl,[B(r,null,{default:O((()=>[B(d,{expanded:""},{default:O((()=>[B(n,{modelValue:k(o).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>k(o).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:O((()=>[(g(!0),$(W,null,M(k(e),((e,l)=>(g(),P(i,{key:l,value:e.value},{default:O((()=>[T(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===k(o).apheresis_method?(g(),$(W,{key:0},[Dl,z("h5",Cl,L(a.$t("First_fence")),1),z("div",wl,[z("div",Fl,[z("label",Ll,L(a.$t("Container")),1)]),z("div",Bl,[z("div",Ol,[z("div",Wl,[B(c,{modelValue:k(o).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>k(o).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Ml,[z("div",Pl,[z("label",Tl,[T(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Hl])]),z("div",Il,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>k(o).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),Al,z("h5",Yl,L(a.$t("Second_fence")),1),z("div",Nl,[z("div",Rl,[z("label",El,L(a.$t("Container")),1)]),z("div",Zl,[z("div",ql,[z("div",Jl,[B(c,{modelValue:k(o).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>k(o).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Kl,[z("div",Gl,[z("label",Ql,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),z("div",Xl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>k(o).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),ea,z("h5",la,L(a.$t("Third_fence")),1),z("div",aa,[z("div",ta,[z("label",oa,L(a.$t("Container")),1)]),z("div",sa,[z("div",ia,[z("div",na,[B(c,{modelValue:k(o).third_container_id,"onUpdate:modelValue":t[5]||(t[5]=e=>k(o).third_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",da,[z("div",ra,[z("label",ua,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),z("div",ca,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).third_hemoconservative,"onUpdate:modelValue":t[6]||(t[6]=e=>k(o).third_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),_a,z("h5",ma,L(a.$t("Fourth_fence")),1),z("div",pa,[z("div",va,[z("label",fa,L(a.$t("Container")),1)]),z("div",ha,[z("div",ba,[z("div",ya,[B(c,{modelValue:k(o).fourth_container_id,"onUpdate:modelValue":t[7]||(t[7]=e=>k(o).fourth_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Va,[z("div",ga,[z("label",$a,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),z("div",xa,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).fourth_hemoconservative,"onUpdate:modelValue":t[8]||(t[8]=e=>k(o).fourth_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):Y("",!0),"device"===k(o).apheresis_method?(g(),$(W,{key:1},[Ua,ka,z("div",za,[z("div",Sa,[z("label",ja,L(a.$t("Received_platelet_concentrate_amount_ml")),1)]),z("div",Da,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).thromboconcentrate1,"onUpdate:modelValue":t[9]||(t[9]=e=>k(o).thromboconcentrate1=e),type:"text",style:{width:"50%"}},null,8,["modelValue"])])),_:1})])]),B(r,{horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[T(L(a.$t("Divided_into_doses")),1)])),_:1}),B(d,null,{default:O((()=>[B(v,{modelValue:k(s),"onUpdate:modelValue":t[10]||(t[10]=e=>w(s)?s.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(g(!0),$(W,null,M(k(s),((e,l)=>(g(),P(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[T(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),B(d,{raw:"",subcontrol:""},{default:O((()=>[B(v,{modelValue:k(o).doses[l],"onUpdate:modelValue":e=>k(o).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):Y("",!0)])}}}),[["__scopeId","data-v-24cb3ffd"]]),wa=e=>(H("data-v-92e62910"),e=e(),I(),e),Fa={class:"box mt-3"},La={class:"is-size-5 mb-3"},Ba={class:"field is-horizontal"},Oa={class:"field-label is-normal"},Wa={class:"label"},Ma=["value"],Pa={class:"field is-horizontal"},Ta={class:"field-label is-normal"},Ha={class:"label"},Ia={class:"help has-text-danger"},Aa={class:"field is-horizontal"},Ya={class:"field-label is-normal"},Na={class:"label"},Ra={class:"field-body"},Ea={class:"field"},Za={class:"control"},qa={class:"field"},Ja={class:"control"},Ka={class:"field is-horizontal"},Ga={class:"field-label is-normal"},Qa={class:"label"},Xa={class:"field-body"},et={class:"field"},lt={class:"control"},at=wa((()=>z("hr",{class:"is-divider"},null,-1))),tt=wa((()=>z("hr",{class:"is-divider"},null,-1))),ot=wa((()=>z("hr",{class:"is-divider"},null,-1))),st={class:"box"},it={class:"is-size-5 mb-3"},nt={class:"field is-horizontal"},dt={class:"field-label is-normal"},rt={class:"label"},ut={class:"field-body"},ct={class:"field"},_t={class:"control is-expended"},mt=Q(v({__name:"DonationDataEntryFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null,donationTypes:null},emits:["update:isOpen","update:list","add:Container"],async setup(e,{emit:u}){let c,_;const m=e,p=N(),{t:v}=R(),b=h(v("Donation_data_entry_form")),x=h(!1),U=h({date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0}),S=f({date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),j=h([]),D=h([]),C=h(!1),w=h({}),F=V((()=>{var e;return null==(e=m.donationTypes.find((e=>{var l,a;return e.id==(null==(a=null==(l=m.patient)?void 0:l.last_visit)?void 0:a.donation_type_id)})))?void 0:e.name}));async function M(){var e,l,a,t,o,s;try{x.value=!0,await i(null==(l=null==(e=m.patient)?void 0:e.last_visit)?void 0:l.id,U.value),p.success(v("Data_saved_successfully")),u("update:list"),P()}catch(n){(null==(a=n.response)?void 0:a.data.error)?p.error(null==(t=n.response)?void 0:t.data.error):Object.assign(S,null==(s=null==(o=n.response)?void 0:o.data)?void 0:s.errors)}finally{x.value=!1}}function P(){U.value={date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0},Object.assign(S,{date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),u("update:isOpen",!1)}async function H(){const e=await t();j.value=e.result.data}return[c,_]=E((()=>async function(){try{const e=await a();D.value=e.result}catch(e){p.error(e.message)}}())),await c,_(),Z((async function(){await H()})),y((()=>{var e,l;return null==(l=null==(e=m.patient)?void 0:e.last_visit)?void 0:l.id}),(async e=>{var a,t;if(e){const o=await l(e);U.value=o.result,(a=U.value).doses??(a.doses=[0]),(t=U.value).date??(t.date=q(new Date,"YYYY-MM-DD"))}})),(l,a)=>{const t=le,i=ee,u=X,c=A("Multiselect"),_=Ca,m=gl,p=Me,v=r,f=d,h=n;return g(),$(W,null,[B(f,{open:e.isOpen,size:"medium",title:b.value,actions:"right",onClose:P},{content:O((()=>{var n,d,r,v,f,h;return[B(i,{"column-gap":"1rem"},{default:O((()=>[B(t,null,{default:O((()=>[T(L(l.$t("Recommended_single_donation_volume_ml"))+":",1)])),_:1}),B(t,null,{default:O((()=>{var l,a;return[T(L(null==(a=null==(l=e.patient)?void 0:l.last_visit)?void 0:a.recommended_blood_capacity),1)]})),_:1})])),_:1}),z("div",Fa,[z("h5",La,L(l.$t("Donation_results")),1),z("div",Ba,[z("div",Oa,[z("label",Wa,L(l.$t("Donation_type")),1)]),z("input",{class:"input",value:k(F),disabled:""},null,8,Ma)]),z("div",Pa,[z("div",Ta,[z("label",Ha,L(l.$t("Donation_date")),1)]),B(u,{modelValue:U.value.date,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.date=e)},null,8,["modelValue"]),z("p",Ia,L(S.date[0]),1)]),z("div",Aa,[z("div",Ya,[z("label",Na,L(l.$t("Completed_donation_status")),1)]),z("div",Ra,[z("div",Ea,[z("div",Za,[B(c,{modelValue:U.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.status=e),options:k(o),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])]),z("div",qa,[z("div",Ja,[B(c,{modelValue:U.value.status_type,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.status_type=e),options:k(s),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Ka,[z("div",Ga,[z("label",Qa,L(l.$t("Post-infusion_reaction")),1)]),z("div",Xa,[z("div",et,[z("div",lt,[B(c,{modelValue:U.value.postinfusion_reaction_id,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.postinfusion_reaction_id=e),options:D.value,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])])]),1===(null==(d=null==(n=e.patient)?void 0:n.last_visit)?void 0:d.donation_type_id)?(g(),$(W,{key:0},[at,B(_,{"form-state":U.value,"onUpdate:form-state":a[4]||(a[4]=e=>U.value=e),"container-list":j.value},null,8,["form-state","container-list"])],64)):Y("",!0),2===(null==(v=null==(r=e.patient)?void 0:r.last_visit)?void 0:v.donation_type_id)?(g(),$(W,{key:1},[tt,B(m,{"form-state":U.value,"onUpdate:form-state":a[5]||(a[5]=e=>U.value=e),"container-list":j.value},null,8,["form-state","container-list"])],64)):Y("",!0),3===(null==(h=null==(f=e.patient)?void 0:f.last_visit)?void 0:h.donation_type_id)?(g(),$(W,{key:2},[ot,B(p,{"form-state":U.value,"onUpdate:form-state":a[6]||(a[6]=e=>U.value=e),"container-list":j.value},null,8,["form-state","container-list"])],64)):Y("",!0),z("div",st,[z("h5",it,L(l.$t("Component_Product_Transfer_Information")),1),z("div",nt,[z("div",dt,[z("label",rt,L(l.$t("Transferred")),1)]),z("div",ut,[z("div",ct,[z("div",_t,[B(c,{modelValue:U.value.sent_to,"onUpdate:modelValue":a[7]||(a[7]=e=>U.value.sent_to=e),options:[{value:"recycling",label:"на переработку"},{value:"sterility",label:"на контроль стерильности"}],placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","placeholder"])])])])])])]})),action:O((()=>[z("button",{class:"button is-info is-outlined",onClick:a[8]||(a[8]=e=>C.value=!0)},L(l.$t("Add_container")),1),B(v,{loading:x.value,onClick:M},null,8,["loading"])])),_:1},8,["open","title"]),B(h,{"is-open":C.value,"onUpdate:is-open":a[9]||(a[9]=e=>C.value=e),container:w.value,"onUpdate:list":H},null,8,["is-open","container"])],64)}}}),[["__scopeId","data-v-92e62910"]]),pt=["onSubmit"],vt={class:"columns"},ft={class:"column"},ht={class:"column"},bt={class:"column"},yt={class:"column is-3"},Vt={class:"navigation-buttons"},gt={class:"buttons is-right"},$t=v({__name:"DonorsListFilterForm",props:{isLoading:{type:Boolean},donationTypes:null},emits:["search","clearForm"],setup(e,{emit:l}){R(),N();const a=f({donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),t=h([]),o=h(!1);y(a,(e=>{e&&(o.value=Object.values(e).some((e=>!!e)))}),{deep:!0}),Z((async()=>{t.value=await ue().then((e=>e.result))}));const s=async()=>{l("search",a)},i=async()=>{Object.assign(a,{donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),l("clearForm")};return(l,n)=>{const d=A("Multiselect"),c=_,p=m,v=u,f=re,h=r,b=de;return g(),P(b,null,{default:O((()=>[z("form",{onSubmit:J(s,["prevent"])},[z("div",vt,[z("div",ft,[B(p,{class:"is-curved-select",label:l.$t("Donor_categories")},{default:O((({id:e})=>[B(c,null,{default:O((()=>[B(d,{modelValue:k(a).donor_category_id,"onUpdate:modelValue":n[0]||(n[0]=e=>k(a).donor_category_id=e),attrs:{id:e},options:k(t),placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"])])),_:2},1024)])),_:1},8,["label"])]),z("div",ht,[B(p,{class:"is-curved-select",label:l.$t("Visit_type")},{default:O((({id:e})=>[B(c,null,{default:O((()=>[B(d,{modelValue:k(a).visit_type,"onUpdate:modelValue":n[1]||(n[1]=e=>k(a).visit_type=e),attrs:{id:e},options:k(_e),placeholder:l.$t("All")},null,8,["modelValue","attrs","options","placeholder"])])),_:2},1024)])),_:1},8,["label"])]),z("div",bt,[B(p,{class:"is-curved-select",label:l.$t("Donation_type")},{default:O((({id:t})=>[B(c,null,{default:O((()=>[B(d,{modelValue:k(a).donation_type_id,"onUpdate:modelValue":n[2]||(n[2]=e=>k(a).donation_type_id=e),attrs:{id:t},options:e.donationTypes,placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"])])),_:2},1024)])),_:1},8,["label"])]),z("div",yt,[B(p,{class:"is-curved-select",label:l.$t("Donation_code")},{default:O((({id:e})=>[B(c,null,{default:O((()=>[B(v,{modelValue:k(a).donation_code,"onUpdate:modelValue":n[3]||(n[3]=e=>k(a).donation_code=e),attrs:{id:e},placeholder:l.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"])])),_:2},1024)])),_:1},8,["label"])])]),z("div",Vt,[z("div",gt,[B(f,{disabled:e.isLoading||!k(o),onClear:i},null,8,["disabled"]),B(h,{loading:e.isLoading},{default:O((()=>[T(L(l.$t("Search")),1)])),_:1},8,["loading"])])])],40,pt)])),_:1})}}}),xt={class:"page-content-inner"},Ut={class:"columns mb-3"},kt={class:"column"},zt={class:"columns mt-1"},St={class:"column"},jt={class:"columns"},Dt={class:"column is-12"},Ct=["textContent"],wt={key:0,class:"flex-list-inner"},Ft=["onClick"],Lt=Q(v({__name:"index",async setup(e){let l,a;K(),N();const{t:t}=R(),o=pe(),s=h(!1);ve().setPageTitle(t("Donations")),G({title:`${t("Donors_for_donation")} - ${o.app.name}`});const i=f({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n={orderNumber:{format:(e,l,a)=>a+1},name:{label:t("Donor_fullname"),grow:!0},birth_date:{label:t("Date-of-birth")},visit_type:{label:t("Visit_type"),format:(e,l)=>{var a,o;return(null==(a=l.last_visit)?void 0:a.visit_type)&&t(null==(o=l.last_visit)?void 0:o.visit_type)}},visit_date:{label:t("Visit_date"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.created_at}},donation_type:{label:t("Donation_type"),format:(e,l)=>{var a,t;return null==(t=null==(a=l.last_visit)?void 0:a.donation_type)?void 0:t.name}},donation_code:{label:t("Donation_code"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.donation_code}},donor_category:{label:t("Donor_category"),format:(e,l)=>{var a;return null==(a=l.category)?void 0:a.name}}},d=f({donor_category_id:[],visit_type:[],donation_type_id:[],donation_code:[]}),r=f({visit_type_id:null,donation_type_id:null,donation_code:null,category_id:null,page:1}),u=h(null),c=h(!1),_=h([]);async function m(e){var l,a;try{s.value=!0,Object.assign(r,e);const l=await ce(e);Object.assign(i,l.result)}catch(t){Object.assign(d,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{s.value=!1}}async function p(){await m(r)}return[l,a]=E((()=>m(r))),await l,a(),Z((async function(){const e=await fe();_.value=e.result})),y(c,(e=>{e||(u.value=null)})),y((()=>i.pagination.current_page),(async e=>{e&&(r.page=e,await m(r))})),(e,l)=>{const a=me,t=$t,d=se,r=ae,v=ne,f=te,h=ie,b=oe,y=mt;return g(),$("div",xt,[z("div",Ut,[z("div",kt,[B(a,{"with-icons":"",separator:"bullet",items:[{label:k(o).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Donations")},{label:e.$t("Donors_for_donation")}]},null,8,["items"])])]),z("div",zt,[z("div",St,[B(t,{"is-loading":k(s),"donation-types":k(_),onSearch:m,onClearForm:p},null,8,["is-loading","donation-types"])])]),z("div",jt,[z("div",Dt,[B(b,{columns:k(n),data:k(i).data,limit:k(i).pagination.per_page,total:k(i).pagination.total},{default:O((()=>[B(f,{rounded:"","no-header":!k(s)&&0===k(i).data.length},{"header-column":O((({column:l})=>["orderNumber"===l.key?(g(),$("span",{key:0,textContent:L(e.$t("Donor_#"))},null,8,Ct)):Y("",!0)])),body:O((()=>[k(s)?(g(),$("div",wt,[(g(!0),$(W,null,M(k(i).pagination.per_page,(e=>(g(),$("div",{key:e,class:"flex-table-item"},[B(r,null,{default:O((()=>[B(d,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):Y("",!0),0===k(i).data.length?(g(),P(v,{key:1})):Y("",!0)])),"body-cell":O((({row:e,column:l})=>["name"===l.key?(g(),$("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){u.value=e,c.value=!0}(e)},L(e.first_name)+" "+L(e.last_name)+" "+L(e.father_name),9,Ft)):Y("",!0)])),_:1},8,["no-header"]),k(i).data.length?(g(),P(h,{key:0,"current-page":k(i).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>k(i).pagination.current_page=e),class:"mt-5","item-per-page":k(i).pagination.per_page,"total-items":k(i).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):Y("",!0)])),_:1},8,["columns","data","limit","total"])])]),B(y,{"is-open":k(c),"onUpdate:is-open":l[1]||(l[1]=e=>w(c)?c.value=e:null),patient:k(u),"donation-types":k(_)},null,8,["is-open","patient","donation-types"])])}}}),[["__scopeId","data-v-6d8b29fd"]]);export{Lt as default};
