import{_ as a,a as e,b as t,c as l,d as s,e as o,f as i,g as n}from"./search-7-dark.607cbb05.js";import{_ as r}from"./VCard.vue_vue_type_script_setup_true_lang.1f6b49b7.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import{_,a as u}from"./VControl.a4292c49.js";import{_ as c}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.2fa4ff12.js";import{q as p,C as m,H as v,r as b,ag as g,x as y,j as f,o as h,a as x,w as V,e as j,m as $,k,t as D,K as w,i as C,E as F,J as E,c as M,a7 as L,d as P,g as S,F as U,l as I,S as B,L as O,M as Y}from"./index.5e313a07.js";import{_ as z}from"./lodash.6f8ef5ec.js";import{p as A,f as N}from"./patient.83d02e12.js";import{_ as q}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.141f26f3.js";import{u as T}from"./main.a14c778c.js";import{u as W}from"./viewWrapper.74d08f31.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import"./VPlaceload.726b7e5d.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";import"./moment.bb668042.js";const H=["onSubmit"],J={class:"columns"},K={class:"column"},R={class:"help has-text-danger"},Q={class:"column"},X={class:"help has-text-danger"},Z={class:"column"},aa={class:"help has-text-danger"},ea={class:"column"},ta={class:"help has-text-danger"},la={class:"column"},sa={class:"help has-text-danger"},oa={class:"navigation-buttons"},ia={class:"buttons is-right"},na=z.isEmpty,ra=z.values,da=p({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=m(),o=v(),i=b({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),n=([t,l]=g((()=>A().then((a=>a.result)))),t=await t,l(),t),p=y([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),F=y([{id:1,name:s("Whole_blood_donation")},{id:2,name:s("Plasmapheresis")},{id:3,name:s("Plateletpheresis")}]),E=async()=>{ra(i).every(na)?o.error(s("Form_fields_are_empty")):e("search",i)},M=async()=>{Object.assign(i,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),e("clearForm")};return(e,t)=>{const l=c,s=_,o=u,m=f("Multiselect"),v=d,b=r;return h(),x(b,{radius:"regular"},{default:V((()=>[j("form",{onSubmit:$(E,["prevent"])},[j("div",J,[j("div",K,[k(o,{label:e.$t("Start_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:i.start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>i.start_date=a)},null,8,["modelValue"]),j("p",R,D(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",Q,[k(o,{label:e.$t("End_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:i.end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>i.end_date=a)},null,8,["modelValue"]),j("p",X,D(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",Z,[k(o,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:i.donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>i.donor_category_id=a),attrs:{id:l},options:w(n),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",aa,D(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",ea,[k(o,{class:"is-curved-select",label:e.$t("Visit_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:i.visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>i.visit_type_id=a),attrs:{id:l},options:p.value,placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),j("p",ta,D(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",la,[k(o,{class:"is-curved-select",label:e.$t("Donation_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:i.donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=a=>i.donation_type_id=a),attrs:{id:l},options:F.value,placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",sa,D(a.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),j("div",oa,[j("div",ia,[k(v,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:M},{default:V((()=>[C(D(e.$t("Clear")),1)])),_:1},8,["disabled"]),k(v,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:V((()=>[C(D(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,H)])),_:1})}}}),_a=a=>(O("data-v-4264f806"),a=a(),Y(),a),ua={class:"page-content-inner"},ca={class:"columns mb-3"},pa={class:"column"},ma={class:"columns mt-1"},va={class:"column"},ba={class:"columns"},ga={class:"column is-12"},ya=["textContent"],fa={key:0,class:"flex-list-inner"},ha={key:1,class:"flex-list-inner"},xa=_a((()=>j("img",{class:"light-image",src:i,alt:""},null,-1))),Va=_a((()=>j("img",{class:"dark-image",src:n,alt:""},null,-1))),ja=z.isEmpty,$a=G(p({__name:"index",setup(i){F();const n=v(),{t:r}=m(),d=T(),_=y(!1);W().setPageTitle(r("Physician-therapist")),E({title:`${r("Donors-list-for-examination")} - ${d.app.name}`});const u=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),c=M({get:()=>u.pagination.current_page,set:async a=>{$.page=a,await O($)}}),p={orderNumber:{format:(a,e,t)=>`${t+1}`},name:{label:r("Fullname")},birth_date:{label:r("Date-of-birth")},visit_date:{label:r("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&L(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:r("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&r(null==(l=e.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:r("Medical_inspection_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.directed_by)&&r(null==(l=e.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:r("Medical_inspection_conclusion"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},linked_donation_number:{label:r("Linked_donation_number"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},donation_type:{label:r("Donation_type"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:r("Blood_component_amount"),format:(a,e)=>{var t;return null==(t=e.status)?void 0:t.name}}};y();const g=b({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),$=b({page:1});async function O(a){var e,t;try{Object.assign($,a),_.value=!0;const e=await N(a);Object.assign(u,e.result),ja(e.result.data)?n.warning(r("Data_not_found")):n.success(`${r("Found")}: ${e.result.pagination.total} ${r("records")}`)}catch(l){Object.assign(g,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{_.value=!1}}function Y(a){g[a]=""}async function z(){u.data=[]}return(i,n)=>{const r=q,m=da,v=a,b=e,y=t,$=f("RouterLink"),F=l,E=s,M=o;return h(),P("div",ua,[j("div",ca,[j("div",pa,[k(r,{"with-icons":"",separator:"bullet",items:[{label:w(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Physician-therapist")},{label:i.$t("Examined-donor-register")}]},null,8,["items"])])]),j("div",ma,[j("div",va,[k(m,{"is-loading":_.value,errors:g,onSearch:O,onClearForm:z,onClearError:Y},null,8,["is-loading","errors"])])]),j("div",ba,[j("div",ga,[k(M,{columns:w(p),data:u.data,limit:u.pagination.per_page,total:u.pagination.total},{default:V((()=>[k(F,{rounded:"","no-header":!_.value&&0===u.data.length},{"header-column":V((({column:a})=>["orderNumber"===a.key?(h(),P("span",{key:0,textContent:D(i.$t("Donor_register_number"))},null,8,ya)):S("",!0)])),body:V((()=>[_.value?(h(),P("div",fa,[(h(!0),P(U,null,I(u.pagination.per_page,(a=>(h(),P("div",{key:a,class:"flex-table-item"},[k(b,null,{default:V((()=>[k(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):S("",!0),0===u.data.length?(h(),P("div",ha,[k(y,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:V((()=>[xa,Va])),_:1})])):S("",!0)])),"body-cell":V((({row:a,column:e})=>["name"===e.key?(h(),x($,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${a.id}`},{default:V((()=>[C(D(a.first_name)+" "+D(a.last_name)+" "+D(a.father_name),1)])),_:2},1032,["to"])):S("",!0)])),_:1},8,["no-header"]),u.data.length?(h(),x(E,{key:0,"current-page":w(c),"onUpdate:current-page":n[0]||(n[0]=a=>B(c)?c.value=a:null),class:"mt-5","item-per-page":u.pagination.per_page,"total-items":u.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):S("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-4264f806"]]);export{$a as default};
