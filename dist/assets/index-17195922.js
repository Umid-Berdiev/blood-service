import{_ as a,a as e,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-abb495dd.js";import{_ as l,a as s,b as r,c as n,d as i}from"./search-7-dark-2f8f64c6.js";import{_ as o}from"./VCard.vue_vue_type_script_setup_true_lang-f1c0af22.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-114b0359.js";import{_,a as u}from"./VControl-6b9015e2.js";import{_ as c}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-15a72943.js";import{q as p,C as m,H as g,r as v,a8 as y,x as b,j as f,o as h,a as x,w as V,e as j,m as $,k,K as w,t as S,i as D,E as C,J as F,c as Y,a7 as M,d as L,g as I,F as U,l as E,S as O,L as P,M as B}from"./index-ef344eb7.js";import{p as N}from"./patient-b942017f.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-5d57fce7.js";import{u as q}from"./main-11940342.js";import{u as A}from"./viewWrapper-ee1c88fe.js";import{f as H}from"./index-87d6f039.js";import{_ as G}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-8060459e.js";import"./VPlaceload-5927026b.js";import"./VIMaskInput.vue_vue_type_script_lang-d2dfdd0b.js";import"./moment-0998b240.js";const J=["onSubmit"],K={class:"columns"},W={class:"column"},X={class:"help has-text-danger"},z={class:"column"},Q={class:"help has-text-danger"},R={class:"column"},Z={class:"help has-text-danger"},aa={class:"column"},ea={class:"help has-text-danger"},ta={class:"navigation-buttons"},la={class:"buttons is-right"},sa=p({__name:"ScreeningPassedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=m();g();const r=v({start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),n=([t,l]=y((()=>N().then((a=>a.result)))),t=await t,l(),t),i=b([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),p=async()=>{e("search",r)},C=async()=>{Object.assign(r,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),e("clearForm")};return(e,t)=>{const l=c,s=_,m=u,g=f("Multiselect"),v=d,y=o;return h(),x(y,null,{default:V((()=>[j("form",{onSubmit:$(p,["prevent"])},[j("div",K,[j("div",W,[k(m,{label:e.$t("Start_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:w(r).start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>w(r).start_date=a)},null,8,["modelValue"]),j("p",X,S(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",z,[k(m,{label:e.$t("End_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:w(r).end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>w(r).end_date=a)},null,8,["modelValue"]),j("p",Q,S(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",R,[k(m,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(g,{modelValue:w(r).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>w(r).donor_category_id=a),attrs:{id:l},options:w(n),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",Z,S(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",aa,[k(m,{class:"is-curved-select",label:e.$t("Visit_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(g,{modelValue:w(r).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>w(r).visit_type_id=a),attrs:{id:l},options:w(i),placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),j("p",ea,S(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),j("div",ta,[j("div",la,[k(v,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:C},{default:V((()=>[D(S(e.$t("Clear")),1)])),_:1},8,["disabled"]),k(v,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:V((()=>[D(S(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,J)])),_:1})}}}),ra=a=>(P("data-v-1a35a9e0"),a=a(),B(),a),na={class:"page-content-inner"},ia={class:"columns mb-3"},oa={class:"column"},da={class:"columns mt-1"},_a={class:"column"},ua={class:"columns"},ca={class:"column is-12"},pa=["textContent"],ma={key:0,class:"flex-list-inner"},ga={key:1,class:"flex-list-inner"},va=ra((()=>j("img",{class:"light-image",src:n,alt:""},null,-1))),ya=ra((()=>j("img",{class:"dark-image",src:i,alt:""},null,-1))),ba={key:0},fa=G(p({__name:"index",async setup(n){let i,o;C(),g();const{t:d}=m(),_=q(),u=b(!1);A().setPageTitle(d("Screening")),F({title:`${d("Screening-passed-donors-list")} - ${_.app.name}`});const c=v({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=Y({get:()=>c.pagination.current_page,set:async a=>{D.page=a,await P(D)}}),f={orderNumber:{format:(a,e,t)=>`${t+1}`,align:"center"},screening_date:{label:d("Screening_date"),format:(a,e)=>{var t,l,s;return(null==(t=e.last_visit)?void 0:t.primary_screening_result)&&M(new Date(null==(s=null==(l=e.last_visit)?void 0:l.primary_screening_result)?void 0:s.created_at),"YYYY-MM-DD")}},name:{label:d("Donor_fullname")},birth_date:{label:d("Date-of-birth")},visit_date:{label:d("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&M(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:d("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&d(null==(l=e.last_visit)?void 0:l.visit_type)}},hemoglobin:{label:`${d("Hemoglobin")}, ${d("g/l")}`,format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.primary_screening_result)?void 0:l.value},align:"center"},preliminary_blood_type:{label:d("Preliminary_blood_type"),format:(a,e)=>{var t,l,s;return null==(s=null==(l=null==(t=e.last_visit)?void 0:t.primary_screening_result)?void 0:l.blood_type)?void 0:s.label},align:"center"},laboratory_assistant_fullname:{label:d("Laboratory_assistant_fullname"),format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.primary_screening_result)?void 0:l.created_by}}};b();const $=v({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[]}),D=v({page:1});async function P(a){var e,t;try{Object.assign(D,a),u.value=!0;const e=await H(a);Object.assign(c,e.result)}catch(l){Object.assign($,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{u.value=!1}}function B(a){$[a]=""}async function N(){c.data=[]}return[i,o]=y((()=>P(D))),await i,o(),(n,i)=>{const o=T,d=sa,m=l,g=a,v=s,y=e,b=r,D=t;return h(),L("div",na,[j("div",ia,[j("div",oa,[k(o,{"with-icons":"",separator:"bullet",items:[{label:w(_).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:n.$t("Screening")},{label:n.$t("Screening-passed-donors-list")}]},null,8,["items"])])]),j("div",da,[j("div",_a,[k(d,{"is-loading":w(u),errors:w($),onSearch:P,onClearForm:N,onClearError:B},null,8,["is-loading","errors"])])]),j("div",ua,[j("div",ca,[k(D,{columns:w(f),data:w(c).data,limit:w(c).pagination.per_page,total:w(c).pagination.total},{default:V((()=>[k(y,{rounded:"","no-header":!w(u)&&0===w(c).data.length},{"header-column":V((({column:a})=>["orderNumber"===a.key?(h(),L("span",{key:0,textContent:S(n.$t("donor_no"))},null,8,pa)):I("",!0)])),body:V((()=>[w(u)?(h(),L("div",ma,[(h(!0),L(U,null,E(w(c).pagination.per_page,(a=>(h(),L("div",{key:a,class:"flex-table-item"},[k(g,null,{default:V((()=>[k(m,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):I("",!0),0===w(c).data.length?(h(),L("div",ga,[k(v,{title:n.$t("No_data"),subtitle:n.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:V((()=>[va,ya])),_:1},8,["title","subtitle"])])):I("",!0)])),"body-cell":V((({row:a,column:e})=>["name"===e.key?(h(),L("span",ba,S(a.first_name)+" "+S(a.last_name)+" "+S(a.father_name),1)):I("",!0)])),_:1},8,["no-header"]),w(c).data.length?(h(),x(b,{key:0,"current-page":w(p),"onUpdate:current-page":i[0]||(i[0]=a=>O(p)?p.value=a:null),class:"mt-5","item-per-page":w(c).pagination.per_page,"total-items":w(c).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):I("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-1a35a9e0"]]);export{fa as default};
