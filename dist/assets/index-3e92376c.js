import{a as e,b as l,c as a,f as t,d as s,e as o,s as i,_ as n}from"./DonationContainerFormModal.vue_vue_type_script_setup_true_lang-2a67af88.js";import{_ as d}from"./VModal.vue_vue_type_style_index_0_lang-ac88dda5.js";import{_ as r}from"./SubmitButton.vue_vue_type_script_setup_true_lang-96021f2c.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-9c010bca.js";import{u as c,_,a as m,b as p}from"./VControl-e7b2630d.js";import{q as v,r as f,x as h,ai as b,y,c as g,o as V,d as $,$ as x,aj as U,K as k,e as z,b as S,Y as j,Z as D,p as C,U as w,f as F,t as L,k as B,w as O,F as W,l as M,a as T,i as H,L as I,M as P,j as A,g as Y,H as E,C as N,af as R,A as q,a7 as Z,m as J,E as K,J as G}from"./index-21286bdb.js";import{_ as Q}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as X}from"./DatePicker.vue_vue_type_script_setup_true_lang-8beaf1b4.js";import{_ as ee}from"./VFlex.vue_vue_type_style_index_0_lang-57370b27.js";import{_ as le}from"./VFlexItem.vue_vue_type_style_index_0_lang-a32e2ae4.js";import{_ as ae,a as te,b as se}from"./VFlexTable.vue_vue_type_style_index_0_lang-03a54f1c.js";import{_ as oe,a as ie,b as ne,c as de,d as re}from"./search-7-dark-81286176.js";import{_ as ue}from"./VCard.vue_vue_type_script_setup_true_lang-1043f916.js";import{_ as ce}from"./ClearButton.vue_vue_type_script_setup_true_lang-7aff0300.js";import{p as _e,a as me}from"./patient-26cab0f6.js";import{v as pe}from"./additionals-99299df8.js";import{_ as ve}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-69f615bd.js";import{u as fe}from"./main-16751c88.js";import{u as he}from"./viewWrapper-6ae5f61c.js";import{f as be}from"./additional-f442439b.js";import"./VButton.vue_vue_type_style_index_0_lang-b78df6f3.js";import"./ClientOnly.vue_vue_type_script_lang-52200b90.js";const ye=["id","name","multiple"],ge=v({__name:"VSelect",props:{raw:{type:Boolean},modelValue:{default:""},multiple:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:l}){var a;const t=e,s=f(c({create:!1,help:"VSelect"})),o=h((null==(a=null==s?void 0:s.field)?void 0:a.value)??t.modelValue),i=b();y(o,(()=>{l("update:modelValue",o.value)})),y((()=>t.modelValue),(()=>{o.value=t.modelValue}));const n=g((()=>t.raw?[]:["select",t.multiple&&"is-multiple"]));return(e,l)=>(V(),$("div",{class:F(k(n))},[x(z("select",C({id:k(s).id},k(i),{"onUpdate:modelValue":l[0]||(l[0]=e=>w(o)?o.value=e:null),name:k(s).id,multiple:t.multiple,onChange:l[1]||(l[1]=(...e)=>{var l,a;return(null==(l=k(s).field)?void 0:l.handleChange)&&(null==(a=k(s).field)?void 0:a.handleChange(...e))}),onBlur:l[2]||(l[2]=(...e)=>{var l,a;return(null==(l=k(s).field)?void 0:l.handleBlur)&&(null==(a=k(s).field)?void 0:a.handleBlur(...e))})}),[S(e.$slots,"default",j(D({selected:k(o),id:k(s).id})))],16,ye),[[U,k(o)]])],2))}}),Ve=v({__name:"VOption",setup(e){const l=f(c({create:!1,help:"VOption"}));return(e,a)=>(V(),$("option",null,[S(e.$slots,"default",j(D(k(l))))]))}}),$e=e=>(I("data-v-26302d24"),e=e(),P(),e),xe={class:"box"},Ue={class:"is-size-5 mb-3"},ke={class:"field is-horizontal"},ze={class:"field-label is-normal"},Se={class:"label"},je={class:"field-body"},De={class:"field is-horizontal"},Ce={class:"field-label is-normal"},we={class:"label"},Fe=$e((()=>z("span",{class:"has-text-danger"},"*",-1))),Le={class:"field-body"},Be={class:"field is-horizontal"},Oe={class:"field-label"},We={class:"label"},Me=$e((()=>z("span",{class:"has-text-danger"},"*",-1))),Te={class:"field-body"},He=Q(v({__name:"WholeBloodDonationFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(e,{emit:l}){const a=e,t=g({get:()=>a.formState,set(e){l("update:formState",e)}});return(l,a)=>{const s=Ve,o=ge,i=_,n=m,d=u;return V(),$("div",xe,[z("h5",Ue,L(l.$t("Whole_blood_donation")),1),z("div",ke,[z("div",ze,[z("label",Se,L(l.$t("Container")),1)]),z("div",je,[B(n,null,{default:O((()=>[B(i,{expanded:""},{default:O((()=>[B(o,{modelValue:k(t).container_id,"onUpdate:modelValue":a[0]||(a[0]=e=>k(t).container_id=e),class:"is-primary",placeholder:l.$t("Select")},{default:O((()=>[(V(!0),$(W,null,M(e.containerList,((e,l)=>(V(),T(s,{key:l,value:e.id},{default:O((()=>[H(L(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),z("div",De,[z("div",Ce,[z("label",we,[H(L(l.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Fe])]),z("div",Le,[B(n,null,{default:O((()=>[B(d,{modelValue:k(t).hemoconservative,"onUpdate:modelValue":a[1]||(a[1]=e=>k(t).hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),z("div",Be,[z("div",Oe,[z("label",We,[H(L(l.$t("Laboratory_taken_blood_amount_ml"))+" ",1),Me])]),z("div",Te,[B(n,null,{default:O((()=>[B(d,{modelValue:k(t).laboratory,"onUpdate:modelValue":a[2]||(a[2]=e=>k(t).laboratory=e),type:"text"},null,8,["modelValue"])])),_:1})])])])}}}),[["__scopeId","data-v-26302d24"]]),Ie=e=>(I("data-v-05e721e4"),e=e(),P(),e),Pe={class:"box"},Ae={class:"is-size-5 mb-3"},Ye={class:"field is-horizontal"},Ee={class:"field-label is-normal"},Ne={class:"label"},Re={class:"field-body"},qe=Ie((()=>z("hr",{class:"is-divider"},null,-1))),Ze={class:"mb-3"},Je={class:"field is-horizontal"},Ke={class:"field-label is-flex is-align-items-center"},Ge={class:"label"},Qe={class:"field-body"},Xe={class:"field"},el={class:"control is-expended"},ll={class:"field is-horizontal"},al={class:"field-label is-normal"},tl={class:"label"},sl=Ie((()=>z("span",{class:"has-text-danger"},"*",-1))),ol={class:"field-body"},il=Ie((()=>z("hr",{class:"is-divider"},null,-1))),nl={class:"mb-3"},dl={class:"field is-horizontal"},rl={class:"field-label is-flex is-align-items-center"},ul={class:"label"},cl={class:"field-body"},_l={class:"field"},ml={class:"control is-expended"},pl={class:"field is-horizontal"},vl={class:"field-label is-normal"},fl={class:"label"},hl=Ie((()=>z("span",{class:"has-text-danger"},"*",-1))),bl={class:"field-body"},yl={class:"field is-horizontal"},gl={class:"field-label is-normal"},Vl={class:"label"},$l={class:"field-body"},xl=Q(v({__name:"PlasmapheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,s=g({get:()=>t.formState,set(e){a("update:formState",e)}}),o=h(1);return y(o,(function(e){s.value.doses.length>e&&s.value.doses.pop(),s.value.doses.length<e&&s.value.doses.push(0)})),(a,t)=>{const i=Ve,n=ge,d=_,r=m,c=A("Multiselect"),v=u,f=p;return V(),$("div",Pe,[z("h5",Ae,L(a.$t("Plasmapheresis")),1),z("div",Ye,[z("div",Ee,[z("label",Ne,L(a.$t("Apheresis_method")),1)]),z("div",Re,[B(r,null,{default:O((()=>[B(d,{expended:""},{default:O((()=>[B(n,{modelValue:k(s).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>k(s).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:O((()=>[(V(!0),$(W,null,M(k(e),((e,l)=>(V(),T(i,{key:l,value:e.value},{default:O((()=>[H(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===k(s).apheresis_method?(V(),$(W,{key:0},[qe,z("h5",Ze,L(a.$t("First_fence")),1),z("div",Je,[z("div",Ke,[z("label",Ge,L(a.$t("Container")),1)]),z("div",Qe,[z("div",Xe,[z("div",el,[B(c,{modelValue:k(s).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>k(s).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",ll,[z("div",al,[z("label",tl,[H(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),sl])]),z("div",ol,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>k(s).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),il,z("h5",nl,L(a.$t("Second_fence")),1),z("div",dl,[z("div",rl,[z("label",ul,L(a.$t("Container")),1)]),z("div",cl,[z("div",_l,[z("div",ml,[B(c,{modelValue:k(s).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>k(s).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",pl,[z("div",vl,[z("label",fl,[H(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),hl])]),z("div",bl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>k(s).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):"device"===k(s).apheresis_method?(V(),$(W,{key:1},[z("div",yl,[z("div",gl,[z("label",Vl,L(a.$t("Received_plasma_amount_ml")),1)]),z("div",$l,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).plasma,"onUpdate:modelValue":t[5]||(t[5]=e=>k(s).plasma=e),type:"text"},null,8,["modelValue"])])),_:1})])]),B(r,{horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[H(L(a.$t("Divided_into_doses")),1)])),_:1}),B(d,null,{default:O((()=>[B(v,{modelValue:k(o),"onUpdate:modelValue":t[6]||(t[6]=e=>w(o)?o.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(V(!0),$(W,null,M(k(o),((e,l)=>(V(),T(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[H(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),B(d,{raw:"",subcontrol:""},{default:O((()=>[B(v,{modelValue:k(s).doses[l],"onUpdate:modelValue":e=>k(s).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):Y("",!0)])}}}),[["__scopeId","data-v-05e721e4"]]),Ul=e=>(I("data-v-24cb3ffd"),e=e(),P(),e),kl={class:"box"},zl={class:"is-size-5 mb-3"},Sl={class:"field is-horizontal"},jl={class:"field-label is-normal"},Dl={class:"label"},Cl={class:"field-body"},wl=Ul((()=>z("hr",{class:"is-divider"},null,-1))),Fl={class:"mb-3"},Ll={class:"field is-horizontal"},Bl={class:"field-label is-flex is-align-items-center"},Ol={class:"label"},Wl={class:"field-body"},Ml={class:"field"},Tl={class:"control is-expended"},Hl={class:"field is-horizontal"},Il={class:"field-label is-normal"},Pl={class:"label"},Al=Ul((()=>z("span",{class:"has-text-danger"},"*",-1))),Yl={class:"field-body"},El=Ul((()=>z("hr",{class:"is-divider"},null,-1))),Nl={class:"mb-3"},Rl={class:"field is-horizontal"},ql={class:"field-label is-flex is-align-items-center"},Zl={class:"label"},Jl={class:"field-body"},Kl={class:"field"},Gl={class:"control is-expended"},Ql={class:"field is-horizontal"},Xl={class:"field-label is-normal"},ea={class:"label"},la={class:"field-body"},aa=Ul((()=>z("hr",{class:"is-divider"},null,-1))),ta={class:"mb-3"},sa={class:"field is-horizontal"},oa={class:"field-label is-flex is-align-items-center"},ia={class:"label"},na={class:"field-body"},da={class:"field"},ra={class:"control is-expended"},ua={class:"field is-horizontal"},ca={class:"field-label is-normal"},_a={class:"label"},ma={class:"field-body"},pa=Ul((()=>z("hr",{class:"is-divider"},null,-1))),va={class:"mb-3"},fa={class:"field is-horizontal"},ha={class:"field-label is-flex is-align-items-center"},ba={class:"label"},ya={class:"field-body"},ga={class:"field"},Va={class:"control is-expended"},$a={class:"field is-horizontal"},xa={class:"field-label is-normal"},Ua={class:"label"},ka={class:"field-body"},za=Ul((()=>z("hr",{class:"is-divider"},null,-1))),Sa=Ul((()=>z("br",null,null,-1))),ja={class:"field is-horizontal"},Da={class:"field-label is-normal"},Ca={class:"label"},wa={class:"field-body"},Fa=Q(v({__name:"PlateletpheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,s=g({get:()=>t.formState,set(e){a("update:formState",e)}}),o=h(1);return y(o,(function(e){s.value.doses.length>e&&s.value.doses.pop(),s.value.doses.length<e&&s.value.doses.push(0)})),(a,t)=>{const i=Ve,n=ge,d=_,r=m,c=A("Multiselect"),v=u,f=p;return V(),$("div",kl,[z("h5",zl,L(a.$t("Plateletpheresis")),1),z("div",Sl,[z("div",jl,[z("label",Dl,L(a.$t("Apheresis_method")),1)]),z("div",Cl,[B(r,null,{default:O((()=>[B(d,{expanded:""},{default:O((()=>[B(n,{modelValue:k(s).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>k(s).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:O((()=>[(V(!0),$(W,null,M(k(e),((e,l)=>(V(),T(i,{key:l,value:e.value},{default:O((()=>[H(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===k(s).apheresis_method?(V(),$(W,{key:0},[wl,z("h5",Fl,L(a.$t("First_fence")),1),z("div",Ll,[z("div",Bl,[z("label",Ol,L(a.$t("Container")),1)]),z("div",Wl,[z("div",Ml,[z("div",Tl,[B(c,{modelValue:k(s).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>k(s).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Hl,[z("div",Il,[z("label",Pl,[H(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Al])]),z("div",Yl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>k(s).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),El,z("h5",Nl,L(a.$t("Second_fence")),1),z("div",Rl,[z("div",ql,[z("label",Zl,L(a.$t("Container")),1)]),z("div",Jl,[z("div",Kl,[z("div",Gl,[B(c,{modelValue:k(s).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>k(s).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Ql,[z("div",Xl,[z("label",ea,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),z("div",la,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>k(s).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),aa,z("h5",ta,L(a.$t("Third_fence")),1),z("div",sa,[z("div",oa,[z("label",ia,L(a.$t("Container")),1)]),z("div",na,[z("div",da,[z("div",ra,[B(c,{modelValue:k(s).third_container_id,"onUpdate:modelValue":t[5]||(t[5]=e=>k(s).third_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",ua,[z("div",ca,[z("label",_a,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),z("div",ma,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).third_hemoconservative,"onUpdate:modelValue":t[6]||(t[6]=e=>k(s).third_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),pa,z("h5",va,L(a.$t("Fourth_fence")),1),z("div",fa,[z("div",ha,[z("label",ba,L(a.$t("Container")),1)]),z("div",ya,[z("div",ga,[z("div",Va,[B(c,{modelValue:k(s).fourth_container_id,"onUpdate:modelValue":t[7]||(t[7]=e=>k(s).fourth_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",$a,[z("div",xa,[z("label",Ua,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),z("div",ka,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).fourth_hemoconservative,"onUpdate:modelValue":t[8]||(t[8]=e=>k(s).fourth_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):Y("",!0),"device"===k(s).apheresis_method?(V(),$(W,{key:1},[za,Sa,z("div",ja,[z("div",Da,[z("label",Ca,L(a.$t("Received_platelet_concentrate_amount_ml")),1)]),z("div",wa,[B(r,null,{default:O((()=>[B(v,{modelValue:k(s).thromboconcentrate1,"onUpdate:modelValue":t[9]||(t[9]=e=>k(s).thromboconcentrate1=e),type:"text",style:{width:"50%"}},null,8,["modelValue"])])),_:1})])]),B(r,{horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[H(L(a.$t("Divided_into_doses")),1)])),_:1}),B(d,null,{default:O((()=>[B(v,{modelValue:k(o),"onUpdate:modelValue":t[10]||(t[10]=e=>w(o)?o.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(V(!0),$(W,null,M(k(o),((e,l)=>(V(),T(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[H(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),B(d,{raw:"",subcontrol:""},{default:O((()=>[B(v,{modelValue:k(s).doses[l],"onUpdate:modelValue":e=>k(s).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):Y("",!0)])}}}),[["__scopeId","data-v-24cb3ffd"]]),La=e=>(I("data-v-932d62e7"),e=e(),P(),e),Ba={class:"box mt-3"},Oa={class:"is-size-5 mb-3"},Wa={class:"field is-horizontal"},Ma={class:"field-label is-normal"},Ta={class:"label"},Ha=["value"],Ia={class:"field is-horizontal"},Pa={class:"field-label is-normal"},Aa={class:"label"},Ya={class:"help has-text-danger"},Ea={class:"field is-horizontal"},Na={class:"field-label is-normal"},Ra={class:"label"},qa={class:"field-body"},Za={class:"field"},Ja={class:"control"},Ka={class:"field"},Ga={class:"control"},Qa={class:"field is-horizontal"},Xa={class:"field-label is-normal"},et={class:"label"},lt={class:"field-body"},at={class:"field"},tt={class:"control"},st=La((()=>z("hr",{class:"is-divider"},null,-1))),ot=La((()=>z("hr",{class:"is-divider"},null,-1))),it=La((()=>z("hr",{class:"is-divider"},null,-1))),nt={class:"box"},dt={class:"is-size-5 mb-3"},rt={class:"field is-horizontal"},ut={class:"field-label is-normal"},ct={class:"label"},_t={class:"field-body"},mt={class:"field"},pt={class:"control is-expended"},vt=Q(v({__name:"DonationDataEntryFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null,donationTypes:null},emits:["update:isOpen","update:list","add:Container"],async setup(e,{emit:u}){let c,_;const m=e,p=E(),{t:v}=N(),b=h(v("Donation_data_entry_form")),x=h(!1),U=h({date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0}),S=f({date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),j=h([]),D=h([]),C=h(!1),w=h({}),F=g((()=>{var e;return null==(e=m.donationTypes.find((e=>{var l,a;return e.id==(null==(a=null==(l=m.patient)?void 0:l.last_visit)?void 0:a.donation_type_id)})))?void 0:e.name}));async function M(){var e,l,a,t,s,o;try{x.value=!0,await i(null==(l=null==(e=m.patient)?void 0:e.last_visit)?void 0:l.id,U.value),p.success(v("Data_saved_successfully")),u("update:list"),T()}catch(n){(null==(a=n.response)?void 0:a.data.error)?p.error(null==(t=n.response)?void 0:t.data.error):Object.assign(S,null==(o=null==(s=n.response)?void 0:s.data)?void 0:o.errors)}finally{x.value=!1}}function T(){U.value={date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0},Object.assign(S,{date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),u("update:isOpen",!1)}async function I(){const e=await t();j.value=e.result.data}return[c,_]=R((()=>async function(){try{const e=await a();D.value=e.result}catch(e){p.error(e.message)}}())),await c,_(),q((async function(){await I()})),y((()=>{var e,l;return null==(l=null==(e=m.patient)?void 0:e.last_visit)?void 0:l.id}),(async e=>{var a,t;if(e){const s=await l(e);U.value=s.result,(a=U.value).doses??(a.doses=[0]),(t=U.value).date??(t.date=Z(new Date,"YYYY-MM-DD"))}})),(l,a)=>{const t=le,i=ee,u=X,c=A("Multiselect"),_=Fa,m=xl,p=He,v=r,f=d,h=n;return V(),$(W,null,[B(f,{open:e.isOpen,size:"medium",title:b.value,actions:"right",onClose:T},{content:O((()=>{var n,d,r,v,f,h;return[B(i,{"column-gap":"1rem"},{default:O((()=>[B(t,null,{default:O((()=>[H(L(l.$t("Recommended_single_donation_volume_ml"))+":",1)])),_:1}),B(t,null,{default:O((()=>{var l,a;return[H(L(null==(a=null==(l=e.patient)?void 0:l.last_visit)?void 0:a.recommended_blood_capacity),1)]})),_:1})])),_:1}),z("div",Ba,[z("h5",Oa,L(l.$t("Donation_results")),1),z("div",Wa,[z("div",Ma,[z("label",Ta,L(l.$t("Donation_type")),1)]),z("input",{class:"input",value:k(F),disabled:""},null,8,Ha)]),z("div",Ia,[z("div",Pa,[z("label",Aa,L(l.$t("Donation_date")),1)]),B(u,{modelValue:U.value.date,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.date=e)},null,8,["modelValue"]),z("p",Ya,L(S.date[0]),1)]),z("div",Ea,[z("div",Na,[z("label",Ra,L(l.$t("Completed_donation_status")),1)]),z("div",qa,[z("div",Za,[z("div",Ja,[B(c,{modelValue:U.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.status=e),options:k(s),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])]),z("div",Ka,[z("div",Ga,[B(c,{modelValue:U.value.status_type,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.status_type=e),options:k(o),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),z("div",Qa,[z("div",Xa,[z("label",et,L(l.$t("Post-infusion_reaction")),1)]),z("div",lt,[z("div",at,[z("div",tt,[B(c,{modelValue:U.value.postinfusion_reaction_id,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.postinfusion_reaction_id=e),options:D.value,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])])]),1===(null==(d=null==(n=e.patient)?void 0:n.last_visit)?void 0:d.donation_type_id)?(V(),$(W,{key:0},[st,B(_,{"form-state":U.value,"onUpdate:form-state":a[4]||(a[4]=e=>U.value=e),"container-list":j.value},null,8,["form-state","container-list"])],64)):Y("",!0),2===(null==(v=null==(r=e.patient)?void 0:r.last_visit)?void 0:v.donation_type_id)?(V(),$(W,{key:1},[ot,B(m,{"form-state":U.value,"onUpdate:form-state":a[5]||(a[5]=e=>U.value=e),"container-list":j.value},null,8,["form-state","container-list"])],64)):Y("",!0),3===(null==(h=null==(f=e.patient)?void 0:f.last_visit)?void 0:h.donation_type_id)?(V(),$(W,{key:2},[it,B(p,{"form-state":U.value,"onUpdate:form-state":a[6]||(a[6]=e=>U.value=e),"container-list":j.value},null,8,["form-state","container-list"])],64)):Y("",!0),z("div",nt,[z("h5",dt,L(l.$t("Component_Product_Transfer_Information")),1),z("div",rt,[z("div",ut,[z("label",ct,L(l.$t("Transferred")),1)]),z("div",_t,[z("div",mt,[z("div",pt,[B(c,{modelValue:U.value.sent_to,"onUpdate:modelValue":a[7]||(a[7]=e=>U.value.sent_to=e),options:[{value:"recycling",label:"на переработку"},{value:"sterility",label:"на контроль стерильности"}],placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","placeholder"])])])])])])]})),action:O((()=>[z("button",{class:"button is-info is-outlined",onClick:a[8]||(a[8]=e=>C.value=!0)},L(l.$t("Add_container")),1),B(v,{loading:x.value,onClick:M},null,8,["loading"])])),_:1},8,["open","title"]),B(h,{"is-open":C.value,"onUpdate:is-open":a[9]||(a[9]=e=>C.value=e),container:w.value,"onUpdate:list":I},null,8,["is-open","container"])],64)}}}),[["__scopeId","data-v-932d62e7"]]),ft=["onSubmit"],ht={class:"columns"},bt={class:"column"},yt={class:"help has-text-danger"},gt={class:"column"},Vt={class:"help has-text-danger"},$t={class:"column"},xt={class:"help has-text-danger"},Ut={class:"column is-3"},kt={class:"help has-text-danger"},zt={class:"navigation-buttons"},St={class:"buttons is-right"},jt=v({__name:"DonorsListFilterForm",props:{isLoading:{type:Boolean},errors:null,donationTypes:null},emits:["search","clearError","clearForm"],setup(e,{emit:l}){N(),E();const a=f({donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),t=h([]),s=h(!1);y(a,(e=>{e&&(s.value=Object.values(e).some((e=>!!e)))}),{deep:!0}),q((async()=>{t.value=await _e().then((e=>e.result))}));const o=async()=>{l("search",a)},i=async()=>{Object.assign(a,{donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),l("clearForm")};return(l,n)=>{const d=A("Multiselect"),c=_,p=m,v=u,f=ce,h=r,b=ue;return V(),T(b,null,{default:O((()=>[z("form",{onSubmit:J(o,["prevent"])},[z("div",ht,[z("div",bt,[B(p,{class:"is-curved-select",label:l.$t("Donor_categories")},{default:O((({id:s})=>[B(c,null,{default:O((()=>[B(d,{modelValue:k(a).donor_category_id,"onUpdate:modelValue":n[0]||(n[0]=e=>k(a).donor_category_id=e),attrs:{id:s},options:k(t),placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),z("p",yt,L(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),z("div",gt,[B(p,{class:"is-curved-select",label:l.$t("Visit_type")},{default:O((({id:t})=>[B(c,null,{default:O((()=>[B(d,{modelValue:k(a).visit_type,"onUpdate:modelValue":n[1]||(n[1]=e=>k(a).visit_type=e),attrs:{id:t},options:k(pe),placeholder:l.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),z("p",Vt,L(e.errors.visit_type[0]),1)])),_:2},1024)])),_:1},8,["label"])]),z("div",$t,[B(p,{class:"is-curved-select",label:l.$t("Donation_type")},{default:O((({id:t})=>[B(c,null,{default:O((()=>[B(d,{modelValue:k(a).donation_type_id,"onUpdate:modelValue":n[2]||(n[2]=e=>k(a).donation_type_id=e),attrs:{id:t},options:e.donationTypes,placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),z("p",xt,L(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),z("div",Ut,[B(p,{class:"is-curved-select",label:l.$t("Donation_code")},{default:O((({id:t})=>[B(c,null,{default:O((()=>[B(v,{modelValue:k(a).donation_code,"onUpdate:modelValue":n[3]||(n[3]=e=>k(a).donation_code=e),attrs:{id:t},placeholder:l.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),z("p",kt,L(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),z("div",zt,[z("div",St,[B(f,{disabled:e.isLoading||!k(s),onClear:i},null,8,["disabled"]),B(h,{loading:e.isLoading},{default:O((()=>[H(L(l.$t("Search")),1)])),_:1},8,["loading"])])])],40,ft)])),_:1})}}}),Dt=e=>(I("data-v-5b98dd49"),e=e(),P(),e),Ct={class:"page-content-inner"},wt={class:"columns mb-3"},Ft={class:"column"},Lt={class:"columns mt-1"},Bt={class:"column"},Ot={class:"columns"},Wt={class:"column is-12"},Mt=["textContent"],Tt={key:0,class:"flex-list-inner"},Ht={key:1,class:"flex-list-inner"},It=Dt((()=>z("img",{class:"light-image",src:de,alt:""},null,-1))),Pt=Dt((()=>z("img",{class:"dark-image",src:re,alt:""},null,-1))),At=["onClick"],Yt=Q(v({__name:"index",async setup(e){let l,a;K(),E();const{t:t}=N(),s=fe(),o=h(!1);he().setPageTitle(t("Donations")),G({title:`${t("Donors_for_donation")} - ${s.app.name}`});const i=f({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n={orderNumber:{format:(e,l,a)=>a+1},name:{label:t("Donor_fullname"),grow:!0},birth_date:{label:t("Date-of-birth")},visit_type:{label:t("Visit_type"),format:(e,l)=>{var a,s;return(null==(a=l.last_visit)?void 0:a.visit_type)&&t(null==(s=l.last_visit)?void 0:s.visit_type)}},visit_date:{label:t("Visit_date"),format:(e,l)=>{var a;return null==(a=rrow.last_visit)?void 0:a.created_at}},donation_type:{label:t("Donation_type"),format:(e,l)=>{var a,t;return null==(t=null==(a=l.last_visit)?void 0:a.donation_type)?void 0:t.name}},donation_code:{label:t("Donation_code"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.donation_code}},donor_category:{label:t("Donor_category"),format:(e,l)=>{var a;return null==(a=l.category)?void 0:a.name}}},d=f({donor_category_id:[],visit_type:[],donation_type_id:[],donation_code:[]}),r=f({visit_type_id:null,donation_type_id:null,donation_code:null,category_id:null}),u=h(null),c=h(!1),_=h([]);async function m(e){var l,a;try{o.value=!0,Object.assign(r,e);const l={...e,page:i.pagination.current_page},a=await me(l);Object.assign(i,a.result)}catch(t){Object.assign(d,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{o.value=!1}}function p(e){d[e]=""}async function v(){i.data=[]}return[l,a]=R((()=>m(r))),await l,a(),q((async function(){const e=await be();_.value=e.result})),y(c,(e=>{e||(u.value=null)})),y((()=>i.pagination.current_page),(async e=>{e&&await m(r)})),(e,l)=>{const a=ve,t=jt,r=oe,f=ae,h=ie,b=te,y=ne,g=se,x=vt;return V(),$("div",Ct,[z("div",wt,[z("div",Ft,[B(a,{"with-icons":"",separator:"bullet",items:[{label:k(s).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Donations")},{label:e.$t("Donors_for_donation")}]},null,8,["items"])])]),z("div",Lt,[z("div",Bt,[B(t,{"is-loading":k(o),"donation-types":k(_),errors:k(d),onSearch:m,onClearForm:v,onClearError:p},null,8,["is-loading","donation-types","errors"])])]),z("div",Ot,[z("div",Wt,[B(g,{columns:k(n),data:k(i).data,limit:k(i).pagination.per_page,total:k(i).pagination.total},{default:O((()=>[B(b,{rounded:"","no-header":!k(o)&&0===k(i).data.length},{"header-column":O((({column:l})=>["orderNumber"===l.key?(V(),$("span",{key:0,textContent:L(e.$t("Donor_#"))},null,8,Mt)):Y("",!0)])),body:O((()=>[k(o)?(V(),$("div",Tt,[(V(!0),$(W,null,M(k(i).pagination.per_page,(e=>(V(),$("div",{key:e,class:"flex-table-item"},[B(f,null,{default:O((()=>[B(r,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):Y("",!0),0===k(i).data.length?(V(),$("div",Ht,[B(h,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:O((()=>[It,Pt])),_:1},8,["title","subtitle"])])):Y("",!0)])),"body-cell":O((({row:e,column:l})=>["name"===l.key?(V(),$("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){u.value=e,c.value=!0}(e)},L(e.first_name)+" "+L(e.last_name)+" "+L(e.father_name),9,At)):Y("",!0)])),_:1},8,["no-header"]),k(i).data.length?(V(),T(y,{key:0,"current-page":k(i).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>k(i).pagination.current_page=e),class:"mt-5","item-per-page":k(i).pagination.per_page,"total-items":k(i).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):Y("",!0)])),_:1},8,["columns","data","limit","total"])])]),B(x,{"is-open":k(c),"onUpdate:is-open":l[1]||(l[1]=e=>w(c)?c.value=e:null),patient:k(u),"donation-types":k(_)},null,8,["is-open","patient","donation-types"])])}}}),[["__scopeId","data-v-5b98dd49"]]);export{Yt as default};
