import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang.667d5e4b.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import{f as l,_ as t,a as i,b as s}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang.a24d079c.js";import{_ as n,a as o}from"./VControl.a4292c49.js";import{q as r,G as d,H as _,C as u,x as c,r as p,A as m,W as b,j as v,o as y,a as g,w as f,e as h,m as z,k as V,t as k,d as j,F as w,l as x,g as $,i as P,E as C,J as I,c as U,ag as M,y as O,K as S,S as E,L as q,M as A}from"./index.5e313a07.js";import{u as T}from"./viewWrapper.74d08f31.js";import{_ as D}from"./VModal.vue_vue_type_style_index_0_lang.e01de1da.js";import{_ as F}from"./SubmitButton.vue_vue_type_script_setup_true_lang.ff8c9853.js";import{_ as N}from"./VCheckbox.vue_vue_type_style_index_0_lang.ec6d3c7e.js";import{_ as H}from"./VInput.vue_vue_type_script_setup_true_lang.132fca0f.js";import{_ as B}from"./VRadio.vue_vue_type_style_index_0_lang.188d102e.js";import{_ as R}from"./lodash.6f8ef5ec.js";import{n as G,o as W,q as J,v as K,r as L,p as Q,j as X,u as Y}from"./patient.83d02e12.js";import{_ as Z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.ee58e121.js";import{f as ee,g as ae,_ as le,a as te,b as ie,c as se,d as ne,e as oe}from"./search-7-dark.607cbb05.js";import{_ as re}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang.d04290de.js";import{_ as de}from"./VIcon.vue_vue_type_script_setup_true_lang.b6fc2eeb.js";import{_ as _e}from"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import{u as ue}from"./main.a14c778c.js";import{_ as ce}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VPlaceload.726b7e5d.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";import"./VTextarea.vue_vue_type_script_setup_true_lang.87140159.js";import"./VDropdown.vue_vue_type_style_index_0_lang.40103309.js";const pe=["onSubmit"],me={class:"help has-text-danger"},be=h("br",null,null,-1),ve={class:"help has-text-danger"},ye={class:"help has-text-danger"},ge={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},ke={class:"column is-6"},je=R.isEmpty,we=r({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const i=e,s=d(),r=_(),{t:C}=u(),I=c(C("Add")),U=(null==(t=s.params)?void 0:t.id)||null,M=c(!1),O=p({patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),S=c([{value:"gratuitous",label:C("Gratuitous")},{value:"chargeable",label:C("Chargeable")}]),E=c([{value:"medical_organization",label:C("Healthcare_facilities")},{value:"public_organization",label:C("Public_organizations")},{value:"independently",label:C("Independently")}]),q=c([]),A=p({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function T(){var e,l;try{M.value=!0,i.cardId?await W(i.cardId,O):await J(O),a("update:list"),r.success(C("Updated_successfully")),R()}catch(t){Object.assign(A,null==(l=null==(e=t.response)?void 0:e.data)?void 0:l.errors),r.error(t.message)}finally{M.value=!1}}function R(){I.value=C("Add"),Object.assign(O,{patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(A,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return m((async()=>{const e=await l();je(e.result)||(q.value=e.result)})),b((async()=>{if(Number(i.cardId)){I.value=C("Edit");const e=await G(Number(i.cardId),U);Object.assign(O,e.result)}})),(a,l)=>{const t=v("Multiselect"),i=n,s=o,r=B,d=H,_=N,u=F,c=D;return y(),g(c,{open:e.isOpen,size:"large",title:I.value,actions:"right",onClose:R},{content:f((()=>[h("form",{id:"visitcard-form",class:"modal-form",onSubmit:z(T,["prevent"])},[V(s,{label:a.$t("Visit_type"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[V(t,{modelValue:O.visit_type,"onUpdate:modelValue":l[0]||(l[0]=e=>O.visit_type=e),options:S.value,placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),h("p",me,k(A.visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,V(s,{label:a.$t("Directed_by"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[(y(!0),j(w,null,x(E.value,((e,a)=>(y(),g(r,{key:a,modelValue:O.directed_by,"onUpdate:modelValue":l[1]||(l[1]=e=>O.directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===O.directed_by?(y(),g(s,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[V(t,{modelValue:O.medical_organization_id,"onUpdate:modelValue":l[2]||(l[2]=e=>O.medical_organization_id=e),options:q.value,placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),h("p",ve,k(A.medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),"public_organization"===O.directed_by?(y(),g(s,{key:1,label:a.$t("Public_organization_title"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[V(d,{modelValue:O.public_organization,"onUpdate:modelValue":l[3]||(l[3]=e=>O.public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),h("p",ye,k(A.public_organization[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),h("div",ge,[h("div",fe,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[V(_,{modelValue:O.is_personalized_donation,"onUpdate:modelValue":l[4]||(l[4]=e=>O.is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("div",he,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[O.is_personalized_donation?(y(),g(d,{key:0,modelValue:O.personalized_donation,"onUpdate:modelValue":l[5]||(l[5]=e=>O.personalized_donation=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])]),h("div",ze,[h("div",Ve,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[V(_,{modelValue:O.is_mobile_team,"onUpdate:modelValue":l[6]||(l[6]=e=>O.is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("div",ke,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[O.is_mobile_team?(y(),g(d,{key:0,modelValue:O.mobile_team,"onUpdate:modelValue":l[7]||(l[7]=e=>O.mobile_team=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])])],40,pe)])),action:f((({close:e})=>[V(u,{loading:M.value,form:"visitcard-form"},{default:f((()=>[P(k(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),xe={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ce={key:0,class:"is-flex-grow-0",textContent:"#"},Ie={key:0,class:"flex-list-inner"},Ue={key:1,class:"flex-list-inner"},Me=h("img",{class:"light-image",src:ee,alt:""},null,-1),Oe=h("img",{class:"dark-image",src:ae,alt:""},null,-1),Se={key:0,class:"dark-text"},Ee={key:1,class:"dark-text"},qe={key:3},Ae={key:4},Te=r({__name:"PatientVisitCardTable",async setup(e){var l;let t,i;const s=d();C();const n=_(),{t:o}=u(),r=ue();T().setPageTitle(o("Patient_cards_list")),I({title:`${o("Patient_cards")} - ${r.app.name}`});const m=p({current_page:1,per_page:10,total:10,data:[]}),b=c(null),v=(null==(l=s.params)?void 0:l.id)||null,z=c(!1),q=U({get:()=>m.current_page,set:async e=>{await F(e)}}),A={orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:o("Visit_type")},directed_by:{label:o("Directed_by")},medical_organization:{label:o("Healthcare_facilities")},public_organization:{label:o("Public_organizations")},independently:{label:o("Independently")},is_personalized_donation:{label:o("Personalized_donation")},is_mobile_team:{label:o("Mobile_team")},actions:{label:"",align:"end"}},D=c(!1);async function F(e=1){try{D.value=!0;const a=await K(v,{page:e,per_page:m.per_page});Object.assign(m,a.result)}catch(a){n.error(o(a.message))}finally{D.value=!1}}function N(e){b.value=e,z.value=!0}async function H(){await L(v,b.value),F()}function B(){F(),b.value=null}return c(),[t,i]=M((()=>F())),await t,i(),O((()=>m.per_page),(async()=>{await F()})),(e,l)=>{const t=a,i=_e,s=le,n=te,o=ie,d=de,_=re,u=se,c=ne,p=oe,v=Z,C=we;return y(),j("div",xe,[V(i,null,{default:f((()=>[V(t,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:l[0]||(l[0]=e=>N(null))},{default:f((()=>[P(k(e.$t("Add")),1)])),_:1})])),_:1}),h("div",$e,[h("div",Pe,[V(p,{class:"mt-4",columns:S(A),data:m.data,limit:m.per_page,total:m.total},{default:f((()=>[V(u,{rounded:"","no-header":!D.value&&0===m.data.length},{"header-column":f((({column:e})=>["orderNumber"===e.key?(y(),j("span",Ce)):$("",!0)])),body:f((()=>[D.value?(y(),j("div",Ie,[(y(!0),j(w,null,x(m.per_page,(e=>(y(),j("div",{key:e,class:"flex-table-item"},[V(n,null,{default:f((()=>[V(s,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===m.data.length?(y(),j("div",Ue,[V(o,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:f((()=>[Me,Oe])),_:1})])):$("",!0)])),"body-cell":f((({row:a,column:l,value:t})=>["visit_type"===l.key?(y(),j("span",Se,k(e.$t(t)),1)):$("",!0),"directed_by"===l.key?(y(),j("span",Ee,k(e.$t(t)),1)):$("",!0),"independently"===l.key?(y(),j(w,{key:2},["independently"===a.directed_by?(y(),g(d,{key:0,class:"has-text-primary",icon:"feather:check"})):(y(),g(d,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):$("",!0),"is_personalized_donation"===l.key?(y(),j("span",qe,k(a.personalized_donation),1)):$("",!0),"is_mobile_team"===l.key?(y(),j("span",Ae,k(a.mobile_team),1)):$("",!0),"actions"===l.key?(y(),g(_,{key:5,onEdit:e=>N(a.id),onRemove:e=>async function(e){b.value=e,r.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),m.data.length?(y(),g(c,{key:0,"current-page":S(q),"onUpdate:current-page":l[1]||(l[1]=e=>E(q)?q.value=e:null),class:"mt-5","item-per-page":m.per_page,"total-items":m.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),V(v,{onConfirmAction:H}),V(C,{"is-open":z.value,"onUpdate:is-open":l[2]||(l[2]=e=>z.value=e),"card-id":b.value,"onUpdate:list":B,onClose:l[3]||(l[3]=e=>b.value=null)},null,8,["is-open","card-id"])])}}}),De={class:"patient-detail-wrapper"},Fe=["onSubmit"],Ne={class:"columns mt-5"},He={class:"column"},Be={class:"is-size-5"},Re=(e=>(q("data-v-848aa8e6"),e=e(),A(),e))((()=>h("br",null,null,-1))),Ge={class:"help has-text-danger"},We={class:"column"},Je={class:"is-size-5"},Ke={class:"column"},Le={class:"is-size-5"},Qe={class:"navigation-buttons"},Xe={class:"buttons is-right"},Ye={key:1,class:"mt-5"},Ze=ce(r({__name:"[id]",async setup(l){var r;let b,g;const w=d();C();const x=_(),{t:O}=u(),S=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:null,passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),E=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),q=c(!1),A=(null==(r=w.params)?void 0:r.id)||null,D=c([{label:O("Patient_details"),value:"#details",icon:"feather:info",to:`${w.path}#details`},{label:O("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${w.path}#patient_visit_cards`}]),F=c([]),N=c(w.hash||"#details");function H(e){E[e]=""}async function B(){var e,a;try{q.value=!0;await Y(A,S);x.success(O("Updated_successfully"))}catch(l){(null==(e=l.response)?void 0:e.data.errors)?Object.assign(E,null==(a=l.response)?void 0:a.data.errors):x.error(O("Something_went_wrong"))}finally{q.value=!1}}return T().setPageTitle(O("Patient_info")),I({title:U((()=>O("Patient_info")))}),[b,g]=M((()=>async function(){try{const e=await X(A);Object.assign(S,e.result)}catch(e){x.error(e.message)}}())),await b,g(),m((async()=>{const e=await Q();F.value=e.result})),(l,r)=>{const d=t,_=v("Multiselect"),u=n,c=o,p=i,m=s,b=a,g=e;return y(),j("div",De,[V(g,{selected:N.value,tabs:D.value},{tab:f((({activeValue:e})=>["#details"===e?(y(),j("form",{key:0,onSubmit:z(B,["prevent"])},[h("div",Ne,[h("div",He,[h("p",Be,k(l.$t("Personal_Info")),1),V(d,{patient:S,errors:E,onEditing:H},null,8,["patient","errors"]),Re,V(c,{label:l.$t("Category"),required:""},{default:f((()=>[V(u,null,{default:f((()=>[V(_,{modelValue:S.patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>S.patient_category_id=e),options:F.value,placeholder:l.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),h("p",Ge,k(E.patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),h("div",We,[h("p",Je,k(l.$t("Passport_info")),1),V(p,{patient:S,errors:E,onEditing:H},null,8,["patient","errors"])]),h("div",Ke,[h("p",Le,k(l.$t("Address")),1),V(m,{patient:S,errors:E,onEditing:H},null,8,["patient","errors"])])]),h("div",Qe,[h("div",Xe,[V(b,{type:"submit",color:"primary",bold:"",loading:q.value,disabled:q.value,tabindex:"0"},{default:f((()=>[P(k(l.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Fe)):"#patient_visit_cards"===e?(y(),j("div",Ye,[V(Te)])):$("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-848aa8e6"]]);export{Ze as default};
