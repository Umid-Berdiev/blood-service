import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-8bb94b98.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-6deaaf11.js";import{_ as t,a as l,b as i}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-0146a9fd.js";import{_ as n,a as o}from"./VControl-c4bfd6d4.js";import{q as s,G as r,H as _,C as d,x as u,r as p,A as c,W as m,j as b,o as y,a as v,w as g,e as f,m as h,k as z,K as V,t as k,d as x,F as j,l as w,g as $,i as P,E as C,J as I,c as U,ag as O,y as M,U as S,L as E,M as T}from"./index-c5546e3f.js";import{u as A}from"./viewWrapper-911093a6.js";import{_ as q}from"./VModal.vue_vue_type_style_index_0_lang-52241399.js";import{_ as D}from"./SubmitButton.vue_vue_type_script_setup_true_lang-9075dd9c.js";import{_ as F}from"./VCheckbox.vue_vue_type_style_index_0_lang-494fdb99.js";import{_ as N}from"./VInput.vue_vue_type_script_setup_true_lang-fcf9b43c.js";import{_ as B}from"./VRadio.vue_vue_type_style_index_0_lang-39e5fd57.js";import{_ as H}from"./lodash-5582d964.js";import{b as R,u as G,c as W,v as J,r as K}from"./index-a1a3008c.js";import{a as L}from"./additional-2c3a91bb.js";import{_ as Z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-6a39ce1b.js";import{_ as Q,a as X,b as Y}from"./VFlexTable.vue_vue_type_style_index_0_lang-0fb083a3.js";import{b as ee,c as ae,_ as te,d as le,a as ie}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-1679fcf5.js";import{_ as ne}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-e1cccfb6.js";import{_ as oe}from"./VIcon.vue_vue_type_script_setup_true_lang-82fecaaf.js";import{_ as se}from"./VFlex.vue_vue_type_style_index_0_lang-84415715.js";import{u as re}from"./main-94385ff1.js";import{p as _e,h as de,u as ue}from"./patient-9225403a.js";import{_ as pe}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VIMaskInput.vue_vue_type_script_lang-4a69d6df.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-5e0ed005.js";import"./ClientOnly.vue_vue_type_script_lang-fed4a332.js";import"./VDropdown.vue_vue_type_style_index_0_lang-8fce14c5.js";const ce=["onSubmit"],me={class:"help has-text-danger"},be=f("br",null,null,-1),ye={class:"help has-text-danger"},ve={class:"help has-text-danger"},ge={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},ke={class:"column is-6"},xe=H.isEmpty,je=s({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const l=e,i=r(),s=_(),{t:C}=d(),I=u(C("Add")),U=(null==(t=i.params)?void 0:t.id)||null,O=u(!1),M=p({patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),S=u([{value:"gratuitous",label:C("Gratuitous")},{value:"chargeable",label:C("Chargeable")}]),E=u([{value:"medical_organization",label:C("Healthcare_facilities")},{value:"public_organization",label:C("Public_organizations")},{value:"independently",label:C("Independently")}]),T=u([]),A=p({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function H(){var e,t;try{O.value=!0,l.cardId?await G(l.cardId,M):await W(M),a("update:list"),s.success(C("Updated_successfully")),J()}catch(i){Object.assign(A,null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors),s.error(i.message)}finally{O.value=!1}}function J(){I.value=C("Add"),Object.assign(M,{patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(A,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return c((async()=>{const e=await L();xe(e.result)||(T.value=e.result)})),m((async()=>{if(Number(l.cardId)){I.value=C("Edit");const{result:e}=await R(Number(l.cardId),U);Object.assign(M,{patient_id:e.patient_id,visit_type:e.visit_type,directed_by:e.directed_by,medical_organization_id:e.medical_organization_id,public_organization:e.public_organization,is_personalized_donation:e.is_personalized_donation,is_mobile_team:e.is_mobile_team,personalized_donation:e.personalized_donation,mobile_team:e.mobile_team})}})),(a,t)=>{const l=b("Multiselect"),i=n,s=o,r=B,_=N,d=F,u=D,p=q;return y(),v(p,{open:e.isOpen,size:"large",title:V(I),actions:"right",onClose:J},{content:g((()=>[f("form",{id:"visitcard-form",class:"modal-form",onSubmit:h(H,["prevent"])},[z(s,{label:a.$t("Visit_type"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(l,{modelValue:V(M).visit_type,"onUpdate:modelValue":t[0]||(t[0]=e=>V(M).visit_type=e),options:V(S),placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),f("p",me,k(V(A).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,z(s,{label:a.$t("Directed_by"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[(y(!0),x(j,null,w(V(E),((e,a)=>(y(),v(r,{key:a,modelValue:V(M).directed_by,"onUpdate:modelValue":t[1]||(t[1]=e=>V(M).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===V(M).directed_by?(y(),v(s,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(l,{modelValue:V(M).medical_organization_id,"onUpdate:modelValue":t[2]||(t[2]=e=>V(M).medical_organization_id=e),options:V(T),placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",ye,k(V(A).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),"public_organization"===V(M).directed_by?(y(),v(s,{key:1,label:a.$t("Public_organization_title"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(_,{modelValue:V(M).public_organization,"onUpdate:modelValue":t[3]||(t[3]=e=>V(M).public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),f("p",ve,k(V(A).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),f("div",ge,[f("div",fe,[z(s,null,{default:g((()=>[z(i,null,{default:g((()=>[z(d,{modelValue:V(M).is_personalized_donation,"onUpdate:modelValue":t[4]||(t[4]=e=>V(M).is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",he,[z(s,null,{default:g((()=>[z(i,null,{default:g((()=>[V(M).is_personalized_donation?(y(),v(_,{key:0,modelValue:V(M).personalized_donation,"onUpdate:modelValue":t[5]||(t[5]=e=>V(M).personalized_donation=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])]),f("div",ze,[f("div",Ve,[z(s,null,{default:g((()=>[z(i,null,{default:g((()=>[z(d,{modelValue:V(M).is_mobile_team,"onUpdate:modelValue":t[6]||(t[6]=e=>V(M).is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",ke,[z(s,null,{default:g((()=>[z(i,null,{default:g((()=>[V(M).is_mobile_team?(y(),v(_,{key:0,modelValue:V(M).mobile_team,"onUpdate:modelValue":t[7]||(t[7]=e=>V(M).mobile_team=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])])],40,ce)])),action:g((({close:e})=>[z(u,{loading:V(O),form:"visitcard-form"},{default:g((()=>[P(k(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),we={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ce={key:0,class:"is-flex-grow-0",textContent:"#"},Ie={key:0,class:"flex-list-inner"},Ue={key:1,class:"flex-list-inner"},Oe=f("img",{class:"light-image",src:ee,alt:""},null,-1),Me=f("img",{class:"dark-image",src:ae,alt:""},null,-1),Se={key:0,class:"dark-text"},Ee={key:1,class:"dark-text"},Te={key:3},Ae={key:4},qe=s({__name:"PatientVisitCardTable",async setup(e){var t;let l,i;const n=r();C();const o=_(),{t:s}=d(),c=re();A().setPageTitle(s("Patient_cards_list")),I({title:`${s("Patient_cards")} - ${c.app.name}`});const m=p({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),b=u(null),h=(null==(t=n.params)?void 0:t.id)||null,E=u(!1),T=U({get:()=>m.pagination.current_page,set:async e=>{await F(e)}}),q={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:s("Visit_type")},directed_by:{label:s("Directed_by")},medical_organization:{label:s("Healthcare_facilities")},public_organization:{label:s("Public_organizations")},independently:{label:s("Independently"),align:"center"},is_personalized_donation:{label:s("Personalized_donation")},is_mobile_team:{label:s("Mobile_team")},actions:{label:"",align:"end"}},D=u(!1);async function F(e=1){try{D.value=!0;const a=await J(h,{page:e,per_page:m.per_page});Object.assign(m,a.result)}catch(a){o.error(s(a.message))}finally{D.value=!1}}function N(e){b.value=e,E.value=!0}async function B(){await K(h,b.value),F()}function H(){F(),b.value=null}return[l,i]=O((()=>F())),await l,i(),M((()=>m.per_page),(async()=>{await F()})),(e,t)=>{const l=a,i=se,n=te,o=Q,s=le,r=oe,_=ne,d=X,u=ie,p=Y,h=Z,C=je;return y(),x("div",we,[z(i,null,{default:g((()=>[z(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>N(null))},{default:g((()=>[P(k(e.$t("Add")),1)])),_:1})])),_:1}),f("div",$e,[f("div",Pe,[z(p,{class:"mt-4",columns:V(q),data:V(m).data,limit:V(m).per_page,total:V(m).total},{default:g((()=>[z(d,{rounded:"","no-header":!V(D)&&0===V(m).data.length},{"header-column":g((({column:e})=>["orderNumber"===e.key?(y(),x("span",Ce)):$("",!0)])),body:g((()=>[V(D)?(y(),x("div",Ie,[(y(!0),x(j,null,w(V(m).per_page,(e=>(y(),x("div",{key:e,class:"flex-table-item"},[z(o,null,{default:g((()=>[z(n,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===V(m).data.length?(y(),x("div",Ue,[z(s,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:g((()=>[Oe,Me])),_:1},8,["title","subtitle"])])):$("",!0)])),"body-cell":g((({row:a,column:t,value:l})=>["visit_type"===t.key?(y(),x("span",Se,k(e.$t(l)),1)):$("",!0),"directed_by"===t.key?(y(),x("span",Ee,k(e.$t(l)),1)):$("",!0),"independently"===t.key?(y(),x(j,{key:2},["independently"===a.directed_by?(y(),v(r,{key:0,class:"has-text-primary",icon:"feather:check"})):(y(),v(r,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):$("",!0),"is_personalized_donation"===t.key?(y(),x("span",Te,k(a.personalized_donation),1)):$("",!0),"is_mobile_team"===t.key?(y(),x("span",Ae,k(a.mobile_team),1)):$("",!0),"actions"===t.key?(y(),v(_,{key:5,onEdit:e=>N(a.id),onRemove:e=>async function(e){b.value=e,c.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),V(m).data.length?(y(),v(u,{key:0,"current-page":V(T),"onUpdate:current-page":t[1]||(t[1]=e=>S(T)?T.value=e:null),class:"mt-5","item-per-page":V(m).per_page,"total-items":V(m).total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),z(h,{onConfirmAction:B}),z(C,{"is-open":V(E),"onUpdate:is-open":t[2]||(t[2]=e=>S(E)?E.value=e:null),"card-id":V(b),"onUpdate:list":H,onClose:t[3]||(t[3]=e=>b.value=null)},null,8,["is-open","card-id"])])}}}),De={class:"patient-detail-wrapper"},Fe=["onSubmit"],Ne={class:"columns mt-5"},Be={class:"column"},He={class:"is-size-5"},Re=(e=>(E("data-v-8a0a7f7f"),e=e(),T(),e))((()=>f("br",null,null,-1))),Ge={class:"help has-text-danger"},We={class:"column"},Je={class:"is-size-5"},Ke={class:"column"},Le={class:"is-size-5"},Ze={class:"navigation-buttons"},Qe={class:"buttons is-right"},Xe={key:1,class:"mt-5"},Ye=pe(s({__name:"[id]",async setup(s){var m;let v,j;const w=r();C();const M=_(),{t:S}=d(),E=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),T=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),q=u(!1),D=(null==(m=w.params)?void 0:m.id)||null,F=u([{label:S("Patient_details"),value:"#details",icon:"feather:info",to:`${w.path}#details`},{label:S("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${w.path}#patient_visit_cards`}]),N=u([]),B=u(w.hash||"#details");function H(e){T[e]=""}async function R(){var e,a;try{q.value=!0;await ue(D,E);M.success(S("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(T,null==(a=t.response)?void 0:a.data.errors):M.error(S("Something_went_wrong"))}finally{q.value=!1}}return A().setPageTitle(S("Patient_info")),I({title:U((()=>S("Patient_info")))}),[v,j]=O((()=>async function(){try{const e=await de(D);Object.assign(E,e.result),E.pinfl??(E.pinfl=""),E.phone_home??(E.phone_home=""),E.phone_number??(E.phone_number=""),E.phone_work??(E.phone_work="")}catch(e){M.error(e.message)}}())),await v,j(),c((async()=>{const e=await _e();N.value=e.result})),(s,r)=>{const _=t,d=b("Multiselect"),u=n,p=o,c=l,m=i,v=a,j=e;return y(),x("div",De,[z(j,{selected:V(B),tabs:V(F)},{tab:g((({activeValue:e})=>["#details"===e?(y(),x("form",{key:0,onSubmit:h(R,["prevent"])},[f("div",Ne,[f("div",Be,[f("p",He,k(s.$t("Personal_Info")),1),z(_,{patient:V(E),errors:V(T),onEditing:H},null,8,["patient","errors"]),Re,z(p,{label:s.$t("Category"),required:""},{default:g((()=>[z(u,null,{default:g((()=>[z(d,{modelValue:V(E).patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(E).patient_category_id=e),options:V(N),placeholder:s.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",Ge,k(V(T).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),f("div",We,[f("p",Je,k(s.$t("Passport_info")),1),z(c,{patient:V(E),errors:V(T),onEditing:H},null,8,["patient","errors"])]),f("div",Ke,[f("p",Le,k(s.$t("Address")),1),z(m,{patient:V(E),errors:V(T),onEditing:H},null,8,["patient","errors"])])]),f("div",Ze,[f("div",Qe,[z(v,{type:"submit",color:"primary",bold:"",loading:V(q),disabled:V(q),tabindex:"0"},{default:g((()=>[P(k(s.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Fe)):"#patient_visit_cards"===e?(y(),x("div",Xe,[z(qe)])):$("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-8a0a7f7f"]]);export{Ye as default};
