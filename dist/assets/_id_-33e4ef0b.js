import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-12a2d2cd.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-b78df6f3.js";import{_ as t,a as l,b as i}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-73fda077.js";import{_ as n,a as s}from"./VControl-e7b2630d.js";import{q as o,G as r,H as _,C as d,x as u,r as p,A as c,W as m,j as b,o as y,a as v,w as g,e as f,m as h,k as z,K as V,t as k,d as j,F as w,l as x,g as $,i as P,E as C,J as U,c as I,af as O,y as M,U as S,L as E,M as A}from"./index-21286bdb.js";import{u as T}from"./viewWrapper-6ae5f61c.js";import{_ as q}from"./VModal.vue_vue_type_style_index_0_lang-ac88dda5.js";import{_ as D}from"./SubmitButton.vue_vue_type_script_setup_true_lang-96021f2c.js";import{_ as F}from"./VCheckbox.vue_vue_type_style_index_0_lang-d46d394c.js";import{_ as N}from"./VInput.vue_vue_type_script_setup_true_lang-9c010bca.js";import{_ as H}from"./VRadio.vue_vue_type_style_index_0_lang-136dcf40.js";import{_ as B}from"./lodash-724857a3.js";import{b as G,u as R,c as W,v as J,r as K}from"./index-4eb52e74.js";import{a as L}from"./additional-f442439b.js";import{_ as Z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-13822492.js";import{_ as Q,a as X,b as Y}from"./VFlexTable.vue_vue_type_style_index_0_lang-03a54f1c.js";import{c as ee,d as ae,_ as te,a as le,b as ie}from"./search-7-dark-81286176.js";import{_ as ne}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-928e63ba.js";import{_ as se}from"./VIcon.vue_vue_type_script_setup_true_lang-8c9e63cc.js";import{_ as oe}from"./VFlex.vue_vue_type_style_index_0_lang-57370b27.js";import{u as re}from"./main-16751c88.js";import{p as _e,h as de,u as ue}from"./patient-26cab0f6.js";import{_ as pe}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VIMaskInput.vue_vue_type_script_lang-50284b9a.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-736b6c44.js";import"./ClientOnly.vue_vue_type_script_lang-52200b90.js";import"./VDropdown.vue_vue_type_style_index_0_lang-90044cf3.js";const ce=["onSubmit"],me={class:"help has-text-danger"},be=f("br",null,null,-1),ye={class:"help has-text-danger"},ve={class:"help has-text-danger"},ge={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},ke={class:"column is-6"},je=B.isEmpty,we=o({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const l=e,i=r(),o=_(),{t:C}=d(),U=u(C("Add")),I=(null==(t=i.params)?void 0:t.id)||null,O=u(!1),M=p({patient_id:I,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),S=u([{value:"gratuitous",label:C("Gratuitous")},{value:"chargeable",label:C("Chargeable")}]),E=u([{value:"medical_organization",label:C("Healthcare_facilities")},{value:"public_organization",label:C("Public_organizations")},{value:"independently",label:C("Independently")}]),A=u([]),T=p({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function B(){var e,t;try{O.value=!0,l.cardId?await R(l.cardId,M):await W(M),a("update:list"),o.success(C("Updated_successfully")),J()}catch(i){Object.assign(T,null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors),o.error(i.message)}finally{O.value=!1}}function J(){U.value=C("Add"),Object.assign(M,{patient_id:I,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(T,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return c((async()=>{const e=await L();je(e.result)||(A.value=e.result)})),m((async()=>{if(Number(l.cardId)){U.value=C("Edit");const{result:e}=await G(Number(l.cardId),I);Object.assign(M,{patient_id:e.patient_id,visit_type:e.visit_type,directed_by:e.directed_by,medical_organization_id:e.medical_organization_id,public_organization:e.public_organization,is_personalized_donation:e.is_personalized_donation,is_mobile_team:e.is_mobile_team,personalized_donation:e.personalized_donation,mobile_team:e.mobile_team})}})),(a,t)=>{const l=b("Multiselect"),i=n,o=s,r=H,_=N,d=F,u=D,p=q;return y(),v(p,{open:e.isOpen,size:"large",title:V(U),actions:"right",onClose:J},{content:g((()=>[f("form",{id:"visitcard-form",class:"modal-form",onSubmit:h(B,["prevent"])},[z(o,{label:a.$t("Visit_type"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(l,{modelValue:V(M).visit_type,"onUpdate:modelValue":t[0]||(t[0]=e=>V(M).visit_type=e),options:V(S),placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),f("p",me,k(V(T).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,z(o,{label:a.$t("Directed_by"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[(y(!0),j(w,null,x(V(E),((e,a)=>(y(),v(r,{key:a,modelValue:V(M).directed_by,"onUpdate:modelValue":t[1]||(t[1]=e=>V(M).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===V(M).directed_by?(y(),v(o,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(l,{modelValue:V(M).medical_organization_id,"onUpdate:modelValue":t[2]||(t[2]=e=>V(M).medical_organization_id=e),options:V(A),placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",ye,k(V(T).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),"public_organization"===V(M).directed_by?(y(),v(o,{key:1,label:a.$t("Public_organization_title"),required:""},{default:g((()=>[z(i,null,{default:g((()=>[z(_,{modelValue:V(M).public_organization,"onUpdate:modelValue":t[3]||(t[3]=e=>V(M).public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),f("p",ve,k(V(T).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),f("div",ge,[f("div",fe,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[z(d,{modelValue:V(M).is_personalized_donation,"onUpdate:modelValue":t[4]||(t[4]=e=>V(M).is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",he,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[V(M).is_personalized_donation?(y(),v(_,{key:0,modelValue:V(M).personalized_donation,"onUpdate:modelValue":t[5]||(t[5]=e=>V(M).personalized_donation=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])]),f("div",ze,[f("div",Ve,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[z(d,{modelValue:V(M).is_mobile_team,"onUpdate:modelValue":t[6]||(t[6]=e=>V(M).is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",ke,[z(o,null,{default:g((()=>[z(i,null,{default:g((()=>[V(M).is_mobile_team?(y(),v(_,{key:0,modelValue:V(M).mobile_team,"onUpdate:modelValue":t[7]||(t[7]=e=>V(M).mobile_team=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])])],40,ce)])),action:g((({close:e})=>[z(u,{loading:V(O),form:"visitcard-form"},{default:g((()=>[P(k(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),xe={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ce={key:0,class:"is-flex-grow-0",textContent:"#"},Ue={key:0,class:"flex-list-inner"},Ie={key:1,class:"flex-list-inner"},Oe=f("img",{class:"light-image",src:ee,alt:""},null,-1),Me=f("img",{class:"dark-image",src:ae,alt:""},null,-1),Se={key:0,class:"dark-text"},Ee={key:1,class:"dark-text"},Ae={key:3},Te={key:4},qe=o({__name:"PatientVisitCardTable",async setup(e){var t;let l,i;const n=r();C();const s=_(),{t:o}=d(),c=re();T().setPageTitle(o("Patient_cards_list")),U({title:`${o("Patient_cards")} - ${c.app.name}`});const m=p({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),b=u(null),h=(null==(t=n.params)?void 0:t.id)||null,E=u(!1),A=I({get:()=>m.pagination.current_page,set:async e=>{await F(e)}}),q={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:o("Visit_type")},directed_by:{label:o("Directed_by")},medical_organization:{label:o("Healthcare_facilities")},public_organization:{label:o("Public_organizations")},independently:{label:o("Independently"),align:"center"},is_personalized_donation:{label:o("Personalized_donation")},is_mobile_team:{label:o("Mobile_team")},actions:{label:"",align:"end"}},D=u(!1);async function F(e=1){try{D.value=!0;const a=await J(h,{page:e,per_page:m.per_page});Object.assign(m,a.result)}catch(a){s.error(o(a.message))}finally{D.value=!1}}function N(e){b.value=e,E.value=!0}async function H(){await K(h,b.value),F()}function B(){F(),b.value=null}return[l,i]=O((()=>F())),await l,i(),M((()=>m.per_page),(async()=>{await F()})),(e,t)=>{const l=a,i=oe,n=te,s=Q,o=le,r=se,_=ne,d=X,u=ie,p=Y,h=Z,C=we;return y(),j("div",xe,[z(i,null,{default:g((()=>[z(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>N(null))},{default:g((()=>[P(k(e.$t("Add")),1)])),_:1})])),_:1}),f("div",$e,[f("div",Pe,[z(p,{class:"mt-4",columns:V(q),data:V(m).data,limit:V(m).per_page,total:V(m).total},{default:g((()=>[z(d,{rounded:"","no-header":!V(D)&&0===V(m).data.length},{"header-column":g((({column:e})=>["orderNumber"===e.key?(y(),j("span",Ce)):$("",!0)])),body:g((()=>[V(D)?(y(),j("div",Ue,[(y(!0),j(w,null,x(V(m).per_page,(e=>(y(),j("div",{key:e,class:"flex-table-item"},[z(s,null,{default:g((()=>[z(n,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===V(m).data.length?(y(),j("div",Ie,[z(o,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:g((()=>[Oe,Me])),_:1},8,["title","subtitle"])])):$("",!0)])),"body-cell":g((({row:a,column:t,value:l})=>["visit_type"===t.key?(y(),j("span",Se,k(e.$t(l)),1)):$("",!0),"directed_by"===t.key?(y(),j("span",Ee,k(e.$t(l)),1)):$("",!0),"independently"===t.key?(y(),j(w,{key:2},["independently"===a.directed_by?(y(),v(r,{key:0,class:"has-text-primary",icon:"feather:check"})):(y(),v(r,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):$("",!0),"is_personalized_donation"===t.key?(y(),j("span",Ae,k(a.personalized_donation),1)):$("",!0),"is_mobile_team"===t.key?(y(),j("span",Te,k(a.mobile_team),1)):$("",!0),"actions"===t.key?(y(),v(_,{key:5,onEdit:e=>N(a.id),onRemove:e=>async function(e){b.value=e,c.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),V(m).data.length?(y(),v(u,{key:0,"current-page":V(A),"onUpdate:current-page":t[1]||(t[1]=e=>S(A)?A.value=e:null),class:"mt-5","item-per-page":V(m).per_page,"total-items":V(m).total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),z(h,{onConfirmAction:H}),z(C,{"is-open":V(E),"onUpdate:is-open":t[2]||(t[2]=e=>S(E)?E.value=e:null),"card-id":V(b),"onUpdate:list":B,onClose:t[3]||(t[3]=e=>b.value=null)},null,8,["is-open","card-id"])])}}}),De={class:"patient-detail-wrapper"},Fe=["onSubmit"],Ne={class:"columns mt-5"},He={class:"column"},Be={class:"is-size-5"},Ge=(e=>(E("data-v-8a0a7f7f"),e=e(),A(),e))((()=>f("br",null,null,-1))),Re={class:"help has-text-danger"},We={class:"column"},Je={class:"is-size-5"},Ke={class:"column"},Le={class:"is-size-5"},Ze={class:"navigation-buttons"},Qe={class:"buttons is-right"},Xe={key:1,class:"mt-5"},Ye=pe(o({__name:"[id]",async setup(o){var m;let v,w;const x=r();C();const M=_(),{t:S}=d(),E=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),A=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),q=u(!1),D=(null==(m=x.params)?void 0:m.id)||null,F=u([{label:S("Patient_details"),value:"#details",icon:"feather:info",to:`${x.path}#details`},{label:S("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${x.path}#patient_visit_cards`}]),N=u([]),H=u(x.hash||"#details");function B(e){A[e]=""}async function G(){var e,a;try{q.value=!0;await ue(D,E);M.success(S("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(A,null==(a=t.response)?void 0:a.data.errors):M.error(S("Something_went_wrong"))}finally{q.value=!1}}return T().setPageTitle(S("Patient_info")),U({title:I((()=>S("Patient_info")))}),[v,w]=O((()=>async function(){try{const e=await de(D);Object.assign(E,e.result),E.pinfl??(E.pinfl=""),E.phone_home??(E.phone_home=""),E.phone_number??(E.phone_number=""),E.phone_work??(E.phone_work="")}catch(e){M.error(e.message)}}())),await v,w(),c((async()=>{const e=await _e();N.value=e.result})),(o,r)=>{const _=t,d=b("Multiselect"),u=n,p=s,c=l,m=i,v=a,w=e;return y(),j("div",De,[z(w,{selected:V(H),tabs:V(F)},{tab:g((({activeValue:e})=>["#details"===e?(y(),j("form",{key:0,onSubmit:h(G,["prevent"])},[f("div",Ne,[f("div",He,[f("p",Be,k(o.$t("Personal_Info")),1),z(_,{patient:V(E),errors:V(A),onEditing:B},null,8,["patient","errors"]),Ge,z(p,{label:o.$t("Category"),required:""},{default:g((()=>[z(u,null,{default:g((()=>[z(d,{modelValue:V(E).patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(E).patient_category_id=e),options:V(N),placeholder:o.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",Re,k(V(A).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),f("div",We,[f("p",Je,k(o.$t("Passport_info")),1),z(c,{patient:V(E),errors:V(A),onEditing:B},null,8,["patient","errors"])]),f("div",Ke,[f("p",Le,k(o.$t("Address")),1),z(m,{patient:V(E),errors:V(A),onEditing:B},null,8,["patient","errors"])])]),f("div",Ze,[f("div",Qe,[z(v,{type:"submit",color:"primary",bold:"",loading:V(q),disabled:V(q),tabindex:"0"},{default:g((()=>[P(k(o.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Fe)):"#patient_visit_cards"===e?(y(),j("div",Xe,[z(qe)])):$("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-8a0a7f7f"]]);export{Ye as default};
