import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-52241399.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-9075dd9c.js";import{q as a,N as t,K as n,c as o,o as s,d as i,b as d,H as u,C as r,x as c,r as p,A as _,a as m,w as v,k as f,i as y,t as b,y as h,j as g,e as V,$ as w,aj as $,F as x,l as k,g as C,L as U,M as j,m as S,p as O,ak as z,a6 as M,G as R,E as I,W as q,ag as D,J as P,U as E}from"./index-c5546e3f.js";import{b as W,_ as F,a as B}from"./VControl-c4bfd6d4.js";import{_ as T}from"./VInput.vue_vue_type_script_setup_true_lang-fcf9b43c.js";import{s as A,f as Y,c as L,d as N,e as G,g as H,p as J,h as K,u as Q}from"./patient-9225403a.js";import{_ as Z}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as X}from"./VCheckbox.vue_vue_type_style_index_0_lang-494fdb99.js";import{_ as ee}from"./VFlex.vue_vue_type_style_index_0_lang-84415715.js";import{_ as le}from"./lodash-5582d964.js";import{_ as ae}from"./VFlexItem.vue_vue_type_style_index_0_lang-919d6b99.js";import{f as te,b as ne,c as oe}from"./additional-2c3a91bb.js";import{_ as se}from"./VTextarea.vue_vue_type_script_setup_true_lang-5e0ed005.js";import{_ as ie}from"./ClientOnly.vue_vue_type_script_lang-fed4a332.js";import{_ as de}from"./VRadio.vue_vue_type_style_index_0_lang-39e5fd57.js";import{m as ue}from"./moment-6d6279b4.js";import{_ as re}from"./VButtons.vue_vue_type_script_setup_true_lang-a27f5b4d.js";import{_ as ce}from"./VButton.vue_vue_type_style_index_0_lang-6deaaf11.js";import{_ as pe}from"./VIMaskInput.vue_vue_type_script_lang-4a69d6df.js";import{_ as _e}from"./VTabs.vue_vue_type_script_setup_true_lang-8bb94b98.js";import{_ as me,a as ve,b as fe}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-0146a9fd.js";import{u as ye}from"./viewWrapper-911093a6.js";import"./VIcon.vue_vue_type_script_setup_true_lang-82fecaaf.js";const be={class:"v-grid"},he=a({__name:"VGrid",props:{inline:{type:Boolean},gridTemplateColumns:{default:"none"},gridTemplateRows:{default:"none"},gridTemplateAreas:{default:"none"},columnGap:{default:"normal"},rowGap:{default:"normal"},justifyItems:{default:"initial"},alignItems:{default:"initial"},justifyContent:{default:"initial"},alignContent:{default:"initial"},placeContent:{default:"normal"},gridAutoColumns:{default:"auto"},gridAutoRows:{default:"auto"},gridAutoFlow:{default:"row"}},setup(e){const l=e;t((e=>({c9233fce:n(a),41529814:l.gridTemplateColumns,"4ac08460":l.gridTemplateRows,"0c618fdf":l.gridTemplateAreas,"9bbce60e":l.columnGap,"641aebe3":l.rowGap,"28966b17":l.justifyItems,"5f95d4fc":l.alignItems,"173c3e10":l.justifyContent,"51d9f9bb":l.alignContent,"2afad179":l.placeContent,"3c8fbea1":l.gridAutoColumns,"5b7c7195":l.gridAutoRows,"5b76f0ea":l.gridAutoFlow})));const a=o((()=>l.inline?"inline-grid":"grid"));return(e,l)=>(s(),i("div",be,[d(e.$slots,"default")]))}}),ge={class:"v-grid-item"},Ve=a({__name:"VGridItem",props:{gridColumnStart:{default:"auto"},gridColumnEnd:{default:"auto"},gridRowStart:{default:"auto"},gridRowEnd:{default:"auto"},justifySelf:{default:"auto"},alignSelf:{default:"auto"},placeSelf:{default:"auto"}},setup(e){const l=e;return t((e=>({"1401e278":l.gridColumnStart,"2b6903bd":l.gridColumnEnd,41478190:l.gridRowStart,"0387b989":l.gridRowEnd,"032f283a":l.justifySelf,dd16eca2:l.alignSelf,da1a0a9e:l.placeSelf}))),(e,l)=>(s(),i("div",ge,[d(e.$slots,"default")]))}}),we=Z(a({__name:"DirectionForDonationModal",props:{isOpen:{type:Boolean,default:!1},visitcard:null},emits:["update:isOpen","submit"],setup(a,{emit:t}){const o=a,i=u(),{t:d}=r(),h=c(!1),g=c(d("Direction_for_donation")),V=p({donation_code:null,recommended_blood_capacity:""}),w=p({donation_code:[],recommended_blood_capacity:[]});async function $(){var e,l,a;try{h.value=!0,await A(null==(e=o.visitcard)?void 0:e.id,V),i.success(d("Data_saved_successfully")),x()}catch(t){i.error(t.message),Object.assign(w,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{h.value=!1}}function x(){t("update:isOpen",!1)}return _((()=>{var e;V.donation_code=null==(e=o.visitcard)?void 0:e.donation_code})),(t,o)=>{const i=W,d=T,u=F,r=B,c=Ve,p=he,_=l,w=e;return s(),m(w,{open:a.isOpen,title:n(g),actions:"right",onClose:x},{content:v((()=>[f(p,{"row-gap":"1rem"},{default:v((()=>[f(c,null,{default:v((()=>[f(r,{horizontal:""},{default:v((()=>[f(i,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_code")),1)])),_:1}),f(u,{class:"ml-auto"},{default:v((()=>[f(d,{value:n(V).donation_code},null,8,["value"])])),_:1})])),_:1})])),_:1}),f(c,null,{default:v((()=>[f(r,{horizontal:""},{default:v((()=>[f(i,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Recommended_blood_capacity")),1)])),_:1}),f(u,{class:"ml-auto"},{default:v((()=>[f(d,{modelValue:n(V).recommended_blood_capacity,"onUpdate:modelValue":o[0]||(o[0]=e=>n(V).recommended_blood_capacity=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),action:v((()=>[f(_,{type:"button",loading:n(h),onClick:$},{default:v((()=>[y(b(t.$t("For_donation")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-3327696d"]]),$e={class:"help has-text-danger"},xe={class:"help has-text-danger"},ke={class:"help has-text-danger"},Ce=(e=>(U("data-v-756caf02"),e=e(),j(),e))((()=>V("br",null,null,-1))),Ue={key:0,class:"table-container"},je={class:"table is-bordered is-fullwidth"},Se={colspan:4,class:"has-text-centered"},Oe=le.flatten,ze=Z(a({__name:"LaboratoryResearchModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(a,{emit:t}){const o=a,d=u(),{t:U}=r(),j=c(!1),S=c(U("Direction_for_laboratory_research")),O=c([]),z=c([]),M=c([]),R=p({donation_code:null,donation_type_id:null,immunization_id:null,laboratory_researches:[]}),I=p({donation_type_id:[],immunization_id:[],donation_code:[]});async function q(){var e,l;try{j.value=!0,Object.assign(I,{donation_type_id:[],immunization_id:[],donation_code:[]}),R.laboratory_researches=Oe(M.value.map((e=>e.laboratory_researches.filter((e=>e.value)).map((e=>e.id))))),await L(o.visitcard.id,R),d.success(U("Data_saved_successfully")),D()}catch(a){d.error(a.message),Object.assign(I,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{j.value=!1}}function D(){t("update:isOpen",!1)}return _((async()=>{R.donation_code=o.visitcard.donation_code,R.donation_type_id=o.visitcard.donation_type_id,R.immunization_id=o.visitcard.immunization_id,z.value=await te().then((e=>e.result)),O.value=await ne().then((e=>e.result))})),h((()=>R.donation_type_id),(async e=>{1!==e&&2!==e||await async function(){M.value=await Y(o.visitcard.id).then((e=>e.result))}()})),(t,o)=>{const d=W,u=g("Multiselect"),r=F,c=B,p=T,_=ee,h=X,U=l,P=e;return s(),m(P,{open:a.isOpen,size:"extra-big",title:n(S),actions:"right",onClose:D},{content:v((()=>[f(_,{"flex-wrap":"wrap","column-gap":"5rem"},{default:v((()=>[f(ae,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_types_list")),1)])),_:1}),f(r,null,{default:v((()=>[f(u,{modelValue:n(R).donation_type_id,"onUpdate:modelValue":o[0]||(o[0]=e=>n(R).donation_type_id=e),style:{"min-width":"15rem"},options:n(z),placeholder:t.$t("Select_donation_type"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"])])),_:1}),V("p",$e,b(n(I).donation_type_id[0]),1)])),_:1})])),_:1}),f(ae,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Immunization")),1)])),_:1}),f(r,null,{default:v((()=>[f(u,{modelValue:n(R).immunization_id,"onUpdate:modelValue":o[1]||(o[1]=e=>n(R).immunization_id=e),style:{"min-width":"15rem"},options:n(O),placeholder:t.$t("Not_required"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),V("p",xe,b(n(I).immunization_id[0]),1)])),_:1})])),_:1})])),_:1}),w(f(ae,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_code")),1)])),_:1}),f(r,null,{default:v((()=>[f(p,{value:n(R).donation_code,disabled:""},null,8,["value"]),V("p",ke,b(n(I).donation_code[0]),1)])),_:1})])),_:1})])),_:1},512),[[$,3!==n(R).donation_type_id]])])),_:1}),Ce,1!==n(R).donation_type_id&&2!==n(R).donation_type_id||!n(M).length?C("",!0):(s(),i("div",Ue,[V("table",je,[V("thead",null,[V("tr",null,[V("th",Se,b(t.$t("Laboratory_research_types")),1)]),V("tr",null,[(s(!0),i(x,null,k(n(M),(e=>(s(),i("th",{key:e.id},b(e.name),1)))),128))])]),V("tbody",null,[V("tr",null,[V("td",null,[(s(!0),i(x,null,k(n(M)[0].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(M)[1].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(M)[2].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(M)[3].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))])])])])]))])),action:v((()=>[f(U,{type:"button",loading:n(j),onClick:q},{default:v((()=>[y(b(t.$t("Submit_for_research")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-756caf02"]]),Me=["onSubmit"],Re={class:"column is-12"},Ie={class:"help has-text-danger"},qe={class:"help has-text-danger"},De={class:"help has-text-danger"},Pe={class:"help has-text-danger"},Ee={class:"help has-text-danger"},We=ue.__esModule?ue.default:ue,Fe=a({__name:"WithdrawalFormModal",props:{isOpen:{type:Boolean,default:!1},patientId:{default:null}},emits:["update:isOpen","update:list"],setup(a,{emit:t}){const o=a,i=u(),{t:d}=r(),y=c(d("Withdrawal")),h=c(!1),{locale:w}=r(),$=c({input:"YYYY-MM-DD"}),x=p({type:"string",mask:$.value.input}),k=c([]),U=p({type:"temporary",reason_text:"",start_date:We().format("YYYY-MM-DD"),end_date:"",source:""}),j=p({type:[],reason_text:[],start_date:[],end_date:[],source:[]});async function M(){var e,l,a,n;try{h.value=!0,await N(o.patientId,U),t("update:list"),R()}catch(s){(null==(e=s.response)?void 0:e.data.error)?i.error(null==(l=s.response)?void 0:l.data.error):Object.assign(j,null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.errors)}finally{h.value=!1}}function R(){Object.assign(U,{type:"temporary",reason_text:null,start_date:We().format("YYYY-MM-DD"),end_date:"",source:""}),Object.assign(j,{type:[],reason_text:[],start_date:[],end_date:[],source:[]}),t("update:isOpen",!1)}function I(e){j[e]=""}return p({start:new Date,end:new Date}),_((async()=>{const e=await oe();k.value=e.result})),(t,o)=>{const i=de,u=F,r=B,c=T,p=g("VDatePicker"),_=ie,k=se,q=l,D=e;return s(),m(D,{open:a.isOpen,size:"large",title:y.value,actions:"right",onClose:R},{content:v((()=>[V("form",{id:"withdrawal-form",class:"modal-form",onSubmit:S(M,["prevent"])},[V("div",Re,[f(r,{label:t.$t("Withdrawal_type"),required:""},{default:v((()=>[f(u,null,{default:v((()=>[f(i,{modelValue:U.type,"onUpdate:modelValue":o[0]||(o[0]=e=>U.type=e),value:"permanent",label:t.$t("Permanent"),onChange:o[1]||(o[1]=e=>I("type"))},null,8,["modelValue","label"]),f(i,{modelValue:U.type,"onUpdate:modelValue":o[2]||(o[2]=e=>U.type=e),value:"temporary",label:t.$t("Temporary"),onChange:o[3]||(o[3]=e=>I("type"))},null,8,["modelValue","label"]),V("p",Ie,b(j.type[0]),1)])),_:1})])),_:1},8,["label"]),f(r,{class:"is-curved-select"},{default:v((()=>[f(u,null,{default:v((()=>[f(c,{modelValue:U.reason_text,"onUpdate:modelValue":o[4]||(o[4]=e=>U.reason_text=e),placeholder:t.$t("Select_reason")},null,8,["modelValue","placeholder"]),V("span",qe,b(j.reason_text[0]),1)])),_:1})])),_:1}),f(_,null,{default:v((()=>[f(p,{modelValue:U.start_date,"onUpdate:modelValue":o[6]||(o[6]=e=>U.start_date=e),locale:n(w),mode:"date",masks:$.value,"model-config":x,color:"green","trim-weeks":"",popover:{visibility:"click"}},{default:v((({inputValue:e,inputEvents:l})=>[f(r,{label:t.$t("Start_date")},{default:v((()=>[f(u,{icon:"feather:calendar"},{default:v((()=>[f(c,O({value:e},z(l),{onChange:o[5]||(o[5]=e=>I("start_date"))}),null,16,["value"]),V("p",De,b(j.start_date[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1},8,["modelValue","locale","masks","model-config"]),"temporary"===U.type?(s(),m(p,{key:0,modelValue:U.end_date,"onUpdate:modelValue":o[8]||(o[8]=e=>U.end_date=e),locale:n(w),mode:"date",masks:$.value,"model-config":x,color:"green","trim-weeks":"",popover:{visibility:"click"}},{default:v((({inputValue:e,inputEvents:l})=>[f(r,{label:t.$t("End_date")},{default:v((()=>[f(u,{icon:"feather:calendar"},{default:v((()=>[f(c,O({class:"is-primary-focus",value:e,disabled:"permanent"===U.type},z(l),{onChange:o[7]||(o[7]=e=>I("end_date"))}),null,16,["value","disabled"]),V("p",Pe,b(j.end_date[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1},8,["modelValue","locale","masks","model-config"])):C("",!0)])),_:1}),f(r,{label:t.$t("Source"),required:""},{default:v((()=>[f(u,null,{default:v((()=>[f(k,{modelValue:U.source,"onUpdate:modelValue":o[9]||(o[9]=e=>U.source=e),placeholder:n(d)("Enter_source"),rows:3,onInput:o[10]||(o[10]=e=>I("source"))},null,8,["modelValue","placeholder"]),V("p",Ee,b(j.source[0]),1)])),_:1})])),_:1},8,["label"])])],40,Me)])),action:v((({close:e})=>[f(q,{loading:h.value,form:"withdrawal-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),Be=M();const Te={class:"columns"},Ae={class:"column"},Ye={class:"table-container"},Le={class:"table is-bordered is-fullwidth"},Ne={class:""},Ge={class:""},He={class:""},Je={class:""},Ke={class:""},Qe={class:""},Ze={class:""},Xe={class:"columns"},el={class:"column"},ll={class:"column"},al={class:""},tl={class:"columns"},nl={class:"column"},ol={class:"column"},sl={class:""},il={class:"columns"},dl={class:"column"},ul={class:"column"},rl={class:""},cl={class:"columns"},pl={class:"column"},_l={class:"column"},ml=Z(a({__name:"MedicalInspectionFormModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","donation","withdrawal"],setup(a,{emit:t}){const o=a;R(),I();const{locale:i,t:d}=r(),_=u(),h=c(!1),g=c(d("Medical_inspection")),w=c({weight:"",height:"",temperature:"",blood_pressure:"",pulse:"",lymph_node:0,liver:0,skin:0,lung:0,heart:0}),$=p({weight:[],height:[],temperature:[],blood_pressure:[],pulse:[],lymph_node:[],liver:[],skin:[],lung:[],heart:[]});function x(){t("update:isOpen",!1)}async function k(){var e,l;try{h.value=!0;await async function(e,l){try{const{data:a}=await Be({url:`/visit-cards/${e}/medical-examinations`,method:"POST",data:l});return a}catch(a){throw a}}(o.visitcard.id,w.value);_.success(d("Data_saved_successfully"))}catch(a){_.error(d("Something_went_wrong")),Object.assign($,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{h.value=!1}}return q((()=>{o.visitcard&&o.visitcard.medical_examination&&(w.value=o.visitcard.medical_examination)})),(t,o)=>{const i=T,d=F,u=B,r=pe,c=de,p=l,_=ce,$=re,C=e;return s(),m(C,{open:a.isOpen,size:"big",title:n(g),actions:"right",onClose:x},{content:v((()=>[V("div",Te,[V("div",Ae,[V("div",Ye,[V("table",Le,[V("tbody",null,[V("tr",null,[V("td",null,[V("p",Ne,b(t.$t("Weight_kg")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).weight,"onUpdate:modelValue":o[0]||(o[0]=e=>n(w).weight=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ge,b(t.$t("Height_sm")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).height,"onUpdate:modelValue":o[1]||(o[1]=e=>n(w).height=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",He,b(t.$t("Temperature")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).temperature,"onUpdate:modelValue":o[2]||(o[2]=e=>n(w).temperature=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:50},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Je,b(t.$t("blood_pressure")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(r,{modelValue:n(w).blood_pressure,"onUpdate:modelValue":o[3]||(o[3]=e=>n(w).blood_pressure=e),modelModifiers:{trim:!0},class:"input",options:{mask:"000 / 000",pattern:/^$|^\d{3}$/},placeholder:"000 / 000"},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ke,b(t.$t("Pulse_beats_min")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).pulse,"onUpdate:modelValue":o[4]||(o[4]=e=>n(w).pulse=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:100},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Qe,b(t.$t("Lymph_nodes")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,{raw:""},{default:v((()=>[f(c,{modelValue:n(w).lymph_node,"onUpdate:modelValue":o[5]||(o[5]=e=>n(w).lymph_node=e),value:!1,label:t.$t("Not_increased"),color:"primary"},null,8,["modelValue","label"]),f(c,{modelValue:n(w).lymph_node,"onUpdate:modelValue":o[6]||(o[6]=e=>n(w).lymph_node=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ze,b(t.$t("Liver_spleen")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",Xe,[V("div",el,[f(c,{modelValue:n(w).liver,"onUpdate:modelValue":o[7]||(o[7]=e=>n(w).liver=e),value:!1,label:t.$t("Not_palpated"),color:"primary"},null,8,["modelValue","label"])]),V("div",ll,[f(c,{modelValue:n(w).liver,"onUpdate:modelValue":o[8]||(o[8]=e=>n(w).liver=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",al,b(t.$t("Skin and visible mucous membranes")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",tl,[V("div",nl,[f(c,{modelValue:n(w).skin,"onUpdate:modelValue":o[9]||(o[9]=e=>n(w).skin=e),value:!1,label:t.$t("Pure"),color:"primary"},null,8,["modelValue","label"])]),V("div",ol,[f(c,{modelValue:n(w).skin,"onUpdate:modelValue":o[10]||(o[10]=e=>n(w).skin=e),value:!0,label:t.$t("With signs of damage"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",sl,b(t.$t("In_lungs")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",il,[V("div",dl,[f(c,{modelValue:n(w).lung,"onUpdate:modelValue":o[11]||(o[11]=e=>n(w).lung=e),value:!1,label:t.$t("No_wheezing"),color:"primary"},null,8,["modelValue","label"])]),V("div",ul,[f(c,{modelValue:n(w).lung,"onUpdate:modelValue":o[12]||(o[12]=e=>n(w).lung=e),value:!0,label:t.$t("Wheezing"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",rl,b(t.$t("Heart")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",cl,[V("div",pl,[f(c,{modelValue:n(w).heart,"onUpdate:modelValue":o[13]||(o[13]=e=>n(w).heart=e),value:!1,label:t.$t("Fine"),color:"primary"},null,8,["modelValue","label"])]),V("div",_l,[f(c,{modelValue:n(w).heart,"onUpdate:modelValue":o[14]||(o[14]=e=>n(w).heart=e),value:!0,label:t.$t("Not_fine"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])])])])])])])])),action:v((({close:e})=>[f($,null,{default:v((()=>[f(p,{type:"button",loading:n(h),onClick:k},null,8,["loading"]),f(_,{type:"button",color:"primary",outlined:"",disabled:n(h),onClick:()=>{e(),t.$emit("donation")}},{default:v((()=>[y(b(t.$t("For_donation")),1)])),_:2},1032,["disabled","onClick"]),f(_,{type:"button",color:"danger",outlined:"",disabled:n(h),onClick:()=>{e(),t.$emit("withdrawal")}},{default:v((()=>[y(b(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4b9f6e51"]]),vl=e=>(U("data-v-4fb28ee5"),e=e(),j(),e),fl={class:"has-text-centered is-size-4"},yl=vl((()=>V("br",null,null,-1))),bl={class:"columns"},hl={class:"column"},gl={class:"table-container"},Vl={class:"table is-bordered"},wl={class:""},$l={class:"has-text-centered"},xl={class:"has-text-centered"},kl={class:"has-text-centered"},Cl={class:"has-text-centered"},Ul={class:"has-text-centered"},jl={class:""},Sl={class:""},Ol={class:""},zl={class:""},Ml={class:"has-text-primary"},Rl={class:""},Il=vl((()=>V("strong",null,"06.03.2013",-1))),ql={class:""},Dl=vl((()=>V("strong",null,"Specialist",-1))),Pl={class:""},El=vl((()=>V("strong",null,"06.03.2013",-1))),Wl={class:""},Fl=vl((()=>V("strong",null,"Specialist",-1))),Bl={class:""},Tl=vl((()=>V("strong",null,"06.03.2013",-1))),Al={class:""},Yl=vl((()=>V("strong",null,"Specialist",-1))),Ll={class:""},Nl=vl((()=>V("strong",null,"06.03.2013",-1))),Gl={class:""},Hl=vl((()=>V("strong",null,"Specialist",-1))),Jl=Z(a({__name:"LaboratoryTestResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l,o=c(!1),i=c(""),d=c(null);function u(){a("update:isOpen",!1)}return q((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const r=ce,c=re,p=e;return s(),m(p,{open:l.isOpen,size:"extra-big",title:n(i),actions:"right",onClose:u},{content:v((()=>{var e,l,t,o;return[V("h4",fl,b(a.$t("Laboratory_test_results")),1),yl,V("div",bl,[V("div",hl,[V("div",gl,[V("table",Vl,[V("thead",wl,[V("tr",null,[V("th",$l,b(a.$t("Primary_screening_results")),1),V("th",xl,b(a.$t("Hemotransmission_research_results")),1),V("th",kl,b(a.$t("clinical_biochemical_research_results")),1),V("th",Cl,b(a.$t("Serological_research_results")),1),V("th",Ul,b(a.$t("Immunological_research_results")),1)])]),V("tbody",null,[V("tr",null,[V("td",null,[V("p",jl,[y(b(a.$t("Researched_at"))+": ",1),V("strong",null,b(null==(e=n(d))?void 0:e.date),1)]),V("p",Sl,[y(b(a.$t("Researched_by"))+": ",1),V("strong",null,b(a.$t("Specialist")),1)]),V("p",Ol,[y(b(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,b(null==(t=null==(l=n(d))?void 0:l.blood_type)?void 0:t.label),1)]),V("p",zl,[y(b(a.$t("Hemoglobin_gl"))+": ",1),V("strong",Ml,b(null==(o=n(d))?void 0:o.value),1)])]),V("td",null,[V("p",Rl,[y(b(a.$t("Researched_at"))+": ",1),Il]),V("p",ql,[y(b(a.$t("Researched_by"))+": ",1),Dl])]),V("td",null,[V("p",Pl,[y(b(a.$t("Researched_at"))+": ",1),El]),V("p",Wl,[y(b(a.$t("Researched_by"))+": ",1),Fl])]),V("td",null,[V("p",Bl,[y(b(a.$t("Researched_at"))+": ",1),Tl]),V("p",Al,[y(b(a.$t("Researched_by"))+": ",1),Yl])]),V("td",null,[V("p",Ll,[y(b(a.$t("Researched_at"))+": ",1),Nl]),V("p",Gl,[y(b(a.$t("Researched_by"))+": ",1),Hl])])])])])])])])]})),action:v((({close:e})=>[f(c,null,{default:v((()=>[f(r,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:v((()=>[y(b(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),f(r,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:v((()=>[y(b(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4fb28ee5"]]),Kl={class:"has-text-centered is-size-3"},Ql=V("br",null,null,-1),Zl={class:"columns"},Xl={class:"column"},ea={class:"is-size-5"},la={class:"is-size-5"},aa={class:"is-size-5"},ta={class:"is-size-5"},na={class:"has-text-primary"},oa=a({__name:"PrimaryScreeningResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l;R(),I(),u(),r();const o=c(!1),i=c(""),d=c(null);function p(){a("update:isOpen",!1)}return q((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const u=ce,r=re,c=e;return s(),m(c,{open:l.isOpen,title:n(i),actions:"center",onClose:p},{content:v((()=>{var e,l,t,o,s;return[V("h1",Kl,b(a.$t("Primary_screening_results")),1),Ql,V("div",Zl,[V("div",Xl,[V("p",ea,[y(b(a.$t("Researched_at"))+": ",1),V("strong",null,b(null==(e=n(d))?void 0:e.date),1)]),V("p",la,[y(b(a.$t("Researched_by"))+": ",1),V("strong",null,b((null==(l=n(d))?void 0:l.created_by)??a.$t("Specialist")),1)]),V("p",aa,[y(b(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,b(null==(o=null==(t=n(d))?void 0:t.blood_type)?void 0:o.label),1)]),V("p",ta,[y(b(a.$t("Hemoglobin_gl"))+": ",1),V("strong",na,b(null==(s=n(d))?void 0:s.value),1)])])])]})),action:v((({close:e})=>[f(r,null,{default:v((()=>[f(u,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:v((()=>[y(b(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),f(u,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:v((()=>[y(b(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),sa=["onSubmit"],ia={class:"table is-bordered is-fullwidth"},da={class:"has-text-centered"},ua={class:"has-text-centered"},ra={class:"has-text-centered"},ca=le.flatten,pa=Z(a({__name:"MedicalQuestionnaireModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","laboratoryResearch","withdrawal"],async setup(a,{emit:t}){let o,d;const p=a;R(),I();const h=u(),{t:g}=r(),w=c(!1),$=g("Medical_questionnaire_before_donation"),U=c([]),j=c(!1);async function O(){var e;try{w.value=!0;const l=ca(U.value.map((e=>e.questions.map((e=>({question_id:e.id,value:e.question_answer}))))));await H(null==(e=p.visitcard)?void 0:e.id,{answers:l}),j.value=!0,h.success(g("Success"))}catch(l){h.error(l.message)}finally{w.value=!1}}function z(){t("update:isOpen",!1)}return[o,d]=D((()=>async function(){var e;const l=await G(null==(e=p.visitcard)?void 0:e.id);U.value=l.result}())),await o,d(),_((()=>{var e;j.value=!!(null==(e=p.visitcard)?void 0:e.questionnaire)})),(t,o)=>{const d=se,u=X,r=F,c=B,p=ce,_=l,h=re,g=e;return s(),m(g,{open:a.isOpen,size:"extra-big",title:n($),actions:"right",onClose:z},{content:v((()=>[V("form",{id:"questionnaire-form",onSubmit:S(O,["prevent"])},[V("table",ia,[(s(!0),i(x,null,k(n(U),((e,l)=>(s(),i(x,{key:e.id},[V("thead",null,[V("tr",null,[V("th",da,b(e.name),1),V("th",ua,b(t.$t("Answer")),1)])]),V("tbody",null,[(s(!0),i(x,null,k(e.questions,((e,a)=>(s(),i("tr",{key:e.id},[V("td",null,b(e.name),1),V("td",ra,[f(c,null,{default:v((()=>[f(r,null,{default:v((()=>["text"===e.answer_type?(s(),m(d,{key:0,modelValue:n(U)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(U)[l].questions[a].question_answer=e,rows:1},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),"boolean"===e.answer_type?(s(),m(u,{key:1,modelValue:n(U)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(U)[l].questions[a].question_answer=e,"true-value":"1","false-value":null,color:"primary",class:"p-0"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0)])),_:2},1024)])),_:2},1024)])])))),128))])],64)))),128))])],40,sa)])),action:v((({close:e})=>[f(h,null,{default:v((()=>[f(p,{type:"button",color:"warning",disabled:n(w)||!n(j),onClick:()=>{e(),t.$emit("laboratoryResearch")}},{default:v((()=>[y(b(t.$t("Send_for_examination")),1)])),_:2},1032,["disabled","onClick"]),f(p,{type:"button",color:"danger",disabled:n(w)||!n(j),onClick:()=>{e(),t.$emit("withdrawal")}},{default:v((()=>[y(b(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"]),f(_,{form:"questionnaire-form",loading:n(w)},{default:v((()=>[y(b(n(j)?t.$t("Update"):t.$t("Save")),1)])),_:1},8,["loading"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-45b9e682"]]),_a={class:"patient-detail-wrapper"},ma=["onSubmit"],va={class:"columns mt-5"},fa={class:"column"},ya={class:"is-size-5"},ba=(e=>(U("data-v-058664bc"),e=e(),j(),e))((()=>V("br",null,null,-1))),ha={class:"help has-text-danger"},ga={class:"column"},Va={class:"is-size-5"},wa={class:"column"},$a={class:"is-size-5"},xa={class:"navigation-buttons"},ka={class:"buttons is-right"},Ca={key:1,class:"mt-5"},Ua={class:"box"},ja={class:"is-size-6"},Sa={class:"is-size-6"},Oa={class:"is-size-6"},za={class:"table is-bordered is-fullwidth"},Ma={key:0},Ra={key:1},Ia=Z(a({__name:"[id]",async setup(e){var l;let a,t;const d=R();I();const h=u(),{t:w}=r(),$=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),x=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),k=c(!1),U=(null==(l=d.params)?void 0:l.id)||null,j=c([{label:w("Patient_details"),value:"#details",icon:"feather:info"},{label:w("Medical_information"),value:"#medical_information",icon:"feather:file-text"}]),O=c([]),z=c(!1),M=c(!1),q=c(!1),W=c(!1),T=c(!1),A=c(!1),Y=c(!1),L=c("#details");function N(e){x[e]=""}async function G(){var e,l;try{k.value=!0;await Q(U,$);h.success(w("Updated_successfully"))}catch(a){(null==(e=a.response)?void 0:e.data.errors)?Object.assign(x,null==(l=a.response)?void 0:l.data.errors):h.error(w("Something_went_wrong"))}finally{k.value=!1}}function H(){z.value=!0}function Z(){M.value=!0}function X(){q.value=!0}function le(){W.value=!0}function te(){T.value=!0}function ne(){A.value=!0}function oe(){Y.value=!0}function se(){}return ye().setPageTitle(w("Patient_info")),P({title:o((()=>w("Patient_info")))}),[a,t]=D((()=>async function(){try{const e=await K(U);Object.assign($,e.result),$.pinfl??($.pinfl=""),$.phone_home??($.phone_home=""),$.phone_number??($.phone_number=""),$.phone_work??($.phone_work="")}catch(e){h.error(e.message)}}())),await a,t(),_((async()=>{const e=await J();O.value=e.result})),(e,l)=>{var a;const t=me,o=g("Multiselect"),d=F,u=B,r=ve,c=fe,p=ce,_=ae,h=ee,w=_e,R=pa,I=oa,D=Jl,P=ml,J=Fe,K=ze,Q=we;return s(),i("div",_a,[f(w,{selected:n(L),tabs:n(j)},{tab:v((({activeValue:a})=>{var m,g;return["#details"===a?(s(),i("form",{key:0,onSubmit:S(G,["prevent"])},[V("div",va,[V("div",fa,[V("p",ya,b(e.$t("Personal_Info")),1),f(t,{patient:n($),errors:n(x),onEditing:N},null,8,["patient","errors"]),ba,f(u,{label:e.$t("Category"),required:""},{default:v((()=>[f(d,null,{default:v((()=>[f(o,{modelValue:n($).patient_category_id,"onUpdate:modelValue":l[0]||(l[0]=e=>n($).patient_category_id=e),options:n(O),placeholder:e.$t("Select_category"),label:"name","value-prop":"id",onChange:l[1]||(l[1]=e=>N("patient_category_id"))},null,8,["modelValue","options","placeholder"]),V("p",ha,b(n(x).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),V("div",ga,[V("p",Va,b(e.$t("Passport_info")),1),f(r,{patient:n($),errors:n(x),onEditing:N},null,8,["patient","errors"])]),V("div",wa,[V("p",$a,b(e.$t("Address")),1),f(c,{patient:n($),errors:n(x),onEditing:N},null,8,["patient","errors"])])]),V("div",xa,[V("div",ka,[f(p,{type:"submit",color:"primary",bold:"",loading:n(k),disabled:n(k),tabindex:"0"},{default:v((()=>[y(b(e.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,ma)):"#medical_information"===a?(s(),i("div",Ca,[V("div",Ua,[f(h,{class:"mb-3","justify-content":"space-between"},{default:v((()=>[f(_,null,{default:v((()=>{var l,a;return[V("p",ja,b(e.$t("Directed_by"))+": "+b(null==(a=null==(l=n($).last_visit)?void 0:l.medical_organization)?void 0:a.name),1)]})),_:1}),f(_,null,{default:v((()=>{var l,a;return[V("p",Sa,b(e.$t("Personalized_donation"))+": "+b((null==(l=n($).last_visit)?void 0:l.is_personalized_donation)?null==(a=n($).last_visit)?void 0:a.personalized_donation:e.$t("No")),1)]})),_:1}),f(_,null,{default:v((()=>{var l;return[V("p",Oa,b(e.$t("Blood_collect_condition"))+": "+b((null==(l=n($).last_visit)?void 0:l.is_mobile_team)?e.$t("Mobile_team"):e.$t("Stationary")),1)]})),_:1})])),_:1}),V("table",za,[V("tbody",null,[V("tr",null,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:H},b(e.$t("Medical_questionnaire")),1)])]),(null==(m=n($).last_visit)?void 0:m.primary_screening_result)?(s(),i("tr",Ma,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:Z},b(e.$t("Primary_screening_results")),1)])])):C("",!0),(null==(g=n($).last_visit)?void 0:g.visit_status_id)>=3?(s(),i("tr",Ra,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:X},b(e.$t("Laboratory_test_results")),1)])])):C("",!0)])])])])):C("",!0)]})),_:1},8,["selected","tabs"]),f(R,{"is-open":n(z),"onUpdate:is-open":l[2]||(l[2]=e=>E(z)?z.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onLaboratoryResearch:ne},null,8,["is-open","visitcard"]),3===(null==(a=n($).last_visit)?void 0:a.visit_status_id)?(s(),m(I,{key:0,"is-open":n(M),"onUpdate:is-open":l[3]||(l[3]=e=>E(M)?M.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onMedicalExamination:le},null,8,["is-open","visitcard"])):C("",!0),f(D,{"is-open":n(q),"onUpdate:is-open":l[4]||(l[4]=e=>E(q)?q.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onMedicalExamination:le},null,8,["is-open","visitcard"]),f(P,{"is-open":n(W),"onUpdate:is-open":l[5]||(l[5]=e=>E(W)?W.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onDonation:oe},null,8,["is-open","visitcard"]),f(J,{"is-open":n(T),"onUpdate:is-open":l[6]||(l[6]=e=>E(T)?T.value=e:null),"patient-id":Number(n(U))},null,8,["is-open","patient-id"]),f(K,{"is-open":n(A),"onUpdate:is-open":l[7]||(l[7]=e=>E(A)?A.value=e:null),visitcard:n($).last_visit},null,8,["is-open","visitcard"]),f(Q,{"is-open":n(Y),"onUpdate:is-open":l[8]||(l[8]=e=>E(Y)?Y.value=e:null),visitcard:n($).last_visit,onSubmit:se},null,8,["is-open","visitcard"])])}}}),[["__scopeId","data-v-058664bc"]]);export{Ia as default};
