import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-68179e43.js";import{c as s,d as n,_ as r,a as l,b as o}from"./search-7-dark-b6479367.js";import{_ as i}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang-9be05ac9.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang-8f30b873.js";import{_ as p}from"./VButtons.vue_vue_type_script_setup_true_lang-00840c6c.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang-fc4409cd.js";import{_ as d}from"./VFlexItem.vue_vue_type_style_index_0_lang-ce376e13.js";import{_ as m}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-faf20e2b.js";import{q as c,E as g,H as f,C as v,x as y,r as h,J as b,c as j,j as x,o as k,d as w,k as $,w as C,K as V,m as F,i as I,t as D,e as P,g as R,F as T,l as U,a as q,S as B}from"./index-568ad137.js";import{u as E}from"./viewWrapper-feca89b2.js";import{l as O}from"./patient-33059bc9.js";import{u as S}from"./main-7fc6984e.js";import{_ as A}from"./lodash-c54dbb06.js";import"./VPlaceload-33f57994.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VCard.vue_vue_type_script_setup_true_lang-3b674ece.js";import"./VInput.vue_vue_type_script_setup_true_lang-dccc8f42.js";import"./VControl-b713a764.js";import"./VIMaskInput.vue_vue_type_script_lang-6492e1cb.js";const L={class:"page-content-inner"},W={class:"columns mt-1"},G={class:"column"},H={class:"columns"},J={class:"column is-12"},K={key:0,class:"is-flex-grow-0",textContent:"#"},M={key:0,class:"flex-list-inner"},N={key:1,class:"flex-list-inner"},X=P("img",{class:"light-image",src:s,alt:""},null,-1),Z=P("img",{class:"dark-image",src:n,alt:""},null,-1),z=A.isEmpty,Q=c({__name:"index",setup(s){const n=g(),c=f(),{t:A}=v(),Q=S(),Y=y(!1),ee=h({lastname:"",firstname:"",middlename:"",passpordId:""});E().setPageTitle(A("Registration")),b({title:`${A("Unified-donor-register")} - ${Q.app.name}`});const ae=h({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),te=j({get:()=>ae.pagination.current_page,set:async e=>{se.page=e,await re(se)}}),se=h({page:1}),ne={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:A("Category"),format:e=>e.name},name:{label:A("Fullname")},gender:{label:A("Gender"),format:e=>A(e)},birth_date:{label:A("Date-of-birth")},full_address:{label:A("Address")},phone_number:{label:A("Phone_number")},isDiverted:{label:A("Diverted_from_donation")}};async function re(e){var a,t;try{Object.assign(se,e),Y.value=!0;const a=await O(e);Object.assign(ae,a.result),z(a.result.data)?c.warning(A("Data_not_found")):c.success(`${A("Found")}: ${a.result.pagination.total} ${A("records")}`)}catch(s){Object.assign(ee,null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.errors)}finally{Y.value=!1}}function le(e){ee[e]=""}async function oe(){ae.data=[]}function ie(){n.push("/app/registration/register-donors")}function ue(){}return y(),(s,n)=>{const c=m,g=d,f=_,v=p,y=u,h=i,b=r,j=e,E=l,O=x("RouterLink"),S=a,A=o,z=t;return k(),w("div",L,[$(y,{"justify-content":"space-between","flex-wrap":"wrap"},{default:C((()=>[$(g,null,{default:C((()=>[$(c,{"with-icons":"",separator:"bullet",items:[{label:V(Q).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:s.$t("Registration")},{label:s.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),$(g,null,{default:C((()=>[$(v,null,{default:C((()=>[$(f,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:F(ie,["prevent"])},{default:C((()=>[I(D(s.$t("Add")),1)])),_:1},8,["onClick"]),$(f,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:F(ue,["prevent"])},{default:C((()=>[I(D(s.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),P("div",W,[P("div",G,[$(h,{"is-loading":V(Y),errors:V(ee),onSearch:re,onClearForm:oe,onClearError:le},null,8,["is-loading","errors"])])]),P("div",H,[P("div",J,[$(z,{columns:V(ne),data:V(ae).data,limit:V(ae).pagination.per_page,total:V(ae).pagination.total},{default:C((()=>[$(S,{rounded:"","no-header":!V(Y)&&0===V(ae).data.length},{"header-column":C((({column:e})=>["#"===e.key?(k(),w("span",K)):R("",!0)])),body:C((()=>[V(Y)?(k(),w("div",M,[(k(!0),w(T,null,U(V(ae).pagination.per_page,(e=>(k(),w("div",{key:e,class:"flex-table-item"},[$(j,null,{default:C((()=>[$(b,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):R("",!0),0===V(ae).data.length?(k(),w("div",N,[$(E,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:C((()=>[X,Z])),_:1})])):R("",!0)])),"body-cell":C((({row:e,column:a,value:t})=>["name"===a.key?(k(),q(O,{key:0,class:"has-text-primary",to:`${s.$route.path}/${e.id}#details`},{default:C((()=>[I(D(e.first_name)+" "+D(e.last_name)+" "+D(e.father_name),1)])),_:2},1032,["to"])):R("",!0)])),_:1},8,["no-header"]),V(ae).data.length?(k(),q(A,{key:0,"current-page":V(te),"onUpdate:current-page":n[0]||(n[0]=e=>B(te)?te.value=e:null),class:"mt-5","item-per-page":V(ae).pagination.per_page,"total-items":V(ae).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):R("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Q as default};
