import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-63c92034.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-92907858.js";import{q as a,a0 as t,K as n,c as o,o as s,d as i,b as d,H as u,C as r,x as c,r as p,A as _,a as m,w as v,k as f,i as y,t as b,y as h,j as g,e as V,_ as w,aj as $,F as x,l as k,g as C,L as U,M as j,m as S,p as O,ak as z,a6 as M,G as R,E as I,V as D,a8 as q,J as P,S as E}from"./index-ef344eb7.js";import{b as W,_ as F,a as T}from"./VControl-6b9015e2.js";import{_ as Y}from"./VInput.vue_vue_type_script_setup_true_lang-268c7bbc.js";import{s as B,f as A,c as L,d as G,e as N,g as H,p as J,h as K,u as Q}from"./patient-b942017f.js";import{_ as X}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as Z}from"./VCheckbox.vue_vue_type_style_index_0_lang-7063e47f.js";import{_ as ee}from"./VFlex.vue_vue_type_style_index_0_lang-8060459e.js";import{_ as le}from"./lodash-63f8a5de.js";import{_ as ae}from"./VFlexItem.vue_vue_type_style_index_0_lang-59076641.js";import{f as te,b as ne,c as oe}from"./additional-79a59e1f.js";import{_ as se}from"./VTextarea.vue_vue_type_script_setup_true_lang-f92ed052.js";import{_ as ie}from"./VRadio.vue_vue_type_style_index_0_lang-a8293ccd.js";import{m as de}from"./moment-0998b240.js";import{_ as ue}from"./VButtons.vue_vue_type_script_setup_true_lang-ae0b09b1.js";import{_ as re}from"./VButton.vue_vue_type_style_index_0_lang-114b0359.js";import{_ as ce}from"./VIMaskInput.vue_vue_type_script_lang-d2dfdd0b.js";import{_ as pe}from"./VTabs.vue_vue_type_script_setup_true_lang-a9a52635.js";import{_ as _e,a as me,b as ve}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-a8c4f037.js";import{u as fe}from"./viewWrapper-ee1c88fe.js";import"./VPlaceload-5927026b.js";import"./VIcon.vue_vue_type_script_setup_true_lang-04ec52bd.js";const ye={class:"v-grid"},be=a({__name:"VGrid",props:{inline:{type:Boolean},gridTemplateColumns:{default:"none"},gridTemplateRows:{default:"none"},gridTemplateAreas:{default:"none"},columnGap:{default:"normal"},rowGap:{default:"normal"},justifyItems:{default:"initial"},alignItems:{default:"initial"},justifyContent:{default:"initial"},alignContent:{default:"initial"},placeContent:{default:"normal"},gridAutoColumns:{default:"auto"},gridAutoRows:{default:"auto"},gridAutoFlow:{default:"row"}},setup(e){const l=e;t((e=>({c9233fce:n(a),41529814:l.gridTemplateColumns,"4ac08460":l.gridTemplateRows,"0c618fdf":l.gridTemplateAreas,"9bbce60e":l.columnGap,"641aebe3":l.rowGap,"28966b17":l.justifyItems,"5f95d4fc":l.alignItems,"173c3e10":l.justifyContent,"51d9f9bb":l.alignContent,"2afad179":l.placeContent,"3c8fbea1":l.gridAutoColumns,"5b7c7195":l.gridAutoRows,"5b76f0ea":l.gridAutoFlow})));const a=o((()=>l.inline?"inline-grid":"grid"));return(e,l)=>(s(),i("div",ye,[d(e.$slots,"default")]))}}),he={class:"v-grid-item"},ge=a({__name:"VGridItem",props:{gridColumnStart:{default:"auto"},gridColumnEnd:{default:"auto"},gridRowStart:{default:"auto"},gridRowEnd:{default:"auto"},justifySelf:{default:"auto"},alignSelf:{default:"auto"},placeSelf:{default:"auto"}},setup(e){const l=e;return t((e=>({"1401e278":l.gridColumnStart,"2b6903bd":l.gridColumnEnd,41478190:l.gridRowStart,"0387b989":l.gridRowEnd,"032f283a":l.justifySelf,dd16eca2:l.alignSelf,da1a0a9e:l.placeSelf}))),(e,l)=>(s(),i("div",he,[d(e.$slots,"default")]))}}),Ve=X(a({__name:"DirectionForDonationModal",props:{isOpen:{type:Boolean,default:!1},visitcard:null},emits:["update:isOpen","submit"],setup(a,{emit:t}){const o=a,i=u(),{t:d}=r(),h=c(!1),g=c(d("Direction_for_donation")),V=p({donation_code:null,recommended_blood_capacity:""}),w=p({donation_code:[],recommended_blood_capacity:[]});async function $(){var e,l,a;try{h.value=!0,await B(null==(e=o.visitcard)?void 0:e.id,V),i.success(d("Data_saved_successfully")),x()}catch(t){i.error(t.message),Object.assign(w,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{h.value=!1}}function x(){t("update:isOpen",!1)}return _((()=>{var e;V.donation_code=null==(e=o.visitcard)?void 0:e.donation_code})),(t,o)=>{const i=W,d=Y,u=F,r=T,c=ge,p=be,_=l,w=e;return s(),m(w,{open:a.isOpen,title:n(g),actions:"right",onClose:x},{content:v((()=>[f(p,{"row-gap":"1rem"},{default:v((()=>[f(c,null,{default:v((()=>[f(r,{horizontal:""},{default:v((()=>[f(i,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_code")),1)])),_:1}),f(u,{class:"ml-auto"},{default:v((()=>[f(d,{modelValue:n(V).donation_code,"onUpdate:modelValue":o[0]||(o[0]=e=>n(V).donation_code=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),f(c,null,{default:v((()=>[f(r,{horizontal:""},{default:v((()=>[f(i,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Recommended_blood_capacity")),1)])),_:1}),f(u,{class:"ml-auto"},{default:v((()=>[f(d,{modelValue:n(V).recommended_blood_capacity,"onUpdate:modelValue":o[1]||(o[1]=e=>n(V).recommended_blood_capacity=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),action:v((()=>[f(_,{type:"button",loading:n(h),onClick:$},{default:v((()=>[y(b(t.$t("For_donation")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-fb8187f2"]]),we={class:"help has-text-danger"},$e={class:"help has-text-danger"},xe={class:"help has-text-danger"},ke=(e=>(U("data-v-268addd0"),e=e(),j(),e))((()=>V("br",null,null,-1))),Ce={key:0,class:"table-container"},Ue={class:"table is-bordered is-fullwidth"},je={colspan:4,class:"has-text-centered"},Se=le.flatten,Oe=X(a({__name:"LaboratoryResearchModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(a,{emit:t}){const o=a,d=u(),{t:U}=r(),j=c(!1),S=c(U("Direction_for_laboratory_research")),O=c([]),z=c([]),M=c([]),R=p({donation_code:null,donation_type_id:null,immunization_id:null,laboratory_researches:[]}),I=p({donation_type_id:[],immunization_id:[],donation_code:[]});async function D(){var e,l;try{j.value=!0,Object.assign(I,{donation_type_id:[],immunization_id:[],donation_code:[]}),R.laboratory_researches=Se(M.value.map((e=>e.laboratory_researches.filter((e=>e.value)).map((e=>e.id))))),await L(o.visitcard.id,R),d.success(U("Data_saved_successfully")),q()}catch(a){d.error(a.message),Object.assign(I,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{j.value=!1}}function q(){t("update:isOpen",!1)}return _((async()=>{R.donation_code=o.visitcard.donation_code,R.donation_type_id=o.visitcard.donation_type_id,R.immunization_id=o.visitcard.immunization_id,z.value=await te().then((e=>e.result)),O.value=await ne().then((e=>e.result))})),h((()=>R.donation_type_id),(async e=>{1===e&&await async function(){M.value=await A(o.visitcard.id).then((e=>e.result))}()})),(t,o)=>{const d=W,u=g("Multiselect"),r=F,c=T,p=Y,_=ee,h=Z,U=l,P=e;return s(),m(P,{open:a.isOpen,size:"extra-big",title:n(S),actions:"right",onClose:q},{content:v((()=>[f(_,{"flex-wrap":"wrap","column-gap":"5rem"},{default:v((()=>[f(ae,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_types_list")),1)])),_:1}),f(r,null,{default:v((()=>[f(u,{modelValue:n(R).donation_type_id,"onUpdate:modelValue":o[0]||(o[0]=e=>n(R).donation_type_id=e),style:{"min-width":"15rem"},options:n(z),placeholder:t.$t("Select_donation_type"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"])])),_:1}),V("p",we,b(n(I).donation_type_id[0]),1)])),_:1})])),_:1}),f(ae,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Immunization")),1)])),_:1}),f(r,null,{default:v((()=>[f(u,{modelValue:n(R).immunization_id,"onUpdate:modelValue":o[1]||(o[1]=e=>n(R).immunization_id=e),style:{"min-width":"15rem"},options:n(O),placeholder:t.$t("Not_required"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),V("p",$e,b(n(I).immunization_id[0]),1)])),_:1})])),_:1})])),_:1}),w(f(ae,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_code")),1)])),_:1}),f(r,null,{default:v((()=>[f(p,{modelValue:n(R).donation_code,"onUpdate:modelValue":o[2]||(o[2]=e=>n(R).donation_code=e)},null,8,["modelValue"]),V("p",xe,b(n(I).donation_code[0]),1)])),_:1})])),_:1})])),_:1},512),[[$,3!==n(R).donation_type_id]])])),_:1}),ke,3!==n(R).donation_type_id&&n(M).length?(s(),i("div",Ce,[V("table",Ue,[V("thead",null,[V("tr",null,[V("th",je,b(t.$t("Laboratory_research_types")),1)]),V("tr",null,[(s(!0),i(x,null,k(n(M),(e=>(s(),i("th",{key:e.id},b(e.name),1)))),128))])]),V("tbody",null,[V("tr",null,[V("td",null,[(s(!0),i(x,null,k(n(M)[0].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(M)[1].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(M)[2].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(M)[3].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(r,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))])])])])])):C("",!0)])),action:v((()=>[f(U,{type:"button",loading:n(j),onClick:D},{default:v((()=>[y(b(t.$t("Submit_for_research")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-268addd0"]]),ze=["onSubmit"],Me={class:"column is-12"},Re={class:"help has-text-danger"},Ie={class:"help has-text-danger"},De={class:"help has-text-danger"},qe={class:"help has-text-danger"},Pe={class:"help has-text-danger"},Ee=de.__esModule?de.default:de,We=a({__name:"WithdrawalFormModal",props:{isOpen:{type:Boolean,default:!1},patientId:{default:null}},emits:["update:isOpen","update:list"],setup(a,{emit:t}){const o=a,i=u(),{t:d}=r(),y=c(d("Withdrawal")),h=c(!1),{locale:w}=r(),$=c({input:"YYYY-MM-DD"}),x=p({type:"string",mask:$.value.input}),k=c([]),U=p({type:"temporary",reason_text:"",start_date:Ee().format("YYYY-MM-DD"),end_date:"",source:""}),j=p({type:[],reason_text:[],start_date:[],end_date:[],source:[]});async function M(){var e,l,a,n;try{h.value=!0,await G(o.patientId,U),t("update:list"),R()}catch(s){(null==(e=s.response)?void 0:e.data.error)?i.error(null==(l=s.response)?void 0:l.data.error):Object.assign(j,null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.errors)}finally{h.value=!1}}function R(){Object.assign(U,{type:"temporary",reason_text:null,start_date:Ee().format("YYYY-MM-DD"),end_date:"",source:""}),Object.assign(j,{type:[],reason_text:[],start_date:[],end_date:[],source:[]}),t("update:isOpen",!1)}function I(e){j[e]=""}return p({start:new Date,end:new Date}),_((async()=>{const e=await oe();k.value=e.result})),(t,o)=>{const i=ie,u=F,r=T,c=Y,p=g("VDatePicker"),_=se,k=l,D=e;return s(),m(D,{open:a.isOpen,size:"large",title:y.value,actions:"right",onClose:R},{content:v((()=>[V("form",{id:"withdrawal-form",class:"modal-form",onSubmit:S(M,["prevent"])},[V("div",Me,[f(r,{label:t.$t("Withdrawal_type"),required:""},{default:v((()=>[f(u,null,{default:v((()=>[f(i,{modelValue:U.type,"onUpdate:modelValue":o[0]||(o[0]=e=>U.type=e),value:"permanent",label:t.$t("Permanent"),onChange:o[1]||(o[1]=e=>I("type"))},null,8,["modelValue","label"]),f(i,{modelValue:U.type,"onUpdate:modelValue":o[2]||(o[2]=e=>U.type=e),value:"temporary",label:t.$t("Temporary"),onChange:o[3]||(o[3]=e=>I("type"))},null,8,["modelValue","label"]),V("p",Re,b(j.type[0]),1)])),_:1})])),_:1},8,["label"]),f(r,{class:"is-curved-select"},{default:v((()=>[f(u,null,{default:v((()=>[f(c,{modelValue:U.reason_text,"onUpdate:modelValue":o[4]||(o[4]=e=>U.reason_text=e),placeholder:t.$t("Select_reason")},null,8,["modelValue","placeholder"]),V("span",Ie,b(j.reason_text[0]),1)])),_:1})])),_:1}),f(p,{modelValue:U.start_date,"onUpdate:modelValue":o[6]||(o[6]=e=>U.start_date=e),locale:n(w),mode:"date",masks:$.value,"model-config":x,color:"green","trim-weeks":"",popover:{visibility:"click"}},{default:v((({inputValue:e,inputEvents:l})=>[f(r,{label:t.$t("Start_date")},{default:v((()=>[f(u,{icon:"feather:calendar"},{default:v((()=>[f(c,O({value:e},z(l),{onChange:o[5]||(o[5]=e=>I("start_date"))}),null,16,["value"]),V("p",De,b(j.start_date[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1},8,["modelValue","locale","masks","model-config"]),"temporary"===U.type?(s(),m(p,{key:0,modelValue:U.end_date,"onUpdate:modelValue":o[8]||(o[8]=e=>U.end_date=e),locale:n(w),mode:"date",masks:$.value,"model-config":x,color:"green","trim-weeks":"",popover:{visibility:"click"}},{default:v((({inputValue:e,inputEvents:l})=>[f(r,{label:t.$t("End_date")},{default:v((()=>[f(u,{icon:"feather:calendar"},{default:v((()=>[f(c,O({class:"is-primary-focus",value:e,disabled:"permanent"===U.type},z(l),{onChange:o[7]||(o[7]=e=>I("end_date"))}),null,16,["value","disabled"]),V("p",qe,b(j.end_date[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1},8,["modelValue","locale","masks","model-config"])):C("",!0),f(r,{label:t.$t("Source"),required:""},{default:v((()=>[f(u,null,{default:v((()=>[f(_,{modelValue:U.source,"onUpdate:modelValue":o[9]||(o[9]=e=>U.source=e),placeholder:n(d)("Enter_source"),rows:3,onInput:o[10]||(o[10]=e=>I("source"))},null,8,["modelValue","placeholder"]),V("p",Pe,b(j.source[0]),1)])),_:1})])),_:1},8,["label"])])],40,ze)])),action:v((({close:e})=>[f(k,{loading:h.value,form:"withdrawal-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),Fe=M();const Te={class:"columns"},Ye={class:"column"},Be={class:"table-container"},Ae={class:"table is-bordered is-fullwidth"},Le={class:""},Ge={class:""},Ne={class:""},He={class:""},Je={class:""},Ke={class:""},Qe={class:""},Xe={class:"columns"},Ze={class:"column"},el={class:"column"},ll={class:""},al={class:"columns"},tl={class:"column"},nl={class:"column"},ol={class:""},sl={class:"columns"},il={class:"column"},dl={class:"column"},ul={class:""},rl={class:"columns"},cl={class:"column"},pl={class:"column"},_l=X(a({__name:"MedicalInspectionFormModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","donation","withdrawal"],setup(a,{emit:t}){const o=a;R(),I();const{locale:i,t:d}=r(),_=u(),h=c(!1),g=c(d("Medical_inspection")),w=c({weight:"",height:"",temperature:"",blood_pressure:"",pulse:"",lymph_node:0,liver:0,skin:0,lung:0,heart:0}),$=p({weight:[],height:[],temperature:[],blood_pressure:[],pulse:[],lymph_node:[],liver:[],skin:[],lung:[],heart:[]});function x(){t("update:isOpen",!1)}async function k(){var e,l;try{h.value=!0;await async function(e,l){try{const{data:a}=await Fe({url:`/visit-cards/${e}/medical-examinations`,method:"POST",data:l});return a}catch(a){throw a}}(o.visitcard.id,w.value);_.success(d("Data_saved_successfully"))}catch(a){_.error(d("Something_went_wrong")),Object.assign($,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{h.value=!1}}return D((()=>{o.visitcard&&o.visitcard.medical_examination&&(w.value=o.visitcard.medical_examination)})),(t,o)=>{const i=Y,d=F,u=T,r=ce,c=ie,p=l,_=re,$=ue,C=e;return s(),m(C,{open:a.isOpen,size:"big",title:n(g),actions:"right",onClose:x},{content:v((()=>[V("div",Te,[V("div",Ye,[V("div",Be,[V("table",Ae,[V("tbody",null,[V("tr",null,[V("td",null,[V("p",Le,b(t.$t("Weight_kg")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).weight,"onUpdate:modelValue":o[0]||(o[0]=e=>n(w).weight=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ge,b(t.$t("Height_sm")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).height,"onUpdate:modelValue":o[1]||(o[1]=e=>n(w).height=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ne,b(t.$t("Temperature")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).temperature,"onUpdate:modelValue":o[2]||(o[2]=e=>n(w).temperature=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:50},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",He,b(t.$t("blood_pressure")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(r,{modelValue:n(w).blood_pressure,"onUpdate:modelValue":o[3]||(o[3]=e=>n(w).blood_pressure=e),modelModifiers:{trim:!0},class:"input",options:{mask:"000 / 000",pattern:/^$|^\d{3}$/},placeholder:"000 / 000"},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Je,b(t.$t("Pulse_beats_min")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).pulse,"onUpdate:modelValue":o[4]||(o[4]=e=>n(w).pulse=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:100},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ke,b(t.$t("Lymph_nodes")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,{raw:""},{default:v((()=>[f(c,{modelValue:n(w).lymph_node,"onUpdate:modelValue":o[5]||(o[5]=e=>n(w).lymph_node=e),value:!1,label:t.$t("Not_increased"),color:"primary"},null,8,["modelValue","label"]),f(c,{modelValue:n(w).lymph_node,"onUpdate:modelValue":o[6]||(o[6]=e=>n(w).lymph_node=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Qe,b(t.$t("Liver_spleen")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",Xe,[V("div",Ze,[f(c,{modelValue:n(w).liver,"onUpdate:modelValue":o[7]||(o[7]=e=>n(w).liver=e),value:!1,label:t.$t("Not_palpated"),color:"primary"},null,8,["modelValue","label"])]),V("div",el,[f(c,{modelValue:n(w).liver,"onUpdate:modelValue":o[8]||(o[8]=e=>n(w).liver=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",ll,b(t.$t("Skin and visible mucous membranes")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",al,[V("div",tl,[f(c,{modelValue:n(w).skin,"onUpdate:modelValue":o[9]||(o[9]=e=>n(w).skin=e),value:!1,label:t.$t("Pure"),color:"primary"},null,8,["modelValue","label"])]),V("div",nl,[f(c,{modelValue:n(w).skin,"onUpdate:modelValue":o[10]||(o[10]=e=>n(w).skin=e),value:!0,label:t.$t("With signs of damage"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",ol,b(t.$t("In_lungs")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",sl,[V("div",il,[f(c,{modelValue:n(w).lung,"onUpdate:modelValue":o[11]||(o[11]=e=>n(w).lung=e),value:!1,label:t.$t("No_wheezing"),color:"primary"},null,8,["modelValue","label"])]),V("div",dl,[f(c,{modelValue:n(w).lung,"onUpdate:modelValue":o[12]||(o[12]=e=>n(w).lung=e),value:!0,label:t.$t("Wheezing"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",ul,b(t.$t("Heart")),1)]),V("td",null,[f(u,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",rl,[V("div",cl,[f(c,{modelValue:n(w).heart,"onUpdate:modelValue":o[13]||(o[13]=e=>n(w).heart=e),value:!1,label:t.$t("Fine"),color:"primary"},null,8,["modelValue","label"])]),V("div",pl,[f(c,{modelValue:n(w).heart,"onUpdate:modelValue":o[14]||(o[14]=e=>n(w).heart=e),value:!0,label:t.$t("Not_fine"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])])])])])])])])),action:v((({close:e})=>[f($,null,{default:v((()=>[f(p,{type:"button",loading:n(h),onClick:k},null,8,["loading"]),f(_,{type:"button",color:"primary",outlined:"",disabled:n(h),onClick:()=>{e(),t.$emit("donation")}},{default:v((()=>[y(b(t.$t("For_donation")),1)])),_:2},1032,["disabled","onClick"]),f(_,{type:"button",color:"danger",outlined:"",disabled:n(h),onClick:()=>{e(),t.$emit("withdrawal")}},{default:v((()=>[y(b(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4b9f6e51"]]),ml=e=>(U("data-v-4fb28ee5"),e=e(),j(),e),vl={class:"has-text-centered is-size-4"},fl=ml((()=>V("br",null,null,-1))),yl={class:"columns"},bl={class:"column"},hl={class:"table-container"},gl={class:"table is-bordered"},Vl={class:""},wl={class:"has-text-centered"},$l={class:"has-text-centered"},xl={class:"has-text-centered"},kl={class:"has-text-centered"},Cl={class:"has-text-centered"},Ul={class:""},jl={class:""},Sl={class:""},Ol={class:""},zl={class:"has-text-primary"},Ml={class:""},Rl=ml((()=>V("strong",null,"06.03.2013",-1))),Il={class:""},Dl=ml((()=>V("strong",null,"Specialist",-1))),ql={class:""},Pl=ml((()=>V("strong",null,"06.03.2013",-1))),El={class:""},Wl=ml((()=>V("strong",null,"Specialist",-1))),Fl={class:""},Tl=ml((()=>V("strong",null,"06.03.2013",-1))),Yl={class:""},Bl=ml((()=>V("strong",null,"Specialist",-1))),Al={class:""},Ll=ml((()=>V("strong",null,"06.03.2013",-1))),Gl={class:""},Nl=ml((()=>V("strong",null,"Specialist",-1))),Hl=X(a({__name:"LaboratoryTestResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l,o=c(!1),i=c(""),d=c(null);function u(){a("update:isOpen",!1)}return D((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const r=re,c=ue,p=e;return s(),m(p,{open:l.isOpen,size:"extra-big",title:n(i),actions:"right",onClose:u},{content:v((()=>{var e,l,t,o;return[V("h4",vl,b(a.$t("Laboratory_test_results")),1),fl,V("div",yl,[V("div",bl,[V("div",hl,[V("table",gl,[V("thead",Vl,[V("tr",null,[V("th",wl,b(a.$t("Primary_screening_results")),1),V("th",$l,b(a.$t("Hemotransmission_research_results")),1),V("th",xl,b(a.$t("clinical_biochemical_research_results")),1),V("th",kl,b(a.$t("Serological_research_results")),1),V("th",Cl,b(a.$t("Immunological_research_results")),1)])]),V("tbody",null,[V("tr",null,[V("td",null,[V("p",Ul,[y(b(a.$t("Researched_at"))+": ",1),V("strong",null,b(null==(e=n(d))?void 0:e.date),1)]),V("p",jl,[y(b(a.$t("Researched_by"))+": ",1),V("strong",null,b(a.$t("Specialist")),1)]),V("p",Sl,[y(b(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,b(null==(t=null==(l=n(d))?void 0:l.blood_type)?void 0:t.label),1)]),V("p",Ol,[y(b(a.$t("Hemoglobin_gl"))+": ",1),V("strong",zl,b(null==(o=n(d))?void 0:o.value),1)])]),V("td",null,[V("p",Ml,[y(b(a.$t("Researched_at"))+": ",1),Rl]),V("p",Il,[y(b(a.$t("Researched_by"))+": ",1),Dl])]),V("td",null,[V("p",ql,[y(b(a.$t("Researched_at"))+": ",1),Pl]),V("p",El,[y(b(a.$t("Researched_by"))+": ",1),Wl])]),V("td",null,[V("p",Fl,[y(b(a.$t("Researched_at"))+": ",1),Tl]),V("p",Yl,[y(b(a.$t("Researched_by"))+": ",1),Bl])]),V("td",null,[V("p",Al,[y(b(a.$t("Researched_at"))+": ",1),Ll]),V("p",Gl,[y(b(a.$t("Researched_by"))+": ",1),Nl])])])])])])])])]})),action:v((({close:e})=>[f(c,null,{default:v((()=>[f(r,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:v((()=>[y(b(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),f(r,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:v((()=>[y(b(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4fb28ee5"]]),Jl={class:"has-text-centered is-size-3"},Kl=V("br",null,null,-1),Ql={class:"columns"},Xl={class:"column"},Zl={class:"is-size-5"},ea={class:"is-size-5"},la={class:"is-size-5"},aa={class:"is-size-5"},ta={class:"has-text-primary"},na=a({__name:"PrimaryScreeningResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l;R(),I(),u(),r();const o=c(!1),i=c(""),d=c(null);function p(){a("update:isOpen",!1)}return D((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const u=re,r=ue,c=e;return s(),m(c,{open:l.isOpen,title:n(i),actions:"center",onClose:p},{content:v((()=>{var e,l,t,o,s;return[V("h1",Jl,b(a.$t("Primary_screening_results")),1),Kl,V("div",Ql,[V("div",Xl,[V("p",Zl,[y(b(a.$t("Researched_at"))+": ",1),V("strong",null,b(null==(e=n(d))?void 0:e.date),1)]),V("p",ea,[y(b(a.$t("Researched_by"))+": ",1),V("strong",null,b((null==(l=n(d))?void 0:l.created_by)??a.$t("Specialist")),1)]),V("p",la,[y(b(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,b(null==(o=null==(t=n(d))?void 0:t.blood_type)?void 0:o.label),1)]),V("p",aa,[y(b(a.$t("Hemoglobin_gl"))+": ",1),V("strong",ta,b(null==(s=n(d))?void 0:s.value),1)])])])]})),action:v((({close:e})=>[f(r,null,{default:v((()=>[f(u,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:v((()=>[y(b(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),f(u,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:v((()=>[y(b(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),oa=["onSubmit"],sa={class:"table is-bordered is-fullwidth"},ia={class:"has-text-centered"},da={class:"has-text-centered"},ua={class:"has-text-centered"},ra=le.flatten,ca=X(a({__name:"MedicalQuestionnaireModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","laboratoryResearch","withdrawal"],async setup(a,{emit:t}){let o,d;const p=a;R(),I();const h=u(),{t:g}=r(),w=c(!1),$=g("Medical_questionnaire_before_donation"),U=c([]),j=c(!1);async function O(){var e;try{w.value=!0;const l=ra(U.value.map((e=>e.questions.map((e=>({question_id:e.id,value:e.question_answer}))))));await H(null==(e=p.visitcard)?void 0:e.id,{answers:l}),j.value=!0,h.success(g("Success"))}catch(l){h.error(l.message)}finally{w.value=!1}}function z(){t("update:isOpen",!1)}return[o,d]=q((()=>async function(){var e;const l=await N(null==(e=p.visitcard)?void 0:e.id);U.value=l.result}())),await o,d(),_((()=>{var e;j.value=!!(null==(e=p.visitcard)?void 0:e.questionnaire)})),(t,o)=>{const d=se,u=Z,r=F,c=T,p=re,_=l,h=ue,g=e;return s(),m(g,{open:a.isOpen,size:"extra-big",title:n($),actions:"right",onClose:z},{content:v((()=>[V("form",{id:"questionnaire-form",onSubmit:S(O,["prevent"])},[V("table",sa,[(s(!0),i(x,null,k(n(U),((e,l)=>(s(),i(x,{key:e.id},[V("thead",null,[V("tr",null,[V("th",ia,b(e.name),1),V("th",da,b(t.$t("Answer")),1)])]),V("tbody",null,[(s(!0),i(x,null,k(e.questions,((e,a)=>(s(),i("tr",{key:e.id},[V("td",null,b(e.name),1),V("td",ua,[f(c,null,{default:v((()=>[f(r,null,{default:v((()=>["text"===e.answer_type?(s(),m(d,{key:0,modelValue:n(U)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(U)[l].questions[a].question_answer=e,rows:1},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),"boolean"===e.answer_type?(s(),m(u,{key:1,modelValue:n(U)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(U)[l].questions[a].question_answer=e,"true-value":"1","false-value":null,color:"primary",class:"p-0"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0)])),_:2},1024)])),_:2},1024)])])))),128))])],64)))),128))])],40,oa)])),action:v((({close:e})=>[f(h,null,{default:v((()=>[f(p,{type:"button",color:"warning",disabled:n(w)||!n(j),onClick:()=>{e(),t.$emit("laboratoryResearch")}},{default:v((()=>[y(b(t.$t("Send_for_examination")),1)])),_:2},1032,["disabled","onClick"]),f(p,{type:"button",color:"danger",disabled:n(w)||!n(j),onClick:()=>{e(),t.$emit("withdrawal")}},{default:v((()=>[y(b(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"]),f(_,{form:"questionnaire-form",loading:n(w)},null,8,["loading"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-e1ceb0f5"]]),pa={class:"patient-detail-wrapper"},_a=["onSubmit"],ma={class:"columns mt-5"},va={class:"column"},fa={class:"is-size-5"},ya=(e=>(U("data-v-f32b7d2c"),e=e(),j(),e))((()=>V("br",null,null,-1))),ba={class:"help has-text-danger"},ha={class:"column"},ga={class:"is-size-5"},Va={class:"column"},wa={class:"is-size-5"},$a={class:"navigation-buttons"},xa={class:"buttons is-right"},ka={key:1,class:"mt-5"},Ca={class:"box"},Ua={class:"is-size-6"},ja={class:"is-size-6"},Sa={class:"is-size-6"},Oa={class:"table is-bordered is-fullwidth"},za={key:0},Ma={key:1},Ra=X(a({__name:"[id]",async setup(e){var l;let a,t;const d=R();I();const h=u(),{t:w}=r(),$=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),x=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),k=c(!1),U=(null==(l=d.params)?void 0:l.id)||null,j=c([{label:w("Patient_details"),value:"#details",icon:"feather:info"},{label:w("Medical_information"),value:"#medical_information",icon:"feather:file-text"}]),O=c([]),z=c(!1),M=c(!1),D=c(!1),W=c(!1),Y=c(!1),B=c(!1),A=c(!1),L=c("#details");function G(e){x[e]=""}async function N(){var e,l;try{k.value=!0;await Q(U,$);h.success(w("Updated_successfully"))}catch(a){(null==(e=a.response)?void 0:e.data.errors)?Object.assign(x,null==(l=a.response)?void 0:l.data.errors):h.error(w("Something_went_wrong"))}finally{k.value=!1}}function H(){z.value=!0}function X(){M.value=!0}function Z(){D.value=!0}function le(){W.value=!0}function te(){Y.value=!0}function ne(){B.value=!0}function oe(){A.value=!0}function se(){}return fe().setPageTitle(w("Patient_info")),P({title:o((()=>w("Patient_info")))}),[a,t]=q((()=>async function(){try{const e=await K(U);Object.assign($,e.result),$.pinfl=$.pinfl??""}catch(e){h.error(e.message)}}())),await a,t(),_((async()=>{const e=await J();O.value=e.result})),(e,l)=>{var a;const t=_e,o=g("Multiselect"),d=F,u=T,r=me,c=ve,p=re,_=ae,h=ee,w=pe,R=ca,I=na,q=Hl,P=_l,J=We,K=Oe,Q=Ve;return s(),i("div",pa,[f(w,{selected:n(L),tabs:n(j)},{tab:v((({activeValue:a})=>{var m,g;return["#details"===a?(s(),i("form",{key:0,onSubmit:S(N,["prevent"])},[V("div",ma,[V("div",va,[V("p",fa,b(e.$t("Personal_Info")),1),f(t,{patient:n($),errors:n(x),onEditing:G},null,8,["patient","errors"]),ya,f(u,{label:e.$t("Category"),required:""},{default:v((()=>[f(d,null,{default:v((()=>[f(o,{modelValue:n($).patient_category_id,"onUpdate:modelValue":l[0]||(l[0]=e=>n($).patient_category_id=e),options:n(O),placeholder:e.$t("Select_category"),label:"name","value-prop":"id",onChange:l[1]||(l[1]=e=>G("patient_category_id"))},null,8,["modelValue","options","placeholder"]),V("p",ba,b(n(x).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),V("div",ha,[V("p",ga,b(e.$t("Passport_info")),1),f(r,{patient:n($),errors:n(x),onEditing:G},null,8,["patient","errors"])]),V("div",Va,[V("p",wa,b(e.$t("Address")),1),f(c,{patient:n($),errors:n(x),onEditing:G},null,8,["patient","errors"])])]),V("div",$a,[V("div",xa,[f(p,{type:"submit",color:"primary",bold:"",loading:n(k),disabled:n(k),tabindex:"0"},{default:v((()=>[y(b(e.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,_a)):"#medical_information"===a?(s(),i("div",ka,[V("div",Ca,[f(h,{class:"mb-3","justify-content":"space-between"},{default:v((()=>[f(_,null,{default:v((()=>{var l,a;return[V("p",Ua,b(e.$t("Directed_by"))+": "+b(null==(a=null==(l=n($).last_visit)?void 0:l.medical_organization)?void 0:a.name),1)]})),_:1}),f(_,null,{default:v((()=>{var l,a;return[V("p",ja,b(e.$t("Personalized_donation"))+": "+b((null==(l=n($).last_visit)?void 0:l.is_personalized_donation)?null==(a=n($).last_visit)?void 0:a.personalized_donation:e.$t("No")),1)]})),_:1}),f(_,null,{default:v((()=>{var l;return[V("p",Sa,b(e.$t("Blood_collect_condition"))+": "+b((null==(l=n($).last_visit)?void 0:l.is_mobile_team)?e.$t("Mobile_team"):e.$t("Stationary")),1)]})),_:1})])),_:1}),V("table",Oa,[V("tbody",null,[V("tr",null,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:H},b(e.$t("Medical_questionnaire")),1)])]),(null==(m=n($).last_visit)?void 0:m.primary_screening_result)?(s(),i("tr",za,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:X},b(e.$t("Primary_screening_results")),1)])])):C("",!0),(null==(g=n($).last_visit)?void 0:g.visit_status_id)>=3?(s(),i("tr",Ma,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:Z},b(e.$t("Laboratory_test_results")),1)])])):C("",!0)])])])])):C("",!0)]})),_:1},8,["selected","tabs"]),f(R,{"is-open":n(z),"onUpdate:is-open":l[2]||(l[2]=e=>E(z)?z.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onLaboratoryResearch:ne},null,8,["is-open","visitcard"]),3===(null==(a=n($).last_visit)?void 0:a.visit_status_id)?(s(),m(I,{key:0,"is-open":n(M),"onUpdate:is-open":l[3]||(l[3]=e=>E(M)?M.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onMedicalExamination:le},null,8,["is-open","visitcard"])):C("",!0),f(q,{"is-open":n(D),"onUpdate:is-open":l[4]||(l[4]=e=>E(D)?D.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onMedicalExamination:le},null,8,["is-open","visitcard"]),f(P,{"is-open":n(W),"onUpdate:is-open":l[5]||(l[5]=e=>E(W)?W.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onDonation:oe},null,8,["is-open","visitcard"]),f(J,{"is-open":n(Y),"onUpdate:is-open":l[6]||(l[6]=e=>E(Y)?Y.value=e:null),"patient-id":Number(n(U))},null,8,["is-open","patient-id"]),f(K,{"is-open":n(B),"onUpdate:is-open":l[7]||(l[7]=e=>E(B)?B.value=e:null),visitcard:n($).last_visit},null,8,["is-open","visitcard"]),f(Q,{"is-open":n(A),"onUpdate:is-open":l[8]||(l[8]=e=>E(A)?A.value=e:null),visitcard:n($).last_visit,onSubmit:se},null,8,["is-open","visitcard"])])}}}),[["__scopeId","data-v-f32b7d2c"]]);export{Ra as default};
