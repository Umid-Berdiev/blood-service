import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-929f8778.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-3fd94ade.js";import{_ as t}from"./VCheckbox.vue_vue_type_style_index_0_lang-2e6b52db.js";import{_ as a}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-369c18cd.js";import{_ as n}from"./VInput.vue_vue_type_script_setup_true_lang-88e8cbff.js";import{_ as s,a as o,b as i}from"./VControl-5569cf53.js";import{q as d,H as u,C as r,x as _,r as c,A as p,j as m,o as f,a as b,w as g,e as v,t as y,k as h,K as V,i as $,g as x,d as j,F as k,L as w,M as S,m as C,E as U,J as z,y as O,l as D,S as F}from"./index-10a7bb68.js";import{a as I}from"./additional-9e169b33.js";import{_ as B}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as E}from"./VCard.vue_vue_type_script_setup_true_lang-2f7124ba.js";import{a as M,_ as q,b as L,c as P,d as R}from"./search-7-dark-e44eeced.js";import{_ as T}from"./VButton.vue_vue_type_style_index_0_lang-73c8b1df.js";import{_ as W}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d2aaa355.js";import{u as A}from"./main-e68c1ccc.js";import{u as H}from"./viewWrapper-dc426096.js";import"./VIMaskInput.vue_vue_type_script_lang-dbe9f41c.js";import"./moment-aa9a2fad.js";import"./VFlex.vue_vue_type_style_index_0_lang-4effb675.js";import"./VPlaceload-686e62ec.js";const N=e=>(w("data-v-2b2e070a"),e=e(),S(),e),Q={class:"box"},G={class:"table is-fullwidth"},J={class:""},K={class:"has-text-info"},X={class:""},Y={class:"has-text-info"},Z={class:""},ee={class:"has-text-info"},le={class:""},te={class:"has-text-info"},ae={class:""},ne={class:"has-text-info"},se=N((()=>v("hr",{class:"is-divider"},null,-1))),oe={class:"box"},ie={class:"table is-fullwidth"},de={class:"is-flex is-align-items-center"},ue={class:"mr-5"},re=N((()=>v("br",null,null,-1))),_e={class:"is-flex is-align-items-center"},ce={class:"is-flex is-align-items-center"},pe=B(d({__name:"ProductReleaseFormModal",props:{product:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(d,{emit:w}){const S=u(),{t:C}=r(),U=_(!1),z=_(C("Product_release")),O=c({sent_to_id:null,medical_organization_id:null,subdivision_id:null,issue_date:"",basis_id:null,received_by:"",sent_by:"",tsgsen:"",transfer_date:"",defect_reasons:[]}),D=c({sent_to_id:[],medical_organization_id:[],subdivision_id:[],issue_date:[],basis_id:[],received_by:[],sent_by:[],tsgsen:[],transfer_date:[],defect_reasons:[]}),F=_([]),B=_([{id:1,name:"Отдел перепаратов"},{id:2,name:"Имуннологическое отделение"},{id:3,name:"Отдел переработки"}]),E=_([{id:1,name:"На трансфузию"},{id:2,name:"На переработку"},{id:3,name:"В ЦГСЭН"},{id:4,name:"На списание"}]),M=_([{id:1,name:"По требованию"},{id:2,name:"За наличный расчет"},{id:4,name:"По справке"}]);async function q(){var e,l;try{U.value=!0,S.success(C("Data_saved_successfully")),L()}catch(t){S.error(t.message),Object.assign(D,null==(l=null==(e=t.response)?void 0:e.data)?void 0:l.errors)}finally{U.value=!1}}function L(){w("update:isOpen",!1)}return p((async()=>{await I().then((e=>F.value=e.result))})),(u,r)=>{const _=m("Multiselect"),c=s,p=o,w=i,S=n,C=a,D=t,I=l,P=e;return f(),b(P,{open:d.isOpen,size:"big",title:V(z),actions:"right",onClose:L},{content:g((()=>[v("div",Q,[v("table",G,[v("tbody",null,[v("tr",null,[v("td",null,[v("span",J,y(u.$t("Component_name"))+": ",1),v("span",K,y(d.product.component_name),1)]),v("td",null,[v("span",X,y(u.$t("Donation_code"))+": ",1),v("span",Y,y(d.product.donation_code),1)])]),v("tr",null,[v("td",null,[v("span",Z,y(u.$t("Donation_date"))+": ",1),v("span",ee,y(d.product.donation_date),1)]),v("td",null,[v("span",le,y(u.$t("Expiry_date"))+": ",1),v("span",te,y(d.product.expiry_date),1)])]),v("tr",null,[v("td",null,[v("span",ae,y(u.$t("Quantity_ml"))+": ",1),v("span",ne,y(d.product.quantity),1)])])])])]),se,v("div",oe,[v("table",ie,[v("tbody",null,[v("tr",null,[v("td",null,[v("div",de,[v("div",ue,y(u.$t("Send_to")),1),h(p,null,{default:g((()=>[h(c,null,{default:g((()=>[h(_,{modelValue:V(O).sent_to_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(O).sent_to_id=e),options:V(E),placeholder:u.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})]),re,1===V(O).sent_to_id?(f(),b(p,{key:0},{default:g((()=>[h(w,null,{default:g((()=>[$(y(u.$t("Healthcare_facilities_list")),1)])),_:1}),h(c,null,{default:g((()=>[h(_,{modelValue:V(O).medical_organization_id,"onUpdate:modelValue":r[1]||(r[1]=e=>V(O).medical_organization_id=e),options:V(F),placeholder:u.$t("Select"),label:"name",searchable:"","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})):x("",!0),2===V(O).sent_to_id?(f(),b(p,{key:1},{default:g((()=>[h(w,null,{default:g((()=>[$(y(u.$t("Subdivision")),1)])),_:1}),h(c,null,{default:g((()=>[h(_,{modelValue:V(O).subdivision_id,"onUpdate:modelValue":r[2]||(r[2]=e=>V(O).subdivision_id=e),options:V(B),placeholder:u.$t("Select"),label:"name",searchable:"","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})):x("",!0),3===V(O).sent_to_id?(f(),b(p,{key:2,label:u.$t("TsGSEN")},{default:g((()=>[h(c,null,{default:g((()=>[h(S,{modelValue:V(O).tsgsen,"onUpdate:modelValue":r[3]||(r[3]=e=>V(O).tsgsen=e),placeholder:u.$t("Enter_tsgsen_title")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])):x("",!0),4===V(O).sent_to_id?(f(),j(k,{key:3},[v("div",_e,[v("div",null,y(u.$t("Transfer_date_for_debiting")),1),h(p,{class:"ml-5"},{default:g((()=>[h(c,null,{default:g((()=>[h(C,{modelValue:V(O).transfer_date,"onUpdate:modelValue":r[4]||(r[4]=e=>V(O).transfer_date=e)},null,8,["modelValue"])])),_:1})])),_:1})]),v("div",ce,[v("div",null,y(u.$t("Defect_reasons")),1),h(p,{class:"ml-auto"},{default:g((()=>[h(c,{raw:"",subcontrol:""},{default:g((()=>[h(D,{modelValue:V(O).defect_reasons,"onUpdate:modelValue":r[5]||(r[5]=e=>V(O).defect_reasons=e),label:u.$t("Shelf_life_expired"),value:"shelf_life_expired"},null,8,["modelValue","label"])])),_:1}),h(c,{raw:"",subcontrol:""},{default:g((()=>[h(D,{modelValue:V(O).defect_reasons,"onUpdate:modelValue":r[6]||(r[6]=e=>V(O).defect_reasons=e),label:u.$t("Container_damage"),value:"container_damage"},null,8,["modelValue","label"])])),_:1}),h(c,{raw:"",subcontrol:""},{default:g((()=>[h(D,{modelValue:V(O).defect_reasons,"onUpdate:modelValue":r[7]||(r[7]=e=>V(O).defect_reasons=e),label:u.$t("Other"),value:"other"},null,8,["modelValue","label"])])),_:1})])),_:1})])],64)):x("",!0)]),v("td",null,[h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:g((()=>[h(w,null,{default:g((()=>[$(y(u.$t("Issue_date")),1)])),_:1}),h(c,null,{default:g((()=>[h(C,{modelValue:V(O).issue_date,"onUpdate:modelValue":r[8]||(r[8]=e=>V(O).issue_date=e),style:{width:"50%"}},null,8,["modelValue"])])),_:1})])),_:1}),h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:g((()=>[h(w,null,{default:g((()=>[$(y(u.$t("Basis_for_issuance")),1)])),_:1}),h(c,null,{default:g((()=>[h(_,{modelValue:V(O).basis_id,"onUpdate:modelValue":r[9]||(r[9]=e=>V(O).basis_id=e),options:V(M),placeholder:u.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1}),h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:g((()=>[h(w,null,{default:g((()=>[$(y(u.$t("Received_by")),1)])),_:1}),h(c,null,{default:g((()=>[h(S,{modelValue:V(O).received_by,"onUpdate:modelValue":r[10]||(r[10]=e=>V(O).received_by=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:g((()=>[h(w,null,{default:g((()=>[$(y(u.$t("Sent_by")),1)])),_:1}),h(c,null,{default:g((()=>[h(S,{modelValue:V(O).sent_by,"onUpdate:modelValue":r[11]||(r[11]=e=>V(O).sent_by=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1})])])])])])])),action:g((()=>[h(I,{type:"button",loading:V(U),onClick:q},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-2b2e070a"]]),me=["onSubmit"],fe={class:"columns"},be={class:"column is-3"},ge={class:"help has-text-danger"},ve={class:"column is-3"},ye={class:"help has-text-danger"},he={class:"column is-narrow mt-auto ml-auto pb-4"},Ve={class:"buttons"},$e=d({__name:"StorageTransferredProductsFilter",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],setup(e,{emit:l}){r(),u();const t=c({component_id:null,donation_code:""}),a=_([]);p((async()=>{}));const i=async()=>{l("search",t)},d=async()=>{Object.assign(t,{component_id:null,donation_code:""}),l("clearForm")};return(l,u)=>{const r=m("Multiselect"),_=s,c=o,p=n,x=T,j=E;return f(),b(j,null,{default:g((()=>[v("form",{onSubmit:C(i,["prevent"])},[v("div",fe,[v("div",be,[h(c,{class:"is-curved-select",label:l.$t("Component_name")},{default:g((({id:n})=>[h(_,null,{default:g((()=>[h(r,{modelValue:V(t).component_id,"onUpdate:modelValue":u[0]||(u[0]=e=>V(t).component_id=e),attrs:{id:n},options:V(a),placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),v("p",ge,y(e.errors.component_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),v("div",ve,[h(c,{class:"is-curved-select",label:l.$t("Donation_code")},{default:g((({id:a})=>[h(_,null,{default:g((()=>[h(p,{modelValue:V(t).donation_code,"onUpdate:modelValue":u[1]||(u[1]=e=>V(t).donation_code=e),attrs:{id:a},placeholder:l.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),v("p",ye,y(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])]),v("div",he,[v("div",Ve,[h(x,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:d},{default:g((()=>[$(y(l.$t("Clear")),1)])),_:1},8,["disabled"]),h(x,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:g((()=>[$(y(l.$t("Search")),1)])),_:1},8,["loading"])])])])],40,me)])),_:1})}}}),xe=e=>(w("data-v-f074d0a3"),e=e(),S(),e),je={class:"page-content-inner"},ke={class:"columns mb-5"},we={class:"column is-narrow"},Se={class:"columns"},Ce={class:"column"},Ue={class:"columns"},ze={class:"column"},Oe={class:"table-container"},De={key:0,class:"flex-list-inner"},Fe=xe((()=>v("img",{class:"light-image",src:P,alt:""},null,-1))),Ie=xe((()=>v("img",{class:"dark-image",src:R,alt:""},null,-1))),Be={key:1,class:"table is-hoverable is-fullwidth"},Ee={colspan:"10"},Me=["onClick"],qe=B(d({__name:"index",setup(e){U(),u();const{t:l}=r(),t=A(),a=_(!1),n=H();_(null),n.setPageTitle(l("Forwarding")),z({title:`${l("Storage_transferred_products")} - ${t.app.name}`});const s=c({data:[{id:11,donation_date:"10.12.2022",donation_code:"130100123400",blood_type:"O(I)",rh_factor:"Rh+",component_name:"Эритроцитная масса",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),o=c({}),i=_(!1),d=c({donation_code:[],component_id:[]});async function p(e){var l,t;try{a.value=!0;s.pagination.current_page}catch(n){Object.assign(d,null==(t=null==(l=n.response)?void 0:l.data)?void 0:t.errors)}finally{a.value=!1}}function m(e){errors[e]=""}async function $(){s.data=[]}return O(i,(function(e){!1===e&&Object.assign(o,{})})),(e,l)=>{const n=W,u=$e,r=M,_=q,c=L,w=E,S=pe;return f(),j("div",je,[v("div",ke,[v("div",we,[h(n,{"with-icons":"",separator:"bullet",items:[{label:V(t).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Forwarding")},{label:e.$t("Storage_transferred_products")}]},null,8,["items"])])]),v("div",Se,[v("div",Ce,[h(u,{"is-loading":V(a),errors:V(d),onSearch:p,onClearForm:$,onClearError:m},null,8,["is-loading","errors"])])]),v("div",Ue,[v("div",ze,[h(w,null,{default:g((()=>[v("div",Oe,[0===V(s).data.length?(f(),j("div",De,[h(r,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:g((()=>[Fe,Ie])),_:1},8,["title","subtitle"])])):(f(),j("table",Be,[v("thead",null,[v("tr",null,[v("th",null,y(e.$t("Donation_date")),1),v("th",null,y(e.$t("Donation_code")),1),v("th",null,y(e.$t("Blood_type")),1),v("th",null,y(e.$t("Rh_factor")),1),v("th",null,y(e.$t("Component_name")),1),v("th",null,y(e.$t("Dose")),1),v("th",null,y(e.$t("Quantity_ml")),1),v("th",null,y(e.$t("Come_from")),1),v("th",null,y(e.$t("Recipient_surname")),1),v("th",null,y(e.$t("Expiry_date")),1)])]),v("tbody",null,[V(a)?(f(!0),j(k,{key:0},D(V(s).pagination.per_page,(e=>(f(),j("tr",{key:e},[v("td",Ee,[h(_,{lines:2,"last-line-width":"70%"})])])))),128)):(f(!0),j(k,{key:1},D(V(s).data,((e,l)=>(f(),j("tr",{key:l},[v("td",null,y(e.donation_date),1),v("td",null,[v("a",{href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){Object.assign(o,e),i.value=!0}(e)},y(e.donation_code),9,Me)]),v("td",null,y(e.blood_type),1),v("td",null,y(e.rh_factor),1),v("td",null,y(e.component_name),1),v("td",null,y(e.dose),1),v("td",null,y(e.quantity),1),v("td",null,y(e.come_from),1),v("td",null,y(e.personalized_donation),1),v("td",null,y(e.expiry_date),1)])))),128))])]))]),V(s).data.length?(f(),b(c,{key:0,"current-page":V(s).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>V(s).pagination.current_page=e),class:"mt-5","item-per-page":V(s).pagination.per_page,"total-items":V(s).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):x("",!0)])),_:1})])]),h(S,{"is-open":V(i),"onUpdate:is-open":l[1]||(l[1]=e=>F(i)?i.value=e:null),product:V(o),"onUpdate:list":p},null,8,["is-open","product"])])}}}),[["__scopeId","data-v-f074d0a3"]]);export{qe as default};
