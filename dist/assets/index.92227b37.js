import{f as e,g as a,_ as t,a as s,b as n,c as r,d as l,e as o}from"./search-7-dark.607cbb05.js";import{_ as i}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang.7d0a75f0.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import{_ as p}from"./VButtons.vue_vue_type_script_setup_true_lang.8b787511.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import{_ as c}from"./VFlexItem.vue_vue_type_style_index_0_lang.c03e68c9.js";import{_}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.141f26f3.js";import{q as m,E as g,H as f,C as v,x as b,r as y,J as h,c as j,j as x,o as k,d as w,k as $,w as C,K as V,m as F,i as I,t as D,e as P,g as R,F as B,l as E,a as O,S as U}from"./index.5e313a07.js";import{u as q}from"./viewWrapper.74d08f31.js";import{m as A}from"./patient.83d02e12.js";import{u as L}from"./main.a14c778c.js";import{_ as S}from"./lodash.6f8ef5ec.js";import"./VPlaceload.726b7e5d.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VCard.vue_vue_type_script_setup_true_lang.1f6b49b7.js";import"./VInput.vue_vue_type_script_setup_true_lang.132fca0f.js";import"./VControl.a4292c49.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";const T={class:"page-content-inner"},G={class:"columns mt-1"},H={class:"column"},J={class:"columns"},K={class:"column is-12"},M={key:0,class:"is-flex-grow-0",textContent:"#"},N={key:0,class:"flex-list-inner"},W={key:1,class:"flex-list-inner"},z=P("img",{class:"light-image",src:e,alt:""},null,-1),Q=P("img",{class:"dark-image",src:a,alt:""},null,-1),X=S.isEmpty,Y=m({__name:"index",setup(e){const a=g(),m=f(),{t:S}=v(),Y=L(),Z=b(!1),ee=y({lastname:"",firstname:"",middlename:"",passpordId:""});q().setPageTitle(S("Registration")),h({title:`${S("Unified-donor-register")} - ${Y.app.name}`});const ae=y({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),te=j({get:()=>ae.pagination.current_page,set:async e=>{se.page=e,await re(se)}}),se=y({page:1}),ne={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:S("Category"),format:e=>e.name},name:{label:S("Fullname")},gender:{label:S("Gender"),format:e=>S(e)},birth_date:{label:S("Date-of-birth")},full_address:{label:S("Address")},phone_number:{label:S("Phone_number")},isDiverted:{label:S("Diverted_from_donation")}};async function re(e){var a,t;try{Object.assign(se,e),Z.value=!0;const a=await A(e);Object.assign(ae,a.result),X(a.result.data)?m.warning(S("Data_not_found")):m.success(`${S("Found")}: ${a.result.pagination.total} ${S("records")}`)}catch(s){Object.assign(ee,null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.errors)}finally{Z.value=!1}}function le(e){ee[e]=""}async function oe(){ae.data=[]}function ie(){a.push("/app/registration/register-donors")}function ue(){}return b(),(e,a)=>{const m=_,g=c,f=d,v=p,b=u,y=i,h=t,j=s,q=n,A=x("RouterLink"),L=r,S=l,X=o;return k(),w("div",T,[$(b,{"justify-content":"space-between","flex-wrap":"wrap"},{default:C((()=>[$(g,null,{default:C((()=>[$(m,{"with-icons":"",separator:"bullet",items:[{label:V(Y).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Registration")},{label:e.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),$(g,null,{default:C((()=>[$(v,null,{default:C((()=>[$(f,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:F(ie,["prevent"])},{default:C((()=>[I(D(e.$t("Add")),1)])),_:1},8,["onClick"]),$(f,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:F(ue,["prevent"])},{default:C((()=>[I(D(e.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),P("div",G,[P("div",H,[$(y,{"is-loading":Z.value,errors:ee,onSearch:re,onClearForm:oe,onClearError:le},null,8,["is-loading","errors"])])]),P("div",J,[P("div",K,[$(X,{columns:V(ne),data:ae.data,limit:ae.pagination.per_page,total:ae.pagination.total},{default:C((()=>[$(L,{rounded:"","no-header":!Z.value&&0===ae.data.length},{"header-column":C((({column:e})=>["#"===e.key?(k(),w("span",M)):R("",!0)])),body:C((()=>[Z.value?(k(),w("div",N,[(k(!0),w(B,null,E(ae.pagination.per_page,(e=>(k(),w("div",{key:e,class:"flex-table-item"},[$(j,null,{default:C((()=>[$(h,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):R("",!0),0===ae.data.length?(k(),w("div",W,[$(q,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:C((()=>[z,Q])),_:1})])):R("",!0)])),"body-cell":C((({row:a,column:t,value:s})=>["name"===t.key?(k(),O(A,{key:0,class:"has-text-primary",to:`${e.$route.path}/${a.id}#details`},{default:C((()=>[I(D(a.first_name)+" "+D(a.last_name)+" "+D(a.father_name),1)])),_:2},1032,["to"])):R("",!0)])),_:1},8,["no-header"]),ae.data.length?(k(),O(S,{key:0,"current-page":V(te),"onUpdate:current-page":a[0]||(a[0]=e=>U(te)?te.value=e:null),class:"mt-5","item-per-page":ae.pagination.per_page,"total-items":ae.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):R("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Y as default};
