import{_ as e,a as t,b as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-03a54f1c.js";import{c as s,d as n,_ as r,a as l,b as i}from"./search-7-dark-81286176.js";import{_ as o}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang-8cf3c3a8.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang-57370b27.js";import{_}from"./VButtons.vue_vue_type_script_setup_true_lang-fd69cbe3.js";import{_ as p}from"./VButton.vue_vue_type_style_index_0_lang-b78df6f3.js";import{_ as m}from"./VFlexItem.vue_vue_type_style_index_0_lang-a32e2ae4.js";import{_ as d}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-69f615bd.js";import{q as c,E as g,H as f,C as v,x as y,r as b,J as h,c as j,j as x,o as k,d as C,k as $,w,K as V,m as F,i as B,t as I,e as D,g as R,F as U,l as O,a as P,U as T}from"./index-21286bdb.js";import{u as q}from"./viewWrapper-6ae5f61c.js";import{i as A}from"./patient-26cab0f6.js";import{u as E}from"./main-16751c88.js";import"./VCard.vue_vue_type_script_setup_true_lang-1043f916.js";import"./SubmitButton.vue_vue_type_script_setup_true_lang-96021f2c.js";import"./ClearButton.vue_vue_type_script_setup_true_lang-7aff0300.js";import"./VInput.vue_vue_type_script_setup_true_lang-9c010bca.js";import"./VControl-e7b2630d.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VIMaskInput.vue_vue_type_script_lang-50284b9a.js";import"./lodash-724857a3.js";const L={class:"page-content-inner"},S={class:"columns mt-1"},G={class:"column"},H={class:"columns"},J={class:"column is-12"},K={key:0,class:"is-flex-grow-0",textContent:"#"},M={key:0,class:"flex-list-inner"},N={key:1,class:"flex-list-inner"},W=D("img",{class:"light-image",src:s,alt:""},null,-1),Z=D("img",{class:"dark-image",src:n,alt:""},null,-1),z=c({__name:"index",setup(s){const n=g();f();const{t:c}=v(),z=E(),Q=y(!1),X=b({lastname:"",firstname:"",middlename:"",passpordId:""});q().setPageTitle(c("Registration")),h({title:`${c("Unified-donor-register")} - ${z.app.name}`});const Y=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),ee=j({get:()=>Y.pagination.current_page,set:async e=>{te.page=e,await se(te)}}),te=b({page:1}),ae={"#":{format:(e,t,a)=>`${a+1}`,cellClass:"is-flex-grow-0"},category:{label:c("Category"),format:e=>e.name},name:{label:c("Fullname")},gender:{label:c("Gender"),format:e=>c(e)},birth_date:{label:c("Date-of-birth")},full_address:{label:c("Address")},phone_number:{label:c("Phone_number")},isDiverted:{label:c("Diverted_from_donation")}};async function se(e){var t,a;try{Object.assign(te,e),Q.value=!0;const t=await A(e);Object.assign(Y,t.result)}catch(s){Object.assign(X,null==(a=null==(t=s.response)?void 0:t.data)?void 0:a.errors)}finally{Q.value=!1}}function ne(e){X[e]=""}async function re(){Y.data=[]}function le(){n.push("/app/registration/register-donors")}function ie(){}return(s,n)=>{const c=d,g=m,f=p,v=_,y=u,b=o,h=r,j=e,q=l,A=x("RouterLink"),E=t,te=i,oe=a;return k(),C("div",L,[$(y,{"justify-content":"space-between","flex-wrap":"wrap"},{default:w((()=>[$(g,null,{default:w((()=>[$(c,{"with-icons":"",separator:"bullet",items:[{label:V(z).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:s.$t("Registration")},{label:s.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),$(g,null,{default:w((()=>[$(v,null,{default:w((()=>[$(f,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:F(le,["prevent"])},{default:w((()=>[B(I(s.$t("Add")),1)])),_:1},8,["onClick"]),$(f,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:F(ie,["prevent"])},{default:w((()=>[B(I(s.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),D("div",S,[D("div",G,[$(b,{"is-loading":V(Q),errors:V(X),onSearch:se,onClearForm:re,onClearError:ne},null,8,["is-loading","errors"])])]),D("div",H,[D("div",J,[$(oe,{columns:V(ae),data:V(Y).data,limit:V(Y).pagination.per_page,total:V(Y).pagination.total},{default:w((()=>[$(E,{rounded:"","no-header":!V(Q)&&0===V(Y).data.length},{"header-column":w((({column:e})=>["#"===e.key?(k(),C("span",K)):R("",!0)])),body:w((()=>[V(Q)?(k(),C("div",M,[(k(!0),C(U,null,O(V(Y).pagination.per_page,(e=>(k(),C("div",{key:e,class:"flex-table-item"},[$(j,null,{default:w((()=>[$(h,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):R("",!0),0===V(Y).data.length?(k(),C("div",N,[$(q,{title:s.$t("No_data"),subtitle:s.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:w((()=>[W,Z])),_:1},8,["title","subtitle"])])):R("",!0)])),"body-cell":w((({row:e,column:t,value:a})=>["name"===t.key?(k(),P(A,{key:0,class:"has-text-primary",to:`${s.$route.path}/${e.id}#details`},{default:w((()=>[B(I(e.first_name)+" "+I(e.last_name)+" "+I(e.father_name),1)])),_:2},1032,["to"])):R("",!0)])),_:1},8,["no-header"]),V(Y).data.length?(k(),P(te,{key:0,"current-page":V(ee),"onUpdate:current-page":n[0]||(n[0]=e=>T(ee)?ee.value=e:null),class:"mt-5","item-per-page":V(Y).pagination.per_page,"total-items":V(Y).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):R("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{z as default};
