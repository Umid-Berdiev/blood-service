import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-e5001c63.js";import{a,a7 as t,u as n,c as o,l as s,m as i,P as d,b as u,r,o as c,t as p,q as _,p as m,v,V as f,w as y,s as b,a5 as h,af as g,Q as V,M as w,W as $,y as k,$ as x,a0 as C,X as j,Y as U,ag as S,D as O,ac as z,i as M}from"./chunk-BGPNDDXN-dcda8805.js";import{b as I,_ as D,a as R}from"./VControl-fc151345.js";import{_ as P}from"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import{u as q}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as E}from"./useNotyf-1536ae84.js";import{s as W,b as F,c as B,d as T,e as Y,g as A,p as N,h as G,u as L}from"./patient-3eef0e53.js";import{_ as H}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as Q}from"./VCheckbox.vue_vue_type_style_index_0_lang-25f2733c.js";import{_ as X}from"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import{_ as J}from"./lodash-94527813.js";import{_ as K}from"./VFlexItem.vue_vue_type_style_index_0_lang-ff50e60d.js";import{a as Z,b as ee,c as le}from"./additional-e5508e19.js";import{_ as ae}from"./VTextarea.vue_vue_type_script_setup_true_lang-a017671a.js";import{_ as te}from"./VRadio.vue_vue_type_style_index_0_lang-03da69fa.js";import{m as ne}from"./moment-e00bdeae.js";import{_ as oe}from"./VButtons.vue_vue_type_script_setup_true_lang-cc776021.js";import{_ as se}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as ie}from"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import{b as de,u as ue}from"./chunk-DRAQDPQ2-4514f14e.js";import{a as re}from"./userSession-0c0e9684.js";import{_ as ce}from"./VTabs.vue_vue_type_script_setup_true_lang-b35d55fc.js";import{_ as pe,a as _e,b as me}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-ebd47023.js";import{u as ve}from"./@vueuse_head-0d019878.js";import{u as fe}from"./viewWrapper-c60f0ce7.js";import"./VPlaceload-2a65ae53.js";import"./pinia-3af6ce52.js";import"./@vueuse_core-098eb702.js";import"./VIcon.vue_vue_type_script_setup_true_lang-287aecd9.js";const ye={class:"v-grid"},be=a({__name:"VGrid",props:{inline:{type:Boolean},gridTemplateColumns:{default:"none"},gridTemplateRows:{default:"none"},gridTemplateAreas:{default:"none"},columnGap:{default:"normal"},rowGap:{default:"normal"},justifyItems:{default:"initial"},alignItems:{default:"initial"},justifyContent:{default:"initial"},alignContent:{default:"initial"},placeContent:{default:"normal"},gridAutoColumns:{default:"auto"},gridAutoRows:{default:"auto"},gridAutoFlow:{default:"row"}},setup(e){const l=e;t((e=>({c9233fce:n(a),41529814:l.gridTemplateColumns,"4ac08460":l.gridTemplateRows,"0c618fdf":l.gridTemplateAreas,"9bbce60e":l.columnGap,"641aebe3":l.rowGap,"28966b17":l.justifyItems,"5f95d4fc":l.alignItems,"173c3e10":l.justifyContent,"51d9f9bb":l.alignContent,"2afad179":l.placeContent,"3c8fbea1":l.gridAutoColumns,"5b7c7195":l.gridAutoRows,"5b76f0ea":l.gridAutoFlow})));const a=o((()=>l.inline?"inline-grid":"grid"));return(e,l)=>(s(),i("div",ye,[d(e.$slots,"default")]))}}),he={class:"v-grid-item"},ge=a({__name:"VGridItem",props:{gridColumnStart:{default:"auto"},gridColumnEnd:{default:"auto"},gridRowStart:{default:"auto"},gridRowEnd:{default:"auto"},justifySelf:{default:"auto"},alignSelf:{default:"auto"},placeSelf:{default:"auto"}},setup(e){const l=e;return t((e=>({"1401e278":l.gridColumnStart,"2b6903bd":l.gridColumnEnd,41478190:l.gridRowStart,"0387b989":l.gridRowEnd,"032f283a":l.justifySelf,dd16eca2:l.alignSelf,da1a0a9e:l.placeSelf}))),(e,l)=>(s(),i("div",he,[d(e.$slots,"default")]))}}),Ve=H(a({__name:"DirectionForDonationModal",props:{isOpen:{type:Boolean,default:!1},visitcard:null},emits:["update:isOpen","submit"],setup(a,{emit:t}){const o=a,i=E(),{t:d}=q(),y=u(!1),b=u(d("Direction_for_donation")),h=r({donation_code:null,recommended_blood_capacity:""}),g=r({donation_code:[],recommended_blood_capacity:[]});async function V(){var e,l,a;try{y.value=!0,await W(null==(e=o.visitcard)?void 0:e.id,h),i.success(d("Data_saved_successfully")),w()}catch(t){i.error(t.message),Object.assign(g,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{y.value=!1}}function w(){t("update:isOpen",!1)}return c((()=>{var e;h.donation_code=null==(e=o.visitcard)?void 0:e.donation_code})),(t,o)=>{const i=I,d=P,u=D,r=R,c=ge,g=be,$=l,k=e;return s(),p(k,{open:a.isOpen,title:n(b),actions:"right",onClose:w},{content:_((()=>[m(g,{"row-gap":"1rem"},{default:_((()=>[m(c,null,{default:_((()=>[m(r,{horizontal:""},{default:_((()=>[m(i,{class:"my-auto mr-5"},{default:_((()=>[v(f(t.$t("Donation_code")),1)])),_:1}),m(u,{class:"ml-auto"},{default:_((()=>[m(d,{modelValue:n(h).donation_code,"onUpdate:modelValue":o[0]||(o[0]=e=>n(h).donation_code=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(c,null,{default:_((()=>[m(r,{horizontal:""},{default:_((()=>[m(i,{class:"my-auto mr-5"},{default:_((()=>[v(f(t.$t("Recommended_blood_capacity")),1)])),_:1}),m(u,{class:"ml-auto"},{default:_((()=>[m(d,{modelValue:n(h).recommended_blood_capacity,"onUpdate:modelValue":o[1]||(o[1]=e=>n(h).recommended_blood_capacity=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),action:_((()=>[m($,{type:"button",loading:n(y),onClick:V},{default:_((()=>[v(f(t.$t("For_donation")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-fb8187f2"]]),we=(e=>(x("data-v-417d7caf"),e=e(),C(),e))((()=>V("br",null,null,-1))),$e={key:0,class:"table-container"},ke={class:"table is-bordered is-fullwidth"},xe={colspan:4,class:"has-text-centered"},Ce=J.flatten,je=H(a({__name:"LaboratoryResearchModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(a,{emit:t}){const o=a,d=E(),{t:x}=q(),C=u(!1),j=u(x("Direction_for_laboratory_research")),U=u([]),S=u([]),O=u([]),z=r({donation_code:null,donation_type_id:null,immunization_id:null,laboratory_researches:[]}),M=r({});async function W(){var e,l;try{C.value=!0,z.laboratory_researches=Ce(O.value.map((e=>e.laboratory_researches.filter((e=>e.value)).map((e=>e.id))))),await B(o.visitcard.id,z),d.success(x("Data_saved_successfully")),T()}catch(a){d.error(a.message),Object.assign(M,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{C.value=!1}}function T(){t("update:isOpen",!1)}return c((async()=>{z.donation_code=o.visitcard.donation_code,z.donation_type_id=o.visitcard.donation_type_id,z.immunization_id=o.visitcard.immunization_id,S.value=await Z().then((e=>e.result)),U.value=await ee().then((e=>e.result))})),y((()=>z.donation_type_id),(async e=>{1===e&&await async function(){O.value=await F(o.visitcard.id).then((e=>e.result))}()})),(t,o)=>{const d=I,u=b("Multiselect"),r=D,c=R,y=P,x=X,M=Q,q=l,E=e;return s(),p(E,{open:a.isOpen,size:"extra-big",title:n(j),actions:"right",onClose:T},{content:_((()=>[m(x,{"flex-wrap":"wrap","column-gap":"5rem"},{default:_((()=>[m(K,null,{default:_((()=>[m(c,{horizontal:""},{default:_((()=>[m(d,{class:"my-auto mr-5"},{default:_((()=>[v(f(t.$t("Donation_types_list")),1)])),_:1}),m(r,null,{default:_((()=>[m(u,{modelValue:n(z).donation_type_id,"onUpdate:modelValue":o[0]||(o[0]=e=>n(z).donation_type_id=e),style:{"min-width":"15rem"},options:n(S),placeholder:t.$t("Select_donation_type"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})])),_:1}),m(K,null,{default:_((()=>[m(c,{horizontal:""},{default:_((()=>[m(d,{class:"my-auto mr-5"},{default:_((()=>[v(f(t.$t("Immunization")),1)])),_:1}),m(r,null,{default:_((()=>[m(u,{modelValue:n(z).immunization_id,"onUpdate:modelValue":o[1]||(o[1]=e=>n(z).immunization_id=e),style:{"min-width":"15rem"},options:n(U),placeholder:t.$t("Not_required"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})])),_:1}),h(m(K,null,{default:_((()=>[m(c,{horizontal:""},{default:_((()=>[m(d,{class:"my-auto mr-5"},{default:_((()=>[v(f(t.$t("Donation_code")),1)])),_:1}),m(r,null,{default:_((()=>[m(y,{modelValue:n(z).donation_code,"onUpdate:modelValue":o[2]||(o[2]=e=>n(z).donation_code=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[g,1===n(z).donation_type_id]])])),_:1}),we,1===n(z).donation_type_id&&n(O).length?(s(),i("div",$e,[V("table",ke,[V("thead",null,[V("tr",null,[V("th",xe,f(t.$t("Laboratory_research_types")),1)]),V("tr",null,[(s(!0),i(w,null,$(n(O),(e=>(s(),i("th",{key:e.id},f(e.name),1)))),128))])]),V("tbody",null,[V("tr",null,[V("td",null,[(s(!0),i(w,null,$(n(O)[0].laboratory_researches,(e=>(s(),p(c,{key:e.id},{default:_((()=>[m(r,null,{default:_((()=>[m(M,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(w,null,$(n(O)[1].laboratory_researches,(e=>(s(),p(c,{key:e.id},{default:_((()=>[m(r,null,{default:_((()=>[m(M,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(w,null,$(n(O)[2].laboratory_researches,(e=>(s(),p(c,{key:e.id},{default:_((()=>[m(r,null,{default:_((()=>[m(M,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(w,null,$(n(O)[3].laboratory_researches,(e=>(s(),p(c,{key:e.id},{default:_((()=>[m(r,null,{default:_((()=>[m(M,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))])])])])])):k("",!0)])),action:_((()=>[m(q,{type:"button",loading:n(C),onClick:W},{default:_((()=>[v(f(t.$t("Submit_for_research")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-417d7caf"]]),Ue=["onSubmit"],Se={class:"column is-12"},Oe={class:"help has-text-danger"},ze={class:"help has-text-danger"},Me={class:"help has-text-danger"},Ie={class:"help has-text-danger"},De={class:"help has-text-danger"},Re=ne.__esModule?ne.default:ne,Pe=a({__name:"WithdrawalFormModal",props:{isOpen:{type:Boolean,default:!1},patientId:{default:null}},emits:["update:isOpen","update:list"],setup(a,{emit:t}){const o=a,i=E(),{t:d}=q(),v=u(d("Withdrawal")),y=u(!1),{locale:h}=q(),g=u({input:"YYYY-MM-DD"}),w=r({type:"string",mask:g.value.input}),$=u([]),x=r({type:"temporary",reason_id:null,start_date:Re().format("YYYY-MM-DD"),end_date:"",source:""}),C=r({type:[],reason_id:[],start_date:[],end_date:[],source:[]});async function O(){var e,l,a,n;try{y.value=!0,await T(o.patientId,x),t("update:list"),z()}catch(s){(null==(e=s.response)?void 0:e.data.error)?i.error(null==(l=s.response)?void 0:l.data.error):Object.assign(C,null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.errors)}finally{y.value=!1}}function z(){Object.assign(x,{type:"temporary",reason_id:null,start_date:Re().format("YYYY-MM-DD"),end_date:"",source:""}),Object.assign(C,{type:[],reason_id:[],start_date:[],end_date:[],source:[]}),t("update:isOpen",!1)}function M(e){C[e]=""}return r({start:new Date,end:new Date}),c((async()=>{const e=await le();$.value=e.result})),(t,o)=>{const i=te,u=D,r=R,c=b("Multiselect"),I=P,q=b("VDatePicker"),E=ae,W=l,F=e;return s(),p(F,{open:a.isOpen,size:"large",title:v.value,actions:"right",onClose:z},{content:_((()=>[V("form",{id:"withdrawal-form",class:"modal-form",onSubmit:j(O,["prevent"])},[V("div",Se,[m(r,{label:t.$t("Withdrawal_type"),required:""},{default:_((()=>[m(u,null,{default:_((()=>[m(i,{modelValue:x.type,"onUpdate:modelValue":o[0]||(o[0]=e=>x.type=e),value:"permanent",label:t.$t("Permanent"),onChange:o[1]||(o[1]=e=>M("type"))},null,8,["modelValue","label"]),m(i,{modelValue:x.type,"onUpdate:modelValue":o[2]||(o[2]=e=>x.type=e),value:"temporary",label:t.$t("Temporary"),onChange:o[3]||(o[3]=e=>M("type"))},null,8,["modelValue","label"]),V("p",Oe,f(C.type[0]),1)])),_:1})])),_:1},8,["label"]),m(r,{class:"is-curved-select"},{default:_((({id:e})=>[m(u,null,{default:_((()=>[m(c,{modelValue:x.reason_id,"onUpdate:modelValue":o[4]||(o[4]=e=>x.reason_id=e),attrs:{id:e},options:$.value,placeholder:t.$t("Select_reason"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),V("span",ze,f(C.reason_id[0]),1)])),_:2},1024)])),_:1}),m(q,{modelValue:x.start_date,"onUpdate:modelValue":o[6]||(o[6]=e=>x.start_date=e),locale:n(h),mode:"date",masks:g.value,"model-config":w,color:"green","trim-weeks":"",popover:{visibility:"click"}},{default:_((({inputValue:e,inputEvents:l})=>[m(r,{label:t.$t("Start_date")},{default:_((()=>[m(u,{icon:"feather:calendar"},{default:_((()=>[m(I,U({value:e},S(l),{onChange:o[5]||(o[5]=e=>M("start_date"))}),null,16,["value"]),V("p",Me,f(C.start_date[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1},8,["modelValue","locale","masks","model-config"]),"temporary"===x.type?(s(),p(q,{key:0,modelValue:x.end_date,"onUpdate:modelValue":o[8]||(o[8]=e=>x.end_date=e),locale:n(h),mode:"date",masks:g.value,"model-config":w,color:"green","trim-weeks":"",popover:{visibility:"click"}},{default:_((({inputValue:e,inputEvents:l})=>[m(r,{label:t.$t("End_date")},{default:_((()=>[m(u,{icon:"feather:calendar"},{default:_((()=>[m(I,U({class:"is-primary-focus",value:e,disabled:"permanent"===x.type},S(l),{onChange:o[7]||(o[7]=e=>M("end_date"))}),null,16,["value","disabled"]),V("p",Ie,f(C.end_date[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1},8,["modelValue","locale","masks","model-config"])):k("",!0),m(r,{label:t.$t("Source"),required:""},{default:_((()=>[m(u,null,{default:_((()=>[m(E,{modelValue:x.source,"onUpdate:modelValue":o[9]||(o[9]=e=>x.source=e),placeholder:n(d)("Enter_source"),rows:3,onInput:o[10]||(o[10]=e=>M("source"))},null,8,["modelValue","placeholder"]),V("p",De,f(C.source[0]),1)])),_:1})])),_:1},8,["label"])])],40,Ue)])),action:_((({close:e})=>[m(W,{loading:y.value,form:"withdrawal-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),qe=re();const Ee={class:"columns"},We={class:"column"},Fe={class:"table-container"},Be={class:"table is-bordered is-fullwidth"},Te={class:""},Ye={class:""},Ae={class:""},Ne={class:""},Ge={class:""},Le={class:""},He={class:""},Qe={class:"columns"},Xe={class:"column"},Je={class:"column"},Ke={class:""},Ze={class:"columns"},el={class:"column"},ll={class:"column"},al={class:""},tl={class:"columns"},nl={class:"column"},ol={class:"column"},sl={class:""},il={class:"columns"},dl={class:"column"},ul={class:"column"},rl=H(a({__name:"MedicalInspectionFormModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","donation","withdrawal"],setup(a,{emit:t}){const o=a;de(),ue();const{locale:i,t:d}=q(),c=E(),y=u(!1),b=u(d("Medical_inspection")),h=u({weight:"",height:"",temperature:"",blood_pressure:"",pulse:"",lymph_node:0,liver:0,skin:0,lung:0,heart:0}),g=r({weight:[],height:[],temperature:[],blood_pressure:[],pulse:[],lymph_node:[],liver:[],skin:[],lung:[],heart:[]});function w(){t("update:isOpen",!1)}async function $(){var e,l;try{y.value=!0;await async function(e,l){try{const{data:a}=await qe({url:`/visit-cards/${e}/medical-examinations`,method:"POST",data:l});return a}catch(a){throw a}}(o.visitcard.id,h.value);c.success(d("Data_saved_successfully"))}catch(a){c.error(d("Something_went_wrong")),Object.assign(g,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{y.value=!1}}return O((()=>{o.visitcard&&o.visitcard.medical_examination&&(h.value=o.visitcard.medical_examination)})),(t,o)=>{const i=P,d=D,u=R,r=ie,c=te,g=l,k=se,x=oe,C=e;return s(),p(C,{open:a.isOpen,size:"big",title:n(b),actions:"right",onClose:w},{content:_((()=>[V("div",Ee,[V("div",We,[V("div",Fe,[V("table",Be,[V("tbody",null,[V("tr",null,[V("td",null,[V("p",Te,f(t.$t("Weight_kg")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[m(i,{modelValue:n(h).weight,"onUpdate:modelValue":o[0]||(o[0]=e=>n(h).weight=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ye,f(t.$t("Height_sm")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[m(i,{modelValue:n(h).height,"onUpdate:modelValue":o[1]||(o[1]=e=>n(h).height=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ae,f(t.$t("Temperature")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[m(i,{modelValue:n(h).temperature,"onUpdate:modelValue":o[2]||(o[2]=e=>n(h).temperature=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:50},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ne,f(t.$t("blood_pressure")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[m(r,{modelValue:n(h).blood_pressure,"onUpdate:modelValue":o[3]||(o[3]=e=>n(h).blood_pressure=e),modelModifiers:{trim:!0},class:"input",options:{mask:"000 / 000",pattern:/^$|^\d{3}$/},placeholder:"000 / 000"},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ge,f(t.$t("Pulse_beats_min")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[m(i,{modelValue:n(h).pulse,"onUpdate:modelValue":o[4]||(o[4]=e=>n(h).pulse=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:100},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Le,f(t.$t("Lymph_nodes")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,{raw:""},{default:_((()=>[m(c,{modelValue:n(h).lymph_node,"onUpdate:modelValue":o[5]||(o[5]=e=>n(h).lymph_node=e),value:!1,label:t.$t("Not_increased"),color:"primary"},null,8,["modelValue","label"]),m(c,{modelValue:n(h).lymph_node,"onUpdate:modelValue":o[6]||(o[6]=e=>n(h).lymph_node=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",He,f(t.$t("Liver_spleen")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[V("div",Qe,[V("div",Xe,[m(c,{modelValue:n(h).liver,"onUpdate:modelValue":o[7]||(o[7]=e=>n(h).liver=e),value:!1,label:t.$t("Not_palpated"),color:"primary"},null,8,["modelValue","label"])]),V("div",Je,[m(c,{modelValue:n(h).liver,"onUpdate:modelValue":o[8]||(o[8]=e=>n(h).liver=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ke,f(t.$t("Skin and visible mucous membranes")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[V("div",Ze,[V("div",el,[m(c,{modelValue:n(h).skin,"onUpdate:modelValue":o[9]||(o[9]=e=>n(h).skin=e),value:!1,label:t.$t("Pure"),color:"primary"},null,8,["modelValue","label"])]),V("div",ll,[m(c,{modelValue:n(h).skin,"onUpdate:modelValue":o[10]||(o[10]=e=>n(h).skin=e),value:!0,label:t.$t("With signs of damage"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",al,f(t.$t("In_lungs")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[V("div",tl,[V("div",nl,[m(c,{modelValue:n(h).lung,"onUpdate:modelValue":o[11]||(o[11]=e=>n(h).lung=e),value:!1,label:t.$t("No_wheezing"),color:"primary"},null,8,["modelValue","label"])]),V("div",ol,[m(c,{modelValue:n(h).lung,"onUpdate:modelValue":o[12]||(o[12]=e=>n(h).lung=e),value:!0,label:t.$t("Wheezing"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",sl,f(t.$t("Heart")),1)]),V("td",null,[m(u,null,{default:_((()=>[m(d,null,{default:_((()=>[V("div",il,[V("div",dl,[m(c,{modelValue:n(h).heart,"onUpdate:modelValue":o[13]||(o[13]=e=>n(h).heart=e),value:!1,label:t.$t("Fine"),color:"primary"},null,8,["modelValue","label"])]),V("div",ul,[m(c,{modelValue:n(h).heart,"onUpdate:modelValue":o[14]||(o[14]=e=>n(h).heart=e),value:!0,label:t.$t("Not_fine"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])])])])])])])])),action:_((({close:e})=>[m(x,null,{default:_((()=>[m(g,{type:"button",loading:n(y),onClick:$},null,8,["loading"]),m(k,{type:"button",color:"primary",outlined:"",disabled:n(y),onClick:()=>{e(),t.$emit("donation")}},{default:_((()=>[v(f(t.$t("For_donation")),1)])),_:2},1032,["disabled","onClick"]),m(k,{type:"button",color:"danger",outlined:"",disabled:n(y),onClick:()=>{e(),t.$emit("withdrawal")}},{default:_((()=>[v(f(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4b9f6e51"]]),cl=e=>(x("data-v-4fb28ee5"),e=e(),C(),e),pl={class:"has-text-centered is-size-4"},_l=cl((()=>V("br",null,null,-1))),ml={class:"columns"},vl={class:"column"},fl={class:"table-container"},yl={class:"table is-bordered"},bl={class:""},hl={class:"has-text-centered"},gl={class:"has-text-centered"},Vl={class:"has-text-centered"},wl={class:"has-text-centered"},$l={class:"has-text-centered"},kl={class:""},xl={class:""},Cl={class:""},jl={class:""},Ul={class:"has-text-primary"},Sl={class:""},Ol=cl((()=>V("strong",null,"06.03.2013",-1))),zl={class:""},Ml=cl((()=>V("strong",null,"Specialist",-1))),Il={class:""},Dl=cl((()=>V("strong",null,"06.03.2013",-1))),Rl={class:""},Pl=cl((()=>V("strong",null,"Specialist",-1))),ql={class:""},El=cl((()=>V("strong",null,"06.03.2013",-1))),Wl={class:""},Fl=cl((()=>V("strong",null,"Specialist",-1))),Bl={class:""},Tl=cl((()=>V("strong",null,"06.03.2013",-1))),Yl={class:""},Al=cl((()=>V("strong",null,"Specialist",-1))),Nl=H(a({__name:"LaboratoryTestResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l,o=u(!1),i=u(""),d=u(null);function r(){a("update:isOpen",!1)}return O((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const u=se,c=oe,y=e;return s(),p(y,{open:l.isOpen,size:"extra-big",title:n(i),actions:"right",onClose:r},{content:_((()=>{var e,l,t,o;return[V("h4",pl,f(a.$t("Laboratory_test_results")),1),_l,V("div",ml,[V("div",vl,[V("div",fl,[V("table",yl,[V("thead",bl,[V("tr",null,[V("th",hl,f(a.$t("Primary_screening_results")),1),V("th",gl,f(a.$t("Hemotransmission_research_results")),1),V("th",Vl,f(a.$t("clinical_biochemical_research_results")),1),V("th",wl,f(a.$t("Serological_research_results")),1),V("th",$l,f(a.$t("Immunological_research_results")),1)])]),V("tbody",null,[V("tr",null,[V("td",null,[V("p",kl,[v(f(a.$t("Researched_at"))+": ",1),V("strong",null,f(null==(e=n(d))?void 0:e.date),1)]),V("p",xl,[v(f(a.$t("Researched_by"))+": ",1),V("strong",null,f(a.$t("Specialist")),1)]),V("p",Cl,[v(f(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,f(null==(t=null==(l=n(d))?void 0:l.blood_type)?void 0:t.label),1)]),V("p",jl,[v(f(a.$t("Hemoglobin_gl"))+": ",1),V("strong",Ul,f(null==(o=n(d))?void 0:o.value),1)])]),V("td",null,[V("p",Sl,[v(f(a.$t("Researched_at"))+": ",1),Ol]),V("p",zl,[v(f(a.$t("Researched_by"))+": ",1),Ml])]),V("td",null,[V("p",Il,[v(f(a.$t("Researched_at"))+": ",1),Dl]),V("p",Rl,[v(f(a.$t("Researched_by"))+": ",1),Pl])]),V("td",null,[V("p",ql,[v(f(a.$t("Researched_at"))+": ",1),El]),V("p",Wl,[v(f(a.$t("Researched_by"))+": ",1),Fl])]),V("td",null,[V("p",Bl,[v(f(a.$t("Researched_at"))+": ",1),Tl]),V("p",Yl,[v(f(a.$t("Researched_by"))+": ",1),Al])])])])])])])])]})),action:_((({close:e})=>[m(c,null,{default:_((()=>[m(u,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:_((()=>[v(f(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),m(u,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:_((()=>[v(f(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4fb28ee5"]]),Gl={class:"has-text-centered is-size-3"},Ll=V("br",null,null,-1),Hl={class:"columns"},Ql={class:"column"},Xl={class:"is-size-5"},Jl={class:"is-size-5"},Kl={class:"is-size-5"},Zl={class:"is-size-5"},ea={class:"has-text-primary"},la=a({__name:"PrimaryScreeningResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l;de(),ue(),E(),q();const o=u(!1),i=u(""),d=u(null);function r(){a("update:isOpen",!1)}return O((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const u=se,c=oe,y=e;return s(),p(y,{open:l.isOpen,title:n(i),actions:"center",onClose:r},{content:_((()=>{var e,l,t,o,s;return[V("h1",Gl,f(a.$t("Primary_screening_results")),1),Ll,V("div",Hl,[V("div",Ql,[V("p",Xl,[v(f(a.$t("Researched_at"))+": ",1),V("strong",null,f(null==(e=n(d))?void 0:e.date),1)]),V("p",Jl,[v(f(a.$t("Researched_by"))+": ",1),V("strong",null,f((null==(l=n(d))?void 0:l.created_by)??a.$t("Specialist")),1)]),V("p",Kl,[v(f(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,f(null==(o=null==(t=n(d))?void 0:t.blood_type)?void 0:o.label),1)]),V("p",Zl,[v(f(a.$t("Hemoglobin_gl"))+": ",1),V("strong",ea,f(null==(s=n(d))?void 0:s.value),1)])])])]})),action:_((({close:e})=>[m(c,null,{default:_((()=>[m(u,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:_((()=>[v(f(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),m(u,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:_((()=>[v(f(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),aa=["onSubmit"],ta={class:"table is-bordered is-fullwidth"},na={class:"has-text-centered"},oa={class:"has-text-centered"},sa=J.flatten,ia=H(a({__name:"MedicalQuestionnaireModal",props:{visitcardId:{default:null},isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","laboratoryResearch","withdrawal"],async setup(a,{emit:t}){let o,d;const r=a;de(),ue();const c=E(),{t:y}=q(),b=u(!1),h=y("Medical_questionnaire_before_donation"),g=u([]);async function x(){try{b.value=!0;const e=sa(g.value.map((e=>e.questions.map((e=>({question_id:e.id,value:e.question_answer}))))));await A(r.visitcardId,{answers:e}),c.success(y("Success"))}catch(e){c.error(e.message)}finally{b.value=!1}}function C(){t("update:isOpen",!1)}return[o,d]=z((()=>async function(){const e=await Y(r.visitcardId);g.value=e.result}())),await o,d(),(t,o)=>{const d=ae,u=Q,r=D,c=R,y=se,U=l,S=oe,O=e;return s(),p(O,{open:a.isOpen,size:"extra-big",title:n(h),actions:"right",onClose:C},{content:_((()=>[V("form",{id:"questionnaire-form",onSubmit:j(x,["prevent"])},[V("table",ta,[(s(!0),i(w,null,$(n(g),((e,l)=>(s(),i(w,{key:e.id},[V("thead",null,[V("tr",null,[V("th",na,f(e.name),1),V("th",oa,f(t.$t("Answer")),1)])]),V("tbody",null,[(s(!0),i(w,null,$(e.questions,((e,a)=>(s(),i("tr",{key:e.id},[V("td",null,f(e.name),1),V("td",null,[m(c,null,{default:_((()=>[m(r,null,{default:_((()=>["text"===e.answer_type?(s(),p(d,{key:0,modelValue:n(g)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(g)[l].questions[a].question_answer=e,rows:1},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),"boolean"===e.answer_type?(s(),p(u,{key:1,modelValue:n(g)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(g)[l].questions[a].question_answer=e,"true-value":"1","false-value":null,color:"primary",class:"p-0"},null,8,["modelValue","onUpdate:modelValue"])):k("",!0)])),_:2},1024)])),_:2},1024)])])))),128))])],64)))),128))])],40,aa)])),action:_((({close:e})=>[m(S,null,{default:_((()=>[m(y,{type:"button",color:"warning",disabled:n(b),onClick:()=>{e(),t.$emit("laboratoryResearch")}},{default:_((()=>[v(f(t.$t("Send_for_examination")),1)])),_:2},1032,["disabled","onClick"]),m(y,{type:"button",color:"danger",disabled:n(b),onClick:()=>{e(),t.$emit("withdrawal")}},{default:_((()=>[v(f(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"]),m(U,{form:"questionnaire-form",loading:n(b)},null,8,["loading"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-de241a27"]]),da={class:"patient-detail-wrapper"},ua=["onSubmit"],ra={class:"columns mt-5"},ca={class:"column"},pa={class:"is-size-5"},_a=(e=>(x("data-v-467bcc72"),e=e(),C(),e))((()=>V("br",null,null,-1))),ma={class:"help has-text-danger"},va={class:"column"},fa={class:"is-size-5"},ya={class:"column"},ba={class:"is-size-5"},ha={class:"navigation-buttons"},ga={class:"buttons is-right"},Va={key:1,class:"mt-5"},wa={class:"box"},$a={class:"is-size-6"},ka={class:"is-size-6"},xa={class:"is-size-6"},Ca={class:"table is-bordered is-fullwidth"},ja={key:0},Ua={key:1},Sa=H(a({__name:"[id]",async setup(e){var l;let a,t;const d=de();ue();const y=E(),{t:h}=q(),g=r({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),w=r({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),$=u(!1),x=(null==(l=d.params)?void 0:l.id)||null,C=u([{label:h("Patient_details"),value:"#details",icon:"feather:info"},{label:h("Medical_information"),value:"#medical_information",icon:"feather:file-text"}]),U=u([]),S=u(!1),O=u(!1),I=u(!1),P=u(!1),W=u(!1),F=u(!1),B=u(!1),T=u("#details");function Y(e){w[e]=""}async function A(){var e,l;try{$.value=!0;await L(x,g);y.success(h("Updated_successfully"))}catch(a){(null==(e=a.response)?void 0:e.data.errors)?Object.assign(w,null==(l=a.response)?void 0:l.data.errors):y.error(h("Something_went_wrong"))}finally{$.value=!1}}function H(){S.value=!0}function Q(){O.value=!0}function J(){I.value=!0}function Z(){P.value=!0}function ee(){W.value=!0}function le(){F.value=!0}function ae(){B.value=!0}function te(){}return fe().setPageTitle(h("Patient_info")),ve({title:o((()=>h("Patient_info")))}),[a,t]=z((()=>async function(){try{const e=await G(x);Object.assign(g,e.result),g.pinfl=g.pinfl??""}catch(e){y.error(e.message)}}())),await a,t(),c((async()=>{const e=await N();U.value=e.result})),(e,l)=>{var a;const t=pe,o=b("Multiselect"),d=D,u=R,r=_e,c=me,y=se,h=K,z=X,q=ce,E=ia,N=la,G=Nl,L=rl,ne=Pe,oe=je,ie=Ve;return s(),i("div",da,[m(q,{selected:n(T),tabs:n(C)},{tab:_((({activeValue:a})=>{var p,b;return["#details"===a?(s(),i("form",{key:0,onSubmit:j(A,["prevent"])},[V("div",ra,[V("div",ca,[V("p",pa,f(e.$t("Personal_Info")),1),m(t,{patient:n(g),errors:n(w),onEditing:Y},null,8,["patient","errors"]),_a,m(u,{label:e.$t("Category"),required:""},{default:_((()=>[m(d,null,{default:_((()=>[m(o,{modelValue:n(g).patient_category_id,"onUpdate:modelValue":l[0]||(l[0]=e=>n(g).patient_category_id=e),options:n(U),placeholder:e.$t("Select_category"),label:"name","value-prop":"id",onChange:l[1]||(l[1]=e=>Y("patient_category_id"))},null,8,["modelValue","options","placeholder"]),V("p",ma,f(n(w).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),V("div",va,[V("p",fa,f(e.$t("Passport_info")),1),m(r,{patient:n(g),errors:n(w),onEditing:Y},null,8,["patient","errors"])]),V("div",ya,[V("p",ba,f(e.$t("Address")),1),m(c,{patient:n(g),errors:n(w),onEditing:Y},null,8,["patient","errors"])])]),V("div",ha,[V("div",ga,[m(y,{type:"submit",color:"primary",bold:"",loading:n($),disabled:n($),tabindex:"0"},{default:_((()=>[v(f(e.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,ua)):"#medical_information"===a?(s(),i("div",Va,[V("div",wa,[m(z,{class:"mb-3","justify-content":"space-between"},{default:_((()=>[m(h,null,{default:_((()=>{var l,a;return[V("p",$a,f(e.$t("Directed_by"))+": "+f(null==(a=null==(l=n(g).last_visit)?void 0:l.medical_organization)?void 0:a.name),1)]})),_:1}),m(h,null,{default:_((()=>{var l,a;return[V("p",ka,f(e.$t("Personalized_donation"))+": "+f((null==(l=n(g).last_visit)?void 0:l.is_personalized_donation)?null==(a=n(g).last_visit)?void 0:a.personalized_donation:e.$t("No")),1)]})),_:1}),m(h,null,{default:_((()=>{var l;return[V("p",xa,f(e.$t("Blood_collect_condition"))+": "+f((null==(l=n(g).last_visit)?void 0:l.is_mobile_team)?e.$t("Mobile_team"):e.$t("Stationary")),1)]})),_:1})])),_:1}),V("table",Ca,[V("tbody",null,[V("tr",null,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:H},f(e.$t("Medical_questionnaire")),1)])]),(null==(p=n(g).last_visit)?void 0:p.primary_screening_result)?(s(),i("tr",ja,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:Q},f(e.$t("Primary_screening_results")),1)])])):k("",!0),(null==(b=n(g).last_visit)?void 0:b.visit_status_id)>=3?(s(),i("tr",Ua,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:J},f(e.$t("Laboratory_test_results")),1)])])):k("",!0)])])])])):k("",!0)]})),_:1},8,["selected","tabs"]),m(E,{"is-open":n(S),"onUpdate:is-open":l[2]||(l[2]=e=>M(S)?S.value=e:null),"visitcard-id":n(g).last_visit.id,onWithdrawal:ee,onLaboratoryResearch:le},null,8,["is-open","visitcard-id"]),3===(null==(a=n(g).last_visit)?void 0:a.visit_status_id)?(s(),p(N,{key:0,"is-open":n(O),"onUpdate:is-open":l[3]||(l[3]=e=>M(O)?O.value=e:null),visitcard:n(g).last_visit,onWithdrawal:ee,onMedicalExamination:Z},null,8,["is-open","visitcard"])):k("",!0),m(G,{"is-open":n(I),"onUpdate:is-open":l[4]||(l[4]=e=>M(I)?I.value=e:null),visitcard:n(g).last_visit,onWithdrawal:ee,onMedicalExamination:Z},null,8,["is-open","visitcard"]),m(L,{"is-open":n(P),"onUpdate:is-open":l[5]||(l[5]=e=>M(P)?P.value=e:null),visitcard:n(g).last_visit,onWithdrawal:ee,onDonation:ae},null,8,["is-open","visitcard"]),m(ne,{"is-open":n(W),"onUpdate:is-open":l[6]||(l[6]=e=>M(W)?W.value=e:null),"patient-id":Number(n(x))},null,8,["is-open","patient-id"]),m(oe,{"is-open":n(F),"onUpdate:is-open":l[7]||(l[7]=e=>M(F)?F.value=e:null),visitcard:n(g).last_visit},null,8,["is-open","visitcard"]),m(ie,{"is-open":n(B),"onUpdate:is-open":l[8]||(l[8]=e=>M(B)?B.value=e:null),visitcard:n(g).last_visit,onSubmit:te},null,8,["is-open","visitcard"])])}}}),[["__scopeId","data-v-467bcc72"]]);export{Sa as default};
