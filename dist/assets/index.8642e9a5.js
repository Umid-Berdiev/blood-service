import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang.2b7bd30b.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang.69dc99ac.js";import{_ as a}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.a9bf4c2a.js";import{_ as l,a as o}from"./VControl.db99b51d.js";import{_ as n}from"./VRadio.vue_vue_type_style_index_0_lang.6bf49387.js";import{q as s,H as i,C as r,x as u,r as d,a7 as _,o as c,a as m,w as p,e as b,t as g,k as y,J as f,c as v,d as h,K as j,F as k,l as x,g as V,S as D,L as Y,M as $}from"./index.4a029cdd.js";import{m as M}from"./moment.48108465.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as C,a as O,b as B}from"./VFlexTable.vue_vue_type_style_index_0_lang.25ade395.js";import{_ as I,a as F,b as S,c as U,d as q}from"./search-7-dark.f359dc05.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.b7e8a70f.js";import{_ as L}from"./lodash.b2d9c938.js";import{u as N}from"./main.31b19d1c.js";import{u as P}from"./viewWrapper.1a3e0821.js";import{f as R}from"./patient.664695df.js";import"./VButton.vue_vue_type_style_index_0_lang.3d7c5df0.js";import"./VPlaceload.cc73600a.js";import"./VIMaskInput.vue_vue_type_script_lang.55c4b218.js";import"./VFlex.vue_vue_type_style_index_0_lang.71b806ec.js";const z={class:"table-container"},E={class:"table is-fullwidth"},H=M.__esModule?M.default:M,J=w(s({__name:"BuckControlSterilityFormModal",props:{isOpen:{type:Boolean,default:!1},item:null},emits:["update:isOpen","update:list"],setup(s,{emit:f}){i();const{t:v}=r(),h=u(v("Sterility_test_result")),j=u(!1),k=d({control_result:"sterile",result_date:_(new Date,"YYYY-MM-DD")}),x=d({control_result:[],result_date:[]});function V(){Object.assign(k,{blood_samples_taken_date:H().format("YYYY-MM-DD"),analysis_date:H().format("YYYY-MM-DD"),clinical_biochemical_laboratory_date:H().format("YYYY-MM-DD")}),Object.assign(x,{blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]}),f("update:isOpen",!1)}return(i,r)=>{const u=n,d=l,_=o,f=a,v=t,x=e;return c(),m(x,{open:s.isOpen,size:"large",title:h.value,actions:"right",onClose:V},{content:p((()=>[b("div",z,[b("table",E,[b("tbody",null,[b("tr",null,[b("th",null,g(i.$t("Donor_code")),1),b("td",null,g(s.item.donation_code),1)]),b("tr",null,[b("th",null,g(i.$t("Donation_date")),1),b("td",null,g(s.item.donation_date),1)]),b("tr",null,[b("th",null,g(i.$t("Component_name")),1),b("td",null,g(s.item.component_name),1)]),b("tr",null,[b("th",null,g(i.$t("Come_from")),1),b("td",null,g(s.item.come_from),1)]),b("tr",null,[b("th",null,g(i.$t("Control_result")),1),b("td",null,[y(_,null,{default:p((()=>[y(d,null,{default:p((()=>[y(u,{modelValue:k.control_result,"onUpdate:modelValue":r[0]||(r[0]=e=>k.control_result=e),value:"sterile",color:"primary",label:i.$t("Sterile")},null,8,["modelValue","label"]),y(u,{modelValue:k.control_result,"onUpdate:modelValue":r[1]||(r[1]=e=>k.control_result=e),value:"not_sterile",color:"primary",label:i.$t("Not_sterile")},null,8,["modelValue","label"])])),_:1})])),_:1})])]),b("tr",null,[b("th",null,g(i.$t("Result_date")),1),b("td",null,[y(_,null,{default:p((()=>[y(d,null,{default:p((()=>[y(f,{modelValue:k.result_date,"onUpdate:modelValue":r[2]||(r[2]=e=>k.result_date=e),style:{width:"50%"}},null,8,["modelValue"])])),_:1})])),_:1})])])])])])])),action:p((()=>[y(v,{loading:j.value,type:"button"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-c97730d9"]]),K=e=>(Y("data-v-8a7713f3"),e=e(),$(),e),Q={class:"page-content-inner"},W={class:"columns mb-3"},A={class:"column"},G={class:"columns"},X={class:"column is-12"},Z={key:0,class:"flex-list-inner"},ee={key:1,class:"flex-list-inner"},te=K((()=>b("img",{class:"light-image",src:U,alt:""},null,-1))),ae=K((()=>b("img",{class:"dark-image",src:q,alt:""},null,-1))),le=["onClick"],oe=L.isEmpty,ne=w(s({__name:"index",setup(e){const t=i(),{t:a}=r(),l=N(),o=u(!1);P().setPageTitle(a("Buck-laboratory")),f({title:`${a("Buck-control-sterility")} - ${l.app.name}`});const n=d({data:[{donation_date:"05.06.2022",donation_code:"138800115200",dose:"0",quantity:"250",component_name:"Эритроцитная масса",come_from:"Из отдела переработки"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),s=v({get:()=>n.pagination.current_page,set:async e=>{$.page=e,await async function(e){var l,s;try{Object.assign($,e),o.value=!0;const l=await R(e);Object.assign(n,l.result),oe(l.result.data)?t.warning(a("Data_not_found")):t.success(`${a("Found")}: ${l.result.pagination.total} ${a("records")}`)}catch(i){Object.assign(Y,null==(s=null==(l=i.response)?void 0:l.data)?void 0:s.errors)}finally{o.value=!1}}($)}}),_={donation_date:{label:a("Donation_date")},donation_code:{label:a("Donation_code")},dose:{label:a("Dose")},quantity:{label:a("Quantity_ml")},component_name:{label:a("Component_name")},come_from:{label:a("Come_from")}},Y=d({visit_type_id:[],donation_type_id:[],donation_code:[]}),$=d({page:1}),M=d({}),w=u(!1);return(e,t)=>{const a=T,i=I,r=C,u=F,d=O,f=S,v=B,Y=J;return c(),h("div",Q,[b("div",W,[b("div",A,[y(a,{"with-icons":"",separator:"bullet",items:[{label:j(l).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Buck-laboratory")},{label:e.$t("Buck-control-sterility")}]},null,8,["items"])])]),b("div",G,[b("div",X,[y(v,{columns:j(_),data:n.data,limit:n.pagination.per_page,total:n.pagination.total},{default:p((()=>[y(d,{rounded:"","no-header":!o.value&&0===n.data.length},{"header-column":p((({column:e})=>[])),body:p((()=>[o.value?(c(),h("div",Z,[(c(!0),h(k,null,x(n.pagination.per_page,(e=>(c(),h("div",{key:e,class:"flex-table-item"},[y(r,null,{default:p((()=>[y(i,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):V("",!0),0===n.data.length?(c(),h("div",ee,[y(u,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:p((()=>[te,ae])),_:1})])):V("",!0)])),"body-cell":p((({row:e,column:t})=>["donation_code"===t.key?(c(),h("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:t=>{return a=e,Object.assign(M,a),void(w.value=!0);var a}},g(e.donation_code),9,le)):V("",!0)])),_:1},8,["no-header"]),n.data.length?(c(),m(f,{key:0,"current-page":j(s),"onUpdate:current-page":t[0]||(t[0]=e=>D(s)?s.value=e:null),class:"mt-5","item-per-page":n.pagination.per_page,"total-items":n.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):V("",!0)])),_:1},8,["columns","data","limit","total"])])]),y(Y,{"is-open":w.value,"onUpdate:is-open":t[1]||(t[1]=e=>w.value=e),item:M},null,8,["is-open","item"])])}}}),[["__scopeId","data-v-8a7713f3"]]);export{ne as default};
