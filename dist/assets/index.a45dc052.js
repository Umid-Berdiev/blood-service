import{_ as e,a,b as t,c as l,d as s,e as r,f as o,g as n}from"./search-7-dark.607cbb05.js";import{_ as i}from"./VCard.vue_vue_type_script_setup_true_lang.1f6b49b7.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import{_ as u,a as _}from"./VControl.a4292c49.js";import{_ as c}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.2fa4ff12.js";import{q as p,C as m,H as g,r as b,ag as v,x as y,j as f,o as h,a as V,w as j,e as x,m as $,k,t as S,K as w,i as C,E as D,J as F,c as E,a7 as L,d as M,g as I,F as U,l as O,S as P,L as Y,M as B}from"./index.5e313a07.js";import{_ as N}from"./lodash.6f8ef5ec.js";import{p as q,f as A}from"./patient.83d02e12.js";import{_ as H}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.141f26f3.js";import{u as T}from"./main.a14c778c.js";import{u as G}from"./viewWrapper.74d08f31.js";import{_ as J}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import"./VPlaceload.726b7e5d.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";import"./moment.bb668042.js";const K=["onSubmit"],W={class:"columns"},z={class:"column"},Q={class:"help has-text-danger"},R={class:"column"},X={class:"help has-text-danger"},Z={class:"column"},ee={class:"help has-text-danger"},ae={class:"column"},te={class:"help has-text-danger"},le={class:"navigation-buttons"},se={class:"buttons is-right"},re=N.isEmpty,oe=N.values,ne=p({__name:"ScreeningPassedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(e,{emit:a}){let t,l;const{t:s}=m(),r=g(),o=b({start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),n=([t,l]=v((()=>q().then((e=>e.result)))),t=await t,l(),t),p=y([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),D=async()=>{oe(o).every(re)?r.error(s("Form_fields_are_empty")):a("search",o)},F=async()=>{Object.assign(o,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),a("clearForm")};return(a,t)=>{const l=c,s=u,r=_,m=f("Multiselect"),g=d,b=i;return h(),V(b,{radius:"regular"},{default:j((()=>[x("form",{onSubmit:$(D,["prevent"])},[x("div",W,[x("div",z,[k(r,{label:a.$t("Start_date")},{default:j((()=>[k(s,null,{default:j((()=>[k(l,{modelValue:o.start_date,"onUpdate:modelValue":t[0]||(t[0]=e=>o.start_date=e)},null,8,["modelValue"]),x("p",Q,S(e.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),x("div",R,[k(r,{label:a.$t("End_date")},{default:j((()=>[k(s,null,{default:j((()=>[k(l,{modelValue:o.end_date,"onUpdate:modelValue":t[1]||(t[1]=e=>o.end_date=e)},null,8,["modelValue"]),x("p",X,S(e.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),x("div",Z,[k(r,{class:"is-curved-select",label:a.$t("Donor_categories")},{default:j((({id:l})=>[k(s,null,{default:j((()=>[k(m,{modelValue:o.donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=e=>o.donor_category_id=e),attrs:{id:l},options:w(n),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),x("p",ee,S(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),x("div",ae,[k(r,{class:"is-curved-select",label:a.$t("Visit_type")},{default:j((({id:l})=>[k(s,null,{default:j((()=>[k(m,{modelValue:o.visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=e=>o.visit_type_id=e),attrs:{id:l},options:p.value,placeholder:a.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),x("p",te,S(e.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),x("div",le,[x("div",se,[k(g,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:F},{default:j((()=>[C(S(a.$t("Clear")),1)])),_:1},8,["disabled"]),k(g,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:j((()=>[C(S(a.$t("Search")),1)])),_:1},8,["loading"])])])],40,K)])),_:1})}}}),ie=e=>(Y("data-v-c27de69b"),e=e(),B(),e),de={class:"page-content-inner"},ue={class:"columns mb-3"},_e={class:"column"},ce={class:"columns mt-1"},pe={class:"column"},me={class:"columns"},ge={class:"column is-12"},be=["textContent"],ve={key:0,class:"flex-list-inner"},ye={key:1,class:"flex-list-inner"},fe=ie((()=>x("img",{class:"light-image",src:o,alt:""},null,-1))),he=ie((()=>x("img",{class:"dark-image",src:n,alt:""},null,-1))),Ve={key:0},je=N.isEmpty,xe=J(p({__name:"index",setup(o){D();const n=g(),{t:i}=m(),d=T(),u=y(!1);G().setPageTitle(i("Screening")),F({title:`${i("Screening-passed-donors-list")} - ${d.app.name}`});const _=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),c=E({get:()=>_.pagination.current_page,set:async e=>{f.page=e,await $(f)}}),p={orderNumber:{format:(e,a,t)=>`${t+1}`},screening_date:{label:i("Screening_date")},name:{label:i("Donor_fullname")},birth_date:{label:i("Date-of-birth")},visit_date:{label:i("Visit_date"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.created_at)&&L(new Date(null==(l=a.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:i("Visit_type"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.visit_type)&&i(null==(l=a.last_visit)?void 0:l.visit_type)}},hemoglobin:{label:`${i("Hemoglobin")}, ${i("g/l")}`},preliminary_blood_type:{label:i("Preliminary_blood_type")},laboratory_assistant_fullname:{label:i("Laboratory_assistant_fullname")}};y();const v=b({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[]}),f=b({page:1});async function $(e){var a,t;try{Object.assign(f,e),u.value=!0;const a=await A(e);Object.assign(_,a.result),je(a.result.data)?n.warning(i("Data_not_found")):n.success(`${i("Found")}: ${a.result.pagination.total} ${i("records")}`)}catch(l){Object.assign(v,null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.errors)}finally{u.value=!1}}function C(e){v[e]=""}async function Y(){_.data=[]}return(o,n)=>{const i=H,m=ne,g=e,b=a,y=t,f=l,D=s,F=r;return h(),M("div",de,[x("div",ue,[x("div",_e,[k(i,{"with-icons":"",separator:"bullet",items:[{label:w(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:o.$t("Screening")},{label:o.$t("Screening-passed-donors-list")}]},null,8,["items"])])]),x("div",ce,[x("div",pe,[k(m,{"is-loading":u.value,errors:v,onSearch:$,onClearForm:Y,onClearError:C},null,8,["is-loading","errors"])])]),x("div",me,[x("div",ge,[k(F,{columns:w(p),data:_.data,limit:_.pagination.per_page,total:_.pagination.total},{default:j((()=>[k(f,{rounded:"","no-header":!u.value&&0===_.data.length},{"header-column":j((({column:e})=>["orderNumber"===e.key?(h(),M("span",{key:0,textContent:S(o.$t("Donor_register_number"))},null,8,be)):I("",!0)])),body:j((()=>[u.value?(h(),M("div",ve,[(h(!0),M(U,null,O(_.pagination.per_page,(e=>(h(),M("div",{key:e,class:"flex-table-item"},[k(b,null,{default:j((()=>[k(g,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):I("",!0),0===_.data.length?(h(),M("div",ye,[k(y,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:j((()=>[fe,he])),_:1})])):I("",!0)])),"body-cell":j((({row:e,column:a})=>["name"===a.key?(h(),M("span",Ve,S(e.first_name)+" "+S(e.last_name)+" "+S(e.father_name),1)):I("",!0)])),_:1},8,["no-header"]),_.data.length?(h(),V(D,{key:0,"current-page":w(c),"onUpdate:current-page":n[0]||(n[0]=e=>P(c)?c.value=e:null),class:"mt-5","item-per-page":_.pagination.per_page,"total-items":_.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):I("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-c27de69b"]]);export{xe as default};
