import{_ as a,a as e,b as t,c as l,d as s,e as r,f as o,g as n,h as i}from"./search-7-dark.8b15a455.js";import{_ as d}from"./VCard.vue_vue_type_script_setup_true_lang.d2de6734.js";import{_ as u}from"./VButton.vue_vue_type_style_index_0_lang.c06d75b0.js";import{_,a as c}from"./VControl.ca63cac0.js";import{_ as p}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.75513c1d.js";import{q as m,C as g,H as v,r as b,a8 as y,x as f,j as h,o as V,a as j,w as x,e as $,m as k,k as w,t as S,K as C,i as D,E as F,J as L,c as E,a7 as M,d as U,g as I,F as O,l as P,S as Y,L as B,M as N}from"./index.5a18e8c8.js";import{_ as q}from"./lodash.b14eab3e.js";import{g as A,f as H}from"./patient.cb19f429.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.aa6c4915.js";import{u as z}from"./main.fb415df7.js";import{u as G}from"./viewWrapper.fed031e8.js";import{_ as J}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VFlex.vue_vue_type_style_index_0_lang.5029357e.js";import"./VPlaceload.df43afcf.js";import"./VIMaskInput.vue_vue_type_script_lang.32d4852d.js";import"./moment.b8ea7098.js";const K=["onSubmit"],W={class:"columns"},Q={class:"column"},R={class:"help has-text-danger"},X={class:"column"},Z={class:"help has-text-danger"},aa={class:"column"},ea={class:"help has-text-danger"},ta={class:"column"},la={class:"help has-text-danger"},sa={class:"navigation-buttons"},ra={class:"buttons is-right"},oa=q.isEmpty,na=q.values,ia=m({__name:"ScreeningPassedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=g(),r=v(),o=b({start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),n=([t,l]=y((()=>A().then((a=>a.result)))),t=await t,l(),t),i=f([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),m=async()=>{na(o).every(oa)?r.error(s("Form_fields_are_empty")):e("search",o)},F=async()=>{Object.assign(o,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),e("clearForm")};return(e,t)=>{const l=p,s=_,r=c,g=h("Multiselect"),v=u,b=d;return V(),j(b,{radius:"regular"},{default:x((()=>[$("form",{onSubmit:k(m,["prevent"])},[$("div",W,[$("div",Q,[w(r,{label:e.$t("Start_date")},{default:x((()=>[w(s,null,{default:x((()=>[w(l,{modelValue:o.start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>o.start_date=a)},null,8,["modelValue"]),$("p",R,S(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),$("div",X,[w(r,{label:e.$t("End_date")},{default:x((()=>[w(s,null,{default:x((()=>[w(l,{modelValue:o.end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>o.end_date=a)},null,8,["modelValue"]),$("p",Z,S(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),$("div",aa,[w(r,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:x((({id:l})=>[w(s,null,{default:x((()=>[w(g,{modelValue:o.donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>o.donor_category_id=a),attrs:{id:l},options:C(n),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",ea,S(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",ta,[w(r,{class:"is-curved-select",label:e.$t("Visit_type")},{default:x((({id:l})=>[w(s,null,{default:x((()=>[w(g,{modelValue:o.visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>o.visit_type_id=a),attrs:{id:l},options:i.value,placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),$("p",la,S(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),$("div",sa,[$("div",ra,[w(v,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:F},{default:x((()=>[D(S(e.$t("Clear")),1)])),_:1},8,["disabled"]),w(v,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:x((()=>[D(S(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,K)])),_:1})}}}),da=a=>(B("data-v-262534c9"),a=a(),N(),a),ua={class:"page-content-inner"},_a={class:"columns mb-3"},ca={class:"column"},pa={class:"columns mt-1"},ma={class:"column"},ga={class:"columns"},va={class:"column is-12"},ba=["textContent"],ya={key:0,class:"flex-list-inner"},fa={key:1,class:"flex-list-inner"},ha=da((()=>$("img",{class:"light-image",src:n,alt:""},null,-1))),Va=da((()=>$("img",{class:"dark-image",src:i,alt:""},null,-1))),ja={key:0},xa=q.isEmpty,$a=J(m({__name:"index",setup(n){F();const i=v(),{t:d}=g(),u=z(),_=f(!1);G().setPageTitle(d("Users_List")),L({title:`${d("Screening-passed-donors-list")} - ${u.app.name}`});const c=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=E({get:()=>c.pagination.current_page,set:async a=>{k.page=a,await D(k)}}),m={orderNumber:{format:(a,e,t)=>`${t+1}`},screening_date:{label:d("Screening_date")},name:{label:d("Donor_fullname")},birth_date:{label:d("Date-of-birth")},visit_date:{label:d("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&M(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:d("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&d(null==(l=e.last_visit)?void 0:l.visit_type)}},hemoglobin:{label:`${d("Hemoglobin")}, ${d("g/l")}`},preliminary_blood_type:{label:d("Preliminary_blood_type")},laboratory_assistant_fullname:{label:d("Laboratory_assistant_fullname")}},y=f(),h=b({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[]}),k=b({page:1});async function D(a){var e,t;try{Object.assign(k,a),_.value=!0;const e=await H(a);Object.assign(c,e.result),xa(e.result.data)?i.warning(d("Data_not_found")):i.success(`${d("Found")}: ${e.result.pagination.total} ${d("records")}`)}catch(l){Object.assign(h,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{_.value=!1}}function B(a){h[a]=""}async function N(){c.data=[]}return(n,i)=>{const d=T,g=ia,v=a,b=e,f=t,k=l,F=s,L=r,E=o;return V(),U("div",ua,[$("div",_a,[$("div",ca,[w(d,{"with-icons":"",separator:"bullet",items:[{label:C(u).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:n.$t("Screening")},{label:n.$t("Screening-passed-donors-list")}]},null,8,["items"])])]),$("div",pa,[$("div",ma,[w(g,{"is-loading":_.value,errors:h,onSearch:D,onClearForm:N,onClearError:B},null,8,["is-loading","errors"])])]),$("div",ga,[$("div",va,[w(E,{columns:C(m),data:c.data,limit:c.pagination.per_page,total:c.pagination.total},{default:x((()=>[w(F,{rounded:"","no-header":!_.value&&0===c.data.length},{"header-column":x((({column:a})=>["orderNumber"===a.key?(V(),U("span",{key:0,textContent:S(n.$t("Donor_register_number"))},null,8,ba)):I("",!0)])),body:x((()=>[_.value?(V(),U("div",ya,[(V(!0),U(O,null,P(c.pagination.per_page,(a=>(V(),U("div",{key:a,class:"flex-table-item"},[w(b,null,{default:x((()=>[w(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):I("",!0),0===c.data.length?(V(),U("div",fa,[w(f,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:x((()=>[ha,Va])),_:1})])):I("",!0)])),"body-row-pre":x((({row:a})=>[a.id===y.value?(V(),j(k,{key:0,size:"tiny",class:"m-0 mb-1"})):I("",!0)])),"body-cell":x((({row:a,column:e})=>["name"===e.key?(V(),U("span",ja,S(a.first_name)+" "+S(a.last_name)+" "+S(a.father_name),1)):I("",!0)])),_:1},8,["no-header"]),c.data.length?(V(),j(L,{key:0,"current-page":C(p),"onUpdate:current-page":i[0]||(i[0]=a=>Y(p)?p.value=a:null),class:"mt-5","item-per-page":c.pagination.per_page,"total-items":c.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):I("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-262534c9"]]);export{$a as default};
