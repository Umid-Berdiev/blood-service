import{_ as a,a as e,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-e64caaca.js";import{_ as l,a as s,b as o,c as i,d as n}from"./search-7-dark-af2ee6c9.js";import{_ as r}from"./VCard.vue_vue_type_script_setup_true_lang-af502c34.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-01b32951.js";import{_,a as u}from"./VControl-a325caa2.js";import{_ as p}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-97708d87.js";import{q as c,C as m,H as v,r as g,a8 as y,x as b,j as h,o as f,a as x,w as V,e as j,m as $,k,K as D,t as C,i as F,E as w,J as M,c as E,a7 as L,d as P,g as S,F as U,l as I,S as Y,L as B,M as z}from"./index-384ad331.js";import{_ as A}from"./lodash-76bc38cc.js";import{p as N}from"./patient-d9a3e083.js";import{_ as O}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-96c3e54f.js";import{u as T}from"./main-d1421619.js";import{u as q}from"./viewWrapper-5c5c4ab5.js";import{_ as W}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-1bfd1441.js";import"./VPlaceload-418b77b8.js";import"./VIMaskInput.vue_vue_type_script_lang-e584b1aa.js";import"./moment-160688a6.js";const G=["onSubmit"],H={class:"columns"},J={class:"column"},K={class:"help has-text-danger"},R={class:"column"},X={class:"help has-text-danger"},Q={class:"column"},Z={class:"help has-text-danger"},aa={class:"column"},ea={class:"help has-text-danger"},ta={class:"column"},la={class:"help has-text-danger"},sa={class:"navigation-buttons"},oa={class:"buttons is-right"},ia=A.isEmpty,na=A.values,ra=c({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=m(),o=v(),i=g({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),n=([t,l]=y((()=>N().then((a=>a.result)))),t=await t,l(),t),c=b([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),w=b([{id:1,name:s("Whole_blood_donation")},{id:2,name:s("Plasmapheresis")},{id:3,name:s("Plateletpheresis")}]),M=async()=>{na(i).every(ia)?o.error(s("Form_fields_are_empty")):e("search",i)},E=async()=>{Object.assign(i,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),e("clearForm")};return(e,t)=>{const l=p,s=_,o=u,m=h("Multiselect"),v=d,g=r;return f(),x(g,null,{default:V((()=>[j("form",{onSubmit:$(M,["prevent"])},[j("div",H,[j("div",J,[k(o,{label:e.$t("Start_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:D(i).start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>D(i).start_date=a)},null,8,["modelValue"]),j("p",K,C(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",R,[k(o,{label:e.$t("End_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:D(i).end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>D(i).end_date=a)},null,8,["modelValue"]),j("p",X,C(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",Q,[k(o,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:D(i).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>D(i).donor_category_id=a),attrs:{id:l},options:D(n),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",Z,C(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",aa,[k(o,{class:"is-curved-select",label:e.$t("Visit_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:D(i).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>D(i).visit_type_id=a),attrs:{id:l},options:D(c),placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),j("p",ea,C(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",ta,[k(o,{class:"is-curved-select",label:e.$t("Donation_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:D(i).donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=a=>D(i).donation_type_id=a),attrs:{id:l},options:D(w),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",la,C(a.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),j("div",sa,[j("div",oa,[k(v,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:E},{default:V((()=>[F(C(e.$t("Clear")),1)])),_:1},8,["disabled"]),k(v,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:V((()=>[F(C(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,G)])),_:1})}}}),da=a=>(B("data-v-d2460806"),a=a(),z(),a),_a={class:"page-content-inner"},ua={class:"columns mb-3"},pa={class:"column"},ca={class:"columns mt-1"},ma={class:"column"},va={class:"columns"},ga={class:"column is-12"},ya=["textContent"],ba={key:0,class:"flex-list-inner"},ha={key:1,class:"flex-list-inner"},fa=da((()=>j("img",{class:"light-image",src:i,alt:""},null,-1))),xa=da((()=>j("img",{class:"dark-image",src:n,alt:""},null,-1))),Va=W(c({__name:"index",setup(i){w(),v();const{t:n}=m(),r=T(),d=b(!1);q().setPageTitle(n("Physician-therapist")),M({title:`${n("Donors-list-for-examination")} - ${r.app.name}`});const _=g({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),u=E({get:()=>_.pagination.current_page,set:async a=>{y.page=a,await $(y)}}),p={orderNumber:{format:(a,e,t)=>`${t+1}`},name:{label:n("Fullname")},birth_date:{label:n("Date-of-birth")},visit_date:{label:n("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&L(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:n("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&n(null==(l=e.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:n("Medical_inspection_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.directed_by)&&n(null==(l=e.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:n("Medical_inspection_conclusion"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},linked_donation_number:{label:n("Linked_donation_number"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},donation_type:{label:n("Donation_type"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:n("Blood_component_amount"),format:(a,e)=>{var t;return null==(t=e.status)?void 0:t.name}}};b();const c=g({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),y=g({page:1});async function $(a){var e,t;try{Object.assign(y,a),d.value=!0}catch(l){Object.assign(c,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{d.value=!1}}function B(a){c[a]=""}async function z(){_.data=[]}return(i,n)=>{const m=O,v=ra,g=l,y=a,b=s,w=h("RouterLink"),M=e,E=o,L=t;return f(),P("div",_a,[j("div",ua,[j("div",pa,[k(m,{"with-icons":"",separator:"bullet",items:[{label:D(r).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Physician-therapist")},{label:i.$t("Examined-donor-register")}]},null,8,["items"])])]),j("div",ca,[j("div",ma,[k(v,{"is-loading":D(d),errors:D(c),onSearch:$,onClearForm:z,onClearError:B},null,8,["is-loading","errors"])])]),j("div",va,[j("div",ga,[k(L,{columns:D(p),data:D(_).data,limit:D(_).pagination.per_page,total:D(_).pagination.total},{default:V((()=>[k(M,{rounded:"","no-header":!D(d)&&0===D(_).data.length},{"header-column":V((({column:a})=>["orderNumber"===a.key?(f(),P("span",{key:0,textContent:C(i.$t("Donor_register_number"))},null,8,ya)):S("",!0)])),body:V((()=>[D(d)?(f(),P("div",ba,[(f(!0),P(U,null,I(D(_).pagination.per_page,(a=>(f(),P("div",{key:a,class:"flex-table-item"},[k(y,null,{default:V((()=>[k(g,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):S("",!0),0===D(_).data.length?(f(),P("div",ha,[k(b,{title:i.$t("No_data"),subtitle:i.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:V((()=>[fa,xa])),_:1},8,["title","subtitle"])])):S("",!0)])),"body-cell":V((({row:a,column:e})=>["name"===e.key?(f(),x(w,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${a.id}`},{default:V((()=>[F(C(a.first_name)+" "+C(a.last_name)+" "+C(a.father_name)+" ",1)])),_:2},1032,["to"])):S("",!0)])),_:1},8,["no-header"]),D(_).data.length?(f(),x(E,{key:0,"current-page":D(u),"onUpdate:current-page":n[0]||(n[0]=a=>Y(u)?u.value=a:null),class:"mt-5","item-per-page":D(_).pagination.per_page,"total-items":D(_).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):S("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-d2460806"]]);export{Va as default};
