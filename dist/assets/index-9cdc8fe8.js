import{_ as t}from"./VModal.vue_vue_type_style_index_0_lang-929f8778.js";import{_ as e}from"./SubmitButton.vue_vue_type_script_setup_true_lang-3fd94ade.js";import{_ as a}from"./VInput.vue_vue_type_script_setup_true_lang-88e8cbff.js";import{_ as l,a as o}from"./VControl-5569cf53.js";import{_ as s}from"./VCheckbox.vue_vue_type_style_index_0_lang-2e6b52db.js";import{q as n,H as i,C as r,x as _,r as d,A as u,o as c,a as p,w as m,e as y,t as f,k as v,K as g,d as h,F as b,g as V,L as $,M as x,E as j,J as k,y as q,l as D,S as C}from"./index-10a7bb68.js";import{a as U}from"./additional-9e169b33.js";import{_ as O}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as w}from"./VCard.vue_vue_type_script_setup_true_lang-2f7124ba.js";import{a as P,_ as z,b as F,c as S,d as I}from"./search-7-dark-e44eeced.js";import{_ as B}from"./DonationForProcessingFilter.vue_vue_type_script_setup_true_lang-64b24dba.js";import{_ as E}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d2aaa355.js";import{u as M}from"./main-e68c1ccc.js";import{u as L}from"./viewWrapper-dc426096.js";import"./VButton.vue_vue_type_style_index_0_lang-73c8b1df.js";import"./VPlaceload-686e62ec.js";import"./VFlex.vue_vue_type_style_index_0_lang-4effb675.js";const R=t=>($("data-v-37874315"),t=t(),x(),t),T={class:"box"},A={class:"table is-fullwidth"},H={class:""},J={class:"has-text-info"},K={class:""},N={class:"has-text-info"},Q={class:""},W={class:"has-text-info"},X={class:""},Y={class:"has-text-info"},Z={class:""},G={class:"has-text-info"},tt=R((()=>y("hr",{class:"is-divider"},null,-1))),et={class:"box"},at={class:"is-size-5"},lt=R((()=>y("br",null,null,-1))),ot={class:"table is-fullwidth"},st={class:""},nt={class:"mr-3"},it={class:"mr-3"},rt={class:"mr-3"},_t={class:"mr-3"},dt=O(n({__name:"ProcessingCardModal",props:{product:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(n,{emit:$}){const x=i(),{t:j}=r(),k=_(!1),q=_(j("Processing_card")),D=d({divided_into_doses:!1,plasma:{value:"",sent_for_quality_control:!1},erythrocyte_mass:{value:"",sent_for_quality_control:!1,sent_for_sterility_control:!1},dose:{first:"",second:""}}),C=d({plasma:[],erythrocyte_mass:[],sent_for_quality_control:[],divided_into_doses:[],sent_for_sterility_control:[]}),O=_([]);async function w(){var t,e;try{k.value=!0,x.success(j("Data_saved_successfully")),P()}catch(a){x.error(a.message),Object.assign(C,null==(e=null==(t=a.response)?void 0:t.data)?void 0:e.errors)}finally{k.value=!1}}function P(){$("update:isOpen",!1)}return u((async()=>{await U().then((t=>O.value=t.result))})),(i,r)=>{const _=s,d=l,u=o,$=a,x=e,j=t;return c(),p(j,{open:n.isOpen,size:"big",title:g(q),actions:"right",onClose:P},{content:m((()=>[y("div",T,[y("table",A,[y("tbody",null,[y("tr",null,[y("td",null,[y("span",H,f(i.$t("Donation_type"))+": ",1),y("span",J,f(n.product.donation_type),1)]),y("td",null,[y("span",K,f(i.$t("Donation_code"))+": ",1),y("span",N,f(n.product.donation_code),1)])]),y("tr",null,[y("td",null,[y("span",Q,f(i.$t("Donation_date"))+": ",1),y("span",W,f(n.product.donation_date),1)]),y("td",null,[y("span",X,f(i.$t("Visit_type"))+": ",1),y("span",Y,f(n.product.visit_type),1)])]),y("tr",null,[y("td",null,[y("span",Z,f(i.$t("Quantity_ml"))+": ",1),y("span",G,f(n.product.quantity),1)])]),y("tr",null,[y("td",null,[v(u,{class:"is-align-items-center"},{default:m((()=>[v(d,{subcontrol:""},{default:m((()=>[v(_,{modelValue:g(D).divided_into_doses,"onUpdate:modelValue":r[0]||(r[0]=t=>g(D).divided_into_doses=t),label:i.$t("Divided_into_doses")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])])]),tt,y("div",et,["Донация цельной крови"===n.product.donation_type?(c(),h(b,{key:0},[y("h5",at,f(i.$t("Components_received"))+":",1),lt,y("table",ot,[y("tbody",null,[y("tr",null,[y("td",st,[v(u,{horizontal:"",class:"is-align-items-center"},{default:m((()=>[y("h5",nt,f(i.$t("Plasma_FFP_ml")),1),v(d,{subcontrol:""},{default:m((()=>[v($,{modelValue:g(D).plasma.value,"onUpdate:modelValue":r[1]||(r[1]=t=>g(D).plasma.value=t)},null,8,["modelValue"])])),_:1}),v(d,{subcontrol:""},{default:m((()=>[v(_,{modelValue:g(D).plasma.sent_for_quality_control,"onUpdate:modelValue":r[2]||(r[2]=t=>g(D).plasma.sent_for_quality_control=t),label:i.$t("Sample_sent_for_quality_control")},null,8,["modelValue","label"])])),_:1})])),_:1})])]),y("tr",null,[y("td",null,[v(u,{horizontal:"",class:"is-align-items-center"},{default:m((()=>[y("h5",it,f(i.$t("Erythrocyte_mass_ml")),1),v(d,{subcontrol:""},{default:m((()=>[v($,{modelValue:g(D).erythrocyte_mass.value,"onUpdate:modelValue":r[3]||(r[3]=t=>g(D).erythrocyte_mass.value=t)},null,8,["modelValue"])])),_:1}),v(d,{subcontrol:""},{default:m((()=>[v(_,{modelValue:g(D).erythrocyte_mass.sent_for_quality_control,"onUpdate:modelValue":r[4]||(r[4]=t=>g(D).erythrocyte_mass.sent_for_quality_control=t),label:i.$t("Sample_sent_for_quality_control")},null,8,["modelValue","label"])])),_:1}),v(d,{subcontrol:""},{default:m((()=>[v(_,{modelValue:g(D).erythrocyte_mass.sent_for_sterility_control,"onUpdate:modelValue":r[5]||(r[5]=t=>g(D).erythrocyte_mass.sent_for_sterility_control=t),label:i.$t("Sample_sent_for_sterility_control")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])])],64)):V("",!0),"Плазмаферез"===n.product.donation_type?(c(),h(b,{key:1},[v(u,{horizontal:"",class:"is-align-items-center"},{default:m((()=>[y("h5",rt,f(i.$t("Dose"))+" 1, ml",1),v(d,{subcontrol:""},{default:m((()=>[v($,{modelValue:g(D).dose.first,"onUpdate:modelValue":r[6]||(r[6]=t=>g(D).dose.first=t)},null,8,["modelValue"])])),_:1})])),_:1}),v(u,{horizontal:"",class:"is-align-items-center"},{default:m((()=>[y("h5",_t,f(i.$t("Dose"))+" 2, ml",1),v(d,{subcontrol:""},{default:m((()=>[v($,{modelValue:g(D).dose.second,"onUpdate:modelValue":r[7]||(r[7]=t=>g(D).dose.second=t)},null,8,["modelValue"])])),_:1})])),_:1})],64)):V("",!0)])])),action:m((()=>[v(x,{type:"button",loading:g(k),onClick:w},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-37874315"]]),ut=t=>($("data-v-70e53271"),t=t(),x(),t),ct={class:"page-content-inner"},pt={class:"columns mb-5"},mt={class:"column is-narrow"},yt={class:"columns"},ft={class:"column"},vt={class:"columns"},gt={class:"column"},ht={class:"table-container"},bt={key:0,class:"flex-list-inner"},Vt=ut((()=>y("img",{class:"light-image",src:S,alt:""},null,-1))),$t=ut((()=>y("img",{class:"dark-image",src:I,alt:""},null,-1))),xt={key:1,class:"table is-hoverable is-fullwidth"},jt={colspan:"3"},kt=["onClick"],qt=O(n({__name:"index",setup(t){j(),i();const{t:e}=r(),a=M(),l=_(!1),o=L();_(null),o.setPageTitle(e("Processing")),k({title:`${e("Donations_list_for_processing")} - ${a.app.name}`});const s=d({data:[{id:11,donation_code:"130100123400",donation_date:"10.12.2022",blood_type:"O(I)",visit_type:"Безвозмезные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Донация цельной крови",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"},{id:21,donation_code:"130100987300",donation_date:"18.12.2022",blood_type:"O(I)",visit_type:"Платные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Плазмаферез",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n=d({}),u=_(!1),$=d({donation_code:[],donation_type_id:[]});async function x(t){var e,a;try{l.value=!0;s.pagination.current_page}catch(o){Object.assign($,null==(a=null==(e=o.response)?void 0:e.data)?void 0:a.errors)}finally{l.value=!1}}function U(t){errors[t]=""}async function O(){s.data=[]}return q(u,(function(t){!1===t&&Object.assign(n,{})})),(t,e)=>{const o=E,i=B,r=P,_=z,d=F,j=w,k=dt;return c(),h("div",ct,[y("div",pt,[y("div",mt,[v(o,{"with-icons":"",separator:"bullet",items:[{label:g(a).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:t.$t("Processing")},{label:t.$t("Donations_list_for_processing")}]},null,8,["items"])])]),y("div",yt,[y("div",ft,[v(i,{"is-loading":g(l),errors:g($),onSearch:x,onClearForm:O,onClearError:U},null,8,["is-loading","errors"])])]),y("div",vt,[y("div",gt,[v(j,null,{default:m((()=>[y("div",ht,[0===g(s).data.length?(c(),h("div",bt,[v(r,{title:t.$t("No_data"),subtitle:t.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:m((()=>[Vt,$t])),_:1},8,["title","subtitle"])])):(c(),h("table",xt,[y("thead",null,[y("tr",null,[y("th",null,f(t.$t("Donation_code")),1),y("th",null,f(t.$t("Donation_date")),1),y("th",null,f(t.$t("Donation_type")),1)])]),y("tbody",null,[g(l)?(c(!0),h(b,{key:0},D(g(s).pagination.per_page,(t=>(c(),h("tr",{key:t},[y("td",jt,[v(_,{lines:2,"last-line-width":"70%"})])])))),128)):(c(!0),h(b,{key:1},D(g(s).data,((t,e)=>(c(),h("tr",{key:e},[y("td",null,[y("a",{href:"javascript:;",class:"has-text-primary",onClick:e=>function(t){Object.assign(n,t),u.value=!0}(t)},f(t.donation_code),9,kt)]),y("td",null,f(t.donation_date),1),y("td",null,f(t.donation_type),1)])))),128))])]))]),g(s).data.length?(c(),p(d,{key:0,"current-page":g(s).pagination.current_page,"onUpdate:current-page":e[0]||(e[0]=t=>g(s).pagination.current_page=t),class:"mt-5","item-per-page":g(s).pagination.per_page,"total-items":g(s).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):V("",!0)])),_:1})])]),v(k,{"is-open":g(u),"onUpdate:is-open":e[1]||(e[1]=t=>C(u)?u.value=t:null),product:g(n),"onUpdate:list":x},null,8,["is-open","product"])])}}}),[["__scopeId","data-v-70e53271"]]);export{qt as default};
