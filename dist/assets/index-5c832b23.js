import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-6eeebdac.js";import{_ as l,a as s}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as o}from"./NoDataPlaceholder-50105cc5.js";import{_ as i}from"./VCard.vue_vue_type_script_setup_true_lang-8d45bf90.js";import{_ as n}from"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import{_ as r}from"./ClearButton.vue_vue_type_script_setup_true_lang-422ea292.js";import{b as d,a as _,_ as u}from"./VControl-90e6c9df.js";import{_ as p}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-ea8c86d4.js";import{q as c,C as m,H as v,r as g,ag as y,x as b,y as f,j as h,o as x,a as j,w as V,e as $,m as k,k as w,i as C,t as D,K as F,E as P,J as B,d as O,g as U,F as E,l as L}from"./index-202d6ef0.js";import{p as S,i as A}from"./patient-4b952528.js";import{_ as M}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e8162493.js";import{u as N}from"./main-1fdef032.js";import{u as T}from"./viewWrapper-93d6f948.js";import{_ as z}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";import"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import"./ClientOnly.vue_vue_type_script_lang-3cf31693.js";const R=["onSubmit"],W={class:"columns"},q={class:"column"},G={class:"column"},H={class:"help has-text-danger"},I={class:"column"},J={class:"help has-text-danger"},K={class:"column"},Z={class:"help has-text-danger"},Q={class:"navigation-buttons"},X={class:"buttons is-right"},Y=c({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(e,{emit:a}){let t,l;const{t:s}=m();v();const o=g({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),c=([t,l]=y((()=>S().then((e=>e.result)))),t=await t,l(),t),P=b([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),B=b([{id:1,name:s("Whole_blood_donation")},{id:2,name:s("Plasmapheresis")},{id:3,name:s("Plateletpheresis")}]),O=b(!1);f(o,(e=>{e&&(O.value=Object.values(e).some((e=>!!e)))}),{deep:!0});const U=async()=>{a("search",o)},E=async()=>{Object.assign(o,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),a("clearForm")};return(a,t)=>{const l=d,s=p,m=_,v=h("Multiselect"),g=u,y=r,b=n,f=i;return x(),j(f,null,{default:V((()=>[$("form",{onSubmit:k(U,["prevent"])},[$("div",W,[$("div",q,[w(m,null,{default:V((()=>[w(l,null,{default:V((()=>[C(D(a.$t("Period")),1)])),_:1}),w(s,{start:F(o).start_date,"onUpdate:start":t[0]||(t[0]=e=>F(o).start_date=e),end:F(o).end_date,"onUpdate:end":t[1]||(t[1]=e=>F(o).end_date=e)},null,8,["start","end"])])),_:1})]),$("div",G,[w(m,{class:"is-curved-select",label:a.$t("Donor_categories")},{default:V((({id:l})=>[w(g,null,{default:V((()=>[w(v,{modelValue:F(o).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=e=>F(o).donor_category_id=e),attrs:{id:l},options:F(c),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",H,D(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",I,[w(m,{class:"is-curved-select",label:a.$t("Visit_type")},{default:V((({id:l})=>[w(g,null,{default:V((()=>[w(v,{modelValue:F(o).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=e=>F(o).visit_type_id=e),attrs:{id:l},options:F(P),placeholder:a.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),$("p",J,D(e.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),$("div",K,[w(m,{class:"is-curved-select",label:a.$t("Donation_type")},{default:V((({id:l})=>[w(g,null,{default:V((()=>[w(v,{modelValue:F(o).donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=e=>F(o).donation_type_id=e),attrs:{id:l},options:F(B),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),$("p",Z,D(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),$("div",Q,[$("div",X,[w(y,{disabled:e.isLoading||!F(O),onClear:E},null,8,["disabled"]),w(b,{loading:e.isLoading},{default:V((()=>[C(D(a.$t("Search")),1)])),_:1},8,["loading"])])])],40,R)])),_:1})}}}),ee={class:"page-content-inner"},ae={class:"columns mb-3"},te={class:"column"},le={class:"columns mt-1"},se={class:"column"},oe={class:"columns"},ie={class:"column is-12"},ne={key:0,class:"is-flex-grow-0",textContent:"#"},re={key:0,class:"flex-list-inner"},de=z(c({__name:"index",setup(i){P();const n=v(),{t:r}=m(),d=N(),_=b(!1);T().setPageTitle(r("Physician-therapist")),B({title:`${r("Donors-list-for-examination")} - ${d.app.name}`});const u=g({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:r("Fullname")},birth_date:{label:r("Date-of-birth")},visit_date:{label:r("Visit_date"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.created_at}},visit_type:{label:r("Visit_type"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.visit_type)&&r(null==(l=a.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:r("Medical_inspection_date"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.directed_by)&&r(null==(l=a.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:r("Medical_inspection_conclusion"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.personalized_donation}},donation_code:{label:r("Donation_code"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.donation_code}},donation_type:{label:r("Donation_type"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:r("Blood_component_amount"),format:(e,a)=>{var t;return null==(t=a.status)?void 0:t.name}}},c=g({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),y=g({status:6,page:1});async function k(e){var a,t;try{Object.assign(y,{...y,...e}),_.value=!0;const a=await A(e);Object.assign(u,a.result)}catch(l){n.error(l.message),Object.assign(c,null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.errors)}finally{_.value=!1}}function S(e){c[e]=[]}async function z(){await k(y)}return f((()=>u.pagination.current_page),(async function(e){e&&(y.page=e,await k(y))}),{immediate:!0}),(i,n)=>{const r=M,m=Y,v=l,g=e,y=o,b=h("RouterLink"),f=a,P=s,B=t;return x(),O("div",ee,[$("div",ae,[$("div",te,[w(r,{"with-icons":"",separator:"bullet",items:[{label:F(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Physician-therapist")},{label:i.$t("Examined-donor-register")}]},null,8,["items"])])]),$("div",le,[$("div",se,[w(m,{"is-loading":F(_),errors:F(c),onSearch:k,onClearForm:z,onClearError:S},null,8,["is-loading","errors"])])]),$("div",oe,[$("div",ie,[w(B,{columns:F(p),data:F(u).data,limit:F(u).pagination.per_page,total:F(u).pagination.total},{default:V((()=>[w(f,{rounded:"","no-header":!F(_)&&0===F(u).data.length},{"header-column":V((({column:e})=>["orderNumber"===e.key?(x(),O("span",ne)):U("",!0)])),body:V((()=>[F(_)?(x(),O("div",re,[(x(!0),O(E,null,L(F(u).pagination.per_page,(e=>(x(),O("div",{key:e,class:"flex-table-item"},[w(g,null,{default:V((()=>[w(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):U("",!0),0===F(u).data.length?(x(),j(y,{key:1})):U("",!0)])),"body-cell":V((({row:e,column:a})=>["name"===a.key?(x(),j(b,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${e.id}`},{default:V((()=>[C(D(e.first_name)+" "+D(e.last_name)+" "+D(e.father_name),1)])),_:2},1032,["to"])):U("",!0)])),_:1},8,["no-header"]),F(u).data.length?(x(),j(P,{key:0,"current-page":F(u).pagination.current_page,"onUpdate:current-page":n[0]||(n[0]=e=>F(u).pagination.current_page=e),class:"mt-5","item-per-page":F(u).pagination.per_page,"total-items":F(u).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):U("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-e1361fb1"]]);export{de as default};
