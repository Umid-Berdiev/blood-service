import{f as a,g as e,_ as t,a as s,b as r,c as l,d as n,e as i}from"./search-7-dark.102b5390.js";import{_ as o}from"./VProgress.vue_vue_type_style_index_0_lang.25603c48.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang.7a5f3769.js";import{_}from"./VButtons.vue_vue_type_script_setup_true_lang.7d5ff722.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang.108743ff.js";import{_ as p}from"./VFlexItem.vue_vue_type_style_index_0_lang.6cd20929.js";import{_ as m}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.014f9ced.js";import{q as c,E as g,H as f,C as v,x as b,r as y,J as h,a2 as w,o as j,d as x,k,w as $,K as V,m as C,i as F,t as I,e as P,g as D,F as W,l as B,a as E}from"./index.7c55eebc.js";import{u as O}from"./viewWrapper.36a4ca30.js";import{_ as R}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang.94d225a8.js";import{u as q}from"./main.77f12ddf.js";import{i as T}from"./patient.8ce28ef6.js";import{_ as z}from"./lodash.ee52b868.js";import"./VPlaceload.b6410537.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VCard.vue_vue_type_script_setup_true_lang.66705bb8.js";import"./VInput.vue_vue_type_script_setup_true_lang.41205ab3.js";import"./VControl.c83da2bc.js";import"./VIMaskInput.vue_vue_type_script_lang.ee999b64.js";const G={class:"page-content-inner"},H={class:"columns mt-1"},J={class:"column"},K={class:"columns"},L={class:"column is-12"},M={key:0,class:"is-flex-grow-0",textContent:"#"},N={key:0,class:"flex-list-inner"},S={key:1,class:"flex-list-inner"},U=P("img",{class:"light-image",src:a,alt:""},null,-1),A=P("img",{class:"dark-image",src:e,alt:""},null,-1),Q=z.isEmpty,X=c({__name:"index",async setup(a){let e,c;g();const z=f(),{t:X}=v(),Y=q(),Z=b(!1),aa=y({lastname:"",firstname:"",middlename:"",passpordId:""});O().setPageTitle(X("Registration")),h({title:`${X("Donation-diverted-register")} - ${Y.app.name}`});const ea=y({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),ta=y({page:1}),sa={"#":{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:X("Fullname"),format:(a,e)=>`${e.first_name} ${e.last_name}`},birth_date:{label:X("Date-of-birth")},gender:{label:X("Gender"),format:a=>X(a)},passport:{label:X("Passport_series_number"),format:(a,e)=>`${e.passport_series}${e.passport_number}`},withdrawal_end_date:{label:X("Withdrawal_end_date"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.end_date}},withdrawal_reason:{label:X("Withdrawal_reason"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.reason}},withdrawal_created_by:{label:X("Withdrawal_created_by"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.created_by}}},ra=b();async function la(a){var e,t;try{Object.assign(ta,a),Z.value=!0;const e=await T(a);Object.assign(ea,e.result),Q(e.result.data)?z.warning(X("Data_not_found")):z.success(`${X("Found")}: ${e.result.pagination.total} ${X("records")}`)}catch(s){Object.assign(aa,null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.errors)}finally{Z.value=!1}}function na(a){aa[a]=""}async function ia(){ea.data=[]}function oa(){}return[e,c]=w((()=>la(ta))),await e,c(),(a,e)=>{const c=m,g=p,f=d,v=_,b=u,y=t,h=s,w=r,O=o,q=l,T=n,z=i;return j(),x("div",G,[k(b,{"justify-content":"space-between","flex-wrap":"wrap"},{default:$((()=>[k(g,null,{default:$((()=>[k(c,{"with-icons":"",separator:"bullet",items:[{label:V(Y).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Registration")},{label:a.$t("Donation-diverted-register"),to:{name:"/app/registration/donation-diverted-register/"}}]},null,8,["items"])])),_:1}),k(g,null,{default:$((()=>[k(v,null,{default:$((()=>[k(f,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:C(oa,["prevent"])},{default:$((()=>[F(I(a.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),P("div",H,[P("div",J,[k(R,{"is-loading":Z.value,errors:aa,onSearch:la,onClearForm:ia,onClearError:na},null,8,["is-loading","errors"])])]),P("div",K,[P("div",L,[k(z,{columns:V(sa),data:ea.data,limit:ea.pagination.per_page,total:ea.pagination.total},{default:$((()=>[k(q,{rounded:"","no-header":!Z.value&&0===ea.data.length},{"header-column":$((({column:a})=>["#"===a.key?(j(),x("span",M)):D("",!0)])),body:$((()=>[Z.value?(j(),x("div",N,[(j(!0),x(W,null,B(ea.pagination.per_page,(a=>(j(),x("div",{key:a,class:"flex-table-item"},[k(h,null,{default:$((()=>[k(y,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):D("",!0),0===ea.data.length?(j(),x("div",S,[k(w,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:$((()=>[U,A])),_:1})])):D("",!0)])),"body-row-pre":$((({row:a})=>[a.id===ra.value?(j(),E(O,{key:0,size:"tiny",class:"m-0 mb-1"})):D("",!0)])),_:1},8,["no-header"]),ea.data.length?(j(),E(T,{key:0,"current-page":ea.pagination.current_page,"onUpdate:current-page":e[0]||(e[0]=a=>ea.pagination.current_page=a),class:"mt-5","item-per-page":ea.pagination.per_page,"total-items":ea.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):D("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{X as default};
