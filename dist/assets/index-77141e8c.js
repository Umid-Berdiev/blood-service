import{a as e,b as l,c as a,f as t,d as o,e as s,s as i,_ as n}from"./DonationContainerFormModal.vue_vue_type_script_setup_true_lang-a5c66730.js";import{_ as d}from"./VModal.vue_vue_type_style_index_0_lang-5d90c6b2.js";import{_ as r}from"./SubmitButton.vue_vue_type_script_setup_true_lang-6d2139a4.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-66ceaea3.js";import{u as c,_,a as m,b as p}from"./VControl-f7fb3a1b.js";import{q as v,r as f,x as h,ak as b,y,c as g,o as V,d as $,$ as x,al as U,K as k,e as D,b as z,Y as S,Z as j,p as C,U as w,f as F,t as L,k as B,w as O,F as W,l as M,a as T,i as Y,L as H,M as I,j as P,g as A,H as E,C as N,a8 as R,A as q,a7 as Z,m as J,E as K,J as G}from"./index-98bd5d96.js";import{_ as Q}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as X}from"./DatePicker.vue_vue_type_script_setup_true_lang-b74769d0.js";import{_ as ee}from"./VFlex.vue_vue_type_style_index_0_lang-d4822231.js";import{_ as le}from"./VFlexItem.vue_vue_type_style_index_0_lang-e1345c6d.js";import{_ as ae,a as te,b as oe}from"./VFlexTable.vue_vue_type_style_index_0_lang-a0c1a611.js";import{_ as se,a as ie,b as ne,c as de,d as re}from"./search-7-dark-8086cfd0.js";import{_ as ue}from"./VCard.vue_vue_type_script_setup_true_lang-bb96f312.js";import{_ as ce}from"./VButton.vue_vue_type_style_index_0_lang-8d9e700e.js";import{p as _e,a as me}from"./patient-81564020.js";import{v as pe}from"./additionals-2f6cb47d.js";import{_ as ve}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e0d2add1.js";import{u as fe}from"./main-f6ba09a2.js";import{u as he}from"./viewWrapper-68c9a3c0.js";import{f as be}from"./additional-acd45769.js";import"./ClientOnly.vue_vue_type_script_lang-c4665ea8.js";const ye=["id","name","multiple"],ge=v({__name:"VSelect",props:{raw:{type:Boolean},modelValue:{default:""},multiple:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:l}){var a;const t=e,o=f(c({create:!1,help:"VSelect"})),s=h((null==(a=null==o?void 0:o.field)?void 0:a.value)??t.modelValue),i=b();y(s,(()=>{l("update:modelValue",s.value)})),y((()=>t.modelValue),(()=>{s.value=t.modelValue}));const n=g((()=>t.raw?[]:["select",t.multiple&&"is-multiple"]));return(e,l)=>(V(),$("div",{class:F(k(n))},[x(D("select",C({id:k(o).id},k(i),{"onUpdate:modelValue":l[0]||(l[0]=e=>w(s)?s.value=e:null),name:k(o).id,multiple:t.multiple,onChange:l[1]||(l[1]=(...e)=>{var l,a;return(null==(l=k(o).field)?void 0:l.handleChange)&&(null==(a=k(o).field)?void 0:a.handleChange(...e))}),onBlur:l[2]||(l[2]=(...e)=>{var l,a;return(null==(l=k(o).field)?void 0:l.handleBlur)&&(null==(a=k(o).field)?void 0:a.handleBlur(...e))})}),[z(e.$slots,"default",S(j({selected:k(s),id:k(o).id})))],16,ye),[[U,k(s)]])],2))}}),Ve=v({__name:"VOption",setup(e){const l=f(c({create:!1,help:"VOption"}));return(e,a)=>(V(),$("option",null,[z(e.$slots,"default",S(j(k(l))))]))}}),$e=e=>(H("data-v-26302d24"),e=e(),I(),e),xe={class:"box"},Ue={class:"is-size-5 mb-3"},ke={class:"field is-horizontal"},De={class:"field-label is-normal"},ze={class:"label"},Se={class:"field-body"},je={class:"field is-horizontal"},Ce={class:"field-label is-normal"},we={class:"label"},Fe=$e((()=>D("span",{class:"has-text-danger"},"*",-1))),Le={class:"field-body"},Be={class:"field is-horizontal"},Oe={class:"field-label"},We={class:"label"},Me=$e((()=>D("span",{class:"has-text-danger"},"*",-1))),Te={class:"field-body"},Ye=Q(v({__name:"WholeBloodDonationFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(e,{emit:l}){const a=e,t=g({get:()=>a.formState,set(e){l("update:formState",e)}});return(l,a)=>{const o=Ve,s=ge,i=_,n=m,d=u;return V(),$("div",xe,[D("h5",Ue,L(l.$t("Whole_blood_donation")),1),D("div",ke,[D("div",De,[D("label",ze,L(l.$t("Container")),1)]),D("div",Se,[B(n,null,{default:O((()=>[B(i,{expanded:""},{default:O((()=>[B(s,{modelValue:k(t).container_id,"onUpdate:modelValue":a[0]||(a[0]=e=>k(t).container_id=e),class:"is-primary",placeholder:l.$t("Select")},{default:O((()=>[(V(!0),$(W,null,M(e.containerList,((e,l)=>(V(),T(o,{key:l,value:e.id},{default:O((()=>[Y(L(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),D("div",je,[D("div",Ce,[D("label",we,[Y(L(l.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Fe])]),D("div",Le,[B(n,null,{default:O((()=>[B(d,{modelValue:k(t).hemoconservative,"onUpdate:modelValue":a[1]||(a[1]=e=>k(t).hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),D("div",Be,[D("div",Oe,[D("label",We,[Y(L(l.$t("Laboratory_taken_blood_amount_ml"))+" ",1),Me])]),D("div",Te,[B(n,null,{default:O((()=>[B(d,{modelValue:k(t).laboratory,"onUpdate:modelValue":a[2]||(a[2]=e=>k(t).laboratory=e),type:"text"},null,8,["modelValue"])])),_:1})])])])}}}),[["__scopeId","data-v-26302d24"]]),He=e=>(H("data-v-05e721e4"),e=e(),I(),e),Ie={class:"box"},Pe={class:"is-size-5 mb-3"},Ae={class:"field is-horizontal"},Ee={class:"field-label is-normal"},Ne={class:"label"},Re={class:"field-body"},qe=He((()=>D("hr",{class:"is-divider"},null,-1))),Ze={class:"mb-3"},Je={class:"field is-horizontal"},Ke={class:"field-label is-flex is-align-items-center"},Ge={class:"label"},Qe={class:"field-body"},Xe={class:"field"},el={class:"control is-expended"},ll={class:"field is-horizontal"},al={class:"field-label is-normal"},tl={class:"label"},ol=He((()=>D("span",{class:"has-text-danger"},"*",-1))),sl={class:"field-body"},il=He((()=>D("hr",{class:"is-divider"},null,-1))),nl={class:"mb-3"},dl={class:"field is-horizontal"},rl={class:"field-label is-flex is-align-items-center"},ul={class:"label"},cl={class:"field-body"},_l={class:"field"},ml={class:"control is-expended"},pl={class:"field is-horizontal"},vl={class:"field-label is-normal"},fl={class:"label"},hl=He((()=>D("span",{class:"has-text-danger"},"*",-1))),bl={class:"field-body"},yl={class:"field is-horizontal"},gl={class:"field-label is-normal"},Vl={class:"label"},$l={class:"field-body"},xl=Q(v({__name:"PlasmapheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,o=g({get:()=>t.formState,set(e){a("update:formState",e)}}),s=h(1);return y(s,(function(e){o.value.doses.length>e&&o.value.doses.pop(),o.value.doses.length<e&&o.value.doses.push(0)})),(a,t)=>{const i=Ve,n=ge,d=_,r=m,c=P("Multiselect"),v=u,f=p;return V(),$("div",Ie,[D("h5",Pe,L(a.$t("Plasmapheresis")),1),D("div",Ae,[D("div",Ee,[D("label",Ne,L(a.$t("Apheresis_method")),1)]),D("div",Re,[B(r,null,{default:O((()=>[B(d,{expended:""},{default:O((()=>[B(n,{modelValue:k(o).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>k(o).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:O((()=>[(V(!0),$(W,null,M(k(e),((e,l)=>(V(),T(i,{key:l,value:e.value},{default:O((()=>[Y(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===k(o).apheresis_method?(V(),$(W,{key:0},[qe,D("h5",Ze,L(a.$t("First_fence")),1),D("div",Je,[D("div",Ke,[D("label",Ge,L(a.$t("Container")),1)]),D("div",Qe,[D("div",Xe,[D("div",el,[B(c,{modelValue:k(o).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>k(o).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",ll,[D("div",al,[D("label",tl,[Y(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),ol])]),D("div",sl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>k(o).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),il,D("h5",nl,L(a.$t("Second_fence")),1),D("div",dl,[D("div",rl,[D("label",ul,L(a.$t("Container")),1)]),D("div",cl,[D("div",_l,[D("div",ml,[B(c,{modelValue:k(o).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>k(o).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",pl,[D("div",vl,[D("label",fl,[Y(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),hl])]),D("div",bl,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>k(o).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):"device"===k(o).apheresis_method?(V(),$(W,{key:1},[D("div",yl,[D("div",gl,[D("label",Vl,L(a.$t("Received_plasma_amount_ml")),1)]),D("div",$l,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).plasma,"onUpdate:modelValue":t[5]||(t[5]=e=>k(o).plasma=e),type:"text"},null,8,["modelValue"])])),_:1})])]),B(r,{horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[Y(L(a.$t("Divided_into_doses")),1)])),_:1}),B(d,null,{default:O((()=>[B(v,{modelValue:k(s),"onUpdate:modelValue":t[6]||(t[6]=e=>w(s)?s.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(V(!0),$(W,null,M(k(s),((e,l)=>(V(),T(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[Y(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),B(d,{raw:"",subcontrol:""},{default:O((()=>[B(v,{modelValue:k(o).doses[l],"onUpdate:modelValue":e=>k(o).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):A("",!0)])}}}),[["__scopeId","data-v-05e721e4"]]),Ul=e=>(H("data-v-24cb3ffd"),e=e(),I(),e),kl={class:"box"},Dl={class:"is-size-5 mb-3"},zl={class:"field is-horizontal"},Sl={class:"field-label is-normal"},jl={class:"label"},Cl={class:"field-body"},wl=Ul((()=>D("hr",{class:"is-divider"},null,-1))),Fl={class:"mb-3"},Ll={class:"field is-horizontal"},Bl={class:"field-label is-flex is-align-items-center"},Ol={class:"label"},Wl={class:"field-body"},Ml={class:"field"},Tl={class:"control is-expended"},Yl={class:"field is-horizontal"},Hl={class:"field-label is-normal"},Il={class:"label"},Pl=Ul((()=>D("span",{class:"has-text-danger"},"*",-1))),Al={class:"field-body"},El=Ul((()=>D("hr",{class:"is-divider"},null,-1))),Nl={class:"mb-3"},Rl={class:"field is-horizontal"},ql={class:"field-label is-flex is-align-items-center"},Zl={class:"label"},Jl={class:"field-body"},Kl={class:"field"},Gl={class:"control is-expended"},Ql={class:"field is-horizontal"},Xl={class:"field-label is-normal"},ea={class:"label"},la={class:"field-body"},aa=Ul((()=>D("hr",{class:"is-divider"},null,-1))),ta={class:"mb-3"},oa={class:"field is-horizontal"},sa={class:"field-label is-flex is-align-items-center"},ia={class:"label"},na={class:"field-body"},da={class:"field"},ra={class:"control is-expended"},ua={class:"field is-horizontal"},ca={class:"field-label is-normal"},_a={class:"label"},ma={class:"field-body"},pa=Ul((()=>D("hr",{class:"is-divider"},null,-1))),va={class:"mb-3"},fa={class:"field is-horizontal"},ha={class:"field-label is-flex is-align-items-center"},ba={class:"label"},ya={class:"field-body"},ga={class:"field"},Va={class:"control is-expended"},$a={class:"field is-horizontal"},xa={class:"field-label is-normal"},Ua={class:"label"},ka={class:"field-body"},Da=Ul((()=>D("hr",{class:"is-divider"},null,-1))),za=Ul((()=>D("br",null,null,-1))),Sa={class:"field is-horizontal"},ja={class:"field-label is-normal"},Ca={class:"label"},wa={class:"field-body"},Fa=Q(v({__name:"PlateletpheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,o=g({get:()=>t.formState,set(e){a("update:formState",e)}}),s=h(1);return y(s,(function(e){o.value.doses.length>e&&o.value.doses.pop(),o.value.doses.length<e&&o.value.doses.push(0)})),(a,t)=>{const i=Ve,n=ge,d=_,r=m,c=P("Multiselect"),v=u,f=p;return V(),$("div",kl,[D("h5",Dl,L(a.$t("Plateletpheresis")),1),D("div",zl,[D("div",Sl,[D("label",jl,L(a.$t("Apheresis_method")),1)]),D("div",Cl,[B(r,null,{default:O((()=>[B(d,{expanded:""},{default:O((()=>[B(n,{modelValue:k(o).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>k(o).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:O((()=>[(V(!0),$(W,null,M(k(e),((e,l)=>(V(),T(i,{key:l,value:e.value},{default:O((()=>[Y(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===k(o).apheresis_method?(V(),$(W,{key:0},[wl,D("h5",Fl,L(a.$t("First_fence")),1),D("div",Ll,[D("div",Bl,[D("label",Ol,L(a.$t("Container")),1)]),D("div",Wl,[D("div",Ml,[D("div",Tl,[B(c,{modelValue:k(o).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>k(o).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",Yl,[D("div",Hl,[D("label",Il,[Y(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Pl])]),D("div",Al,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>k(o).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),El,D("h5",Nl,L(a.$t("Second_fence")),1),D("div",Rl,[D("div",ql,[D("label",Zl,L(a.$t("Container")),1)]),D("div",Jl,[D("div",Kl,[D("div",Gl,[B(c,{modelValue:k(o).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>k(o).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",Ql,[D("div",Xl,[D("label",ea,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),D("div",la,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>k(o).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),aa,D("h5",ta,L(a.$t("Third_fence")),1),D("div",oa,[D("div",sa,[D("label",ia,L(a.$t("Container")),1)]),D("div",na,[D("div",da,[D("div",ra,[B(c,{modelValue:k(o).third_container_id,"onUpdate:modelValue":t[5]||(t[5]=e=>k(o).third_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",ua,[D("div",ca,[D("label",_a,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),D("div",ma,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).third_hemoconservative,"onUpdate:modelValue":t[6]||(t[6]=e=>k(o).third_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),pa,D("h5",va,L(a.$t("Fourth_fence")),1),D("div",fa,[D("div",ha,[D("label",ba,L(a.$t("Container")),1)]),D("div",ya,[D("div",ga,[D("div",Va,[B(c,{modelValue:k(o).fourth_container_id,"onUpdate:modelValue":t[7]||(t[7]=e=>k(o).fourth_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",$a,[D("div",xa,[D("label",Ua,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),D("div",ka,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).fourth_hemoconservative,"onUpdate:modelValue":t[8]||(t[8]=e=>k(o).fourth_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):A("",!0),"device"===k(o).apheresis_method?(V(),$(W,{key:1},[Da,za,D("div",Sa,[D("div",ja,[D("label",Ca,L(a.$t("Received_platelet_concentrate_amount_ml")),1)]),D("div",wa,[B(r,null,{default:O((()=>[B(v,{modelValue:k(o).thromboconcentrate1,"onUpdate:modelValue":t[9]||(t[9]=e=>k(o).thromboconcentrate1=e),type:"text",style:{width:"50%"}},null,8,["modelValue"])])),_:1})])]),B(r,{horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[Y(L(a.$t("Divided_into_doses")),1)])),_:1}),B(d,null,{default:O((()=>[B(v,{modelValue:k(s),"onUpdate:modelValue":t[10]||(t[10]=e=>w(s)?s.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(V(!0),$(W,null,M(k(s),((e,l)=>(V(),T(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:O((()=>[B(f,{class:"mr-3"},{default:O((()=>[Y(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),B(d,{raw:"",subcontrol:""},{default:O((()=>[B(v,{modelValue:k(o).doses[l],"onUpdate:modelValue":e=>k(o).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):A("",!0)])}}}),[["__scopeId","data-v-24cb3ffd"]]),La=e=>(H("data-v-dc1988d6"),e=e(),I(),e),Ba={class:"box mt-3"},Oa={class:"is-size-5 mb-3"},Wa={class:"field is-horizontal"},Ma={class:"field-label is-normal"},Ta={class:"label"},Ya=["value"],Ha={class:"field is-horizontal"},Ia={class:"field-label is-normal"},Pa={class:"label"},Aa={class:"field-body"},Ea={class:"field"},Na={class:"control"},Ra={class:"help has-text-danger"},qa={class:"field is-horizontal"},Za={class:"field-label is-normal"},Ja={class:"label"},Ka={class:"field-body"},Ga={class:"field"},Qa={class:"control"},Xa={class:"field"},et={class:"control"},lt={class:"field is-horizontal"},at={class:"field-label is-normal"},tt={class:"label"},ot={class:"field-body"},st={class:"field"},it={class:"control"},nt=La((()=>D("hr",{class:"is-divider"},null,-1))),dt=La((()=>D("hr",{class:"is-divider"},null,-1))),rt=La((()=>D("hr",{class:"is-divider"},null,-1))),ut={class:"box"},ct={class:"is-size-5 mb-3"},_t={class:"field is-horizontal"},mt={class:"field-label is-normal"},pt={class:"label"},vt={class:"field-body"},ft={class:"field"},ht={class:"control is-expended"},bt=Q(v({__name:"DonationDataEntryFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null,donationTypes:null},emits:["update:isOpen","update:list","add:Container"],async setup(e,{emit:u}){let c,_;const m=e,p=E(),{t:v}=N(),b=h(v("Donation_data_entry_form")),x=h(!1),U=h({date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0}),z=f({date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),S=h([]),j=h([]),C=h(!1),w=h({}),F=g((()=>{var e;return null==(e=m.donationTypes.find((e=>{var l,a;return e.id==(null==(a=null==(l=m.patient)?void 0:l.last_visit)?void 0:a.donation_type_id)})))?void 0:e.name}));async function M(){var e,l,a,t,o,s;try{x.value=!0,await i(null==(l=null==(e=m.patient)?void 0:e.last_visit)?void 0:l.id,U.value),p.success(v("Data_saved_successfully")),u("update:list"),T()}catch(n){(null==(a=n.response)?void 0:a.data.error)?p.error(null==(t=n.response)?void 0:t.data.error):Object.assign(z,null==(s=null==(o=n.response)?void 0:o.data)?void 0:s.errors)}finally{x.value=!1}}function T(){U.value={date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0},Object.assign(z,{date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),u("update:isOpen",!1)}async function H(){const e=await t();S.value=e.result.data}return[c,_]=R((()=>async function(){try{const e=await a();j.value=e.result}catch(e){p.error(e.message)}}())),await c,_(),q((async function(){await H()})),y((()=>{var e,l;return null==(l=null==(e=m.patient)?void 0:e.last_visit)?void 0:l.id}),(async e=>{var a,t;if(e){const o=await l(e);U.value=o.result,(a=U.value).doses??(a.doses=[0]),(t=U.value).date??(t.date=Z(new Date,"YYYY-MM-DD"))}})),(l,a)=>{const t=le,i=ee,u=X,c=P("Multiselect"),_=Fa,m=xl,p=Ye,v=r,f=d,h=n;return V(),$(W,null,[B(f,{open:e.isOpen,size:"medium",title:b.value,actions:"right",onClose:T},{content:O((()=>{var n,d,r,v,f,h;return[B(i,{"column-gap":"1rem"},{default:O((()=>[B(t,null,{default:O((()=>[Y(L(l.$t("Recommended_single_donation_volume_ml"))+":",1)])),_:1}),B(t,null,{default:O((()=>{var l,a;return[Y(L(null==(a=null==(l=e.patient)?void 0:l.last_visit)?void 0:a.recommended_blood_capacity),1)]})),_:1})])),_:1}),D("div",Ba,[D("h5",Oa,L(l.$t("Donation_results")),1),D("div",Wa,[D("div",Ma,[D("label",Ta,L(l.$t("Donation_type")),1)]),D("input",{class:"input",value:k(F),disabled:""},null,8,Ya)]),D("div",Ha,[D("div",Ia,[D("label",Pa,L(l.$t("Donation_date")),1)]),D("div",Aa,[D("div",Ea,[D("div",Na,[B(u,{modelValue:U.value.date,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.date=e)},null,8,["modelValue"]),D("p",Ra,L(z.date[0]),1)])])])]),D("div",qa,[D("div",Za,[D("label",Ja,L(l.$t("Completed_donation_status")),1)]),D("div",Ka,[D("div",Ga,[D("div",Qa,[B(c,{modelValue:U.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.status=e),options:k(o),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])]),D("div",Xa,[D("div",et,[B(c,{modelValue:U.value.status_type,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.status_type=e),options:k(s),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",lt,[D("div",at,[D("label",tt,L(l.$t("Post-infusion_reaction")),1)]),D("div",ot,[D("div",st,[D("div",it,[B(c,{modelValue:U.value.postinfusion_reaction_id,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.postinfusion_reaction_id=e),options:j.value,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])])]),1===(null==(d=null==(n=e.patient)?void 0:n.last_visit)?void 0:d.donation_type_id)?(V(),$(W,{key:0},[nt,B(_,{"form-state":U.value,"onUpdate:form-state":a[4]||(a[4]=e=>U.value=e),"container-list":S.value},null,8,["form-state","container-list"])],64)):A("",!0),2===(null==(v=null==(r=e.patient)?void 0:r.last_visit)?void 0:v.donation_type_id)?(V(),$(W,{key:1},[dt,B(m,{"form-state":U.value,"onUpdate:form-state":a[5]||(a[5]=e=>U.value=e),"container-list":S.value},null,8,["form-state","container-list"])],64)):A("",!0),3===(null==(h=null==(f=e.patient)?void 0:f.last_visit)?void 0:h.donation_type_id)?(V(),$(W,{key:2},[rt,B(p,{"form-state":U.value,"onUpdate:form-state":a[6]||(a[6]=e=>U.value=e),"container-list":S.value},null,8,["form-state","container-list"])],64)):A("",!0),D("div",ut,[D("h5",ct,L(l.$t("Component_Product_Transfer_Information")),1),D("div",_t,[D("div",mt,[D("label",pt,L(l.$t("Transferred")),1)]),D("div",vt,[D("div",ft,[D("div",ht,[B(c,{modelValue:U.value.sent_to,"onUpdate:modelValue":a[7]||(a[7]=e=>U.value.sent_to=e),options:[{value:"recycling",label:"на переработку"},{value:"sterility",label:"на контроль стерильности"}],placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","placeholder"])])])])])])]})),action:O((()=>[D("button",{class:"button is-info is-outlined",onClick:a[8]||(a[8]=e=>C.value=!0)},L(l.$t("Add_container")),1),B(v,{loading:x.value,onClick:M},null,8,["loading"])])),_:1},8,["open","title"]),B(h,{"is-open":C.value,"onUpdate:is-open":a[9]||(a[9]=e=>C.value=e),container:w.value,"onUpdate:list":H},null,8,["is-open","container"])],64)}}}),[["__scopeId","data-v-dc1988d6"]]),yt=["onSubmit"],gt={class:"columns"},Vt={class:"column"},$t={class:"help has-text-danger"},xt={class:"column"},Ut={class:"help has-text-danger"},kt={class:"column"},Dt={class:"help has-text-danger"},zt={class:"column is-3"},St={class:"help has-text-danger"},jt={class:"navigation-buttons"},Ct={class:"buttons is-right"},wt=v({__name:"DonorsListFilterForm",props:{isLoading:{type:Boolean},errors:null,donationTypes:null},emits:["search","clearError","clearForm"],setup(e,{emit:l}){N(),E();const a=f({donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),t=h([]);q((async()=>{t.value=await _e().then((e=>e.result))}));const o=async()=>{l("search",a)},s=async()=>{Object.assign(a,{donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),l("clearForm")};return(l,i)=>{const n=P("Multiselect"),d=_,r=m,c=u,p=ce,v=ue;return V(),T(v,null,{default:O((()=>[D("form",{onSubmit:J(o,["prevent"])},[D("div",gt,[D("div",Vt,[B(r,{class:"is-curved-select",label:l.$t("Donor_categories")},{default:O((({id:o})=>[B(d,null,{default:O((()=>[B(n,{modelValue:k(a).donor_category_id,"onUpdate:modelValue":i[0]||(i[0]=e=>k(a).donor_category_id=e),attrs:{id:o},options:k(t),placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),D("p",$t,L(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",xt,[B(r,{class:"is-curved-select",label:l.$t("Visit_type")},{default:O((({id:t})=>[B(d,null,{default:O((()=>[B(n,{modelValue:k(a).visit_type,"onUpdate:modelValue":i[1]||(i[1]=e=>k(a).visit_type=e),attrs:{id:t},options:k(pe),placeholder:l.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),D("p",Ut,L(e.errors.visit_type[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",kt,[B(r,{class:"is-curved-select",label:l.$t("Donation_type")},{default:O((({id:t})=>[B(d,null,{default:O((()=>[B(n,{modelValue:k(a).donation_type_id,"onUpdate:modelValue":i[2]||(i[2]=e=>k(a).donation_type_id=e),attrs:{id:t},options:e.donationTypes,placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),D("p",Dt,L(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",zt,[B(r,{class:"is-curved-select",label:l.$t("Donation_code")},{default:O((({id:t})=>[B(d,null,{default:O((()=>[B(c,{modelValue:k(a).donation_code,"onUpdate:modelValue":i[3]||(i[3]=e=>k(a).donation_code=e),attrs:{id:t},placeholder:l.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),D("p",St,L(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),D("div",jt,[D("div",Ct,[B(p,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:s},{default:O((()=>[Y(L(l.$t("Clear")),1)])),_:1},8,["disabled"]),B(p,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:O((()=>[Y(L(l.$t("Search")),1)])),_:1},8,["loading"])])])],40,yt)])),_:1})}}}),Ft=e=>(H("data-v-d8039abc"),e=e(),I(),e),Lt={class:"page-content-inner"},Bt={class:"columns mb-3"},Ot={class:"column"},Wt={class:"columns mt-1"},Mt={class:"column"},Tt={class:"columns"},Yt={class:"column is-12"},Ht=["textContent"],It={key:0,class:"flex-list-inner"},Pt={key:1,class:"flex-list-inner"},At=Ft((()=>D("img",{class:"light-image",src:de,alt:""},null,-1))),Et=Ft((()=>D("img",{class:"dark-image",src:re,alt:""},null,-1))),Nt=["onClick"],Rt=Q(v({__name:"index",async setup(e){let l,a;K(),E();const{t:t}=N(),o=fe(),s=h(!1);he().setPageTitle(t("Donations")),G({title:`${t("Donors_for_donation")} - ${o.app.name}`});const i=f({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n={orderNumber:{format:(e,l,a)=>a+1},name:{label:t("Donor_fullname"),grow:!0},birth_date:{label:t("Date-of-birth")},visit_type:{label:t("Visit_type"),format:(e,l)=>{var a,o;return(null==(a=l.last_visit)?void 0:a.visit_type)&&t(null==(o=l.last_visit)?void 0:o.visit_type)}},visit_date:{label:t("Visit_date"),format:(e,l)=>{var a,t;return(null==(a=l.last_visit)?void 0:a.created_at)&&Z(new Date(null==(t=l.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:t("Donation_type"),format:(e,l)=>{var a,t;return null==(t=null==(a=l.last_visit)?void 0:a.donation_type)?void 0:t.name}},donation_code:{label:t("Donation_code"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.donation_code}},donor_category:{label:t("Donor_category"),format:(e,l)=>{var a;return null==(a=l.category)?void 0:a.name}}},d=f({donor_category_id:[],visit_type:[],donation_type_id:[],donation_code:[]}),r=f({visit_type_id:null,donation_type_id:null,donation_code:null,category_id:null}),u=h(null),c=h(!1),_=h([]);async function m(e){var l,a;try{s.value=!0,Object.assign(r,e);const l={...e,page:i.pagination.current_page},a=await me(l);Object.assign(i,a.result)}catch(t){Object.assign(d,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{s.value=!1}}function p(e){d[e]=""}async function v(){i.data=[]}return[l,a]=R((()=>m(r))),await l,a(),q((async function(){const e=await be();_.value=e.result})),y(c,(e=>{e||(u.value=null)})),y((()=>i.pagination.current_page),(async e=>{e&&await m(r)})),(e,l)=>{const a=ve,t=wt,r=se,f=ae,h=ie,b=te,y=ne,g=oe,x=bt;return V(),$("div",Lt,[D("div",Bt,[D("div",Ot,[B(a,{"with-icons":"",separator:"bullet",items:[{label:k(o).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Donations")},{label:e.$t("Donors_for_donation")}]},null,8,["items"])])]),D("div",Wt,[D("div",Mt,[B(t,{"is-loading":k(s),"donation-types":k(_),errors:k(d),onSearch:m,onClearForm:v,onClearError:p},null,8,["is-loading","donation-types","errors"])])]),D("div",Tt,[D("div",Yt,[B(g,{columns:k(n),data:k(i).data,limit:k(i).pagination.per_page,total:k(i).pagination.total},{default:O((()=>[B(b,{rounded:"","no-header":!k(s)&&0===k(i).data.length},{"header-column":O((({column:l})=>["orderNumber"===l.key?(V(),$("span",{key:0,textContent:L(e.$t("Donor_#"))},null,8,Ht)):A("",!0)])),body:O((()=>[k(s)?(V(),$("div",It,[(V(!0),$(W,null,M(k(i).pagination.per_page,(e=>(V(),$("div",{key:e,class:"flex-table-item"},[B(f,null,{default:O((()=>[B(r,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):A("",!0),0===k(i).data.length?(V(),$("div",Pt,[B(h,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:O((()=>[At,Et])),_:1},8,["title","subtitle"])])):A("",!0)])),"body-cell":O((({row:e,column:l})=>["name"===l.key?(V(),$("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){u.value=e,c.value=!0}(e)},L(e.first_name)+" "+L(e.last_name)+" "+L(e.father_name),9,Nt)):A("",!0)])),_:1},8,["no-header"]),k(i).data.length?(V(),T(y,{key:0,"current-page":k(i).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>k(i).pagination.current_page=e),class:"mt-5","item-per-page":k(i).pagination.per_page,"total-items":k(i).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):A("",!0)])),_:1},8,["columns","data","limit","total"])])]),B(x,{"is-open":k(c),"onUpdate:is-open":l[1]||(l[1]=e=>w(c)?c.value=e:null),patient:k(u),"donation-types":k(_)},null,8,["is-open","patient","donation-types"])])}}}),[["__scopeId","data-v-d8039abc"]]);export{Rt as default};
