import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-c5895131.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-98b95306.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import{_ as l}from"./VCheckbox.vue_vue_type_style_index_0_lang-b85a5492.js";import{_ as i}from"./VInput.vue_vue_type_script_setup_true_lang-6aad6843.js";import{_ as n}from"./VRadio.vue_vue_type_style_index_0_lang-24615d3d.js";import{_ as o,a as s}from"./VControl-90e6c9df.js";import{q as r,G as _,H as d,C as u,x as p,r as c,A as m,W as b,j as y,o as g,a as v,w as f,e as h,m as z,k as V,K as j,t as k,d as w,F as x,l as $,g as P,i as C,E as M,J as I,ag as D,y as Y,U,c as O,L as S,M as A}from"./index-202d6ef0.js";import{_ as E}from"./lodash-82655619.js";import{b as T,u as q,c as F,v as H,r as N}from"./index-6a7f1daa.js";import{a as B}from"./additional-b8f03a9c.js";import{_ as R}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-b5488b87.js";import{_ as G,a as W,b as J}from"./VFlexTable.vue_vue_type_style_index_0_lang-6eeebdac.js";import{_ as K,a as L}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as Z}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-b2a8f1fa.js";import{_ as Q}from"./VIcon.vue_vue_type_script_setup_true_lang-773aac4a.js";import{_ as X}from"./NoDataPlaceholder-50105cc5.js";import{_ as ee}from"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";import{_ as ae}from"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import{u as te}from"./main-1fdef032.js";import{u as le}from"./viewWrapper-93d6f948.js";import{_ as ie,a as ne,b as oe}from"./PatientPassportForm.vue_vue_type_script_setup_true_lang-6db0e360.js";import{p as se,h as re,u as _e}from"./patient-4b952528.js";import{m as de}from"./moment-2a9c6de7.js";import{_ as ue}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VDropdown.vue_vue_type_style_index_0_lang-2bccd22e.js";import"./VIMaskInput.vue_vue_type_script_lang-ed3b3d4f.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-e4eeb86d.js";import"./DatePicker.vue_vue_type_script_setup_true_lang-181de8a9.js";import"./ClientOnly.vue_vue_type_script_lang-3cf31693.js";const pe=["onSubmit"],ce={class:"help has-text-danger"},me=h("br",null,null,-1),be={class:"help has-text-danger"},ye={class:"help has-text-danger"},ge={class:"columns"},ve={class:"column is-6"},fe={class:"column is-6"},he={class:"columns"},ze={class:"column is-6"},Ve={class:"column is-6"},je=E.isEmpty,ke=r({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null,patientCategoryId:null},emits:["update:isOpen","update:list"],setup(e,{emit:r}){var M;const I=e,D=_(),Y=d(),{t:U}=u(),O=p(U("Add")),S=(null==(M=D.params)?void 0:M.id)||null,A=p(!1),E=c({patient_id:S,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),H=p([{value:"gratuitous",label:U("Gratuitous")},{value:"chargeable",label:U("Chargeable")}]),N=p([{value:"medical_organization",label:U("Healthcare_facilities")},{value:"public_organization",label:U("Public_organizations")},{value:"independently",label:U("Independently")}]),R=p([]),G=c({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function W(){var e,a;try{A.value=!0,I.cardId?await q(I.cardId,E):await F(E),r("update:list"),Y.success(U("Updated_successfully")),J()}catch(t){Object.assign(G,null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.errors),Y.error(t.message)}finally{A.value=!1}}function J(){O.value=U("Add"),Object.assign(E,{patient_id:S,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(G,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),r("update:isOpen",!1)}return m((async()=>{const e=await B();je(e.result)||(R.value=e.result)})),b((async()=>{if(Number(I.cardId)){O.value=U("Edit");const{result:e}=await T(Number(I.cardId),S);Object.assign(E,{patient_id:e.patient_id,visit_type:e.visit_type,directed_by:e.directed_by,medical_organization_id:e.medical_organization_id,public_organization:e.public_organization,is_personalized_donation:e.is_personalized_donation,is_mobile_team:e.is_mobile_team,personalized_donation:e.personalized_donation,mobile_team:e.mobile_team})}})),(r,_)=>{const d=y("Multiselect"),u=o,p=s,c=n,m=i,b=l,M=t,I=a;return g(),v(I,{open:e.isOpen,size:"large",title:j(O),actions:"right",onClose:J},{content:f((()=>[h("form",{id:"visitcard-form",class:"modal-form",onSubmit:z(W,["prevent"])},[V(p,{label:r.$t("Visit_type"),required:""},{default:f((()=>[V(u,null,{default:f((()=>[V(d,{modelValue:j(E).visit_type,"onUpdate:modelValue":_[0]||(_[0]=e=>j(E).visit_type=e),options:j(H),placeholder:r.$t("Visit_type"),label:"label","value-prop":"value",disabled:2===e.patientCategoryId},null,8,["modelValue","options","placeholder","disabled"]),h("p",ce,k(j(G).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),me,V(p,{label:r.$t("Directed_by"),required:""},{default:f((()=>[V(u,null,{default:f((()=>[(g(!0),w(x,null,$(j(N),((e,a)=>(g(),v(c,{key:a,modelValue:j(E).directed_by,"onUpdate:modelValue":_[1]||(_[1]=e=>j(E).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===j(E).directed_by?(g(),v(p,{key:0,label:r.$t("Healthcare_facilities_list"),required:""},{default:f((()=>[V(u,null,{default:f((()=>[V(d,{modelValue:j(E).medical_organization_id,"onUpdate:modelValue":_[2]||(_[2]=e=>j(E).medical_organization_id=e),options:j(R),placeholder:r.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),h("p",be,k(j(G).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):P("",!0),"public_organization"===j(E).directed_by?(g(),v(p,{key:1,label:r.$t("Public_organization_title"),required:""},{default:f((()=>[V(u,null,{default:f((()=>[V(m,{modelValue:j(E).public_organization,"onUpdate:modelValue":_[3]||(_[3]=e=>j(E).public_organization=e),placeholder:r.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),h("p",ye,k(j(G).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):P("",!0),h("div",ge,[h("div",ve,[V(p,null,{default:f((()=>[V(u,null,{default:f((()=>[V(b,{modelValue:j(E).is_personalized_donation,"onUpdate:modelValue":_[4]||(_[4]=e=>j(E).is_personalized_donation=e),label:r.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("div",fe,[V(p,null,{default:f((()=>[V(u,null,{default:f((()=>[j(E).is_personalized_donation?(g(),v(m,{key:0,modelValue:j(E).personalized_donation,"onUpdate:modelValue":_[5]||(_[5]=e=>j(E).personalized_donation=e)},null,8,["modelValue"])):P("",!0)])),_:1})])),_:1})])]),h("div",he,[h("div",ze,[V(p,null,{default:f((()=>[V(u,null,{default:f((()=>[V(b,{modelValue:j(E).is_mobile_team,"onUpdate:modelValue":_[6]||(_[6]=e=>j(E).is_mobile_team=e),label:r.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("div",Ve,[V(p,null,{default:f((()=>[V(u,null,{default:f((()=>[j(E).is_mobile_team?(g(),v(m,{key:0,modelValue:j(E).mobile_team,"onUpdate:modelValue":_[7]||(_[7]=e=>j(E).mobile_team=e)},null,8,["modelValue"])):P("",!0)])),_:1})])),_:1})])])],40,pe)])),action:f((({close:e})=>[V(M,{loading:j(A),form:"visitcard-form"},{default:f((()=>[C(k(r.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),we={class:"page-content-inner"},xe={class:"columns"},$e={class:"column is-12"},Pe={key:0,class:"is-flex-grow-0",textContent:"#"},Ce={key:0,class:"flex-list-inner"},Me={key:0,class:"dark-text"},Ie={key:1,class:"dark-text"},De=r({__name:"PatientVisitCardTable",props:{patientCategoryId:null},async setup(e){var a;let t,l;const i=_();M();const n=d(),{t:o}=u(),s=te();le().setPageTitle(o("Patient_cards_list")),I({title:`${o("Patient_cards")} - ${s.app.name}`});const r=c({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),m=p(null),b=(null==(a=i.params)?void 0:a.id)||null,y=p(!1),z={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:o("Visit_type")},directed_by:{label:o("Directed_by")},medical_organization:{label:o("Healthcare_facilities")},public_organization:{label:o("Public_organizations")},independently:{label:o("Independently"),align:"center"},personalized_donation:{label:o("Personalized_donation")},mobile_team:{label:o("Mobile_team")},status:{label:o("Status"),format:(e,a)=>{var t;return null==(t=a.visit_status)?void 0:t.name}},actions:{label:o("Actions"),align:"center"}},O=p(!1);async function S(e=1){try{O.value=!0;const a=await H(b,{page:e});Object.assign(r,a.result)}catch(a){n.error(o(a.message))}finally{O.value=!1}}function A(e){m.value=e,y.value=!0}async function E(){await N(b,m.value),S()}function T(){S(),m.value=null}return[t,l]=D((()=>S())),await t,l(),Y((()=>r.pagination.current_page),(async e=>{await S(e)})),(a,t)=>{const l=ae,i=ee,n=K,o=G,_=X,d=Q,u=Z,p=W,c=L,b=J,M=R,I=ke;return g(),w("div",we,[V(i,null,{default:f((()=>[V(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>A(null))},{default:f((()=>[C(k(a.$t("Add")),1)])),_:1})])),_:1}),h("div",xe,[h("div",$e,[V(b,{class:"mt-4",columns:j(z),data:j(r).data},{default:f((()=>[V(p,{rounded:"","no-header":!j(O)&&0===j(r).data.length},{"header-column":f((({column:e})=>["orderNumber"===e.key?(g(),w("span",Pe)):P("",!0)])),body:f((()=>[j(O)?(g(),w("div",Ce,[(g(!0),w(x,null,$(j(r).per_page,(e=>(g(),w("div",{key:e,class:"flex-table-item"},[V(o,null,{default:f((()=>[V(n,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===j(r).data.length?(g(),v(_,{key:1})):P("",!0)])),"body-cell":f((({row:e,column:t,value:l})=>["visit_type"===t.key?(g(),w("span",Me,k(a.$t(l)),1)):P("",!0),"directed_by"===t.key?(g(),w("span",Ie,k(a.$t(l)),1)):P("",!0),"independently"===t.key?(g(),w(x,{key:2},["independently"===e.directed_by?(g(),v(d,{key:0,class:"has-text-primary",icon:"feather:check"})):(g(),v(d,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):P("",!0),"actions"===t.key?(g(),v(u,{key:3,onEdit:a=>A(e.id),onRemove:a=>async function(e){m.value=e,s.$patch({confirmModalState:!0})}(e.id)},null,8,["onEdit","onRemove"])):P("",!0)])),_:1},8,["no-header"]),j(r).data.length?(g(),v(c,{key:0,"current-page":j(r).pagination.current_page,"onUpdate:current-page":t[1]||(t[1]=e=>j(r).pagination.current_page=e),class:"mt-5","item-per-page":j(r).pagination.per_page,"total-items":j(r).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):P("",!0)])),_:1},8,["columns","data"])])]),V(M,{onConfirmAction:E}),V(I,{"is-open":j(y),"onUpdate:is-open":t[2]||(t[2]=e=>U(y)?y.value=e:null),"card-id":j(m),"patient-category-id":e.patientCategoryId,"onUpdate:list":T,onClose:t[3]||(t[3]=e=>m.value=null)},null,8,["is-open","card-id","patient-category-id"])])}}}),Ye={class:"patient-detail-wrapper"},Ue=["onSubmit"],Oe={class:"columns mt-5"},Se={class:"column"},Ae={class:"title is-size-5"},Ee={class:"column"},Te={class:"title is-size-5"},qe=(e=>(S("data-v-ec7977f9"),e=e(),A(),e))((()=>h("br",null,null,-1))),Fe={class:"help has-text-danger"},He={class:"column"},Ne={class:"title is-size-5"},Be={class:"navigation-buttons"},Re={class:"buttons is-right"},Ge={key:1,class:"mt-5"},We=de.__esModule?de.default:de,Je=ue(r({__name:"[id]",async setup(a){var t;let l,i;const n=_();M();const r=d(),{t:b}=u(),v=c({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),x=c({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),$=p(!1),Y=(null==(t=n.params)?void 0:t.id)||null,U=p([{label:b("Patient_details"),value:"#details",icon:"feather:info",to:`${n.path}#details`},{label:b("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${n.path}#patient_visit_cards`}]),S=p([]),A=p(n.hash||"#details");function E(e){x[e]=[]}async function T(){var e,a;try{$.value=!0;await _e(Y,v);r.success(b("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(x,null==(a=t.response)?void 0:a.data.errors):r.error(b("Something_went_wrong"))}finally{$.value=!1}}return le().setPageTitle(b("Patient_info")),I({title:O((()=>b("Patient_info")))}),[l,i]=D((()=>async function(){try{const e=await re(Y);Object.assign(v,e.result),v.pinfl??(v.pinfl=""),v.phone_home??(v.phone_home=""),v.phone_number??(v.phone_number=""),v.phone_work??(v.phone_work=""),v.birth_date=v.birth_date?We(v.birth_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"",v.when_issued=v.when_issued?We(v.when_issued,"YYYY-MM-DD").format("YYYY-MM-DD"):""}catch(e){r.error(e.message)}}())),await l,i(),m((async()=>{const e=await se();S.value=e.result})),(a,t)=>{const l=ie,i=ne,n=y("Multiselect"),r=o,_=s,d=oe,u=ae,p=De,c=e;return g(),w("div",Ye,[V(c,{selected:j(A),tabs:j(U)},{tab:f((({activeValue:e})=>["#details"===e?(g(),w("form",{key:0,onSubmit:z(T,["prevent"])},[h("div",Oe,[h("div",Se,[h("p",Ae,k(a.$t("Passport_info")),1),V(l,{patient:j(v),errors:j(x),onEditing:E},null,8,["patient","errors"])]),h("div",Ee,[h("p",Te,k(a.$t("Personal_Info")),1),V(i,{patient:j(v),errors:j(x),onEditing:E},null,8,["patient","errors"]),qe,V(_,{label:a.$t("Category"),required:""},{default:f((()=>[V(r,null,{default:f((()=>[V(n,{modelValue:j(v).patient_category_id,"onUpdate:modelValue":t[0]||(t[0]=e=>j(v).patient_category_id=e),options:j(S),placeholder:a.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),h("p",Fe,k(j(x).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),h("div",He,[h("p",Ne,k(a.$t("Address")),1),V(d,{patient:j(v),errors:j(x),onEditing:E},null,8,["patient","errors"])])]),h("div",Be,[h("div",Re,[V(u,{type:"submit",color:"primary",bold:"",loading:j($),disabled:j($),tabindex:"0"},{default:f((()=>[C(k(a.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Ue)):"#patient_visit_cards"===e?(g(),w("div",Ge,[V(p,{"patient-category-id":j(v).patient_category_id},null,8,["patient-category-id"])])):P("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-ec7977f9"]]);export{Je as default};
