import{_ as a,a as e,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{_ as l,a as s,b as r,c as o,d as n}from"./search-7-dark-f0facebe.js";import{_ as i}from"./VCard.vue_vue_type_script_setup_true_lang-a9232da9.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as u,a as _}from"./VControl-fc151345.js";import{_ as p}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-5ce26ef4.js";import{a as m,r as c,ac as g,b as v,s as y,l as b,t as f,q as h,Q as j,X as V,p as x,u as $,V as k,v as D,c as S,m as w,y as F,M as C,W as E,i as U,$ as M,a0 as N}from"./chunk-BGPNDDXN-dcda8805.js";import{_ as P}from"./lodash-94527813.js";import{u as I}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as L}from"./useNotyf-1536ae84.js";import{p as B,f as O}from"./patient-7cc4d60d.js";import{_ as Y}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as A}from"./chunk-DRAQDPQ2-4514f14e.js";import{f as G}from"./@vueuse_core-098eb702.js";import{u as Q}from"./@vueuse_head-0d019878.js";import{u as T}from"./main-a3a6220c.js";import{u as q}from"./viewWrapper-c60f0ce7.js";import{_ as W}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import"./VPlaceload-2a65ae53.js";import"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import"./moment-e00bdeae.js";import"./userSession-0c0e9684.js";import"./pinia-3af6ce52.js";const X=["onSubmit"],H={class:"columns"},R={class:"column"},z={class:"help has-text-danger"},J={class:"column"},K={class:"help has-text-danger"},Z={class:"column"},aa={class:"help has-text-danger"},ea={class:"column"},ta={class:"help has-text-danger"},la={class:"navigation-buttons"},sa={class:"buttons is-right"},ra=P.isEmpty,oa=P.values,na=m({__name:"ScreeningPassedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=I(),r=L(),o=c({start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),n=([t,l]=g((()=>B().then((a=>a.result)))),t=await t,l(),t),m=v([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),S=async()=>{oa(o).every(ra)?r.error(s("Form_fields_are_empty")):e("search",o)},w=async()=>{Object.assign(o,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),e("clearForm")};return(e,t)=>{const l=p,s=u,r=_,c=y("Multiselect"),g=d,v=i;return b(),f(v,null,{default:h((()=>[j("form",{onSubmit:V(S,["prevent"])},[j("div",H,[j("div",R,[x(r,{label:e.$t("Start_date")},{default:h((()=>[x(s,null,{default:h((()=>[x(l,{modelValue:$(o).start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>$(o).start_date=a)},null,8,["modelValue"]),j("p",z,k(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",J,[x(r,{label:e.$t("End_date")},{default:h((()=>[x(s,null,{default:h((()=>[x(l,{modelValue:$(o).end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>$(o).end_date=a)},null,8,["modelValue"]),j("p",K,k(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",Z,[x(r,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:h((({id:l})=>[x(s,null,{default:h((()=>[x(c,{modelValue:$(o).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>$(o).donor_category_id=a),attrs:{id:l},options:$(n),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",aa,k(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",ea,[x(r,{class:"is-curved-select",label:e.$t("Visit_type")},{default:h((({id:l})=>[x(s,null,{default:h((()=>[x(c,{modelValue:$(o).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>$(o).visit_type_id=a),attrs:{id:l},options:$(m),placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),j("p",ta,k(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),j("div",la,[j("div",sa,[x(g,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:w},{default:h((()=>[D(k(e.$t("Clear")),1)])),_:1},8,["disabled"]),x(g,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:h((()=>[D(k(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,X)])),_:1})}}}),ia=a=>(M("data-v-26a30a6e"),a=a(),N(),a),da={class:"page-content-inner"},ua={class:"columns mb-3"},_a={class:"column"},pa={class:"columns mt-1"},ma={class:"column"},ca={class:"columns"},ga={class:"column is-12"},va=["textContent"],ya={key:0,class:"flex-list-inner"},ba={key:1,class:"flex-list-inner"},fa=ia((()=>j("img",{class:"light-image",src:o,alt:""},null,-1))),ha=ia((()=>j("img",{class:"dark-image",src:n,alt:""},null,-1))),ja={key:0},Va=P.isEmpty,xa=W(m({__name:"index",setup(o){A();const n=L(),{t:i}=I(),d=T(),u=v(!1);q().setPageTitle(i("Screening")),Q({title:`${i("Screening-passed-donors-list")} - ${d.app.name}`});const _=c({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=S({get:()=>_.pagination.current_page,set:async a=>{y.page=a,await V(y)}}),m={orderNumber:{format:(a,e,t)=>`${t+1}`},screening_date:{label:i("Screening_date")},name:{label:i("Donor_fullname")},birth_date:{label:i("Date-of-birth")},visit_date:{label:i("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&G(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:i("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&i(null==(l=e.last_visit)?void 0:l.visit_type)}},hemoglobin:{label:`${i("Hemoglobin")}, ${i("g/l")}`},preliminary_blood_type:{label:i("Preliminary_blood_type")},laboratory_assistant_fullname:{label:i("Laboratory_assistant_fullname")}};v();const g=c({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[]}),y=c({page:1});async function V(a){var e,t;try{Object.assign(y,a),u.value=!0;const e=await O(a);Object.assign(_,e.result),Va(e.result.data)?n.warning(i("Data_not_found")):n.success(`${i("Found")}: ${e.result.pagination.total} ${i("records")}`)}catch(l){Object.assign(g,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{u.value=!1}}function D(a){g[a]=""}async function M(){_.data=[]}return(o,n)=>{const i=Y,c=na,v=l,y=a,S=s,N=e,P=r,I=t;return b(),w("div",da,[j("div",ua,[j("div",_a,[x(i,{"with-icons":"",separator:"bullet",items:[{label:$(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:o.$t("Screening")},{label:o.$t("Screening-passed-donors-list")}]},null,8,["items"])])]),j("div",pa,[j("div",ma,[x(c,{"is-loading":$(u),errors:$(g),onSearch:V,onClearForm:M,onClearError:D},null,8,["is-loading","errors"])])]),j("div",ca,[j("div",ga,[x(I,{columns:$(m),data:$(_).data,limit:$(_).pagination.per_page,total:$(_).pagination.total},{default:h((()=>[x(N,{rounded:"","no-header":!$(u)&&0===$(_).data.length},{"header-column":h((({column:a})=>["orderNumber"===a.key?(b(),w("span",{key:0,textContent:k(o.$t("donor_no"))},null,8,va)):F("",!0)])),body:h((()=>[$(u)?(b(),w("div",ya,[(b(!0),w(C,null,E($(_).pagination.per_page,(a=>(b(),w("div",{key:a,class:"flex-table-item"},[x(y,null,{default:h((()=>[x(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):F("",!0),0===$(_).data.length?(b(),w("div",ba,[x(S,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:h((()=>[fa,ha])),_:1})])):F("",!0)])),"body-cell":h((({row:a,column:e})=>["name"===e.key?(b(),w("span",ja,k(a.first_name)+" "+k(a.last_name)+" "+k(a.father_name),1)):F("",!0)])),_:1},8,["no-header"]),$(_).data.length?(b(),f(P,{key:0,"current-page":$(p),"onUpdate:current-page":n[0]||(n[0]=a=>U(p)?p.value=a:null),class:"mt-5","item-per-page":$(_).pagination.per_page,"total-items":$(_).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):F("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-26a30a6e"]]);export{xa as default};
