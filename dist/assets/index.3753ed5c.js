import{_ as a}from"./AuthLayout.b890da80.js";import{q as e,C as s,x as l,D as o,E as n,G as t,H as r,I as i,r as d,J as u,j as c,o as p,a as m,w as h,e as g,k as v,s as _,m as b,K as f,f as y,t as k,i as w,_ as x,L as j,M as C,N as I}from"./index.64f80ae1.js";import{_ as $,a as L}from"./VControl.6c3280e9.js";import{_ as z}from"./VInput.vue_vue_type_script_setup_true_lang.cd1d6ea2.js";import{_ as A}from"./AnimatedLogo.ca3295ba.js";const D=a=>(j("data-v-f3ebe811"),a=a(),C(),a),S={class:"modern-login"},U=D((()=>g("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),q={class:"columns is-gapless is-vcentered"},E=D((()=>g("div",{class:"column is-relative is-8 h-hidden-mobile h-hidden-tablet-p"},[g("div",{class:"hero is-fullheight is-image",style:{background:"url('/images/clean-medical-background_53876-97927.webp')"}},[g("div",{class:"hero-body"},[g("div",{class:"container"},[g("div",{class:"columns"},[g("div",{class:"column"},[g("p",{class:"is-size-1 has-text-dark has-text-weight-medium"}," Автоматизированная информационная система по формированию и ведению базы данных по донорам и лицам, отведенным от донорства, и данных по учету и распределению донорской крови ")])])])])])],-1))),K={class:"column is-4 is-relative"},O=["checked"],P=D((()=>g("span",null,null,-1))),V={class:"is-form"},F={class:"hero-body"},G=["onSubmit"],H={class:"help has-text-danger"},J={class:"help has-text-danger"},M={class:"button-wrap has-help"},N=I(e({__name:"index",setup(e){const{t:j}=s(),C=l("login"),I=l(!1),D=o(),N=n(),R=t(),W=r(),{loginUser:B,isLoggedIn:Q}=i(),T=R.query.redirect,X=d({username:"",password:""});Q&&N.push({name:"/app/dashboard"});const Y=async a=>{var e,s,l,o,n,t,r;try{I.value=!0;const s=Object.fromEntries(new FormData(a.target));await B(s),W.dismissAll(),W.success(`${j("Welcome_back")}, ${null==(e=s.username)?void 0:e.toUpperCase()}`),T?N.push(T):N.push({name:"/app/dashboard"})}catch(i){Object.assign(X,null==(l=null==(s=i.response)?void 0:s.data)?void 0:l.errors),(null==(n=null==(o=i.response)?void 0:o.data)?void 0:n.errors.message)&&W.error(null==(r=null==(t=i.response)?void 0:t.data)?void 0:r.errors.message[0])}finally{I.value=!1}};function Z(a){X[a.target.name]=""}return u({title:j("auth_login")}),(e,s)=>{const l=A,o=c("RouterLink"),n=z,t=$,r=L,i=x,d=a;return p(),m(d,null,{default:h((()=>[g("div",S,[U,g("div",q,[E,g("div",K,[v(o,{to:"/",class:"top-logo"},{default:h((()=>[v(l,{size:75})])),_:1}),g("label",{class:"dark-mode ml-auto",tabindex:"0",onKeydown:s[1]||(s[1]=_(b((a=>a.target.click()),["prevent"]),["space"]))},[g("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!f(D).isDark,onChange:s[0]||(s[0]=(...a)=>f(D).onChange&&f(D).onChange(...a))},null,40,O),P],32),g("div",V,[g("div",F,[g("div",{class:y(["form-text",["login"!==C.value&&"is-hidden"]])},[g("h2",null,k(e.$t("Sign_In")),1),g("p",null,k(e.$t("Please_sign_in_to_your_account")),1)],2),g("form",{"data-cy":"login-form",class:y([["login"!==C.value&&"is-hidden"],"login-wrapper"]),onSubmit:b(Y,["prevent"])},[v(r,null,{default:h((()=>[v(t,{icon:"feather:user"},{default:h((()=>[v(n,{type:"text",name:"username",placeholder:e.$t("Username"),autocomplete:"username",onInput:Z},null,8,["placeholder"]),g("p",H,k(X.username[0]),1)])),_:1})])),_:1}),v(r,null,{default:h((()=>[v(t,{icon:"feather:lock"},{default:h((()=>[v(n,{type:"password",name:"password",placeholder:e.$t("Password"),autocomplete:"current-password",onInput:Z},null,8,["placeholder"]),g("p",J,k(X.password[0]),1)])),_:1})])),_:1}),g("div",M,[v(i,{id:"login-button",loading:I.value,disabled:I.value,color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:h((()=>[w(k(e.$t("Confirm")),1)])),_:1},8,["loading","disabled"])])],42,G)])])])])])])),_:1})}}}),[["__scopeId","data-v-f3ebe811"]]);export{N as default};
