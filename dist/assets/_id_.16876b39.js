import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang.2d048eb1.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang.31eed629.js";import{f as l,_ as t,a as i,b as s}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang.cbec3b4b.js";import{_ as n,a as o}from"./VControl.93d0bd46.js";import{q as r,G as d,H as _,C as u,x as c,r as p,A as m,W as b,j as v,o as y,a as g,w as f,e as h,m as z,k as V,t as k,d as w,F as j,l as x,g as $,i as P,E as C,J as I,c as U,a8 as M,y as O,K as S,S as E,L as q,M as A}from"./index.0abd75ed.js";import{u as T}from"./viewWrapper.04cc5e32.js";import{_ as D}from"./VModal.vue_vue_type_style_index_0_lang.086b7620.js";import{_ as F}from"./SubmitButton.vue_vue_type_script_setup_true_lang.26d507c1.js";import{_ as N}from"./VCheckbox.vue_vue_type_style_index_0_lang.3c3f831f.js";import{_ as H}from"./VInput.vue_vue_type_script_setup_true_lang.bea9a7b4.js";import{_ as B}from"./VRadio.vue_vue_type_style_index_0_lang.8389b9b7.js";import{_ as R}from"./lodash.55c10af6.js";import{l as G,m as W,n as J,v as K,r as L,g as Q,h as X,u as Y}from"./patient.051aee9f.js";import{_ as Z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.43769194.js";import{f as ee,g as ae,_ as le,a as te,b as ie,c as se,d as ne,e as oe}from"./search-7-dark.c0e73d3f.js";import{_ as re}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang.55f0a7d1.js";import{_ as de}from"./VIcon.vue_vue_type_script_setup_true_lang.5f560c87.js";import{_ as _e}from"./VProgress.vue_vue_type_style_index_0_lang.f7b30e9f.js";import{_ as ue}from"./VFlex.vue_vue_type_style_index_0_lang.872f6df6.js";import{u as ce}from"./main.e5d49235.js";import{_ as pe}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VPlaceload.5ce3c270.js";import"./VIMaskInput.vue_vue_type_script_lang.931d2ba1.js";import"./VTextarea.vue_vue_type_script_setup_true_lang.932906b5.js";import"./VDropdown.vue_vue_type_style_index_0_lang.a14f4c87.js";const me=["onSubmit"],be={class:"help has-text-danger"},ve=h("br",null,null,-1),ye={class:"help has-text-danger"},ge={class:"help has-text-danger"},fe={class:"columns"},he={class:"column is-6"},ze={class:"column is-6"},Ve={class:"columns"},ke={class:"column is-6"},we={class:"column is-6"},je=R.isEmpty,xe=r({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const i=e,s=d(),r=_(),{t:C}=u(),I=c(C("Add")),U=(null==(t=s.params)?void 0:t.id)||null,M=c(!1),O=p({patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),S=c([{value:"gratuitous",label:C("Gratuitous")},{value:"chargeable",label:C("Chargeable")}]),E=c([{value:"medical_organization",label:C("Healthcare_facilities")},{value:"public_organization",label:C("Public_organizations")},{value:"independently",label:C("Independently")}]),q=c([]),A=p({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function T(){var e,l;try{M.value=!0,i.cardId?await W(i.cardId,O):await J(O),a("update:list"),r.success(C("Updated_successfully")),R()}catch(t){Object.assign(A,null==(l=null==(e=t.response)?void 0:e.data)?void 0:l.errors),r.error(t.message)}finally{M.value=!1}}function R(){I.value=C("Add"),Object.assign(O,{patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(A,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return m((async()=>{const e=await l();je(e.result)||(q.value=e.result)})),b((async()=>{if(Number(i.cardId)){I.value=C("Edit");const e=await G(Number(i.cardId),U);Object.assign(O,e.result)}})),(a,l)=>{const t=v("Multiselect"),i=n,s=o,r=B,d=H,_=N,u=F,c=D;return y(),g(c,{open:e.isOpen,size:"large",title:I.value,actions:"right",onClose:R},{content:f((()=>[h("form",{id:"visitcard-form",class:"modal-form",onSubmit:z(T,["prevent"])},[V(s,{label:a.$t("Visit_type"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[V(t,{modelValue:O.visit_type,"onUpdate:modelValue":l[0]||(l[0]=e=>O.visit_type=e),options:S.value,placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),h("p",be,k(A.visit_type[0]),1)])),_:1})])),_:1},8,["label"]),ve,V(s,{label:a.$t("Directed_by"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[(y(!0),w(j,null,x(E.value,((e,a)=>(y(),g(r,{key:a,modelValue:O.directed_by,"onUpdate:modelValue":l[1]||(l[1]=e=>O.directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===O.directed_by?(y(),g(s,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[V(t,{modelValue:O.medical_organization_id,"onUpdate:modelValue":l[2]||(l[2]=e=>O.medical_organization_id=e),options:q.value,placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),h("p",ye,k(A.medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),"public_organization"===O.directed_by?(y(),g(s,{key:1,label:a.$t("Public_organization_title"),required:""},{default:f((()=>[V(i,null,{default:f((()=>[V(d,{modelValue:O.public_organization,"onUpdate:modelValue":l[3]||(l[3]=e=>O.public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),h("p",ge,k(A.public_organization[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),h("div",fe,[h("div",he,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[V(_,{modelValue:O.is_personalized_donation,"onUpdate:modelValue":l[4]||(l[4]=e=>O.is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("div",ze,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[O.is_personalized_donation?(y(),g(d,{key:0,modelValue:O.personalized_donation,"onUpdate:modelValue":l[5]||(l[5]=e=>O.personalized_donation=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])]),h("div",Ve,[h("div",ke,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[V(_,{modelValue:O.is_mobile_team,"onUpdate:modelValue":l[6]||(l[6]=e=>O.is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("div",we,[V(s,null,{default:f((()=>[V(i,null,{default:f((()=>[O.is_mobile_team?(y(),g(d,{key:0,modelValue:O.mobile_team,"onUpdate:modelValue":l[7]||(l[7]=e=>O.mobile_team=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])])],40,me)])),action:f((({close:e})=>[V(u,{loading:M.value,form:"visitcard-form"},{default:f((()=>[P(k(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),$e={class:"page-content-inner"},Pe={class:"columns"},Ce={class:"column is-12"},Ie={key:0,class:"is-flex-grow-0",textContent:"#"},Ue={key:0,class:"flex-list-inner"},Me={key:1,class:"flex-list-inner"},Oe=h("img",{class:"light-image",src:ee,alt:""},null,-1),Se=h("img",{class:"dark-image",src:ae,alt:""},null,-1),Ee={key:0,class:"dark-text"},qe={key:1,class:"dark-text"},Ae={key:3},Te={key:4},De=r({__name:"PatientVisitCardTable",async setup(e){var l;let t,i;const s=d();C();const n=_(),{t:o}=u(),r=ce();T().setPageTitle(o("Patient_cards_list")),I({title:`${o("Patient_cards")} - ${r.app.name}`});const m=p({current_page:1,per_page:10,total:10,data:[]}),b=c(null),v=(null==(l=s.params)?void 0:l.id)||null,z=c(!1),q=U({get:()=>m.current_page,set:async e=>{await N(e)}}),A={orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:o("Visit_type")},directed_by:{label:o("Directed_by")},medical_organization:{label:o("Healthcare_facilities")},public_organization:{label:o("Public_organizations")},independently:{label:o("Independently")},is_personalized_donation:{label:o("Personalized_donation")},is_mobile_team:{label:o("Mobile_team")},actions:{label:"",align:"end"}},D=c(!1),F=c();async function N(e=1){try{D.value=!0;const a=await K(v,{page:e,per_page:m.per_page});Object.assign(m,a.result)}catch(a){n.error(o(a.message))}finally{D.value=!1}}function H(e){b.value=e,z.value=!0}async function B(){await L(v,b.value),N()}function R(){N(),b.value=null}return[t,i]=M((()=>N())),await t,i(),O((()=>m.per_page),(async()=>{await N()})),(e,l)=>{const t=a,i=ue,s=le,n=te,o=ie,d=_e,_=de,u=re,c=se,p=ne,v=oe,C=Z,I=xe;return y(),w("div",$e,[V(i,null,{default:f((()=>[V(t,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:l[0]||(l[0]=e=>H(null))},{default:f((()=>[P(k(e.$t("Add")),1)])),_:1})])),_:1}),h("div",Pe,[h("div",Ce,[V(v,{class:"mt-4",columns:S(A),data:m.data,limit:m.per_page,total:m.total},{default:f((()=>[V(c,{rounded:"","no-header":!D.value&&0===m.data.length},{"header-column":f((({column:e})=>["orderNumber"===e.key?(y(),w("span",Ie)):$("",!0)])),body:f((()=>[D.value?(y(),w("div",Ue,[(y(!0),w(j,null,x(m.per_page,(e=>(y(),w("div",{key:e,class:"flex-table-item"},[V(n,null,{default:f((()=>[V(s,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===m.data.length?(y(),w("div",Me,[V(o,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:f((()=>[Oe,Se])),_:1})])):$("",!0)])),"body-row-pre":f((({row:e})=>[e.id===F.value?(y(),g(d,{key:0,size:"tiny",class:"m-0 mb-1"})):$("",!0)])),"body-cell":f((({row:a,column:l,value:t})=>["visit_type"===l.key?(y(),w("span",Ee,k(e.$t(t)),1)):$("",!0),"directed_by"===l.key?(y(),w("span",qe,k(e.$t(t)),1)):$("",!0),"independently"===l.key?(y(),w(j,{key:2},["independently"===a.directed_by?(y(),g(_,{key:0,class:"has-text-primary",icon:"feather:check"})):(y(),g(_,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):$("",!0),"is_personalized_donation"===l.key?(y(),w("span",Ae,k(a.personalized_donation),1)):$("",!0),"is_mobile_team"===l.key?(y(),w("span",Te,k(a.mobile_team),1)):$("",!0),"actions"===l.key?(y(),g(u,{key:5,onEdit:e=>H(a.id),onRemove:e=>async function(e){b.value=e,r.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),m.data.length?(y(),g(p,{key:0,"current-page":S(q),"onUpdate:current-page":l[1]||(l[1]=e=>E(q)?q.value=e:null),class:"mt-5","item-per-page":m.per_page,"total-items":m.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),V(C,{onConfirmAction:B}),V(I,{"is-open":z.value,"onUpdate:is-open":l[2]||(l[2]=e=>z.value=e),"card-id":b.value,"onUpdate:list":R,onClose:l[3]||(l[3]=e=>b.value=null)},null,8,["is-open","card-id"])])}}}),Fe={class:"patient-detail-wrapper"},Ne=["onSubmit"],He={class:"columns mt-5"},Be={class:"column"},Re={class:"is-size-5"},Ge=(e=>(q("data-v-9aa1f470"),e=e(),A(),e))((()=>h("br",null,null,-1))),We={class:"help has-text-danger"},Je={class:"column"},Ke={class:"is-size-5"},Le={class:"column"},Qe={class:"is-size-5"},Xe={class:"navigation-buttons"},Ye={class:"buttons is-right"},Ze={key:1,class:"mt-5"},ea=pe(r({__name:"[id]",async setup(l){var r;let b,g;const j=d();C();const x=_(),{t:O}=u(),S=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:null,passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),E=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),q=c(!1),A=(null==(r=j.params)?void 0:r.id)||null,D=c([{label:O("Patient_details"),value:"#details",icon:"feather:info",to:`${j.path}#details`},{label:O("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${j.path}#patient_visit_cards`}]),F=c([]),N=c(j.hash||"#details");function H(e){E[e]=""}async function B(){var e,a;try{q.value=!0;await Y(A,S);x.success(O("Updated_successfully"))}catch(l){(null==(e=l.response)?void 0:e.data.errors)?Object.assign(E,null==(a=l.response)?void 0:a.data.errors):x.error(O("Something_went_wrong"))}finally{q.value=!1}}return T().setPageTitle(O("Patient_info")),I({title:U((()=>O("Patient_info")))}),[b,g]=M((()=>async function(){try{const e=await X(A);Object.assign(S,e.result)}catch(e){x.error(e.message)}}())),await b,g(),m((async()=>{const e=await Q();F.value=e.result})),(l,r)=>{const d=t,_=v("Multiselect"),u=n,c=o,p=i,m=s,b=a,g=e;return y(),w("div",Fe,[V(g,{selected:N.value,tabs:D.value},{tab:f((({activeValue:e})=>["#details"===e?(y(),w("form",{key:0,onSubmit:z(B,["prevent"])},[h("div",He,[h("div",Be,[h("p",Re,k(l.$t("Personal_Info")),1),V(d,{patient:S,errors:E,onEditing:H},null,8,["patient","errors"]),Ge,V(c,{label:l.$t("Category"),required:""},{default:f((()=>[V(u,null,{default:f((()=>[V(_,{modelValue:S.patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>S.patient_category_id=e),options:F.value,placeholder:l.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),h("p",We,k(E.patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),h("div",Je,[h("p",Ke,k(l.$t("Passport_info")),1),V(p,{patient:S,errors:E,onEditing:H},null,8,["patient","errors"])]),h("div",Le,[h("p",Qe,k(l.$t("Address")),1),V(m,{patient:S,errors:E,onEditing:H},null,8,["patient","errors"])])]),h("div",Xe,[h("div",Ye,[V(b,{type:"submit",color:"primary",bold:"",loading:q.value,disabled:q.value,tabindex:"0"},{default:f((()=>[P(k(l.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Ne)):"#patient_visit_cards"===e?(y(),w("div",Ze,[V(De)])):$("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-9aa1f470"]]);export{ea as default};
