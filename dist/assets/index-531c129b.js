import{_ as a,a as e}from"./FilterForm.vue_vue_type_script_setup_true_lang-a8f421f8.js";import{_ as t,a as l,b as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-68179e43.js";import{_ as n,a as o,b as i,c as r,d as _}from"./search-7-dark-b6479367.js";import{_ as u}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-faf20e2b.js";import{q as d,H as p,C as m,x as c,r as v,o as f,a as g,w as y,e as b,t as h,k as x,i as V,K as j,a6 as k,L as w,M as z,E as D,J as Y,c as M,ag as $,d as C,g as O,F as U,l as B,S as F}from"./index-568ad137.js";import{_ as I}from"./lodash-c54dbb06.js";import{_ as T}from"./VModal.vue_vue_type_style_index_0_lang-1ec5e12b.js";import{_ as E}from"./SubmitButton.vue_vue_type_script_setup_true_lang-ca217c20.js";import{_ as N}from"./VButton.vue_vue_type_style_index_0_lang-fc4409cd.js";import{_ as S}from"./VCheckbox.vue_vue_type_style_index_0_lang-1a73654b.js";import{_ as q}from"./VFlex.vue_vue_type_style_index_0_lang-8f30b873.js";import{_ as H}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-38070980.js";import{_ as L}from"./VFlexItem.vue_vue_type_style_index_0_lang-ce376e13.js";import{b as P,_ as R,a as W}from"./VControl-b713a764.js";import{_ as A}from"./VInput.vue_vue_type_script_setup_true_lang-dccc8f42.js";import{m as J}from"./moment-78dc6435.js";import{_ as K}from"./_plugin-vue_export-helper-1b428a4d.js";import{u as X}from"./main-7fc6984e.js";import{u as Z}from"./viewWrapper-feca89b2.js";import{f as G}from"./patient-33059bc9.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-2a7f6a68.js";import"./VRadio.vue_vue_type_style_index_0_lang-96440a75.js";import"./VCard.vue_vue_type_script_setup_true_lang-3b674ece.js";import"./VPlaceload-33f57994.js";import"./VIMaskInput.vue_vue_type_script_lang-6492e1cb.js";const Q=a=>(w("data-v-aa72eb25"),a=a(),z(),a),aa={class:"columns"},ea={class:"column"},ta={class:"is-size-5 has-text-weight-medium"},la={class:"box"},sa={class:"has-text-weight-bold"},na=Q((()=>b("br",null,null,-1))),oa={class:"box"},ia={class:"columns is-multiline"},ra={class:"column is-narrow is-flex is-align-items-center"},_a={class:"column is-narrow is-flex is-align-items-center"},ua=Q((()=>b("br",null,null,-1))),da=Q((()=>b("p",{class:"has-text-danger"}," Красным цветом указаны показатели, заданные врачом-терапевтом, как обязательные для определения ",-1))),pa=J.__esModule?J.default:J,ma=K(d({__name:"FormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list","emergency-noticing"],setup(a,{emit:e}){p();const{t:t}=m(),l=c(t("Hemotransmission_research_results")),s=c(!1),n=v({leykotsity:"",trombotsity:""}),o=v({blood_samples_taken_date:[],analysis_date:[]});function i(){Object.assign(n,{blood_samples_taken_date:pa().format("YYYY-MM-DD"),analysis_date:pa().format("YYYY-MM-DD")}),Object.assign(o,{blood_samples_taken_date:[],analysis_date:[]}),e("update:isOpen",!1)}function r(){e("emergency-noticing"),i()}return(e,t)=>{const o=P,_=A,u=R,d=W,p=L,m=H,c=q,v=S,w=N,z=E,D=T;return f(),g(D,{open:a.isOpen,size:"big",title:l.value,actions:"right",onClose:i},{content:y((()=>{var l;return[b("div",aa,[b("div",ea,[b("h5",ta,h(e.$t("Donor_code"))+": "+h(null==(l=a.patient.last_visit)?void 0:l.donation_code),1)])]),b("div",la,[x(c,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:y((()=>[x(p,{"flex-basis":"45%"},{default:y((()=>[x(d,{horizontal:""},{default:y((()=>[x(o,{class:"my-auto mr-3 is-size-6"},{default:y((()=>[V(h(e.$t("Blood_sampling_date")),1)])),_:1}),x(u,null,{default:y((()=>{var e;return[x(_,{value:j(k)(new Date(null==(e=a.patient.last_visit)?void 0:e.updated_at),"YYYY-MM-DD"),disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),x(p,{"flex-basis":"45%"},{default:y((()=>[x(d,{horizontal:""},{default:y((()=>[x(o,{class:"my-auto mr-3 is-size-6"},{default:y((()=>[V(h(e.$t("Blood_samples_taken_date")),1)])),_:1}),x(u,null,{default:y((()=>[x(m,{modelValue:n.blood_samples_taken_date,"onUpdate:modelValue":t[0]||(t[0]=a=>n.blood_samples_taken_date=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(p,{"flex-basis":"45%"},{default:y((()=>[x(d,{horizontal:""},{default:y((()=>[x(o,{class:"my-auto mr-3 is-size-6"},{default:y((()=>[V(h(e.$t("Analysis_date")),1)])),_:1}),x(u,null,{default:y((()=>[x(m,{modelValue:n.analysis_date,"onUpdate:modelValue":t[1]||(t[1]=a=>n.analysis_date=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(p,{"flex-basis":"45%"},{default:y((()=>{var t;return[b("h5",null,[b("span",sa,h(e.$t("Visit_stage")),1),b("span",null,h(null==(t=a.patient.last_visit)?void 0:t.stage),1)])]})),_:1})])),_:1})]),na,b("div",oa,[b("div",ia,[b("div",ra,[x(d,{horizontal:"",class:""},{default:y((()=>[x(u,null,{default:y((()=>[x(v,{modelValue:n.reaction_hendelson_brutsellez,"onUpdate:modelValue":t[2]||(t[2]=a=>n.reaction_hendelson_brutsellez=a),color:"primary",label:"Реакция Хендельсона (бруцеллез)"},null,8,["modelValue"])])),_:1})])),_:1}),x(d,{horizontal:"",class:""},{default:y((()=>[x(u,null,{default:y((()=>[x(v,{modelValue:n.hilez,"onUpdate:modelValue":t[3]||(t[3]=a=>n.hilez=a),color:"primary",label:"Хилез"},null,8,["modelValue"])])),_:1})])),_:1}),x(d,{horizontal:"",class:""},{default:y((()=>[x(u,null,{default:y((()=>[x(v,{modelValue:n.gemoliz,"onUpdate:modelValue":t[4]||(t[4]=a=>n.gemoliz=a),color:"primary",label:"Гемолиз"},null,8,["modelValue"])])),_:1})])),_:1})]),b("div",_a,[x(d,{horizontal:"",class:"is-justify-content-end"},{default:y((()=>[x(o,{class:"is-size-6 my-auto mr-3 has-text-right"},{default:y((()=>[V(" Титр антистафилококковый антител ")])),_:1}),x(u,null,{default:y((()=>[x(_,{modelValue:n.anti_staphylococcal_antibody_titer,"onUpdate:modelValue":t[5]||(t[5]=a=>n.anti_staphylococcal_antibody_titer=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),ua,da])]})),action:y((()=>[x(w,{type:"button",color:"warning",outlined:"",onClick:r},{default:y((()=>[V(" Экстренное извещение ")])),_:1}),x(z,{loading:s.value,form:"blood-sampling-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-aa72eb25"]]),ca=a=>(w("data-v-4ffcf6b9"),a=a(),z(),a),va={class:"page-content-inner"},fa={class:"columns mb-3"},ga={class:"column"},ya={class:"columns mt-1"},ba={class:"column"},ha={class:"columns"},xa={class:"column is-12"},Va={key:0,class:"is-flex-grow-0",textContent:"#"},ja={key:0,class:"flex-list-inner"},ka={key:1,class:"flex-list-inner"},wa=ca((()=>b("img",{class:"light-image",src:r,alt:""},null,-1))),za=ca((()=>b("img",{class:"dark-image",src:_,alt:""},null,-1))),Da=["onClick"],Ya=I.isEmpty,Ma=K(d({__name:"index",async setup(r){let _,d;D();const V=p(),{t:w}=m(),z=X(),I=c(!1);Z().setPageTitle(w("Buck-laboratory")),Y({title:`${w("Donor_list_for_blood_sampling")} - ${z.app.name}`});const T=v({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),E=M({get:()=>T.pagination.current_page,set:async a=>{q.page=a,await R(q)}}),N={orderNumber:{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:w("Donation_code")},blood_sampling_date:{label:w("Blood_sampling_date")},name:{label:w("Donor_fullname")},birth_date:{label:w("Date-of-birth")},visit_type:{label:w("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&w(null==(l=e.last_visit)?void 0:l.visit_type)}},visit_date:{label:w("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&k(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},donation_type:{label:w("Donation_type"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},visit_stage:{label:w("Visit_stage"),format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.stage)?void 0:l.name}}};c();const S=v({visit_type_id:[],donation_type_id:[],donation_code:[]}),q=v({page:1}),H=v({}),L=c(!1),P=c(!1);async function R(a){var e,t;try{Object.assign(q,a),I.value=!0;const e=await G(a);Object.assign(T,e.result),Ya(e.result.data)?V.warning(w("Data_not_found")):V.success(`${w("Found")}: ${e.result.pagination.total} ${w("records")}`)}catch(l){Object.assign(S,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{I.value=!1}}function W(a){S[a]=""}async function A(){T.data=[]}return[_,d]=$((()=>R(q))),await _,d(),(r,_)=>{const d=u,p=n,m=t,c=o,v=l,V=i,k=s,w=e;return f(),C("div",va,[b("div",fa,[b("div",ga,[x(d,{"with-icons":"",separator:"bullet",items:[{label:j(z).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:r.$t("Buck-laboratory")},{label:r.$t("Research-aimed-donations-list")}]},null,8,["items"])])]),b("div",ya,[b("div",ba,[x(a,{"is-loading":j(I),errors:j(S),onSearch:R,onClearForm:A,onClearError:W},null,8,["is-loading","errors"])])]),b("div",ha,[b("div",xa,[x(k,{columns:j(N),data:j(T).data,limit:j(T).pagination.per_page,total:j(T).pagination.total},{default:y((()=>[x(v,{rounded:"","no-header":!j(I)&&0===j(T).data.length},{"header-column":y((({column:a})=>["orderNumber"===a.key?(f(),C("span",Va)):O("",!0)])),body:y((()=>[j(I)?(f(),C("div",ja,[(f(!0),C(U,null,B(j(T).pagination.per_page,(a=>(f(),C("div",{key:a,class:"flex-table-item"},[x(m,null,{default:y((()=>[x(p,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):O("",!0),0===j(T).data.length?(f(),C("div",ka,[x(c,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:y((()=>[wa,za])),_:1})])):O("",!0)])),"body-cell":y((({row:a,column:e})=>["name"===e.key?(f(),C("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:e=>{return t=a,Object.assign(H,t),void(L.value=!0);var t}},h(a.first_name)+" "+h(a.last_name)+" "+h(a.father_name)+" ",9,Da)):O("",!0)])),_:1},8,["no-header"]),j(T).data.length?(f(),g(V,{key:0,"current-page":j(E),"onUpdate:current-page":_[0]||(_[0]=a=>F(E)?E.value=a:null),class:"mt-5","item-per-page":j(T).pagination.per_page,"total-items":j(T).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):O("",!0)])),_:1},8,["columns","data","limit","total"])])]),x(ma,{"is-open":j(L),"onUpdate:is-open":_[1]||(_[1]=a=>F(L)?L.value=a:null),patient:j(H),onEmergencyNoticing:_[2]||(_[2]=a=>P.value=!j(P))},null,8,["is-open","patient"]),x(w,{"is-open":j(P),"onUpdate:is-open":_[3]||(_[3]=a=>F(P)?P.value=a:null),patient:j(H)},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-4ffcf6b9"]]);export{Ma as default};
