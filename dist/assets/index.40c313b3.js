import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.43769194.js";import{f as a,g as t,_ as l,a as s,b as n,c as o,d as r,e as i}from"./search-7-dark.c0e73d3f.js";import{_ as u}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang.55f0a7d1.js";import{_ as d}from"./VAvatar.vue_vue_type_style_index_0_lang.38e624bd.js";import{_ as p}from"./VProgress.vue_vue_type_style_index_0_lang.f7b30e9f.js";import{_ as m}from"./VPlaceload.5ce3c270.js";import{q as c,o as _,d as g,f as y,ad as v,E as f,H as b,C as h,J as w,r as x,x as j,c as k,y as V,k as $,K as E,e as z,w as C,S as U,g as A,F as B,l as D,a as F,t as P}from"./index.0abd75ed.js";import{_ as T,a as L,b as M}from"./SearchInput.09a3194f.js";import{_ as N}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.f307b05f.js";import{u as R}from"./main.e5d49235.js";import{u as S}from"./viewWrapper.04cc5e32.js";import"./VModal.vue_vue_type_style_index_0_lang.086b7620.js";import"./VButton.vue_vue_type_style_index_0_lang.31eed629.js";import"./VFlex.vue_vue_type_style_index_0_lang.872f6df6.js";import"./VDropdown.vue_vue_type_style_index_0_lang.a14f4c87.js";import"./VIcon.vue_vue_type_script_setup_true_lang.5f560c87.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VControl.93d0bd46.js";const q=c({__name:"VPlaceloadAvatar",props:{size:{default:void 0},rounded:{default:"full"},centered:{type:Boolean},disabled:{type:Boolean}},setup(e){const a=e;return(e,t)=>(_(),g("div",{class:y(["placeload-avatar",[!a.disabled&&"loads",a.size&&`is-${a.size}`,a.centered&&"is-centered",a.rounded&&`is-rounded-${a.rounded}`]])},null,2))}}),I=v();const H={class:"page-content-inner"},J={class:"columns"},K={class:"column is-12"},O={key:0,class:"is-flex-grow-0",textContent:"#"},W={key:0,class:"flex-list-inner"},G={key:1,class:"flex-list-inner"},Q=z("img",{class:"light-image",src:a,alt:""},null,-1),X=z("img",{class:"dark-image",src:t,alt:""},null,-1),Y={class:"dark-text"},Z={key:1},ee={class:"dark-text"},ae=c({__name:"index",setup(a){const t=f(),c=b(),{t:y}=h(),v=R();S().setPageTitle(y("Users_List")),w({title:`${y("Users")} - ${v.app.name}`});const ae=x({pagination:{current_page:1,per_page:10,total:10,total_pages:1},result:[]}),te=j(),le=k({get:()=>ae.pagination.current_page,set:async e=>{await ie(e)}}),se={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:"Fullname",media:!0,grow:!0,sortable:!0},email:{label:"Email",sortable:!0},role:{label:"Role",sortable:!0},department:{label:"Department",grow:!0,sortable:!0},actions:{label:"",align:"end"}},ne=j(!1),oe=k({get:()=>"",async set(e){console.log(e)}}),re=j();async function ie(e=1){var a,t,l;try{ne.value=!0;const a=await async function(e){try{const{data:a}=await I({url:"/api/admin/employee",params:e});return a.data}catch(a){throw a}}({page:e,per_page:ae.pagination.per_page});Object.assign(ae,a)}catch(s){c.error(y(null==(l=null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.error)?void 0:l.message))}finally{ne.value=!1}}async function ue(){await async function(e){try{const{data:a}=await I({url:`/api/admin/employee/${e}`,method:"DELETE"})}catch(a){throw a}}(te.value),ie()}return V((()=>ae.pagination.per_page),(async()=>{await ie()})),(a,c)=>{const y=N,f=T,b=L,h=M,w=q,x=l,j=s,k=m,V=n,R=p,S=d,I=u,ie=o,de=r,pe=i,me=e;return _(),g("div",H,[$(y,{"with-icons":"",separator:"bullet",items:[{label:E(v).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Users"),to:{name:"/app/users/"}}]},null,8,["items"]),z("div",J,[z("div",K,[$(pe,{class:"mt-4",columns:E(se),data:ae.result,limit:ae.pagination.per_page,total:ae.pagination.total},{default:C((e=>[$(h,null,{left:C((()=>[$(f,{modelValue:E(oe),"onUpdate:modelValue":c[0]||(c[0]=e=>U(oe)?oe.value=e:null)},null,8,["modelValue"])])),right:C((()=>[$(b,{modelValue:ae.pagination.per_page,"onUpdate:modelValue":c[1]||(c[1]=e=>ae.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),$(ie,{rounded:"","no-header":!ne.value&&0===ae.result.length},{"header-column":C((({column:e})=>["orderNumber"===e.key?(_(),g("span",O)):A("",!0)])),body:C((()=>[ne.value?(_(),g("div",W,[(_(!0),g(B,null,D(ae.pagination.per_page,(e=>(_(),g("div",{key:e,class:"flex-table-item"},[$(j,{column:{grow:!0,media:!0}},{default:C((()=>[$(w,{size:"medium"}),$(x,{lines:2,width:"60%","last-line-width":"20%",class:"mx-2"})])),_:1}),$(j,null,{default:C((()=>[$(k,{width:"60%",class:"mx-1"})])),_:1}),$(j,null,{default:C((()=>[$(k,{width:"60%",class:"mx-1"})])),_:1}),$(j,{column:{align:"end"}},{default:C((()=>[$(k,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===ae.result.length?(_(),g("div",G,[$(V,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:C((()=>[Q,X])),_:1})])):A("",!0)])),"body-row-pre":C((({row:e})=>[e.id===re.value?(_(),F(R,{key:0,size:"tiny",class:"m-0 mb-1"})):A("",!0)])),"body-cell":C((({row:e,column:a})=>["name"===a.key?(_(),g(B,{key:0},[$(S,{size:"medium",picture:e.avatar},null,8,["picture"]),z("div",null,[z("span",Y,P(e.firstname)+" "+P(e.lastname),1)])],64)):A("",!0),"role"===a.key?(_(),g("div",Z,[z("span",ee,P(e.role.name),1)])):A("",!0),"actions"===a.key?(_(),F(I,{key:2,onEdit:a=>{return l=e.id,te.value=l,void t.push(`/app/users/${l}`);var l},onRemove:a=>async function(e){te.value=e,v.$patch({confirmModalState:!0})}(e.id)},null,8,["onEdit","onRemove"])):A("",!0)])),_:1},8,["no-header"]),ae.result.length?(_(),F(de,{key:0,"current-page":E(le),"onUpdate:current-page":c[2]||(c[2]=e=>U(le)?le.value=e:null),class:"mt-5","item-per-page":ae.pagination.per_page,"total-items":ae.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):A("",!0)])),_:1},8,["columns","data","limit","total"])])]),$(me,{onConfirmAction:ue})])}}});export{ae as default};
