import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-f3f542ff.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import{_ as l}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as t}from"./VTabs.vue_vue_type_script_setup_true_lang-b35d55fc.js";import{_ as s}from"./VTextarea.vue_vue_type_script_setup_true_lang-a017671a.js";import{_ as n,a as o}from"./VControl-fc151345.js";import{_ as i}from"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import{a as r,b as u,r as d,w as p,l as m,t as c,q as _,Q as v,X as f,p as g,m as h,u as y,V as b,y as V,v as j,s as w,c as x,ac as z,i as k,M as $,W as C}from"./chunk-BGPNDDXN-dcda8805.js";import{u as U}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as N}from"./useNotyf-1536ae84.js";import{f as R,u as A,c as D,a as I,s as E,r as O}from"./index-2ac90bcb.js";import{_ as T,a as S,b as M}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{c as P,d as q,_ as B,a as F,b as L}from"./search-7-dark-f0facebe.js";import{_ as Q}from"./VDropdown.vue_vue_type_style_index_0_lang-a9625316.js";import{_ as G}from"./VPlaceload-2a65ae53.js";import{_ as W,a as X,b as H}from"./SearchInput-6fe72f31.js";import{_ as J}from"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import{_ as K}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as Y}from"./chunk-DRAQDPQ2-4514f14e.js";import{u as Z}from"./@vueuse_head-0d019878.js";import{u as ee}from"./viewWrapper-c60f0ce7.js";import{u as ae}from"./main-a3a6220c.js";import"./VIcon.vue_vue_type_script_setup_true_lang-287aecd9.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./userSession-0c0e9684.js";import"./pinia-3af6ce52.js";import"./@vueuse_core-098eb702.js";const le=["onSubmit"],te={key:0,class:"columns is-multiline pt-5"},se={class:"column is-12"},ne={class:"help has-text-danger"},oe={class:"help has-text-danger"},ie={key:1,class:"columns is-multiline pt-5"},re={class:"column is-12"},ue={key:2,class:"columns is-multiline pt-5"},de={class:"column is-12"},pe=r({__name:"RoleFormModal",props:{modelValue:{type:Boolean,default:!1},roleId:{default:null}},emits:["update:modelValue","update:list"],setup(e,{emit:r}){const w=e,x=N(),{t:z}=U(),k=u(z("Add")),$=u(!1),C=d({uz:"",ru:"",en:""}),I=d({uz:"",ru:"",en:""}),E=d({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});async function O(){var e,a,l,t;try{$.value=!0,w.roleId?await A(w.roleId,{name:C,description:I}):await D({name:C,description:I}),r("update:list"),T()}catch(s){(null==(e=s.response)?void 0:e.data.error)?x.error(null==(a=s.response)?void 0:a.data.error):Object.assign(E,null==(t=null==(l=s.response)?void 0:l.data)?void 0:t.errors)}finally{$.value=!1}}function T(){k.value=z("Add"),Object.assign(C,{uz:"",ru:"",en:""}),Object.assign(I,{uz:"",ru:"",en:""}),Object.assign(E,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]}),r("update:modelValue",!1)}return p((()=>w.roleId),(async e=>{if(e){console.log(e),k.value=z("Edit");const a=await R(Number(w.roleId));Object.assign(C,a.name),Object.assign(I,a.description)}}),{deep:!0}),(r,u)=>{const d=i,p=n,w=o,x=s,U=t,N=l,R=a;return m(),c(R,{open:e.modelValue,size:"large",title:k.value,actions:"right",onClose:T},{content:_((()=>[v("form",{id:"role-form",class:"modal-form",onSubmit:f(O,["prevent"])},[g(U,{type:"boxed",selected:"uz",tabs:[{label:r.$t("Uzbek"),value:"uz"},{label:r.$t("Russian"),value:"ru"},{label:r.$t("English"),value:"en"}]},{tab:_((({activeValue:e})=>["uz"===e?(m(),h("div",te,[v("div",se,[g(w,{label:r.$t("Name_uz"),required:""},{default:_((()=>[g(p,null,{default:_((()=>[g(d,{modelValue:C.uz,"onUpdate:modelValue":u[0]||(u[0]=e=>C.uz=e),name:"name_uz",type:"text",placeholder:y(z)("Type_name_uz")},null,8,["modelValue","placeholder"]),v("p",ne,b(E["name.uz"][0]),1)])),_:1})])),_:1},8,["label"]),g(w,{label:r.$t("Description_uz"),required:""},{default:_((()=>[g(p,null,{default:_((()=>[g(x,{modelValue:I.uz,"onUpdate:modelValue":u[1]||(u[1]=e=>I.uz=e),name:"description_uz",placeholder:y(z)("Add_description_uz")},null,8,["modelValue","placeholder"]),v("p",oe,b(E["description.uz"][0]),1)])),_:1})])),_:1},8,["label"])])])):"ru"===e?(m(),h("div",ie,[v("div",re,[g(w,{label:r.$t("Name_ru")},{default:_((()=>[g(p,null,{default:_((()=>[g(d,{modelValue:C.ru,"onUpdate:modelValue":u[2]||(u[2]=e=>C.ru=e),name:"name_ru",type:"text",placeholder:y(z)("Type_name_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),g(w,{label:r.$t("Description_ru")},{default:_((()=>[g(p,null,{default:_((()=>[g(x,{modelValue:I.ru,"onUpdate:modelValue":u[3]||(u[3]=e=>I.ru=e),name:"description_ru",placeholder:y(z)("Add_description_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):"en"===e?(m(),h("div",ue,[v("div",de,[g(w,{label:r.$t("Name_en")},{default:_((()=>[g(p,null,{default:_((()=>[g(d,{modelValue:C.en,"onUpdate:modelValue":u[4]||(u[4]=e=>C.en=e),name:"name_en",type:"text",placeholder:y(z)("Type_name_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),g(w,{label:r.$t("Description_en")},{default:_((()=>[g(p,null,{default:_((()=>[g(x,{modelValue:I.en,"onUpdate:modelValue":u[5]||(u[5]=e=>I.en=e),name:"description_en",placeholder:y(z)("Add_description_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):V("",!0)])),_:1},8,["tabs"])],40,le)])),action:_((({close:e})=>[g(N,{loading:$.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:$.value},{default:_((()=>[j(b(r.$t("Save")),1)])),_:1},8,["loading","disabled"])])),_:1},8,["open","title"])}}}),me=["onClick"],ce={class:"icon"},_e={class:"meta"},ve=["onClick"],fe={class:"icon"},ge={class:"meta"},he=v("hr",{class:"dropdown-divider"},null,-1),ye=["onClick"],be={class:"icon"},Ve={class:"meta"},je=r({__name:"RoleDropdown",emits:["edit","remove","permissions"],setup:(e,{emit:a})=>(e,l)=>{const t=w("VueIconify"),s=Q;return m(),c(s,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:_((({close:l})=>[v("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:f((()=>{a("edit"),l()}),["prevent"])},[v("div",ce,[g(t,{icon:"feather:edit-2"})]),v("div",_e,[v("span",null,b(e.$t("Edit")),1)])],8,me),v("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:f((()=>{a("permissions"),l()}),["prevent"])},[v("div",fe,[g(t,{icon:"feather:shield"})]),v("div",ge,[v("span",null,b(e.$t("Role_permissions")),1)])],8,ve),he,v("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:f((()=>{a("remove"),l()}),["prevent"])},[v("div",be,[g(t,{icon:"feather:trash"})]),v("div",Ve,[v("span",null,b(e.$t("Remove")),1)])],8,ye)])),_:1})}}),we={class:"applicant-list-wrapper"},xe={class:"columns"},ze={class:"column is-12"},ke={key:0,class:"is-flex-grow-0",textContent:"#"},$e={key:0,class:"flex-list-inner"},Ce={key:1,class:"flex-list-inner"},Ue=v("img",{class:"light-image",src:P,alt:""},null,-1),Ne=v("img",{class:"dark-image",src:q,alt:""},null,-1),Re=r({__name:"index",async setup(a){let t,s;const n=N(),o=Y(),{t:i}=U(),r=ae(),w=d({pagination:{current_page:1,per_page:10,total:10},result:[]}),R=u(!1),A=u(null),D=x({get:()=>"",async set(e){await async function(e){const a=await E(e);Object.assign(w,a)}(e)}}),P=x((()=>({orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},name:{label:i("Name"),searchable:!0},description:{label:i("Description")},actions:{label:i("Actions"),align:"center"}}))),q=u(!1);u();const Q=ee(),le=x({get:()=>w.pagination.current_page,set:async e=>{await ne(e)}});function te(e=null){console.log({rowId:e}),R.value=!0,A.value=e}async function se(){await O(A.value),await ne(),oe()}async function ne(e=1){var a;try{q.value=!0;const a=await I({page:e,per_page:w.pagination.per_page});Object.assign(w,a)}catch(l){n.error(i(null==(a=l.response)?void 0:a.data.error.message))}finally{q.value=!1}}function oe(){n.success(i("Success"))}return Q.setPageTitle(i("Roles_List")),Z({title:i("Roles")}),[t,s]=z((()=>ne())),await t,s(),p((()=>w.pagination.per_page),(async()=>{await ne()})),(a,t)=>{const s=K,n=l,i=J,u=W,d=X,p=H,x=B,z=T,U=G,N=F,I=je,E=S,O=L,Q=M,Y=pe,Z=e;return m(),h("div",we,[g(i,{"justify-content":"space-between"},{default:_((()=>[g(s,{"with-icons":"",separator:"bullet",items:[{label:"Vuero",hideLabel:!0,icon:"feather:home",to:{name:"/app"}},{label:a.$t("Roles"),to:{name:"/app/roles/"}}]},null,8,["items"]),g(n,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:t[0]||(t[0]=f((e=>te(null)),["prevent"]))},{default:_((()=>[j(b(a.$t("Add")),1)])),_:1})])),_:1}),v("div",xe,[v("div",ze,[g(Q,{class:"mt-4",columns:y(P),data:w.result,limit:w.pagination.per_page,total:w.pagination.total},{default:_((e=>[g(p,null,{left:_((()=>[g(u,{modelValue:y(D),"onUpdate:modelValue":t[1]||(t[1]=e=>k(D)?D.value=e:null)},null,8,["modelValue"])])),right:_((()=>[g(d,{modelValue:w.pagination.per_page,"onUpdate:modelValue":t[2]||(t[2]=e=>w.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),g(E,{rounded:"","no-header":!q.value&&0===w.result.length},{"header-column":_((({column:e})=>["orderNumber"===e.key?(m(),h("span",ke)):V("",!0)])),body:_((()=>[q.value?(m(),h("div",$e,[(m(!0),h($,null,C(w.pagination.per_page,(e=>(m(),h("div",{key:e,class:"flex-table-item"},[g(z,null,{default:_((()=>[g(x,{lines:2,width:"40%","last-line-width":"20%",class:"mx-2"})])),_:1}),g(z,null,{default:_((()=>[g(U,{class:"mx-1"})])),_:1}),g(z,{column:{align:"center"}},{default:_((()=>[g(U,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===w.result.length?(m(),h("div",Ce,[g(N,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:_((()=>[Ue,Ne])),_:1},8,["title","subtitle"])])):V("",!0)])),"body-cell":_((({row:e,column:a})=>["actions"===a.key?(m(),c(I,{key:0,onEdit:a=>te(e.id),onRemove:a=>async function(e){A.value=e,r.$patch({confirmModalState:!0})}(e.id),onPermissions:a=>{return l=e.id,void o.push(`/app/roles/${l}/permissions`);var l}},null,8,["onEdit","onRemove","onPermissions"])):V("",!0)])),_:1},8,["no-header"]),g(O,{"current-page":y(le),"onUpdate:current-page":t[3]||(t[3]=e=>k(le)?le.value=e:null),class:"mt-5","item-per-page":w.pagination.per_page,"total-items":w.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])])),_:1},8,["columns","data","limit","total"])])]),g(Y,{modelValue:R.value,"onUpdate:modelValue":t[4]||(t[4]=e=>R.value=e),"role-id":A.value,"onUpdate:list":t[5]||(t[5]=()=>{ne(),oe(),A.value=null}),onClose:t[6]||(t[6]=e=>A.value=null)},null,8,["modelValue","role-id"]),g(Z,{onConfirmAction:se})])}}});export{Re as default};
