import{f as a,s as e,a as l,_ as t,b as s}from"./FilterForm.vue_vue_type_script_setup_true_lang-85be8721.js";import{_ as i}from"./VModal.vue_vue_type_style_index_0_lang-63c92034.js";import{_ as n}from"./SubmitButton.vue_vue_type_script_setup_true_lang-92907858.js";import{_ as o}from"./VCheckbox.vue_vue_type_style_index_0_lang-7063e47f.js";import{_ as d}from"./VFlex.vue_vue_type_style_index_0_lang-8060459e.js";import{_ as u}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-15a72943.js";import{_ as r}from"./VFlexItem.vue_vue_type_style_index_0_lang-59076641.js";import{b as _,_ as m,a as c}from"./VControl-6b9015e2.js";import{_ as p}from"./VInput.vue_vue_type_script_setup_true_lang-268c7bbc.js";import{q as v,H as f,C as y,x as g,r as b,y as h,o as V,a as x,w as j,e as w,t as $,k as z,i as k,f as q,L as C,M as U,E as D,J as O,c as B,a7 as I,a8 as F,d as H,K as T,g as M,F as A,l as R,S}from"./index-ef344eb7.js";import{_ as Y}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as L,a as N,b as W}from"./VFlexTable.vue_vue_type_style_index_0_lang-abb495dd.js";import{_ as E,a as P,b as J,c as K,d as X}from"./search-7-dark-2f8f64c6.js";import{_ as Z}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-5d57fce7.js";import{u as G}from"./main-11940342.js";import{u as Q}from"./viewWrapper-ee1c88fe.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-f92ed052.js";import"./VRadio.vue_vue_type_style_index_0_lang-a8293ccd.js";import"./moment-0998b240.js";import"./VCard.vue_vue_type_script_setup_true_lang-f1c0af22.js";import"./VButton.vue_vue_type_style_index_0_lang-114b0359.js";import"./VPlaceload-5927026b.js";import"./additional-79a59e1f.js";import"./VIMaskInput.vue_vue_type_script_lang-d2dfdd0b.js";const aa=a=>(C("data-v-c172d894"),a=a(),U(),a),ea={class:"columns"},la={class:"column"},ta={class:"is-size-5 has-text-weight-medium"},sa={class:"box"},ia={class:"has-text-weight-bold"},na=aa((()=>w("br",null,null,-1))),oa={class:"table-container"},da={class:"table box is-fullwidth"},ua=aa((()=>w("p",{class:"has-text-danger"}," Красным цветом указаны показатели, заданные врачом-терапевтом, как обязательные для определения ",-1))),ra=Y(v({__name:"ResearchAimedFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list"],setup(l,{emit:t}){const s=l,v=f(),{t:C}=y(),U=g(C("Hemotransmission_research_results")),D=g(!1),O=b({date_analysis:[]}),B=b({data:{date_analysis:"",hbsag:!1,hbsag_test_system:"",hiv:!1,hiv_test_system:"",antihcv:!1,antihcv_test_system:"",rw:!1,rw_test_system:"",hemolysis:!1,chilez:!1},required_fields:[]}),I=g(!1);async function F(){var a,l,i,n,o,d;try{D.value=!0,await e(null==(l=null==(a=s.patient)?void 0:a.last_visit)?void 0:l.id,B.data),v.success(C("Data_saved_successfully")),t("update:list"),H()}catch(u){(null==(i=u.response)?void 0:i.data.error)?v.error(null==(n=u.response)?void 0:n.data.error):Object.assign(O,null==(d=null==(o=u.response)?void 0:o.data)?void 0:d.errors)}finally{D.value=!1}}function H(){B.data.date_analysis="",Object.assign(O,{date_analysis:[]}),t("update:isOpen",!1)}return h((()=>{var a,e;return null==(e=null==(a=s.patient)?void 0:a.last_visit)?void 0:e.id}),(async e=>{if(e){const l=await a(e);Object.assign(B,l.result)}})),h([()=>B.data.hemolysis,()=>B.data.chilez],(async a=>{console.log({newVal:a}),a.includes(!0)?(B.data.hbsag=!1,B.data.hiv=!1,B.data.antihcv=!1,B.data.rw=!1,I.value=!0):I.value=!1})),(a,e)=>{const t=_,s=p,v=m,f=c,y=r,g=u,b=d,h=o,C=n,O=i;return V(),x(O,{ref:"hemotransmissionLaboratoryForm",open:l.isOpen,size:"big",title:U.value,actions:"right",onClose:H},{content:j((()=>{var i,n;return[w("div",ea,[w("div",la,[w("h5",ta,$(a.$t("Donor_code"))+": "+$(null==(n=null==(i=l.patient)?void 0:i.last_visit)?void 0:n.donation_code),1)])]),w("div",sa,[z(b,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:j((()=>[z(y,{"flex-basis":"45%"},{default:j((()=>[z(f,{horizontal:""},{default:j((()=>[z(t,{class:"my-auto mr-3 is-size-6"},{default:j((()=>[k($(a.$t("Blood_sampling_date")),1)])),_:1}),z(v,null,{default:j((()=>{var a,e,t;return[z(s,{value:null==(t=null==(e=null==(a=l.patient)?void 0:a.last_visit)?void 0:e.blood_sample)?void 0:t.date,disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),z(y,{"flex-basis":"45%"},{default:j((()=>[z(f,{horizontal:""},{default:j((()=>[z(t,{class:"my-auto mr-3 is-size-6"},{default:j((()=>[k($(a.$t("Blood_samples_taken_date")),1)])),_:1}),z(v,null,{default:j((()=>{var a,e,t;return[z(s,{value:null==(t=null==(e=null==(a=l.patient)?void 0:a.last_visit)?void 0:e.blood_sample)?void 0:t.hemotransmissible_date,disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),z(y,{"flex-basis":"45%"},{default:j((()=>[z(f,{horizontal:""},{default:j((()=>[z(t,{class:"my-auto mr-3 is-size-6"},{default:j((()=>[k($(a.$t("Analysis_date")),1)])),_:1}),z(v,null,{default:j((()=>[z(g,{modelValue:B.data.date_analysis,"onUpdate:modelValue":e[0]||(e[0]=a=>B.data.date_analysis=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),z(y,{"flex-basis":"45%"},{default:j((()=>{var e,t;return[w("h5",null,[w("span",ia,$(a.$t("Visit_stage")),1),w("span",null,$(null==(t=null==(e=l.patient)?void 0:e.last_visit)?void 0:t.stage),1)])]})),_:1})])),_:1})]),na,w("div",oa,[w("table",da,[w("tbody",null,[w("tr",null,[w("td",null,[z(f,null,{default:j((()=>[z(v,null,{default:j((()=>[z(h,{modelValue:B.data.hbsag,"onUpdate:modelValue":e[1]||(e[1]=a=>B.data.hbsag=a),class:q([B.required_fields.includes("hbsag")&&"has-text-danger","p-2"]),color:B.required_fields.includes("hbsag")?"danger":"primary",label:a.$t("HBsAg"),disabled:I.value},null,8,["modelValue","class","color","label","disabled"])])),_:1})])),_:1})]),w("td",null,[z(f,{horizontal:"",class:"is-justify-content-end"},{default:j((()=>[z(t,{class:"is-size-6 my-auto mr-3"},{default:j((()=>[k($(a.$t("Testing_system"))+" ("+$(a.$t("HBsAg"))+")",1)])),_:1}),z(v,null,{default:j((()=>[z(s,{modelValue:B.data.hbsag_test_system,"onUpdate:modelValue":e[2]||(e[2]=a=>B.data.hbsag_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),w("tr",null,[w("td",null,[z(f,null,{default:j((()=>[z(v,null,{default:j((()=>[z(h,{modelValue:B.data.hiv,"onUpdate:modelValue":e[3]||(e[3]=a=>B.data.hiv=a),class:q([B.required_fields.includes("hiv")&&"has-text-danger","p-2"]),color:B.required_fields.includes("hiv")?"danger":"primary",label:a.$t("OIDS"),disabled:I.value},null,8,["modelValue","class","color","label","disabled"])])),_:1})])),_:1})]),w("td",null,[z(f,{horizontal:"",class:"is-justify-content-end"},{default:j((()=>[z(t,{class:"is-size-6 my-auto mr-3"},{default:j((()=>[k($(a.$t("Testing_system"))+" ("+$(a.$t("OIDS"))+")",1)])),_:1}),z(v,null,{default:j((()=>[z(s,{modelValue:B.data.hiv_test_system,"onUpdate:modelValue":e[4]||(e[4]=a=>B.data.hiv_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),w("tr",null,[w("td",null,[z(f,null,{default:j((()=>[z(v,null,{default:j((()=>[z(h,{modelValue:B.data.antihcv,"onUpdate:modelValue":e[5]||(e[5]=a=>B.data.antihcv=a),class:q([B.required_fields.includes("antihcv")&&"has-text-danger","p-2"]),color:B.required_fields.includes("antihcv")?"danger":"primary",label:a.$t("AntiHCV"),disabled:I.value},null,8,["modelValue","class","color","label","disabled"])])),_:1})])),_:1})]),w("td",null,[z(f,{horizontal:"",class:"is-justify-content-end"},{default:j((()=>[z(t,{class:"is-size-6 my-auto mr-3"},{default:j((()=>[k($(a.$t("Testing_system"))+" ("+$(a.$t("AntiHCV"))+")",1)])),_:1}),z(v,null,{default:j((()=>[z(s,{modelValue:B.data.antihcv_test_system,"onUpdate:modelValue":e[6]||(e[6]=a=>B.data.antihcv_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),w("tr",null,[w("td",null,[z(f,null,{default:j((()=>[z(v,null,{default:j((()=>[z(h,{modelValue:B.data.rw,"onUpdate:modelValue":e[7]||(e[7]=a=>B.data.rw=a),class:q([B.required_fields.includes("rw")&&"has-text-danger","p-2"]),color:B.required_fields.includes("rw")?"danger":"primary",label:a.$t("RW"),disabled:I.value},null,8,["modelValue","class","color","label","disabled"])])),_:1})])),_:1})]),w("td",null,[z(f,{horizontal:"",class:"is-justify-content-end"},{default:j((()=>[z(t,{class:"is-size-6 my-auto mr-3"},{default:j((()=>[k($(a.$t("Testing_system"))+" ("+$(a.$t("RW"))+")",1)])),_:1}),z(v,null,{default:j((()=>[z(s,{modelValue:B.data.rw_test_system,"onUpdate:modelValue":e[8]||(e[8]=a=>B.data.rw_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),w("tr",null,[w("td",null,[z(f,null,{default:j((()=>[z(v,null,{default:j((()=>[z(h,{modelValue:B.data.hemolysis,"onUpdate:modelValue":e[9]||(e[9]=a=>B.data.hemolysis=a),class:q([B.required_fields.includes("hemolysis")&&"has-text-danger","p-2"]),color:B.required_fields.includes("hemolysis")?"danger":"primary",label:a.$t("Hemolis")},null,8,["modelValue","class","color","label"])])),_:1})])),_:1})])]),w("tr",null,[w("td",null,[z(f,null,{default:j((()=>[z(v,null,{default:j((()=>[z(h,{modelValue:B.data.chilez,"onUpdate:modelValue":e[10]||(e[10]=a=>B.data.chilez=a),class:q([B.required_fields.includes("chilez")&&"has-text-danger","p-2"]),color:B.required_fields.includes("chilez")?"danger":"primary",label:a.$t("Hiles")},null,8,["modelValue","class","color","label"])])),_:1})])),_:1})])])])]),ua])]})),action:j((()=>[z(C,{loading:D.value,onClick:F},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-c172d894"]]),_a=a=>(C("data-v-4ba7bb50"),a=a(),U(),a),ma={class:"page-content-inner"},ca={class:"columns mb-3"},pa={class:"column"},va={class:"columns mt-1"},fa={class:"column"},ya={class:"columns"},ga={class:"column is-12"},ba={key:0,class:"is-flex-grow-0",textContent:"#"},ha={key:0,class:"flex-list-inner"},Va={key:1,class:"flex-list-inner"},xa=_a((()=>w("img",{class:"light-image",src:K,alt:""},null,-1))),ja=_a((()=>w("img",{class:"dark-image",src:X,alt:""},null,-1))),wa=["onClick"],$a=Y(v({__name:"index",async setup(a){let e,i;D(),f();const{t:n}=y(),o=G(),d=g(!1);Q().setPageTitle(n("Bloodborne-infections-laboratory")),O({title:`${n("Research-aimed-donations-list")} - ${o.app.name}`});const u=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),r=B({get:()=>u.pagination.current_page,set:async a=>{await k(c)}}),_={orderNumber:{format:(a,e,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:n("Donation_code"),format:(a,e)=>{var l;return null==(l=e.last_visit)?void 0:l.donation_code}},blood_sampling_date:{label:n("Blood_sampling_date"),format:(a,e)=>{var l,t;return null==(t=null==(l=e.last_visit)?void 0:l.blood_sample)?void 0:t.date}},name:{label:n("Donor_fullname")},birth_date:{label:n("Date-of-birth")},visit_type:{label:n("Visit_type"),format:(a,e)=>{var l,t;return(null==(l=e.last_visit)?void 0:l.visit_type)&&n(null==(t=e.last_visit)?void 0:t.visit_type)}},visit_date:{label:n("Visit_date"),format:(a,e)=>{var l,t;return(null==(l=e.last_visit)?void 0:l.created_at)&&I(new Date(null==(t=e.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:n("Donation_type"),format:(a,e)=>{var l,t;return null==(t=null==(l=e.last_visit)?void 0:l.donation_type)?void 0:t.name}},visit_stage:{label:n("Visit_stage"),format:(a,e)=>{var l,t;return null==(t=null==(l=e.last_visit)?void 0:l.stage)?void 0:t.name}}},m=b({visit_type_id:[],donation_type_id:[],donation_code:[]}),c=b({visit_type_id:"",donation_type_id:null,donation_code:""}),p=g(null),v=g(!1),h=g(!1);async function k(a){var e,t;try{d.value=!0,Object.assign(c,a);const e={...a,page:r.value},t=await l(e);Object.assign(u,t.result)}catch(s){Object.assign(m,null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.errors)}finally{d.value=!1}}function q(a){m[a]=""}async function C(){u.data=[]}function U(){p.value=null}return[e,i]=F((()=>k(c))),await e,i(),(a,e)=>{const l=Z,i=E,n=L,c=P,f=N,y=J,g=W,b=ra,D=s;return V(),H("div",ma,[w("div",ca,[w("div",pa,[z(l,{"with-icons":"",separator:"bullet",items:[{label:T(o).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Bloodborne-infections-laboratory")},{label:a.$t("Research-aimed-donations-list")}]},null,8,["items"])])]),w("div",va,[w("div",fa,[z(t,{"is-loading":T(d),errors:T(m),onSearch:k,onClearForm:C,onClearError:q},null,8,["is-loading","errors"])])]),w("div",ya,[w("div",ga,[z(g,{columns:T(_),data:T(u).data,limit:T(u).pagination.per_page,total:T(u).pagination.total},{default:j((()=>[z(f,{rounded:"","no-header":!T(d)&&0===T(u).data.length},{"header-column":j((({column:a})=>["orderNumber"===a.key?(V(),H("span",ba)):M("",!0)])),body:j((()=>[T(d)?(V(),H("div",ha,[(V(!0),H(A,null,R(T(u).pagination.per_page,(a=>(V(),H("div",{key:a,class:"flex-table-item"},[z(n,null,{default:j((()=>[z(i,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):M("",!0),0===T(u).data.length?(V(),H("div",Va,[z(c,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:j((()=>[xa,ja])),_:1},8,["title","subtitle"])])):M("",!0)])),"body-cell":j((({row:a,column:e})=>["name"===e.key?(V(),H("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:e=>{return l=a,p.value=l,void(v.value=!0);var l}},$(a.first_name)+" "+$(a.last_name)+" "+$(a.father_name)+" ",9,wa)):M("",!0)])),_:1},8,["no-header"]),T(u).data.length?(V(),x(y,{key:0,"current-page":T(r),"onUpdate:current-page":e[0]||(e[0]=a=>S(r)?r.value=a:null),class:"mt-5","item-per-page":T(u).pagination.per_page,"total-items":T(u).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):M("",!0)])),_:1},8,["columns","data","limit","total"])])]),z(b,{"is-open":T(v),"onUpdate:is-open":e[1]||(e[1]=a=>S(v)?v.value=a:null),patient:T(p),onClose:U},null,8,["is-open","patient"]),z(D,{"is-open":T(h),"onUpdate:is-open":e[2]||(e[2]=a=>S(h)?h.value=a:null),patient:T(p)},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-4ba7bb50"]]);export{$a as default};
