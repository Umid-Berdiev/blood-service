import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-0803d93d.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-2ed40fbe.js";import{a as t,b as l,c as i}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-9d5a4531.js";import{_ as n,a as o}from"./VControl-be5836b7.js";import{q as s,G as r,H as _,C as d,x as u,r as p,A as c,V as m,j as b,o as y,a as g,w as v,e as f,m as h,k as z,K as V,t as k,d as j,F as w,l as x,g as $,i as P,E as C,J as I,c as U,a8 as M,y as O,S,L as E,M as q}from"./index-d9061d2c.js";import{u as T}from"./viewWrapper-9e80f6c5.js";import{_ as A}from"./VModal.vue_vue_type_style_index_0_lang-8d011527.js";import{_ as D}from"./SubmitButton.vue_vue_type_script_setup_true_lang-f89a151e.js";import{_ as F}from"./VCheckbox.vue_vue_type_style_index_0_lang-089afc44.js";import{_ as N}from"./VInput.vue_vue_type_script_setup_true_lang-97f91669.js";import{_ as B}from"./VRadio.vue_vue_type_style_index_0_lang-be422a77.js";import{_ as H}from"./lodash-9a830436.js";import{a as R,u as G,c as J,v as K,r as L}from"./index-3c416f1d.js";import{a as W}from"./additional-e18695ee.js";import{_ as X}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-f69accd2.js";import{_ as Y,a as Z,b as Q}from"./VFlexTable.vue_vue_type_style_index_0_lang-a5bceab1.js";import{c as ee,d as ae,_ as te,a as le,b as ie}from"./search-7-dark-d87b69f8.js";import{_ as ne}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-2529d562.js";import{_ as oe}from"./VIcon.vue_vue_type_script_setup_true_lang-535a3769.js";import{_ as se}from"./VFlex.vue_vue_type_style_index_0_lang-b629dcb9.js";import{u as re}from"./main-25c8644f.js";import{p as _e,h as de,u as ue}from"./patient-2a7c9e62.js";import{_ as pe}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VPlaceload-67c73152.js";import"./VIMaskInput.vue_vue_type_script_lang-0bca37cb.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-34f7ef32.js";import"./VDropdown.vue_vue_type_style_index_0_lang-84dac2da.js";const ce=["onSubmit"],me={class:"help has-text-danger"},be=f("br",null,null,-1),ye={class:"help has-text-danger"},ge={class:"help has-text-danger"},ve={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},ke={class:"column is-6"},je=H.isEmpty,we=s({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const l=e,i=r(),s=_(),{t:C}=d(),I=u(C("Add")),U=(null==(t=i.params)?void 0:t.id)||null,M=u(!1),O=p({patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),S=u([{value:"gratuitous",label:C("Gratuitous")},{value:"chargeable",label:C("Chargeable")}]),E=u([{value:"medical_organization",label:C("Healthcare_facilities")},{value:"public_organization",label:C("Public_organizations")},{value:"independently",label:C("Independently")}]),q=u([]),T=p({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function H(){var e,t;try{M.value=!0,l.cardId?await G(l.cardId,O):await J(O),a("update:list"),s.success(C("Updated_successfully")),K()}catch(i){Object.assign(T,null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors),s.error(i.message)}finally{M.value=!1}}function K(){I.value=C("Add"),Object.assign(O,{patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(T,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return c((async()=>{const e=await W();je(e.result)||(q.value=e.result)})),m((async()=>{if(Number(l.cardId)){I.value=C("Edit");const{result:e}=await R(Number(l.cardId),U);Object.assign(O,{patient_id:e.patient_id,visit_type:e.visit_type,directed_by:e.directed_by,medical_organization_id:e.medical_organization_id,public_organization:e.public_organization,is_personalized_donation:e.is_personalized_donation,is_mobile_team:e.is_mobile_team,personalized_donation:e.personalized_donation,mobile_team:e.mobile_team})}})),(a,t)=>{const l=b("Multiselect"),i=n,s=o,r=B,_=N,d=F,u=D,p=A;return y(),g(p,{open:e.isOpen,size:"large",title:V(I),actions:"right",onClose:K},{content:v((()=>[f("form",{id:"visitcard-form",class:"modal-form",onSubmit:h(H,["prevent"])},[z(s,{label:a.$t("Visit_type"),required:""},{default:v((()=>[z(i,null,{default:v((()=>[z(l,{modelValue:V(O).visit_type,"onUpdate:modelValue":t[0]||(t[0]=e=>V(O).visit_type=e),options:V(S),placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),f("p",me,k(V(T).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,z(s,{label:a.$t("Directed_by"),required:""},{default:v((()=>[z(i,null,{default:v((()=>[(y(!0),j(w,null,x(V(E),((e,a)=>(y(),g(r,{key:a,modelValue:V(O).directed_by,"onUpdate:modelValue":t[1]||(t[1]=e=>V(O).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===V(O).directed_by?(y(),g(s,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:v((()=>[z(i,null,{default:v((()=>[z(l,{modelValue:V(O).medical_organization_id,"onUpdate:modelValue":t[2]||(t[2]=e=>V(O).medical_organization_id=e),options:V(q),placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",ye,k(V(T).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),"public_organization"===V(O).directed_by?(y(),g(s,{key:1,label:a.$t("Public_organization_title"),required:""},{default:v((()=>[z(i,null,{default:v((()=>[z(_,{modelValue:V(O).public_organization,"onUpdate:modelValue":t[3]||(t[3]=e=>V(O).public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),f("p",ge,k(V(T).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):$("",!0),f("div",ve,[f("div",fe,[z(s,null,{default:v((()=>[z(i,null,{default:v((()=>[z(d,{modelValue:V(O).is_personalized_donation,"onUpdate:modelValue":t[4]||(t[4]=e=>V(O).is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",he,[z(s,null,{default:v((()=>[z(i,null,{default:v((()=>[V(O).is_personalized_donation?(y(),g(_,{key:0,modelValue:V(O).personalized_donation,"onUpdate:modelValue":t[5]||(t[5]=e=>V(O).personalized_donation=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])]),f("div",ze,[f("div",Ve,[z(s,null,{default:v((()=>[z(i,null,{default:v((()=>[z(d,{modelValue:V(O).is_mobile_team,"onUpdate:modelValue":t[6]||(t[6]=e=>V(O).is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),f("div",ke,[z(s,null,{default:v((()=>[z(i,null,{default:v((()=>[V(O).is_mobile_team?(y(),g(_,{key:0,modelValue:V(O).mobile_team,"onUpdate:modelValue":t[7]||(t[7]=e=>V(O).mobile_team=e)},null,8,["modelValue"])):$("",!0)])),_:1})])),_:1})])])],40,ce)])),action:v((({close:e})=>[z(u,{loading:V(M),form:"visitcard-form"},{default:v((()=>[P(k(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),xe={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ce={key:0,class:"is-flex-grow-0",textContent:"#"},Ie={key:0,class:"flex-list-inner"},Ue={key:1,class:"flex-list-inner"},Me=f("img",{class:"light-image",src:ee,alt:""},null,-1),Oe=f("img",{class:"dark-image",src:ae,alt:""},null,-1),Se={key:0,class:"dark-text"},Ee={key:1,class:"dark-text"},qe={key:3},Te={key:4},Ae=s({__name:"PatientVisitCardTable",async setup(e){var t;let l,i;const n=r();C();const o=_(),{t:s}=d(),c=re();T().setPageTitle(s("Patient_cards_list")),I({title:`${s("Patient_cards")} - ${c.app.name}`});const m=p({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),b=u(null),h=(null==(t=n.params)?void 0:t.id)||null,E=u(!1),q=U({get:()=>m.pagination.current_page,set:async e=>{await F(e)}}),A={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:s("Visit_type")},directed_by:{label:s("Directed_by")},medical_organization:{label:s("Healthcare_facilities")},public_organization:{label:s("Public_organizations")},independently:{label:s("Independently")},is_personalized_donation:{label:s("Personalized_donation")},is_mobile_team:{label:s("Mobile_team")},actions:{label:"",align:"end"}},D=u(!1);async function F(e=1){try{D.value=!0;const a=await K(h,{page:e,per_page:m.per_page});Object.assign(m,a.result)}catch(a){o.error(s(a.message))}finally{D.value=!1}}function N(e){b.value=e,E.value=!0}async function B(){await L(h,b.value),F()}function H(){F(),b.value=null}return u(),[l,i]=M((()=>F())),await l,i(),O((()=>m.per_page),(async()=>{await F()})),(e,t)=>{const l=a,i=se,n=te,o=Y,s=le,r=oe,_=ne,d=Z,u=ie,p=Q,h=X,C=we;return y(),j("div",xe,[z(i,null,{default:v((()=>[z(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>N(null))},{default:v((()=>[P(k(e.$t("Add")),1)])),_:1})])),_:1}),f("div",$e,[f("div",Pe,[z(p,{class:"mt-4",columns:V(A),data:V(m).data,limit:V(m).per_page,total:V(m).total},{default:v((()=>[z(d,{rounded:"","no-header":!V(D)&&0===V(m).data.length},{"header-column":v((({column:e})=>["orderNumber"===e.key?(y(),j("span",Ce)):$("",!0)])),body:v((()=>[V(D)?(y(),j("div",Ie,[(y(!0),j(w,null,x(V(m).per_page,(e=>(y(),j("div",{key:e,class:"flex-table-item"},[z(o,null,{default:v((()=>[z(n,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===V(m).data.length?(y(),j("div",Ue,[z(s,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:v((()=>[Me,Oe])),_:1},8,["title","subtitle"])])):$("",!0)])),"body-cell":v((({row:a,column:t,value:l})=>["visit_type"===t.key?(y(),j("span",Se,k(e.$t(l)),1)):$("",!0),"directed_by"===t.key?(y(),j("span",Ee,k(e.$t(l)),1)):$("",!0),"independently"===t.key?(y(),j(w,{key:2},["independently"===a.directed_by?(y(),g(r,{key:0,class:"has-text-primary",icon:"feather:check"})):(y(),g(r,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):$("",!0),"is_personalized_donation"===t.key?(y(),j("span",qe,k(a.personalized_donation),1)):$("",!0),"is_mobile_team"===t.key?(y(),j("span",Te,k(a.mobile_team),1)):$("",!0),"actions"===t.key?(y(),g(_,{key:5,onEdit:e=>N(a.id),onRemove:e=>async function(e){b.value=e,c.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):$("",!0)])),_:1},8,["no-header"]),V(m).data.length?(y(),g(u,{key:0,"current-page":V(q),"onUpdate:current-page":t[1]||(t[1]=e=>S(q)?q.value=e:null),class:"mt-5","item-per-page":V(m).per_page,"total-items":V(m).total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1},8,["columns","data","limit","total"])])]),z(h,{onConfirmAction:B}),z(C,{"is-open":V(E),"onUpdate:is-open":t[2]||(t[2]=e=>S(E)?E.value=e:null),"card-id":V(b),"onUpdate:list":H,onClose:t[3]||(t[3]=e=>b.value=null)},null,8,["is-open","card-id"])])}}}),De={class:"patient-detail-wrapper"},Fe=["onSubmit"],Ne={class:"columns mt-5"},Be={class:"column"},He={class:"is-size-5"},Re=(e=>(E("data-v-5995d8ec"),e=e(),q(),e))((()=>f("br",null,null,-1))),Ge={class:"help has-text-danger"},Je={class:"column"},Ke={class:"is-size-5"},Le={class:"column"},We={class:"is-size-5"},Xe={class:"navigation-buttons"},Ye={class:"buttons is-right"},Ze={key:1,class:"mt-5"},Qe=pe(s({__name:"[id]",async setup(s){var m;let g,w;const x=r();C();const O=_(),{t:S}=d(),E=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),q=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),A=u(!1),D=(null==(m=x.params)?void 0:m.id)||null,F=u([{label:S("Patient_details"),value:"#details",icon:"feather:info",to:`${x.path}#details`},{label:S("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${x.path}#patient_visit_cards`}]),N=u([]),B=u(x.hash||"#details");function H(e){q[e]=""}async function R(){var e,a;try{A.value=!0;await ue(D,E);O.success(S("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(q,null==(a=t.response)?void 0:a.data.errors):O.error(S("Something_went_wrong"))}finally{A.value=!1}}return T().setPageTitle(S("Patient_info")),I({title:U((()=>S("Patient_info")))}),[g,w]=M((()=>async function(){try{const e=await de(D);Object.assign(E,e.result),E.pinfl=E.pinfl??"",E.phone_home=E.phone_home??"",E.phone_number=E.phone_number??"",E.phone_work=E.phone_work??""}catch(e){O.error(e.message)}}())),await g,w(),c((async()=>{const e=await _e();N.value=e.result})),(s,r)=>{const _=t,d=b("Multiselect"),u=n,p=o,c=l,m=i,g=a,w=e;return y(),j("div",De,[z(w,{selected:V(B),tabs:V(F)},{tab:v((({activeValue:e})=>["#details"===e?(y(),j("form",{key:0,onSubmit:h(R,["prevent"])},[f("div",Ne,[f("div",Be,[f("p",He,k(s.$t("Personal_Info")),1),z(_,{patient:V(E),errors:V(q),onEditing:H},null,8,["patient","errors"]),Re,z(p,{label:s.$t("Category"),required:""},{default:v((()=>[z(u,null,{default:v((()=>[z(d,{modelValue:V(E).patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(E).patient_category_id=e),options:V(N),placeholder:s.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),f("p",Ge,k(V(q).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),f("div",Je,[f("p",Ke,k(s.$t("Passport_info")),1),z(c,{patient:V(E),errors:V(q),onEditing:H},null,8,["patient","errors"])]),f("div",Le,[f("p",We,k(s.$t("Address")),1),z(m,{patient:V(E),errors:V(q),onEditing:H},null,8,["patient","errors"])])]),f("div",Xe,[f("div",Ye,[z(g,{type:"submit",color:"primary",bold:"",loading:V(A),disabled:V(A),tabindex:"0"},{default:v((()=>[P(k(s.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Fe)):"#patient_visit_cards"===e?(y(),j("div",Ze,[z(Ae)])):$("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-5995d8ec"]]);export{Qe as default};
