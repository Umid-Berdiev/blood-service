import{g as a,h as e,_ as t,a as s,b as r,c as l,d as n,e as i,f as o}from"./search-7-dark.2060a6ab.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang.33b5caf8.js";import{a as d,_ as p}from"./VFlexItem.vue_vue_type_style_index_0_lang.b83a83e1.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang.ea1f05cd.js";import{_ as c}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.4a253439.js";import{q as m,E as g,H as f,C as v,x as b,r as h,J as y,c as w,aJ as j,o as x,d as k,k as $,w as C,K as F,m as V,i as I,t as P,e as D,g as W,F as E,l as O,a as q,P as B}from"./index.ce4ddab7.js";import{u as J}from"./viewWrapper.5a2b502f.js";import{_ as S}from"./FilterForm.vue_vue_type_script_setup_true_lang.165eba46.js";import{u as T}from"./main.ee4a9c05.js";import{e as z}from"./patient.bdfc40c2.js";import{_ as A}from"./lodash.57be5406.js";import"./VPlaceload.a3525941.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VInput.vue_vue_type_script_setup_true_lang.b4d2c7ff.js";import"./VControl.5631d0ee.js";import"./VIMaskInput.vue_vue_type_script_lang.eea9898a.js";const G={class:"page-content-inner"},H={class:"columns mt-1"},K={class:"column"},L={class:"columns"},M={class:"column is-12"},N={key:0,class:"is-flex-grow-0",textContent:"#"},R={key:0,class:"flex-list-inner"},U={key:1,class:"flex-list-inner"},Q=D("img",{class:"light-image",src:a,alt:""},null,-1),X=D("img",{class:"dark-image",src:e,alt:""},null,-1),Y=A.isEmpty,Z=m({__name:"index",async setup(a){let e,m;g();const A=f(),{t:Z}=v(),aa=T(),ea=b(!1),ta=h({lastname:"",firstname:"",middlename:"",passpordId:""});J().setPageTitle(Z("Advanced_Search")),y({title:`${Z("Donation-diverted-register")} - ${aa.app.name}`});const sa=h({result:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),ra=w({get:()=>sa.pagination.current_page,set:async a=>{la.page=a,await oa(la)}}),la=h({page:1}),na={"#":{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:Z("Fullname"),format:(a,e)=>`${e.first_name} ${e.last_name}`},birth_date:{label:Z("Date-of-birth")},gender:{label:Z("Gender"),format:a=>Z(a)},passport:{label:Z("Passport_series_number"),format:(a,e)=>`${e.passport_series}${e.passport_number}`},withdrawal_end_date:{label:Z("Withdrawal_end_date"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.end_date}},withdrawal_reason:{label:Z("Withdrawal_reason"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.reason}},withdrawal_created_by:{label:Z("Withdrawal_created_by"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.created_by}}},ia=b();async function oa(a){var e,t;try{Object.assign(la,a),ea.value=!0;const e=await z(a);Object.assign(sa,e.result),Y(e.result.result)?A.warning(Z("Data_not_found")):A.success(`${Z("Found")}: ${e.result.pagination.total} ${Z("records")}`)}catch(s){Object.assign(ta,null==(t=null==(e=s.response)?void 0:e.result)?void 0:t.errors)}finally{ea.value=!1}}function ua(a){ta[a]=""}async function da(){sa.result=[]}function pa(){}return[e,m]=j((()=>oa(la))),await e,m(),(a,e)=>{const m=c,g=d,f=_,v=p,b=u,h=t,y=s,w=r,j=l,J=n,T=i,z=o;return x(),k("div",G,[$(b,{"justify-content":"space-between","flex-wrap":"wrap"},{default:C((()=>[$(g,null,{default:C((()=>[$(m,{"with-icons":"",separator:"bullet",items:[{label:F(aa).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Registration")},{label:a.$t("Donation-diverted-register"),to:{name:"/app/registration/donation-diverted-register/"}}]},null,8,["items"])])),_:1}),$(g,null,{default:C((()=>[$(v,null,{default:C((()=>[$(f,{outlined:"",rounded:"",color:"light",icon:"feather:printer",onClick:V(pa,["prevent"])},{default:C((()=>[I(P(a.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),D("div",H,[D("div",K,[$(S,{"is-loading":ea.value,errors:ta,onSearch:oa,onClearForm:da,onClearError:ua},null,8,["is-loading","errors"])])]),D("div",L,[D("div",M,[$(z,{columns:F(na),data:sa.result,limit:sa.pagination.per_page,total:sa.pagination.total},{default:C((()=>[$(J,{rounded:"","no-header":!ea.value&&0===sa.result.length},{"header-column":C((({column:a})=>["#"===a.key?(x(),k("span",N)):W("",!0)])),body:C((()=>[ea.value?(x(),k("div",R,[(x(!0),k(E,null,O(sa.pagination.per_page,(a=>(x(),k("div",{key:a,class:"flex-table-item"},[$(y,null,{default:C((()=>[$(h,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):W("",!0),0===sa.result.length?(x(),k("div",U,[$(w,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:C((()=>[Q,X])),_:1})])):W("",!0)])),"body-row-pre":C((({row:a})=>[a.id===ia.value?(x(),q(j,{key:0,size:"tiny",class:"m-0 mb-1"})):W("",!0)])),_:1},8,["no-header"]),sa.result.length?(x(),q(T,{key:0,"current-page":F(ra),"onUpdate:current-page":e[0]||(e[0]=a=>B(ra)?ra.value=a:null),class:"mt-5","item-per-page":sa.pagination.per_page,"total-items":sa.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):W("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Z as default};
