import{_ as e}from"./AuthLayout.b3ec7ee7.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang.3d7c5df0.js";import{_ as s,a as l}from"./VControl.db99b51d.js";import{_ as o}from"./VInput.vue_vue_type_script_setup_true_lang.34261dbb.js";import{_ as t}from"./AnimatedLogo.964e016d.js";import{q as n,C as r,x as d,D as i,E as u,G as c,H as p,I as m,r as h,J as g,j as v,o as _,a as b,w as f,e as y,k as w,s as k,m as x,K as j,f as C,t as I,i as $,L,M as V}from"./index.4a029cdd.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VPlaceload.cc73600a.js";const A=e=>(L("data-v-cdea53ef"),e=e(),V(),e),D={class:"modern-login"},O=A((()=>y("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),P={class:"columns is-gapless is-vcentered"},S=A((()=>y("div",{class:"column is-relative is-8 h-hidden-mobile h-hidden-tablet-p"},[y("div",{class:"hero is-fullheight is-image",style:{background:"url('/images/clean-medical-background_53876-97927.webp')"}},[y("div",{class:"hero-body"},[y("div",{class:"container"},[y("div",{class:"columns"},[y("div",{class:"column"},[y("p",{class:"is-size-1 has-text-dark has-text-weight-medium"}," Автоматизированная информационная система по формированию и ведению базы данных по донорам и лицам, отведенным от донорства, и данных по учету и распределению донорской крови ")])])])])])],-1))),U={class:"column is-4 is-relative"},q=["checked"],E=A((()=>y("span",null,null,-1))),K={class:"is-form"},B={class:"hero-body"},F=["onSubmit"],G={class:"help has-text-danger"},H={class:"help has-text-danger"},J={class:"button-wrap has-help"},M=z(n({__name:"index",setup(n){const{t:L}=r(),V=d("login"),z=d(!1),A=i(),M=u(),R=c(),W=p(),{loginUser:N,isLoggedIn:Q}=m(),T=R.query.redirect,X=h({username:[],password:[]}),Y=async e=>{var a,s,l,o,t,n,r;try{z.value=!0,Object.assign(X,{username:[],password:[]});const s=Object.fromEntries(new FormData(e.target));await N(s),W.dismissAll(),W.success(`${L("Welcome_back")}, ${null==(a=s.username)?void 0:a.toUpperCase()}`),T?M.push(T):M.push({name:"/app/dashboard"})}catch(d){Object.assign(X,null==(l=null==(s=d.response)?void 0:s.data)?void 0:l.errors),(null==(t=null==(o=d.response)?void 0:o.data)?void 0:t.errors.message)&&W.error(null==(r=null==(n=d.response)?void 0:n.data)?void 0:r.errors.message)}finally{z.value=!1}};function Z(e){X[e]=[]}return g({title:L("auth_login")}),(n,r)=>{const d=t,i=v("RouterLink"),u=o,c=s,p=l,m=a,h=e;return _(),b(h,null,{default:f((()=>[y("div",D,[O,y("div",P,[S,y("div",U,[w(i,{to:"/",class:"top-logo"},{default:f((()=>[w(d,{size:75})])),_:1}),y("label",{class:"dark-mode ml-auto",tabindex:"0",onKeydown:r[1]||(r[1]=k(x((e=>e.target.click()),["prevent"]),["space"]))},[y("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!j(A).isDark,onChange:r[0]||(r[0]=(...e)=>j(A).onChange&&j(A).onChange(...e))},null,40,q),E],32),y("div",K,[y("div",B,[y("div",{class:C(["form-text",["login"!==V.value&&"is-hidden"]])},[y("h2",null,I(n.$t("Sign_In")),1),y("p",null,I(n.$t("Please_sign_in_to_your_account")),1)],2),y("form",{"data-cy":"login-form",class:C([["login"!==V.value&&"is-hidden"],"login-wrapper"]),onSubmit:x(Y,["prevent"])},[w(p,null,{default:f((()=>[w(c,{icon:"feather:user"},{default:f((()=>[w(u,{type:"text",name:"username",placeholder:n.$t("Username"),autocomplete:"username",onInput:r[2]||(r[2]=e=>Z("username"))},null,8,["placeholder"]),y("p",G,I(X.username[0]),1)])),_:1})])),_:1}),w(p,null,{default:f((()=>[w(c,{icon:"feather:lock"},{default:f((()=>[w(u,{type:"password",name:"password",placeholder:n.$t("Password"),autocomplete:"current-password",onInput:r[3]||(r[3]=e=>Z("current-password"))},null,8,["placeholder"]),y("p",H,I(X.password[0]),1)])),_:1})])),_:1}),y("div",J,[w(m,{id:"login-button",loading:z.value,disabled:z.value,color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:f((()=>[$(I(n.$t("Confirm")),1)])),_:1},8,["loading","disabled"])])],42,F)])])])])])])),_:1})}}}),[["__scopeId","data-v-cdea53ef"]]);export{M as default};
