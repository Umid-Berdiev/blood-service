import{_ as a}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-b5488b87.js";import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-98b95306.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import{_ as n,a as l}from"./VControl-90e6c9df.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-6aad6843.js";import{a6 as s,q as o,H as r,C as i,x as p,y as d,o as c,a as _,w as m,e as v,m as g,t as f,k as h,J as y,r as x,d as b,K as w,F as V,l as j,g as $,U as k,L as C,M as U}from"./index-202d6ef0.js";import{_ as O}from"./VCard.vue_vue_type_script_setup_true_lang-8d45bf90.js";import{_ as I,a as M}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as T}from"./NoDataPlaceholder-50105cc5.js";import{_ as P}from"./VIconButton.vue_vue_type_script_lang-8ce86419.js";import{_ as S}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e8162493.js";import{u as q}from"./main-1fdef032.js";import{u as B}from"./viewWrapper-93d6f948.js";import{_ as E}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";const R=s();const A=["onSubmit"],F={class:"table is-fullwidth"},H=v("span",{class:"has-text-danger"}," *",-1),L={class:"help has-text-danger"},N=v("span",{class:"has-text-danger"}," *",-1),D={class:"help has-text-danger"},J=v("span",{class:"has-text-danger"}," *",-1),K={class:"help has-text-danger"},W=v("span",{class:"has-text-danger"}," *",-1),Z={class:"help has-text-danger"},z=o({__name:"ReagentFormModal",props:{isOpen:{type:Boolean,default:!1},container:null},emits:["update:isOpen","update:list"],setup(a,{emit:s}){const o=a,y=r(),{t:x}=i(),b=p(x("Reagent")),w=p(!1),V=p({name:"",unit:"",min_value:null,max_value:null}),j=p({name:[],unit:[],min_value:[],max_value:[]});async function $(){var a,e,t,n;try{w.value=!0,V.value.id?await async function(a,e){try{const{data:t}=await R({url:`/reagents/${a}`,method:"PUT",data:e});return t}catch(t){throw t}}(V.value.id,V.value):await async function(a){try{const{data:e}=await R({url:"/reagents",method:"POST",data:a});return e}catch(e){throw e}}(V.value),s("update:list"),k()}catch(l){(null==(a=l.response)?void 0:a.data.error)?y.error(null==(e=l.response)?void 0:e.data.error):j.value=null==(n=null==(t=l.response)?void 0:t.data)?void 0:n.errors}finally{w.value=!1}}function k(){s("update:isOpen",!1)}function C(a){j.value[a]=[]}return d((()=>o.container),(function(a){a&&(V.value=a)}),{deep:!0}),d((()=>o.isOpen),(function(a){0==a&&(V.value={name:"",unit:"",min_value:null,max_value:null},Object.getOwnPropertyNames(j.value).forEach((a=>{j.value[a]=[]})))}),{deep:!0}),(s,o)=>{const r=u,i=n,p=l,d=t,y=e;return c(),_(y,{open:a.isOpen,title:b.value,actions:"right",onClose:k},{content:m((()=>[v("form",{id:"donation-container-form",class:"modal-form",onSubmit:g($,["prevent"])},[v("table",F,[v("tbody",null,[v("tr",null,[v("td",null,[v("span",null,f(s.$t("Title")),1),H]),v("td",null,[h(p,{required:""},{default:m((()=>[h(i,null,{default:m((()=>{var a;return[h(r,{modelValue:V.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>V.value.name=a),onInput:o[1]||(o[1]=a=>C("name"))},null,8,["modelValue"]),v("p",L,f(null==(a=j.value)?void 0:a.name[0]),1)]})),_:1})])),_:1})])]),v("tr",null,[v("td",null,[v("span",null,f(s.$t("Unit")),1),N]),v("td",null,[h(p,{required:""},{default:m((()=>[h(i,null,{default:m((()=>[h(r,{modelValue:V.value.unit,"onUpdate:modelValue":o[2]||(o[2]=a=>V.value.unit=a),onInput:o[3]||(o[3]=a=>C("unit"))},null,8,["modelValue"]),v("p",D,f(j.value.unit[0]),1)])),_:1})])),_:1})])]),v("tr",null,[v("td",null,[v("span",null,f(s.$t("Min")),1),J]),v("td",null,[h(p,{required:""},{default:m((()=>[h(i,null,{default:m((()=>[h(r,{modelValue:V.value.min_value,"onUpdate:modelValue":o[4]||(o[4]=a=>V.value.min_value=a),type:"number",onInput:o[5]||(o[5]=a=>C("min_value"))},null,8,["modelValue"]),v("p",K,f(j.value.min_value[0]),1)])),_:1})])),_:1})])]),v("tr",null,[v("td",null,[v("span",null,f(s.$t("Max")),1),W]),v("td",null,[h(p,{required:""},{default:m((()=>[h(i,null,{default:m((()=>{var a;return[h(r,{modelValue:V.value.max_value,"onUpdate:modelValue":o[6]||(o[6]=a=>V.value.max_value=a),type:"number",onInput:o[7]||(o[7]=a=>C("max_value"))},null,8,["modelValue"]),v("p",Z,f(null==(a=j.value)?void 0:a.max_value[0]),1)]})),_:1})])),_:1})])])])])],40,A)])),action:m((()=>[h(d,{loading:w.value,form:"donation-container-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),G=a=>(C("data-v-8ce72a9b"),a=a(),U(),a),Q={class:"page-content-inner"},X={class:"columns mb-5"},Y={class:"column is-narrow"},aa={class:"column is-narrow ml-auto"},ea={class:"columns"},ta={class:"column"},na={class:"table-container"},la={key:1,class:"table is-hoverable is-fullwidth"},ua=G((()=>v("th",null,"#",-1))),sa={class:"has-text-centered"},oa={class:"has-text-centered"},ra={colspan:"7"},ia=["onClick"],pa={class:"has-text-centered"},da={class:"has-text-centered"},ca=["onClick"],_a=[G((()=>v("span",{class:"iconify","data-icon":"feather:trash"},null,-1)))],ma=E(o({__name:"index",setup(e){const t=r(),{t:n}=i(),l=q(),u=p(!1),s=B(),o=p(null);s.setPageTitle(n("Handbook")),y({title:`${n("Reagents")} - ${l.app.name}`});const g=x({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),C=p(null),U=p(!1);async function E(){try{u.value=!0;const a={page:g.pagination.current_page,per_page:g.pagination.per_page},e=await async function(a){try{const{data:e}=await R({url:"/reagents",params:a});return e}catch(e){throw e}}(a);Object.assign(g,e.result)}catch(a){t.error(`${n("Something_went_wrong")}: ${a.message}`)}finally{u.value=!1}}function A(a){C.value=a,U.value=!0}async function F(){u.value=!0,await async function(a){try{const{data:e}=await R({url:`/reagents/${a}`,method:"DELETE"});return e}catch(e){throw e}}(o.value),await E()}return d(U,(function(a){!1===a&&(C.value=null)})),d((()=>g.pagination.current_page),(async function(a){a&&await E()}),{immediate:!0}),(e,t)=>{const n=S,s=P,r=T,i=I,p=M,d=O,y=z,x=a;return c(),b("div",Q,[v("div",X,[v("div",Y,[h(n,{"with-icons":"",separator:"bullet",items:[{label:w(l).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Handbook")},{label:e.$t("Reagents")}]},null,8,["items"])]),v("div",aa,[h(s,{type:"button",icon:"feather:plus",color:"primary",onClick:t[0]||(t[0]=a=>A(null))})])]),v("div",ea,[v("div",ta,[h(d,null,{default:m((()=>[v("div",na,[0===w(g).data.length?(c(),_(r,{key:0})):(c(),b("table",la,[v("thead",null,[v("tr",null,[ua,v("th",null,f(e.$t("Title")),1),v("th",null,f(e.$t("Unit")),1),v("th",sa,f(e.$t("Norm")),1),v("th",oa,f(e.$t("Actions")),1)])]),v("tbody",null,[w(u)?(c(!0),b(V,{key:0},j(w(g).pagination.per_page,(a=>(c(),b("tr",{key:a},[v("td",ra,[h(i,{lines:2,"last-line-width":"70%"})])])))),128)):(c(!0),b(V,{key:1},j(w(g).data,((a,e)=>(c(),b("tr",{key:e},[v("td",null,f(w(g).pagination.current_page*w(g).pagination.per_page-w(g).pagination.per_page+(e+1)),1),v("td",null,[v("a",{href:"javascript:;",class:"has-text-primary",onClick:e=>A(a)},f(a.name),9,ia)]),v("td",null,f(a.unit),1),v("td",pa,f(a.min_value)+" - "+f(a.max_value)+" "+f(a.unit),1),v("td",da,[v("a",{href:"javascript:;",class:"has-text-danger",onClick:e=>{return t=a.id,o.value=t,void l.$patch({confirmModalState:!0});var t}},_a,8,ca)])])))),128))])]))]),w(g).data.length?(c(),_(p,{key:0,"current-page":w(g).pagination.current_page,"onUpdate:current-page":t[1]||(t[1]=a=>w(g).pagination.current_page=a),class:"mt-5","item-per-page":w(g).pagination.per_page,"total-items":w(g).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):$("",!0)])),_:1})])]),h(y,{"is-open":w(U),"onUpdate:is-open":t[2]||(t[2]=a=>k(U)?U.value=a:null),container:w(C),"onUpdate:list":E},null,8,["is-open","container"]),h(x,{onConfirmAction:F})])}}}),[["__scopeId","data-v-8ce72a9b"]]);export{ma as default};
