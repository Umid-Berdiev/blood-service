import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-0b6ebd63.js";import{_ as l,a as s,b as r,c as n,d as i}from"./search-7-dark-c4e05ee5.js";import{_ as o}from"./VCard.vue_vue_type_script_setup_true_lang-34c1a38f.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-2943ff29.js";import{_,a as u}from"./VControl-6db07387.js";import{_ as c}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-e7f94dfc.js";import{q as p,C as m,H as g,r as v,a8 as y,x as b,j as f,o as h,a as x,w as j,e as V,m as $,k,K as w,t as D,i as S,E as C,J as Y,c as F,a7 as M,d as L,g as U,F as I,l as E,U as O,L as B,M as H}from"./index-f93ac3f8.js";import{p as N}from"./patient-82861498.js";import{_ as P}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-8b18b9a3.js";import{u as T}from"./main-ee2e6726.js";import{u as q}from"./viewWrapper-1e6038f3.js";import{f as A}from"./index-a6b15905.js";import{_ as G}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-89cd9c2c.js";import"./VIMaskInput.vue_vue_type_script_lang-a1ff201b.js";import"./moment-c7f2cea7.js";const J=["onSubmit"],K={class:"columns"},W={class:"column"},Z={class:"help has-text-danger"},z={class:"column"},Q={class:"help has-text-danger"},R={class:"column"},X={class:"help has-text-danger"},ee={class:"column"},ae={class:"help has-text-danger"},te={class:"navigation-buttons"},le={class:"buttons is-right"},se=p({__name:"ScreeningPassedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(e,{emit:a}){let t,l;const{t:s}=m();g();const r=v({start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),n=([t,l]=y((()=>N().then((e=>e.result)))),t=await t,l(),t),i=b([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),p=async()=>{a("search",r)},C=async()=>{Object.assign(r,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:""}),a("clearForm")};return(a,t)=>{const l=c,s=_,m=u,g=f("Multiselect"),v=d,y=o;return h(),x(y,null,{default:j((()=>[V("form",{onSubmit:$(p,["prevent"])},[V("div",K,[V("div",W,[k(m,{label:a.$t("Start_date")},{default:j((()=>[k(s,null,{default:j((()=>[k(l,{modelValue:w(r).start_date,"onUpdate:modelValue":t[0]||(t[0]=e=>w(r).start_date=e)},null,8,["modelValue"]),V("p",Z,D(e.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),V("div",z,[k(m,{label:a.$t("End_date")},{default:j((()=>[k(s,null,{default:j((()=>[k(l,{modelValue:w(r).end_date,"onUpdate:modelValue":t[1]||(t[1]=e=>w(r).end_date=e)},null,8,["modelValue"]),V("p",Q,D(e.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),V("div",R,[k(m,{class:"is-curved-select",label:a.$t("Donor_categories")},{default:j((({id:l})=>[k(s,null,{default:j((()=>[k(g,{modelValue:w(r).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=e=>w(r).donor_category_id=e),attrs:{id:l},options:w(n),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),V("p",X,D(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),V("div",ee,[k(m,{class:"is-curved-select",label:a.$t("Visit_type")},{default:j((({id:l})=>[k(s,null,{default:j((()=>[k(g,{modelValue:w(r).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=e=>w(r).visit_type_id=e),attrs:{id:l},options:w(i),placeholder:a.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),V("p",ae,D(e.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),V("div",te,[V("div",le,[k(v,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:C},{default:j((()=>[S(D(a.$t("Clear")),1)])),_:1},8,["disabled"]),k(v,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:j((()=>[S(D(a.$t("Search")),1)])),_:1},8,["loading"])])])],40,J)])),_:1})}}}),re=e=>(B("data-v-1a35a9e0"),e=e(),H(),e),ne={class:"page-content-inner"},ie={class:"columns mb-3"},oe={class:"column"},de={class:"columns mt-1"},_e={class:"column"},ue={class:"columns"},ce={class:"column is-12"},pe=["textContent"],me={key:0,class:"flex-list-inner"},ge={key:1,class:"flex-list-inner"},ve=re((()=>V("img",{class:"light-image",src:n,alt:""},null,-1))),ye=re((()=>V("img",{class:"dark-image",src:i,alt:""},null,-1))),be={key:0},fe=G(p({__name:"index",async setup(n){let i,o;C(),g();const{t:d}=m(),_=T(),u=b(!1);q().setPageTitle(d("Screening")),Y({title:`${d("Screening-passed-donors-list")} - ${_.app.name}`});const c=v({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=F({get:()=>c.pagination.current_page,set:async e=>{S.page=e,await B(S)}}),f={orderNumber:{format:(e,a,t)=>`${t+1}`,align:"center"},screening_date:{label:d("Screening_date"),format:(e,a)=>{var t,l,s;return(null==(t=a.last_visit)?void 0:t.primary_screening_result)&&M(new Date(null==(s=null==(l=a.last_visit)?void 0:l.primary_screening_result)?void 0:s.created_at),"YYYY-MM-DD")}},name:{label:d("Donor_fullname")},birth_date:{label:d("Date-of-birth")},visit_date:{label:d("Visit_date"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.created_at)&&M(new Date(null==(l=a.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:d("Visit_type"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.visit_type)&&d(null==(l=a.last_visit)?void 0:l.visit_type)}},hemoglobin:{label:`${d("Hemoglobin")}, ${d("g/l")}`,format:(e,a)=>{var t,l;return null==(l=null==(t=a.last_visit)?void 0:t.primary_screening_result)?void 0:l.value},align:"center"},preliminary_blood_type:{label:d("Preliminary_blood_type"),format:(e,a)=>{var t,l,s;return null==(s=null==(l=null==(t=a.last_visit)?void 0:t.primary_screening_result)?void 0:l.blood_type)?void 0:s.label},align:"center"},laboratory_assistant_fullname:{label:d("Laboratory_assistant_fullname"),format:(e,a)=>{var t,l;return null==(l=null==(t=a.last_visit)?void 0:t.primary_screening_result)?void 0:l.created_by}}};b();const $=v({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[]}),S=v({page:1});async function B(e){var a,t;try{Object.assign(S,e),u.value=!0;const a=await A(e);Object.assign(c,a.result)}catch(l){Object.assign($,null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.errors)}finally{u.value=!1}}function H(e){$[e]=""}async function N(){c.data=[]}return[i,o]=y((()=>B(S))),await i,o(),(n,i)=>{const o=P,d=se,m=l,g=e,v=s,y=a,b=r,S=t;return h(),L("div",ne,[V("div",ie,[V("div",oe,[k(o,{"with-icons":"",separator:"bullet",items:[{label:w(_).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:n.$t("Screening")},{label:n.$t("Screening-passed-donors-list")}]},null,8,["items"])])]),V("div",de,[V("div",_e,[k(d,{"is-loading":w(u),errors:w($),onSearch:B,onClearForm:N,onClearError:H},null,8,["is-loading","errors"])])]),V("div",ue,[V("div",ce,[k(S,{columns:w(f),data:w(c).data,limit:w(c).pagination.per_page,total:w(c).pagination.total},{default:j((()=>[k(y,{rounded:"","no-header":!w(u)&&0===w(c).data.length},{"header-column":j((({column:e})=>["orderNumber"===e.key?(h(),L("span",{key:0,textContent:D(n.$t("donor_no"))},null,8,pe)):U("",!0)])),body:j((()=>[w(u)?(h(),L("div",me,[(h(!0),L(I,null,E(w(c).pagination.per_page,(e=>(h(),L("div",{key:e,class:"flex-table-item"},[k(g,null,{default:j((()=>[k(m,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):U("",!0),0===w(c).data.length?(h(),L("div",ge,[k(v,{title:n.$t("No_data"),subtitle:n.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:j((()=>[ve,ye])),_:1},8,["title","subtitle"])])):U("",!0)])),"body-cell":j((({row:e,column:a})=>["name"===a.key?(h(),L("span",be,D(e.first_name)+" "+D(e.last_name)+" "+D(e.father_name),1)):U("",!0)])),_:1},8,["no-header"]),w(c).data.length?(h(),x(b,{key:0,"current-page":w(p),"onUpdate:current-page":i[0]||(i[0]=e=>O(p)?p.value=e:null),class:"mt-5","item-per-page":w(c).pagination.per_page,"total-items":w(c).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):U("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-1a35a9e0"]]);export{fe as default};
