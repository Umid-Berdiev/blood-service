import{a as e,b as l,c as a,f as t,d as o,e as s,s as i,_ as n}from"./DonationContainerFormModal.vue_vue_type_script_setup_true_lang-7c487d91.js";import{_ as d}from"./VModal.vue_vue_type_style_index_0_lang-bd9f4090.js";import{_ as r}from"./SubmitButton.vue_vue_type_script_setup_true_lang-cc65dbea.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-264b74aa.js";import{u as c,_ as m,a as _,b as p}from"./VControl-6db07387.js";import{q as v,r as f,x as h,aj as b,y,c as g,o as V,d as $,$ as x,ak as k,K as U,e as D,b as z,Y as S,Z as j,p as C,U as w,f as F,t as L,k as M,w as B,F as Y,l as O,a as W,i as I,L as T,M as P,j as H,g as A,C as E,al as N,H as R,a8 as q,A as Z,a7 as J,m as K,E as G,J as Q}from"./index-f93ac3f8.js";import{_ as X}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as ee}from"./ClientOnly.vue_vue_type_script_lang-4537ec76.js";import{_ as le}from"./VFlex.vue_vue_type_style_index_0_lang-89cd9c2c.js";import{_ as ae}from"./VFlexItem.vue_vue_type_style_index_0_lang-abff2e0f.js";import{_ as te,a as oe,b as se}from"./VFlexTable.vue_vue_type_style_index_0_lang-0b6ebd63.js";import{_ as ie,a as ne,b as de,c as re,d as ue}from"./search-7-dark-c4e05ee5.js";import{_ as ce}from"./VCard.vue_vue_type_script_setup_true_lang-34c1a38f.js";import{_ as me}from"./VButton.vue_vue_type_style_index_0_lang-2943ff29.js";import{p as _e,a as pe}from"./patient-82861498.js";import{v as ve}from"./additionals-ec1b7c23.js";import{_ as fe}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-8b18b9a3.js";import{u as he}from"./main-ee2e6726.js";import{u as be}from"./viewWrapper-1e6038f3.js";import{f as ye}from"./additional-bd476d98.js";import"./IMaskDateInput.vue_vue_type_script_setup_true_lang-e7f94dfc.js";import"./VIMaskInput.vue_vue_type_script_lang-a1ff201b.js";import"./moment-c7f2cea7.js";const ge=["id","name","multiple"],Ve=v({__name:"VSelect",props:{raw:{type:Boolean},modelValue:{default:""},multiple:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:l}){var a;const t=e,o=f(c({create:!1,help:"VSelect"})),s=h((null==(a=null==o?void 0:o.field)?void 0:a.value)??t.modelValue),i=b();y(s,(()=>{l("update:modelValue",s.value)})),y((()=>t.modelValue),(()=>{s.value=t.modelValue}));const n=g((()=>t.raw?[]:["select",t.multiple&&"is-multiple"]));return(e,l)=>(V(),$("div",{class:F(U(n))},[x(D("select",C({id:U(o).id},U(i),{"onUpdate:modelValue":l[0]||(l[0]=e=>w(s)?s.value=e:null),name:U(o).id,multiple:t.multiple,onChange:l[1]||(l[1]=(...e)=>{var l,a;return(null==(l=U(o).field)?void 0:l.handleChange)&&(null==(a=U(o).field)?void 0:a.handleChange(...e))}),onBlur:l[2]||(l[2]=(...e)=>{var l,a;return(null==(l=U(o).field)?void 0:l.handleBlur)&&(null==(a=U(o).field)?void 0:a.handleBlur(...e))})}),[z(e.$slots,"default",S(j({selected:U(s),id:U(o).id})))],16,ge),[[k,U(s)]])],2))}}),$e=v({__name:"VOption",setup(e){const l=f(c({create:!1,help:"VOption"}));return(e,a)=>(V(),$("option",null,[z(e.$slots,"default",S(j(U(l))))]))}}),xe=e=>(T("data-v-26302d24"),e=e(),P(),e),ke={class:"box"},Ue={class:"is-size-5 mb-3"},De={class:"field is-horizontal"},ze={class:"field-label is-normal"},Se={class:"label"},je={class:"field-body"},Ce={class:"field is-horizontal"},we={class:"field-label is-normal"},Fe={class:"label"},Le=xe((()=>D("span",{class:"has-text-danger"},"*",-1))),Me={class:"field-body"},Be={class:"field is-horizontal"},Ye={class:"field-label"},Oe={class:"label"},We=xe((()=>D("span",{class:"has-text-danger"},"*",-1))),Ie={class:"field-body"},Te=X(v({__name:"WholeBloodDonationFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(e,{emit:l}){const a=e,t=g({get:()=>a.formState,set(e){l("update:formState",e)}});return(l,a)=>{const o=$e,s=Ve,i=m,n=_,d=u;return V(),$("div",ke,[D("h5",Ue,L(l.$t("Whole_blood_donation")),1),D("div",De,[D("div",ze,[D("label",Se,L(l.$t("Container")),1)]),D("div",je,[M(n,null,{default:B((()=>[M(i,{expanded:""},{default:B((()=>[M(s,{modelValue:U(t).container_id,"onUpdate:modelValue":a[0]||(a[0]=e=>U(t).container_id=e),class:"is-primary",placeholder:l.$t("Select")},{default:B((()=>[(V(!0),$(Y,null,O(e.containerList,((e,l)=>(V(),W(o,{key:l,value:e.id},{default:B((()=>[I(L(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),D("div",Ce,[D("div",we,[D("label",Fe,[I(L(l.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Le])]),D("div",Me,[M(n,null,{default:B((()=>[M(d,{modelValue:U(t).hemoconservative,"onUpdate:modelValue":a[1]||(a[1]=e=>U(t).hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),D("div",Be,[D("div",Ye,[D("label",Oe,[I(L(l.$t("Laboratory_taken_blood_amount_ml"))+" ",1),We])]),D("div",Ie,[M(n,null,{default:B((()=>[M(d,{modelValue:U(t).laboratory,"onUpdate:modelValue":a[2]||(a[2]=e=>U(t).laboratory=e),type:"text"},null,8,["modelValue"])])),_:1})])])])}}}),[["__scopeId","data-v-26302d24"]]),Pe=e=>(T("data-v-05e721e4"),e=e(),P(),e),He={class:"box"},Ae={class:"is-size-5 mb-3"},Ee={class:"field is-horizontal"},Ne={class:"field-label is-normal"},Re={class:"label"},qe={class:"field-body"},Ze=Pe((()=>D("hr",{class:"is-divider"},null,-1))),Je={class:"mb-3"},Ke={class:"field is-horizontal"},Ge={class:"field-label is-flex is-align-items-center"},Qe={class:"label"},Xe={class:"field-body"},el={class:"field"},ll={class:"control is-expended"},al={class:"field is-horizontal"},tl={class:"field-label is-normal"},ol={class:"label"},sl=Pe((()=>D("span",{class:"has-text-danger"},"*",-1))),il={class:"field-body"},nl=Pe((()=>D("hr",{class:"is-divider"},null,-1))),dl={class:"mb-3"},rl={class:"field is-horizontal"},ul={class:"field-label is-flex is-align-items-center"},cl={class:"label"},ml={class:"field-body"},_l={class:"field"},pl={class:"control is-expended"},vl={class:"field is-horizontal"},fl={class:"field-label is-normal"},hl={class:"label"},bl=Pe((()=>D("span",{class:"has-text-danger"},"*",-1))),yl={class:"field-body"},gl={class:"field is-horizontal"},Vl={class:"field-label is-normal"},$l={class:"label"},xl={class:"field-body"},kl=X(v({__name:"PlasmapheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,o=g({get:()=>t.formState,set(e){a("update:formState",e)}}),s=h(1);return y(s,(function(e){o.value.doses.length>e&&o.value.doses.pop(),o.value.doses.length<e&&o.value.doses.push(0)})),(a,t)=>{const i=$e,n=Ve,d=m,r=_,c=H("Multiselect"),v=u,f=p;return V(),$("div",He,[D("h5",Ae,L(a.$t("Plasmapheresis")),1),D("div",Ee,[D("div",Ne,[D("label",Re,L(a.$t("Apheresis_method")),1)]),D("div",qe,[M(r,null,{default:B((()=>[M(d,{expended:""},{default:B((()=>[M(n,{modelValue:U(o).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>U(o).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:B((()=>[(V(!0),$(Y,null,O(U(e),((e,l)=>(V(),W(i,{key:l,value:e.value},{default:B((()=>[I(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===U(o).apheresis_method?(V(),$(Y,{key:0},[Ze,D("h5",Je,L(a.$t("First_fence")),1),D("div",Ke,[D("div",Ge,[D("label",Qe,L(a.$t("Container")),1)]),D("div",Xe,[D("div",el,[D("div",ll,[M(c,{modelValue:U(o).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>U(o).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",al,[D("div",tl,[D("label",ol,[I(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),sl])]),D("div",il,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>U(o).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),nl,D("h5",dl,L(a.$t("Second_fence")),1),D("div",rl,[D("div",ul,[D("label",cl,L(a.$t("Container")),1)]),D("div",ml,[D("div",_l,[D("div",pl,[M(c,{modelValue:U(o).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>U(o).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",vl,[D("div",fl,[D("label",hl,[I(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),bl])]),D("div",yl,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>U(o).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):"device"===U(o).apheresis_method?(V(),$(Y,{key:1},[D("div",gl,[D("div",Vl,[D("label",$l,L(a.$t("Received_plasma_amount_ml")),1)]),D("div",xl,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).plasma,"onUpdate:modelValue":t[5]||(t[5]=e=>U(o).plasma=e),type:"text"},null,8,["modelValue"])])),_:1})])]),M(r,{horizontal:"",class:"is-align-items-center"},{default:B((()=>[M(f,{class:"mr-3"},{default:B((()=>[I(L(a.$t("Divided_into_doses")),1)])),_:1}),M(d,null,{default:B((()=>[M(v,{modelValue:U(s),"onUpdate:modelValue":t[6]||(t[6]=e=>w(s)?s.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(V(!0),$(Y,null,O(U(s),((e,l)=>(V(),W(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:B((()=>[M(f,{class:"mr-3"},{default:B((()=>[I(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),M(d,{raw:"",subcontrol:""},{default:B((()=>[M(v,{modelValue:U(o).doses[l],"onUpdate:modelValue":e=>U(o).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):A("",!0)])}}}),[["__scopeId","data-v-05e721e4"]]),Ul=e=>(T("data-v-24cb3ffd"),e=e(),P(),e),Dl={class:"box"},zl={class:"is-size-5 mb-3"},Sl={class:"field is-horizontal"},jl={class:"field-label is-normal"},Cl={class:"label"},wl={class:"field-body"},Fl=Ul((()=>D("hr",{class:"is-divider"},null,-1))),Ll={class:"mb-3"},Ml={class:"field is-horizontal"},Bl={class:"field-label is-flex is-align-items-center"},Yl={class:"label"},Ol={class:"field-body"},Wl={class:"field"},Il={class:"control is-expended"},Tl={class:"field is-horizontal"},Pl={class:"field-label is-normal"},Hl={class:"label"},Al=Ul((()=>D("span",{class:"has-text-danger"},"*",-1))),El={class:"field-body"},Nl=Ul((()=>D("hr",{class:"is-divider"},null,-1))),Rl={class:"mb-3"},ql={class:"field is-horizontal"},Zl={class:"field-label is-flex is-align-items-center"},Jl={class:"label"},Kl={class:"field-body"},Gl={class:"field"},Ql={class:"control is-expended"},Xl={class:"field is-horizontal"},ea={class:"field-label is-normal"},la={class:"label"},aa={class:"field-body"},ta=Ul((()=>D("hr",{class:"is-divider"},null,-1))),oa={class:"mb-3"},sa={class:"field is-horizontal"},ia={class:"field-label is-flex is-align-items-center"},na={class:"label"},da={class:"field-body"},ra={class:"field"},ua={class:"control is-expended"},ca={class:"field is-horizontal"},ma={class:"field-label is-normal"},_a={class:"label"},pa={class:"field-body"},va=Ul((()=>D("hr",{class:"is-divider"},null,-1))),fa={class:"mb-3"},ha={class:"field is-horizontal"},ba={class:"field-label is-flex is-align-items-center"},ya={class:"label"},ga={class:"field-body"},Va={class:"field"},$a={class:"control is-expended"},xa={class:"field is-horizontal"},ka={class:"field-label is-normal"},Ua={class:"label"},Da={class:"field-body"},za=Ul((()=>D("hr",{class:"is-divider"},null,-1))),Sa=Ul((()=>D("br",null,null,-1))),ja={class:"field is-horizontal"},Ca={class:"field-label is-normal"},wa={class:"label"},Fa={class:"field-body"},La=X(v({__name:"PlateletpheresisFormBlock",props:{formState:null,containerList:null},emits:["update:formState"],setup(l,{emit:a}){const t=l,o=g({get:()=>t.formState,set(e){a("update:formState",e)}}),s=h(1);return y(s,(function(e){o.value.doses.length>e&&o.value.doses.pop(),o.value.doses.length<e&&o.value.doses.push(0)})),(a,t)=>{const i=$e,n=Ve,d=m,r=_,c=H("Multiselect"),v=u,f=p;return V(),$("div",Dl,[D("h5",zl,L(a.$t("Plateletpheresis")),1),D("div",Sl,[D("div",jl,[D("label",Cl,L(a.$t("Apheresis_method")),1)]),D("div",wl,[M(r,null,{default:B((()=>[M(d,{expanded:""},{default:B((()=>[M(n,{modelValue:U(o).apheresis_method,"onUpdate:modelValue":t[0]||(t[0]=e=>U(o).apheresis_method=e),class:"is-primary",placeholder:a.$t("Select")},{default:B((()=>[(V(!0),$(Y,null,O(U(e),((e,l)=>(V(),W(i,{key:l,value:e.value},{default:B((()=>[I(L(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})])]),"manual"===U(o).apheresis_method?(V(),$(Y,{key:0},[Fl,D("h5",Ll,L(a.$t("First_fence")),1),D("div",Ml,[D("div",Bl,[D("label",Yl,L(a.$t("Container")),1)]),D("div",Ol,[D("div",Wl,[D("div",Il,[M(c,{modelValue:U(o).first_container_id,"onUpdate:modelValue":t[1]||(t[1]=e=>U(o).first_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",Tl,[D("div",Pl,[D("label",Hl,[I(L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1),Al])]),D("div",El,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).first_hemoconservative,"onUpdate:modelValue":t[2]||(t[2]=e=>U(o).first_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),Nl,D("h5",Rl,L(a.$t("Second_fence")),1),D("div",ql,[D("div",Zl,[D("label",Jl,L(a.$t("Container")),1)]),D("div",Kl,[D("div",Gl,[D("div",Ql,[M(c,{modelValue:U(o).second_container_id,"onUpdate:modelValue":t[3]||(t[3]=e=>U(o).second_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",Xl,[D("div",ea,[D("label",la,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),D("div",aa,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).second_hemoconservative,"onUpdate:modelValue":t[4]||(t[4]=e=>U(o).second_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),ta,D("h5",oa,L(a.$t("Third_fence")),1),D("div",sa,[D("div",ia,[D("label",na,L(a.$t("Container")),1)]),D("div",da,[D("div",ra,[D("div",ua,[M(c,{modelValue:U(o).third_container_id,"onUpdate:modelValue":t[5]||(t[5]=e=>U(o).third_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",ca,[D("div",ma,[D("label",_a,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),D("div",pa,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).third_hemoconservative,"onUpdate:modelValue":t[6]||(t[6]=e=>U(o).third_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])]),va,D("h5",fa,L(a.$t("Fourth_fence")),1),D("div",ha,[D("div",ba,[D("label",ya,L(a.$t("Container")),1)]),D("div",ga,[D("div",Va,[D("div",$a,[M(c,{modelValue:U(o).fourth_container_id,"onUpdate:modelValue":t[7]||(t[7]=e=>U(o).fourth_container_id=e),options:l.containerList,placeholder:a.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",xa,[D("div",ka,[D("label",Ua,L(a.$t("Hemoconservative_taken_blood_amount_ml"))+" ",1)]),D("div",Da,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).fourth_hemoconservative,"onUpdate:modelValue":t[8]||(t[8]=e=>U(o).fourth_hemoconservative=e),type:"text"},null,8,["modelValue"])])),_:1})])])],64)):A("",!0),"device"===U(o).apheresis_method?(V(),$(Y,{key:1},[za,Sa,D("div",ja,[D("div",Ca,[D("label",wa,L(a.$t("Received_platelet_concentrate_amount_ml")),1)]),D("div",Fa,[M(r,null,{default:B((()=>[M(v,{modelValue:U(o).thromboconcentrate1,"onUpdate:modelValue":t[9]||(t[9]=e=>U(o).thromboconcentrate1=e),type:"text",style:{width:"50%"}},null,8,["modelValue"])])),_:1})])]),M(r,{horizontal:"",class:"is-align-items-center"},{default:B((()=>[M(f,{class:"mr-3"},{default:B((()=>[I(L(a.$t("Divided_into_doses")),1)])),_:1}),M(d,null,{default:B((()=>[M(v,{modelValue:U(s),"onUpdate:modelValue":t[10]||(t[10]=e=>w(s)?s.value=e:null),type:"number",min:1,max:10,style:{width:"5rem"}},null,8,["modelValue"])])),_:1})])),_:1}),(V(!0),$(Y,null,O(U(s),((e,l)=>(V(),W(r,{key:l,horizontal:"",class:"is-align-items-center"},{default:B((()=>[M(f,{class:"mr-3"},{default:B((()=>[I(L(e)+"-"+L(a.$t("Dose")),1)])),_:2},1024),M(d,{raw:"",subcontrol:""},{default:B((()=>[M(v,{modelValue:U(o).doses[l],"onUpdate:modelValue":e=>U(o).doses[l]=e,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128))],64)):A("",!0)])}}}),[["__scopeId","data-v-24cb3ffd"]]),Ma=["value"],Ba=v({__name:"DatePicker",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,{t:t,locale:o}=E(),s=f({type:"string",mask:"DD.MM.YYYY"}),i=g({get:()=>a.modelValue,set(e){l("update:modelValue",e)}});return(e,l)=>{const a=m,t=_,n=H("VDatePicker"),d=ee;return V(),W(d,null,{default:B((()=>[M(n,{modelValue:U(i),"onUpdate:modelValue":l[0]||(l[0]=e=>w(i)?i.value=e:null),locale:U(o),color:"green","trim-weeks":"","model-config":U(s)},{default:B((({inputValue:e,inputEvents:l})=>[M(t,null,{default:B((()=>[M(a,{icon:"feather:calendar"},{default:B((()=>[D("input",C({class:"input v-input",type:"text",value:e},N(l,!0)),null,16,Ma)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","locale","model-config"])])),_:1})}}}),Ya=e=>(T("data-v-6e1bdae2"),e=e(),P(),e),Oa={class:"box mt-3"},Wa={class:"is-size-5 mb-3"},Ia={class:"field is-horizontal"},Ta={class:"field-label is-normal"},Pa={class:"label"},Ha=["value"],Aa={class:"field is-horizontal"},Ea={class:"field-label is-normal"},Na={class:"label"},Ra={class:"field-body"},qa={class:"field"},Za={class:"control"},Ja={class:"help has-text-danger"},Ka={class:"field is-horizontal"},Ga={class:"field-label is-normal"},Qa={class:"label"},Xa={class:"field-body"},et={class:"field"},lt={class:"control"},at={class:"field"},tt={class:"control"},ot={class:"field is-horizontal"},st={class:"field-label is-normal"},it={class:"label"},nt={class:"field-body"},dt={class:"field"},rt={class:"control"},ut=Ya((()=>D("hr",{class:"is-divider"},null,-1))),ct=Ya((()=>D("hr",{class:"is-divider"},null,-1))),mt=Ya((()=>D("hr",{class:"is-divider"},null,-1))),_t={class:"box"},pt={class:"is-size-5 mb-3"},vt={class:"field is-horizontal"},ft={class:"field-label is-normal"},ht={class:"label"},bt={class:"field-body"},yt={class:"field"},gt={class:"control is-expended"},Vt=X(v({__name:"DonationDataEntryFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null,donationTypes:null},emits:["update:isOpen","update:list","add:Container"],async setup(e,{emit:u}){let c,m;const _=e,p=R(),{t:v}=E(),b=h(v("Donation_data_entry_form")),x=h(!1),k=h({date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0}),z=f({date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),S=h([]),j=h([]),C=h(!1),w=h({}),F=g((()=>{var e;return null==(e=_.donationTypes.find((e=>{var l,a;return e.id==(null==(a=null==(l=_.patient)?void 0:l.last_visit)?void 0:a.donation_type_id)})))?void 0:e.name}));async function O(){var e,l,a,t,o,s;try{x.value=!0,await i(null==(l=null==(e=_.patient)?void 0:e.last_visit)?void 0:l.id,k.value),p.success(v("Data_saved_successfully")),u("update:list"),W()}catch(n){(null==(a=n.response)?void 0:a.data.error)?p.error(null==(t=n.response)?void 0:t.data.error):Object.assign(z,null==(s=null==(o=n.response)?void 0:o.data)?void 0:s.errors)}finally{x.value=!1}}function W(){k.value={date:"",status:"",status_type:"",doses:[0],postinfusion_reaction_id:null,container_id:null,hemoconservative:null,laboratory:null,sent_to:"",apheresis_method:"",first_container_id:null,first_hemoconservative:null,second_container_id:null,second_hemoconservative:null,third_container_id:null,third_hemoconservative:null,fourth_container_id:null,fourth_hemoconservative:null,plasma:0,thromboconcentrate:0},Object.assign(z,{date:[],status:[],status_type:[],doses:[],postinfusion_reaction_id:[],container_id:[],hemoconservative:[],laboratory:[],sent_to:[],apheresis_method:[],first_container_id:[],first_hemoconservative:[],second_container_id:[],second_hemoconservative:[],third_container_id:[],third_hemoconservative:[],fourth_container_id:[],fourth_hemoconservative:[],plasma:[],thromboconcentrate:[]}),u("update:isOpen",!1)}async function T(){const e=await t();S.value=e.result.data}return[c,m]=q((()=>async function(){try{const e=await a();j.value=e.result}catch(e){p.error(e.message)}}())),await c,m(),Z((async function(){await T()})),y((()=>{var e,l;return null==(l=null==(e=_.patient)?void 0:e.last_visit)?void 0:l.id}),(async e=>{var a;if(e){const t=await l(e);k.value=t.result,(a=k.value).doses??(a.doses=[0]),k.value.date?k.value.date:J(new Date,"DD.MM.YYYY")}})),(l,a)=>{const t=ae,i=le,u=Ba,c=H("Multiselect"),m=La,_=kl,p=Te,v=r,f=d,h=n;return V(),$(Y,null,[M(f,{open:e.isOpen,size:"medium",title:b.value,actions:"right",onClose:W},{content:B((()=>{var n,d,r,v,f,h;return[M(i,{"column-gap":"1rem"},{default:B((()=>[M(t,null,{default:B((()=>[I(L(l.$t("Recommended_single_donation_volume_ml"))+":",1)])),_:1}),M(t,null,{default:B((()=>[I("0")])),_:1})])),_:1}),D("div",Oa,[D("h5",Wa,L(l.$t("Donation_results")),1),D("div",Ia,[D("div",Ta,[D("label",Pa,L(l.$t("Donation_type")),1)]),D("input",{class:"input",value:U(F),disabled:""},null,8,Ha)]),D("div",Aa,[D("div",Ea,[D("label",Na,L(l.$t("Donation_date")),1)]),D("div",Ra,[D("div",qa,[D("div",Za,[M(u,{modelValue:k.value.date,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.date=e)},null,8,["modelValue"]),D("p",Ja,L(z.date[0]),1)])])])]),D("div",Ka,[D("div",Ga,[D("label",Qa,L(l.$t("Completed_donation_status")),1)]),D("div",Xa,[D("div",et,[D("div",lt,[M(c,{modelValue:k.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.status=e),options:U(o),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])]),D("div",at,[D("div",tt,[M(c,{modelValue:k.value.status_type,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.status_type=e),options:U(s),placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])]),D("div",ot,[D("div",st,[D("label",it,L(l.$t("Post-infusion_reaction")),1)]),D("div",nt,[D("div",dt,[D("div",rt,[M(c,{modelValue:k.value.postinfusion_reaction_id,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value.postinfusion_reaction_id=e),options:j.value,placeholder:l.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem",margin:0}},null,8,["modelValue","options","placeholder"])])])])])]),1===(null==(d=null==(n=e.patient)?void 0:n.last_visit)?void 0:d.donation_type_id)?(V(),$(Y,{key:0},[ut,M(m,{"form-state":k.value,"onUpdate:form-state":a[4]||(a[4]=e=>k.value=e),"container-list":S.value},null,8,["form-state","container-list"])],64)):A("",!0),2===(null==(v=null==(r=e.patient)?void 0:r.last_visit)?void 0:v.donation_type_id)?(V(),$(Y,{key:1},[ct,M(_,{"form-state":k.value,"onUpdate:form-state":a[5]||(a[5]=e=>k.value=e),"container-list":S.value},null,8,["form-state","container-list"])],64)):A("",!0),3===(null==(h=null==(f=e.patient)?void 0:f.last_visit)?void 0:h.donation_type_id)?(V(),$(Y,{key:2},[mt,M(p,{"form-state":k.value,"onUpdate:form-state":a[6]||(a[6]=e=>k.value=e),"container-list":S.value},null,8,["form-state","container-list"])],64)):A("",!0),D("div",_t,[D("h5",pt,L(l.$t("Component_Product_Transfer_Information")),1),D("div",vt,[D("div",ft,[D("label",ht,L(l.$t("Transferred")),1)]),D("div",bt,[D("div",yt,[D("div",gt,[M(c,{modelValue:k.value.sent_to,"onUpdate:modelValue":a[7]||(a[7]=e=>k.value.sent_to=e),options:[{value:"recycling",label:"на переработку"},{value:"sterility",label:"на контроль стерильности"}],placeholder:l.$t("Select"),style:{minWidth:"15rem",margin:0}},null,8,["modelValue","placeholder"])])])])])])]})),action:B((()=>[D("button",{class:"button is-info is-outlined",onClick:a[8]||(a[8]=e=>C.value=!0)},L(l.$t("Add_container")),1),M(v,{loading:x.value,onClick:O},null,8,["loading"])])),_:1},8,["open","title"]),M(h,{"is-open":C.value,"onUpdate:is-open":a[9]||(a[9]=e=>C.value=e),container:w.value,"onUpdate:list":T},null,8,["is-open","container"])],64)}}}),[["__scopeId","data-v-6e1bdae2"]]),$t=["onSubmit"],xt={class:"columns"},kt={class:"column"},Ut={class:"help has-text-danger"},Dt={class:"column"},zt={class:"help has-text-danger"},St={class:"column"},jt={class:"help has-text-danger"},Ct={class:"column is-3"},wt={class:"help has-text-danger"},Ft={class:"navigation-buttons"},Lt={class:"buttons is-right"},Mt=v({__name:"DonorsListFilterForm",props:{isLoading:{type:Boolean},errors:null,donationTypes:null},emits:["search","clearError","clearForm"],setup(e,{emit:l}){E(),R();const a=f({donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),t=h([]);Z((async()=>{t.value=await _e().then((e=>e.result))}));const o=async()=>{l("search",a)},s=async()=>{Object.assign(a,{donor_category_id:"",visit_type:"",donation_type_id:"",donation_code:""}),l("clearForm")};return(l,i)=>{const n=H("Multiselect"),d=m,r=_,c=u,p=me,v=ce;return V(),W(v,null,{default:B((()=>[D("form",{onSubmit:K(o,["prevent"])},[D("div",xt,[D("div",kt,[M(r,{class:"is-curved-select",label:l.$t("Donor_categories")},{default:B((({id:o})=>[M(d,null,{default:B((()=>[M(n,{modelValue:U(a).donor_category_id,"onUpdate:modelValue":i[0]||(i[0]=e=>U(a).donor_category_id=e),attrs:{id:o},options:U(t),placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),D("p",Ut,L(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",Dt,[M(r,{class:"is-curved-select",label:l.$t("Visit_type")},{default:B((({id:t})=>[M(d,null,{default:B((()=>[M(n,{modelValue:U(a).visit_type,"onUpdate:modelValue":i[1]||(i[1]=e=>U(a).visit_type=e),attrs:{id:t},options:U(ve),placeholder:l.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),D("p",zt,L(e.errors.visit_type[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",St,[M(r,{class:"is-curved-select",label:l.$t("Donation_type")},{default:B((({id:t})=>[M(d,null,{default:B((()=>[M(n,{modelValue:U(a).donation_type_id,"onUpdate:modelValue":i[2]||(i[2]=e=>U(a).donation_type_id=e),attrs:{id:t},options:e.donationTypes,placeholder:l.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),D("p",jt,L(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",Ct,[M(r,{class:"is-curved-select",label:l.$t("Donation_code")},{default:B((({id:t})=>[M(d,null,{default:B((()=>[M(c,{modelValue:U(a).donation_code,"onUpdate:modelValue":i[3]||(i[3]=e=>U(a).donation_code=e),attrs:{id:t},placeholder:l.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),D("p",wt,L(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),D("div",Ft,[D("div",Lt,[M(p,{type:"button",color:"warning",bold:"",disabled:e.isLoading,tabindex:"0",onClick:s},{default:B((()=>[I(L(l.$t("Clear")),1)])),_:1},8,["disabled"]),M(p,{type:"submit",color:"primary",bold:"",loading:e.isLoading,tabindex:"0"},{default:B((()=>[I(L(l.$t("Search")),1)])),_:1},8,["loading"])])])],40,$t)])),_:1})}}}),Bt=e=>(T("data-v-d8039abc"),e=e(),P(),e),Yt={class:"page-content-inner"},Ot={class:"columns mb-3"},Wt={class:"column"},It={class:"columns mt-1"},Tt={class:"column"},Pt={class:"columns"},Ht={class:"column is-12"},At=["textContent"],Et={key:0,class:"flex-list-inner"},Nt={key:1,class:"flex-list-inner"},Rt=Bt((()=>D("img",{class:"light-image",src:re,alt:""},null,-1))),qt=Bt((()=>D("img",{class:"dark-image",src:ue,alt:""},null,-1))),Zt=["onClick"],Jt=X(v({__name:"index",async setup(e){let l,a;G(),R();const{t:t}=E(),o=he(),s=h(!1);be().setPageTitle(t("Donations")),Q({title:`${t("Donors_for_donation")} - ${o.app.name}`});const i=f({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n={orderNumber:{format:(e,l,a)=>a+1},name:{label:t("Donor_fullname"),grow:!0},birth_date:{label:t("Date-of-birth")},visit_type:{label:t("Visit_type"),format:(e,l)=>{var a,o;return(null==(a=l.last_visit)?void 0:a.visit_type)&&t(null==(o=l.last_visit)?void 0:o.visit_type)}},visit_date:{label:t("Visit_date"),format:(e,l)=>{var a,t;return(null==(a=l.last_visit)?void 0:a.created_at)&&J(new Date(null==(t=l.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:t("Donation_type"),format:(e,l)=>{var a,t;return null==(t=null==(a=l.last_visit)?void 0:a.donation_type)?void 0:t.name}},donation_code:{label:t("Donation_code"),format:(e,l)=>{var a;return null==(a=l.last_visit)?void 0:a.donation_code}},donor_category:{label:t("Donor_category"),format:(e,l)=>{var a;return null==(a=l.category)?void 0:a.name}}},d=f({donor_category_id:[],visit_type:[],donation_type_id:[],donation_code:[]}),r=f({visit_type_id:null,donation_type_id:null,donation_code:null,category_id:null}),u=h(null),c=h(!1),m=h([]);async function _(e){var l,a;try{s.value=!0,Object.assign(r,e);const l={...e,page:i.pagination.current_page},a=await pe(l);Object.assign(i,a.result)}catch(t){Object.assign(d,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{s.value=!1}}function p(e){d[e]=""}async function v(){i.data=[]}return[l,a]=q((()=>_(r))),await l,a(),Z((async function(){const e=await ye();m.value=e.result})),y(c,(e=>{e||(u.value=null)})),y((()=>i.pagination.current_page),(async e=>{e&&await _(r)})),(e,l)=>{const a=fe,t=Mt,r=ie,f=te,h=ne,b=oe,y=de,g=se,x=Vt;return V(),$("div",Yt,[D("div",Ot,[D("div",Wt,[M(a,{"with-icons":"",separator:"bullet",items:[{label:U(o).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Donations")},{label:e.$t("Donors_for_donation")}]},null,8,["items"])])]),D("div",It,[D("div",Tt,[M(t,{"is-loading":U(s),"donation-types":U(m),errors:U(d),onSearch:_,onClearForm:v,onClearError:p},null,8,["is-loading","donation-types","errors"])])]),D("div",Pt,[D("div",Ht,[M(g,{columns:U(n),data:U(i).data,limit:U(i).pagination.per_page,total:U(i).pagination.total},{default:B((()=>[M(b,{rounded:"","no-header":!U(s)&&0===U(i).data.length},{"header-column":B((({column:l})=>["orderNumber"===l.key?(V(),$("span",{key:0,textContent:L(e.$t("Donor_#"))},null,8,At)):A("",!0)])),body:B((()=>[U(s)?(V(),$("div",Et,[(V(!0),$(Y,null,O(U(i).pagination.per_page,(e=>(V(),$("div",{key:e,class:"flex-table-item"},[M(f,null,{default:B((()=>[M(r,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):A("",!0),0===U(i).data.length?(V(),$("div",Nt,[M(h,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:B((()=>[Rt,qt])),_:1},8,["title","subtitle"])])):A("",!0)])),"body-cell":B((({row:e,column:l})=>["name"===l.key?(V(),$("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){u.value=e,c.value=!0}(e)},L(e.first_name)+" "+L(e.last_name)+" "+L(e.father_name),9,Zt)):A("",!0)])),_:1},8,["no-header"]),U(i).data.length?(V(),W(y,{key:0,"current-page":U(i).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>U(i).pagination.current_page=e),class:"mt-5","item-per-page":U(i).pagination.per_page,"total-items":U(i).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):A("",!0)])),_:1},8,["columns","data","limit","total"])])]),M(x,{"is-open":U(c),"onUpdate:is-open":l[1]||(l[1]=e=>w(c)?c.value=e:null),patient:U(u),"donation-types":U(m)},null,8,["is-open","patient","donation-types"])])}}}),[["__scopeId","data-v-d8039abc"]]);export{Jt as default};
