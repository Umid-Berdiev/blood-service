import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-f3f542ff.js";import{_ as a,a as t,b as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{c as l,d as n,_ as o,a as r,b as i}from"./search-7-dark-f0facebe.js";import{_ as u}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-1dc8c767.js";import{_ as p}from"./VAvatar.vue_vue_type_style_index_0_lang-ed7acfd9.js";import{_ as m}from"./VPlaceload-2a65ae53.js";import{a as d,l as c,m as _,U as g,r as v,b as y,c as f,w as h,p as b,u as j,Q as x,q as w,i as k,y as V,M as E,W as U,V as $,t as D}from"./chunk-BGPNDDXN-dcda8805.js";import{_ as z,a as N,b as A}from"./SearchInput-6fe72f31.js";import{_ as B}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as C}from"./chunk-DRAQDPQ2-4514f14e.js";import{u as F}from"./@vueuse_head-0d019878.js";import{u as P}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as T}from"./useNotyf-1536ae84.js";import{u as L}from"./main-a3a6220c.js";import{u as M}from"./viewWrapper-c60f0ce7.js";import{a as R}from"./userSession-0c0e9684.js";import"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import"./@vueuse_core-098eb702.js";import"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import"./VDropdown.vue_vue_type_style_index_0_lang-a9625316.js";import"./VIcon.vue_vue_type_script_setup_true_lang-287aecd9.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VControl-fc151345.js";import"./pinia-3af6ce52.js";const Q=d({__name:"VPlaceloadAvatar",props:{size:{default:void 0},rounded:{default:"full"},centered:{type:Boolean},disabled:{type:Boolean}},setup(e){const a=e;return(e,t)=>(c(),_("div",{class:g(["placeload-avatar",[!a.disabled&&"loads",a.size&&`is-${a.size}`,a.centered&&"is-centered",a.rounded&&`is-rounded-${a.rounded}`]])},null,2))}}),S=R();const q={class:"page-content-inner"},G={class:"columns"},I={class:"column is-12"},W={key:0,class:"is-flex-grow-0",textContent:"#"},J={key:0,class:"flex-list-inner"},O={key:1,class:"flex-list-inner"},X=x("img",{class:"light-image",src:l,alt:""},null,-1),H=x("img",{class:"dark-image",src:n,alt:""},null,-1),K={class:"dark-text"},Y={key:1},Z={class:"dark-text"},ee=d({__name:"index",setup(l){const n=C(),d=T(),{t:g}=P(),R=L();M().setPageTitle(g("Users_List")),F({title:`${g("Users")} - ${R.app.name}`});const ee=v({pagination:{current_page:1,per_page:10,total:10,total_pages:1},result:[]}),ae=y(),te=f({get:()=>ee.pagination.current_page,set:async e=>{await oe(e)}}),se={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:"Fullname",media:!0,grow:!0,sortable:!0},email:{label:"Email",sortable:!0},role:{label:"Role",sortable:!0},department:{label:"Department",grow:!0,sortable:!0},actions:{label:"",align:"end"}},le=y(!1),ne=f({get:()=>"",async set(e){console.log(e)}});async function oe(e=1){var a,t,s;try{le.value=!0;const a=await async function(e){try{const{data:a}=await S({url:"/api/admin/employee",params:e});return a.data}catch(a){throw a}}({page:e,per_page:ee.pagination.per_page});Object.assign(ee,a)}catch(l){d.error(g(null==(s=null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.error)?void 0:s.message))}finally{le.value=!1}}async function re(){await async function(e){try{const{data:a}=await S({url:`/api/admin/employee/${e}`,method:"DELETE"})}catch(a){throw a}}(ae.value),oe()}return y(),h((()=>ee.pagination.per_page),(async()=>{await oe()})),(l,d)=>{const g=B,v=z,y=N,f=A,h=Q,C=o,F=a,P=m,T=r,L=p,M=u,S=t,oe=i,ie=s,ue=e;return c(),_("div",q,[b(g,{"with-icons":"",separator:"bullet",items:[{label:j(R).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:l.$t("Users"),to:{name:"/app/users/"}}]},null,8,["items"]),x("div",G,[x("div",I,[b(ie,{class:"mt-4",columns:j(se),data:j(ee).result,limit:j(ee).pagination.per_page,total:j(ee).pagination.total},{default:w((e=>[b(f,null,{left:w((()=>[b(v,{modelValue:j(ne),"onUpdate:modelValue":d[0]||(d[0]=e=>k(ne)?ne.value=e:null)},null,8,["modelValue"])])),right:w((()=>[b(y,{modelValue:j(ee).pagination.per_page,"onUpdate:modelValue":d[1]||(d[1]=e=>j(ee).pagination.per_page=e)},null,8,["modelValue"])])),_:1}),b(S,{rounded:"","no-header":!j(le)&&0===j(ee).result.length},{"header-column":w((({column:e})=>["orderNumber"===e.key?(c(),_("span",W)):V("",!0)])),body:w((()=>[j(le)?(c(),_("div",J,[(c(!0),_(E,null,U(j(ee).pagination.per_page,(e=>(c(),_("div",{key:e,class:"flex-table-item"},[b(F,{column:{grow:!0,media:!0}},{default:w((()=>[b(h,{size:"medium"}),b(C,{lines:2,width:"60%","last-line-width":"20%",class:"mx-2"})])),_:1}),b(F,null,{default:w((()=>[b(P,{width:"60%",class:"mx-1"})])),_:1}),b(F,null,{default:w((()=>[b(P,{width:"60%",class:"mx-1"})])),_:1}),b(F,{column:{align:"end"}},{default:w((()=>[b(P,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===j(ee).result.length?(c(),_("div",O,[b(T,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:w((()=>[X,H])),_:1})])):V("",!0)])),"body-cell":w((({row:e,column:a})=>["name"===a.key?(c(),_(E,{key:0},[b(L,{size:"medium",picture:e.avatar},null,8,["picture"]),x("div",null,[x("span",K,$(e.firstname)+" "+$(e.lastname),1)])],64)):V("",!0),"role"===a.key?(c(),_("div",Y,[x("span",Z,$(e.role.name),1)])):V("",!0),"actions"===a.key?(c(),D(M,{key:2,onEdit:a=>{return t=e.id,ae.value=t,void n.push(`/app/users/${t}`);var t},onRemove:a=>async function(e){ae.value=e,R.$patch({confirmModalState:!0})}(e.id)},null,8,["onEdit","onRemove"])):V("",!0)])),_:1},8,["no-header"]),j(ee).result.length?(c(),D(oe,{key:0,"current-page":j(te),"onUpdate:current-page":d[2]||(d[2]=e=>k(te)?te.value=e:null),class:"mt-5","item-per-page":j(ee).pagination.per_page,"total-items":j(ee).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):V("",!0)])),_:1},8,["columns","data","limit","total"])])]),b(ue,{onConfirmAction:re})])}}});export{ee as default};
