import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{c as s,d as r,_ as n,a as l,b as o}from"./search-7-dark-f0facebe.js";import{_ as i}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang-a076e0f5.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import{_ as p}from"./VButtons.vue_vue_type_script_setup_true_lang-cc776021.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as m}from"./VFlexItem.vue_vue_type_style_index_0_lang-ff50e60d.js";import{_ as d}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as c}from"./chunk-DRAQDPQ2-4514f14e.js";import{a as g,b as f,r as v,c as y,s as h,l as b,m as j,p as k,q as x,u as $,X as w,v as V,V as C,Q as D,y as F,M as I,W as P,t as R,i as U}from"./chunk-BGPNDDXN-dcda8805.js";import{u as B}from"./@vueuse_head-0d019878.js";import{u as E}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as N}from"./useNotyf-1536ae84.js";import{u as A}from"./viewWrapper-c60f0ce7.js";import{k as G}from"./patient-3eef0e53.js";import{u as O}from"./main-a3a6220c.js";import{_ as Q}from"./lodash-94527813.js";import"./@vueuse_core-098eb702.js";import"./VPlaceload-2a65ae53.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VCard.vue_vue_type_script_setup_true_lang-a9232da9.js";import"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import"./VControl-fc151345.js";import"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import"./pinia-3af6ce52.js";import"./userSession-0c0e9684.js";const T={class:"page-content-inner"},q={class:"columns mt-1"},L={class:"column"},M={class:"columns"},S={class:"column is-12"},W={key:0,class:"is-flex-grow-0",textContent:"#"},X={key:0,class:"flex-list-inner"},z={key:1,class:"flex-list-inner"},H=D("img",{class:"light-image",src:s,alt:""},null,-1),J=D("img",{class:"dark-image",src:r,alt:""},null,-1),K=Q.isEmpty,Y=g({__name:"index",setup(s){const r=c(),g=N(),{t:Q}=E(),Y=O(),Z=f(!1),ee=v({lastname:"",firstname:"",middlename:"",passpordId:""});A().setPageTitle(Q("Registration")),B({title:`${Q("Unified-donor-register")} - ${Y.app.name}`});const ae=v({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),te=y({get:()=>ae.pagination.current_page,set:async e=>{se.page=e,await ne(se)}}),se=v({page:1}),re={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:Q("Category"),format:e=>e.name},name:{label:Q("Fullname")},gender:{label:Q("Gender"),format:e=>Q(e)},birth_date:{label:Q("Date-of-birth")},full_address:{label:Q("Address")},phone_number:{label:Q("Phone_number")},isDiverted:{label:Q("Diverted_from_donation")}};async function ne(e){var a,t;try{Object.assign(se,e),Z.value=!0;const a=await G(e);Object.assign(ae,a.result),K(a.result.data)?g.warning(Q("Data_not_found")):g.success(`${Q("Found")}: ${a.result.pagination.total} ${Q("records")}`)}catch(s){Object.assign(ee,null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.errors)}finally{Z.value=!1}}function le(e){ee[e]=""}async function oe(){ae.data=[]}function ie(){r.push("/app/registration/register-donors")}function ue(){}return f(),(s,r)=>{const c=d,g=m,f=_,v=p,y=u,B=i,E=n,N=e,A=l,G=h("RouterLink"),O=a,Q=o,K=t;return b(),j("div",T,[k(y,{"justify-content":"space-between","flex-wrap":"wrap"},{default:x((()=>[k(g,null,{default:x((()=>[k(c,{"with-icons":"",separator:"bullet",items:[{label:$(Y).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:s.$t("Registration")},{label:s.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),k(g,null,{default:x((()=>[k(v,null,{default:x((()=>[k(f,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:w(ie,["prevent"])},{default:x((()=>[V(C(s.$t("Add")),1)])),_:1},8,["onClick"]),k(f,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:w(ue,["prevent"])},{default:x((()=>[V(C(s.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),D("div",q,[D("div",L,[k(B,{"is-loading":$(Z),errors:$(ee),onSearch:ne,onClearForm:oe,onClearError:le},null,8,["is-loading","errors"])])]),D("div",M,[D("div",S,[k(K,{columns:$(re),data:$(ae).data,limit:$(ae).pagination.per_page,total:$(ae).pagination.total},{default:x((()=>[k(O,{rounded:"","no-header":!$(Z)&&0===$(ae).data.length},{"header-column":x((({column:e})=>["#"===e.key?(b(),j("span",W)):F("",!0)])),body:x((()=>[$(Z)?(b(),j("div",X,[(b(!0),j(I,null,P($(ae).pagination.per_page,(e=>(b(),j("div",{key:e,class:"flex-table-item"},[k(N,null,{default:x((()=>[k(E,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):F("",!0),0===$(ae).data.length?(b(),j("div",z,[k(A,{title:s.$t("No_data"),subtitle:s.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:x((()=>[H,J])),_:1},8,["title","subtitle"])])):F("",!0)])),"body-cell":x((({row:e,column:a,value:t})=>["name"===a.key?(b(),R(G,{key:0,class:"has-text-primary",to:`${s.$route.path}/${e.id}#details`},{default:x((()=>[V(C(e.first_name)+" "+C(e.last_name)+" "+C(e.father_name),1)])),_:2},1032,["to"])):F("",!0)])),_:1},8,["no-header"]),$(ae).data.length?(b(),R(Q,{key:0,"current-page":$(te),"onUpdate:current-page":r[0]||(r[0]=e=>U(te)?te.value=e:null),class:"mt-5","item-per-page":$(ae).pagination.per_page,"total-items":$(ae).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):F("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Y as default};
