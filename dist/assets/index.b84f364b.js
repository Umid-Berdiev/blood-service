import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang.e01de1da.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang.ff8c9853.js";import{_ as a}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.2fa4ff12.js";import{_ as l,a as o}from"./VControl.a4292c49.js";import{_ as n}from"./VRadio.vue_vue_type_style_index_0_lang.188d102e.js";import{q as s,H as i,C as r,x as u,r as d,a7 as _,o as c,a as m,w as p,e as f,t as g,k as b,J as y,c as v,d as h,K as j,F as k,l as V,g as x,S as D,L as Y,M as $}from"./index.5e313a07.js";import{m as M}from"./moment.bb668042.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as C,a as O,b as B,c as I,d as S,e as U,f as q,g as F}from"./search-7-dark.607cbb05.js";import{_ as L}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.141f26f3.js";import{_ as N}from"./lodash.6f8ef5ec.js";import{u as P}from"./main.a14c778c.js";import{u as R}from"./viewWrapper.74d08f31.js";import{f as T}from"./patient.83d02e12.js";import"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import"./VPlaceload.726b7e5d.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";import"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";const z={class:"table-container"},E={class:"table is-fullwidth"},H=M.__esModule?M.default:M,J=w(s({__name:"BuckControlSterilityFormModal",props:{isOpen:{type:Boolean,default:!1},item:null},emits:["update:isOpen","update:list"],setup(s,{emit:y}){i();const{t:v}=r(),h=u(v("Sterility_test_result")),j=u(!1),k=d({control_result:"sterile",result_date:_(new Date,"YYYY-MM-DD")}),V=d({control_result:[],result_date:[]});function x(){Object.assign(k,{blood_samples_taken_date:H().format("YYYY-MM-DD"),analysis_date:H().format("YYYY-MM-DD"),clinical_biochemical_laboratory_date:H().format("YYYY-MM-DD")}),Object.assign(V,{blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]}),y("update:isOpen",!1)}return(i,r)=>{const u=n,d=l,_=o,y=a,v=t,V=e;return c(),m(V,{open:s.isOpen,size:"large",title:h.value,actions:"right",onClose:x},{content:p((()=>[f("div",z,[f("table",E,[f("tbody",null,[f("tr",null,[f("th",null,g(i.$t("Donor_code")),1),f("td",null,g(s.item.donation_code),1)]),f("tr",null,[f("th",null,g(i.$t("Donation_date")),1),f("td",null,g(s.item.donation_date),1)]),f("tr",null,[f("th",null,g(i.$t("Component_name")),1),f("td",null,g(s.item.component_name),1)]),f("tr",null,[f("th",null,g(i.$t("Come_from")),1),f("td",null,g(s.item.come_from),1)]),f("tr",null,[f("th",null,g(i.$t("Control_result")),1),f("td",null,[b(_,null,{default:p((()=>[b(d,null,{default:p((()=>[b(u,{modelValue:k.control_result,"onUpdate:modelValue":r[0]||(r[0]=e=>k.control_result=e),value:"sterile",color:"primary",label:i.$t("Sterile")},null,8,["modelValue","label"]),b(u,{modelValue:k.control_result,"onUpdate:modelValue":r[1]||(r[1]=e=>k.control_result=e),value:"not_sterile",color:"primary",label:i.$t("Not_sterile")},null,8,["modelValue","label"])])),_:1})])),_:1})])]),f("tr",null,[f("th",null,g(i.$t("Result_date")),1),f("td",null,[b(_,null,{default:p((()=>[b(d,null,{default:p((()=>[b(y,{modelValue:k.result_date,"onUpdate:modelValue":r[2]||(r[2]=e=>k.result_date=e),style:{width:"50%"}},null,8,["modelValue"])])),_:1})])),_:1})])])])])])])),action:p((()=>[b(v,{loading:j.value,type:"button"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-c97730d9"]]),K=e=>(Y("data-v-8a7713f3"),e=e(),$(),e),Q={class:"page-content-inner"},W={class:"columns mb-3"},A={class:"column"},G={class:"columns"},X={class:"column is-12"},Z={key:0,class:"flex-list-inner"},ee={key:1,class:"flex-list-inner"},te=K((()=>f("img",{class:"light-image",src:q,alt:""},null,-1))),ae=K((()=>f("img",{class:"dark-image",src:F,alt:""},null,-1))),le=["onClick"],oe=N.isEmpty,ne=w(s({__name:"index",setup(e){const t=i(),{t:a}=r(),l=P(),o=u(!1);R().setPageTitle(a("Buck-laboratory")),y({title:`${a("Buck-control-sterility")} - ${l.app.name}`});const n=d({data:[{donation_date:"05.06.2022",donation_code:"138800115200",dose:"0",quantity:"250",component_name:"Эритроцитная масса",come_from:"Из отдела переработки"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),s=v({get:()=>n.pagination.current_page,set:async e=>{$.page=e,await async function(e){var l,s;try{Object.assign($,e),o.value=!0;const l=await T(e);Object.assign(n,l.result),oe(l.result.data)?t.warning(a("Data_not_found")):t.success(`${a("Found")}: ${l.result.pagination.total} ${a("records")}`)}catch(i){Object.assign(Y,null==(s=null==(l=i.response)?void 0:l.data)?void 0:s.errors)}finally{o.value=!1}}($)}}),_={donation_date:{label:a("Donation_date")},donation_code:{label:a("Donation_code")},dose:{label:a("Dose")},quantity:{label:a("Quantity_ml")},component_name:{label:a("Component_name")},come_from:{label:a("Come_from")}},Y=d({visit_type_id:[],donation_type_id:[],donation_code:[]}),$=d({page:1}),M=d({}),w=u(!1);return(e,t)=>{const a=L,i=C,r=O,u=B,d=I,y=S,v=U,Y=J;return c(),h("div",Q,[f("div",W,[f("div",A,[b(a,{"with-icons":"",separator:"bullet",items:[{label:j(l).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Buck-laboratory")},{label:e.$t("Buck-control-sterility")}]},null,8,["items"])])]),f("div",G,[f("div",X,[b(v,{columns:j(_),data:n.data,limit:n.pagination.per_page,total:n.pagination.total},{default:p((()=>[b(d,{rounded:"","no-header":!o.value&&0===n.data.length},{"header-column":p((({column:e})=>[])),body:p((()=>[o.value?(c(),h("div",Z,[(c(!0),h(k,null,V(n.pagination.per_page,(e=>(c(),h("div",{key:e,class:"flex-table-item"},[b(r,null,{default:p((()=>[b(i,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):x("",!0),0===n.data.length?(c(),h("div",ee,[b(u,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:p((()=>[te,ae])),_:1})])):x("",!0)])),"body-cell":p((({row:e,column:t})=>["donation_code"===t.key?(c(),h("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:t=>{return a=e,Object.assign(M,a),void(w.value=!0);var a}},g(e.donation_code),9,le)):x("",!0)])),_:1},8,["no-header"]),n.data.length?(c(),m(y,{key:0,"current-page":j(s),"onUpdate:current-page":t[0]||(t[0]=e=>D(s)?s.value=e:null),class:"mt-5","item-per-page":n.pagination.per_page,"total-items":n.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):x("",!0)])),_:1},8,["columns","data","limit","total"])])]),b(Y,{"is-open":w.value,"onUpdate:is-open":t[1]||(t[1]=e=>w.value=e),item:M},null,8,["is-open","item"])])}}}),[["__scopeId","data-v-8a7713f3"]]);export{ne as default};
