import{_ as a,a as e}from"./FilterForm.vue_vue_type_script_setup_true_lang.072d2fb4.js";import{_ as l}from"./VModal.vue_vue_type_style_index_0_lang.a5b27fe6.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang.3f02b6bd.js";import{_ as s}from"./VCheckbox.vue_vue_type_style_index_0_lang.c1c46a23.js";import{_ as n}from"./VFlex.vue_vue_type_style_index_0_lang.5029357e.js";import{_ as o}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.75513c1d.js";import{_ as i}from"./VFlexItem.vue_vue_type_style_index_0_lang.3f326650.js";import{b as u,_ as d,a as _}from"./VControl.ca63cac0.js";import{_ as r}from"./VInput.vue_vue_type_script_setup_true_lang.052c7129.js";import{q as m,H as p,C as c,x as f,r as v,o as g,a as b,w as y,e as h,t as V,k as j,i as x,K as Y,a7 as D,L as w,M as $,E as k,J as M,c as z,a8 as U,d as C,g as O,F as I,l as B,S as F}from"./index.5a18e8c8.js";import{m as H}from"./moment.b8ea7098.js";import{f as T}from"./patient.cb19f429.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as S,a as R,b as E,c as L,d as N,e as W,f as q,g as P,h as J}from"./search-7-dark.8b15a455.js";import{_ as K}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.aa6c4915.js";import{_ as G}from"./lodash.b14eab3e.js";import{u as Q}from"./main.fb415df7.js";import{u as X}from"./viewWrapper.fed031e8.js";import"./VTextarea.vue_vue_type_script_setup_true_lang.c368ce6f.js";import"./VRadio.vue_vue_type_style_index_0_lang.175ab214.js";import"./VCard.vue_vue_type_script_setup_true_lang.d2de6734.js";import"./VButton.vue_vue_type_style_index_0_lang.c06d75b0.js";import"./VPlaceload.df43afcf.js";import"./VIMaskInput.vue_vue_type_script_lang.32d4852d.js";const Z=a=>(w("data-v-73efce38"),a=a(),$(),a),aa={class:"columns"},ea={class:"column"},la={class:"is-size-5 has-text-weight-medium"},ta={class:"box"},sa={class:"has-text-weight-bold"},na=Z((()=>h("br",null,null,-1))),oa={class:"table-container"},ia={class:"table box is-fullwidth"},ua=Z((()=>h("p",{class:"has-text-danger"}," Красным цветом указаны показатели, заданные врачом-терапевтом, как обязательные для определения ",-1))),da=H.__esModule?H.default:H,_a=A(m({__name:"ResearchAimedFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list"],setup(a,{emit:e}){p();const{t:m}=c(),w=f(m("Hemotransmission_research_results")),$=f(!1),k=v({blood_samples_taken_date:da().format("YYYY-MM-DD"),analysis_date:da().format("YYYY-MM-DD")}),M=v({blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]});function z(){Object.assign(k,{blood_samples_taken_date:da().format("YYYY-MM-DD"),analysis_date:da().format("YYYY-MM-DD"),clinical_biochemical_laboratory_date:da().format("YYYY-MM-DD")}),Object.assign(M,{blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]}),e("update:isOpen",!1)}return(e,m)=>{const p=u,c=r,f=d,v=_,M=i,U=o,C=n,O=s,I=t,B=l;return g(),b(B,{open:a.isOpen,size:"big",title:w.value,actions:"right",onClose:z},{content:y((()=>{var l;return[h("div",aa,[h("div",ea,[h("h5",la,V(e.$t("Donor_code"))+": "+V(null==(l=a.patient.last_visit)?void 0:l.donation_code),1)])]),h("div",ta,[j(C,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:y((()=>[j(M,{"flex-basis":"45%"},{default:y((()=>[j(v,{horizontal:""},{default:y((()=>[j(p,{class:"my-auto mr-3 is-size-6"},{default:y((()=>[x(V(e.$t("Blood_sampling_date")),1)])),_:1}),j(f,null,{default:y((()=>{var e;return[j(c,{value:Y(D)(new Date(null==(e=a.patient.last_visit)?void 0:e.updated_at),"YYYY-MM-DD"),disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),j(M,{"flex-basis":"45%"},{default:y((()=>[j(v,{horizontal:""},{default:y((()=>[j(p,{class:"my-auto mr-3 is-size-6"},{default:y((()=>[x(V(e.$t("Blood_samples_taken_date")),1)])),_:1}),j(f,null,{default:y((()=>[j(U,{modelValue:k.blood_samples_taken_date,"onUpdate:modelValue":m[0]||(m[0]=a=>k.blood_samples_taken_date=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),j(M,{"flex-basis":"45%"},{default:y((()=>[j(v,{horizontal:""},{default:y((()=>[j(p,{class:"my-auto mr-3 is-size-6"},{default:y((()=>[x(V(e.$t("Analysis_date")),1)])),_:1}),j(f,null,{default:y((()=>[j(U,{modelValue:k.analysis_date,"onUpdate:modelValue":m[1]||(m[1]=a=>k.analysis_date=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),j(M,{"flex-basis":"45%"},{default:y((()=>{var l;return[h("h5",null,[h("span",sa,V(e.$t("Visit_stage")),1),h("span",null,V(null==(l=a.patient.last_visit)?void 0:l.stage),1)])]})),_:1})])),_:1})]),na,h("div",oa,[h("table",ia,[h("tbody",null,[h("tr",null,[h("td",null,[j(v,null,{default:y((()=>[j(f,null,{default:y((()=>[j(O,{modelValue:k.hbsag,"onUpdate:modelValue":m[2]||(m[2]=a=>k.hbsag=a),class:"p-2",color:"primary",label:"HBsAg"},null,8,["modelValue"])])),_:1})])),_:1})]),h("td",null,[j(v,{horizontal:"",class:"is-justify-content-end"},{default:y((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:y((()=>[x(V(e.$t("Testing_system"))+" (HBsAg)",1)])),_:1}),j(f,null,{default:y((()=>[j(c,{modelValue:k.testing_system_hbsag,"onUpdate:modelValue":m[3]||(m[3]=a=>k.testing_system_hbsag=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(v,null,{default:y((()=>[j(f,null,{default:y((()=>[j(O,{modelValue:k.oids,"onUpdate:modelValue":m[4]||(m[4]=a=>k.oids=a),class:"p-2",color:"primary",label:e.$t("OIDS")},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("td",null,[j(v,{horizontal:"",class:"is-justify-content-end"},{default:y((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:y((()=>[x(V(e.$t("Testing_system"))+" ("+V(e.$t("OIDS"))+")",1)])),_:1}),j(f,null,{default:y((()=>[j(c,{modelValue:k.testing_system_oids,"onUpdate:modelValue":m[5]||(m[5]=a=>k.testing_system_oids=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(v,null,{default:y((()=>[j(f,null,{default:y((()=>[j(O,{modelValue:k.antihcv,"onUpdate:modelValue":m[6]||(m[6]=a=>k.antihcv=a),class:"has-text-danger p-2",color:"danger",label:e.$t("AntiHCV")},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("td",null,[j(v,{horizontal:"",class:"is-justify-content-end"},{default:y((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:y((()=>[x(V(e.$t("Testing_system"))+" ("+V(e.$t("AntiHCV"))+")",1)])),_:1}),j(f,null,{default:y((()=>[j(c,{modelValue:k.testing_system_antihcv,"onUpdate:modelValue":m[7]||(m[7]=a=>k.testing_system_antihcv=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(v,null,{default:y((()=>[j(f,null,{default:y((()=>[j(O,{modelValue:k.rw,"onUpdate:modelValue":m[8]||(m[8]=a=>k.rw=a),class:"p-2",color:"primary",label:e.$t("RW")},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("td",null,[j(v,{horizontal:"",class:"is-justify-content-end"},{default:y((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:y((()=>[x(V(e.$t("Testing_system"))+" ("+V(e.$t("RW"))+")",1)])),_:1}),j(f,null,{default:y((()=>[j(c,{modelValue:k.testing_system_rw,"onUpdate:modelValue":m[9]||(m[9]=a=>k.testing_system_rw=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(v,null,{default:y((()=>[j(f,null,{default:y((()=>[j(O,{modelValue:k.hemolis,"onUpdate:modelValue":m[10]||(m[10]=a=>k.hemolis=a),class:"p-2",color:"primary",label:e.$t("Hemolis")},null,8,["modelValue","label"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(v,null,{default:y((()=>[j(f,null,{default:y((()=>[j(O,{modelValue:k.hiles,"onUpdate:modelValue":m[11]||(m[11]=a=>k.hiles=a),class:"p-2",color:"primary",label:e.$t("Hiles")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])]),ua])]})),action:y((()=>[j(I,{loading:$.value,form:"blood-sampling-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-73efce38"]]),ra=a=>(w("data-v-1dc97a66"),a=a(),$(),a),ma={class:"page-content-inner"},pa={class:"columns mb-3"},ca={class:"column"},fa={class:"columns mt-1"},va={class:"column"},ga={class:"columns"},ba={class:"column is-12"},ya={key:0,class:"is-flex-grow-0",textContent:"#"},ha={key:0,class:"flex-list-inner"},Va={key:1,class:"flex-list-inner"},ja=ra((()=>h("img",{class:"light-image",src:P,alt:""},null,-1))),xa=ra((()=>h("img",{class:"dark-image",src:J,alt:""},null,-1))),Ya=["onClick"],Da=G.isEmpty,wa=A(m({__name:"index",async setup(l){let t,s;k();const n=p(),{t:o}=c(),i=Q(),u=f(!1);X().setPageTitle(o("Users_List")),M({title:`${o("Donor_list_for_blood_sampling")} - ${i.app.name}`});const d=v({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),_=z({get:()=>d.pagination.current_page,set:async a=>{w.page=a,await P(w)}}),r={orderNumber:{format:(a,e,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:o("Donation_code")},blood_sampling_date:{label:o("Blood_sampling_date")},name:{label:o("Donor_fullname")},birth_date:{label:o("Date-of-birth")},visit_type:{label:o("Visit_type"),format:(a,e)=>{var l,t;return(null==(l=e.last_visit)?void 0:l.visit_type)&&o(null==(t=e.last_visit)?void 0:t.visit_type)}},visit_date:{label:o("Visit_date"),format:(a,e)=>{var l,t;return(null==(l=e.last_visit)?void 0:l.created_at)&&D(new Date(null==(t=e.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:o("Donation_type"),format:(a,e)=>{var l;return null==(l=e.last_visit)?void 0:l.personalized_donation}},visit_stage:{label:o("Visit_stage"),format:(a,e)=>{var l,t;return null==(t=null==(l=e.last_visit)?void 0:l.stage)?void 0:t.name}}},m=f(),x=v({visit_type_id:[],donation_type_id:[],donation_code:[]}),w=v({page:1}),$=v({}),H=f(!1),A=f(!0);async function P(a){var e,l;try{Object.assign(w,a),u.value=!0;const e=await T(a);Object.assign(d,e.result),Da(e.result.data)?n.warning(o("Data_not_found")):n.success(`${o("Found")}: ${e.result.pagination.total} ${o("records")}`)}catch(t){Object.assign(x,null==(l=null==(e=t.response)?void 0:e.data)?void 0:l.errors)}finally{u.value=!1}}function J(a){x[a]=""}async function G(){d.data=[]}return[t,s]=U((()=>P(w))),await t,s(),(l,t)=>{const s=K,n=S,o=R,p=E,c=L,f=N,v=W,D=q,w=_a,k=e;return g(),C("div",ma,[h("div",pa,[h("div",ca,[j(s,{"with-icons":"",separator:"bullet",items:[{label:Y(i).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:l.$t("Screening")},{label:l.$t("Donor_list_for_blood_sampling")}]},null,8,["items"])])]),h("div",fa,[h("div",va,[j(a,{"is-loading":u.value,errors:x,onSearch:P,onClearForm:G,onClearError:J},null,8,["is-loading","errors"])])]),h("div",ga,[h("div",ba,[j(D,{columns:Y(r),data:d.data,limit:d.pagination.per_page,total:d.pagination.total},{default:y((()=>[j(f,{rounded:"","no-header":!u.value&&0===d.data.length},{"header-column":y((({column:a})=>["orderNumber"===a.key?(g(),C("span",ya)):O("",!0)])),body:y((()=>[u.value?(g(),C("div",ha,[(g(!0),C(I,null,B(d.pagination.per_page,(a=>(g(),C("div",{key:a,class:"flex-table-item"},[j(o,null,{default:y((()=>[j(n,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):O("",!0),0===d.data.length?(g(),C("div",Va,[j(p,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:y((()=>[ja,xa])),_:1})])):O("",!0)])),"body-row-pre":y((({row:a})=>[a.id===m.value?(g(),b(c,{key:0,size:"tiny",class:"m-0 mb-1"})):O("",!0)])),"body-cell":y((({row:a,column:e})=>["name"===e.key?(g(),C("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:e=>{return l=a,Object.assign($,l),void(H.value=!0);var l}},V(a.first_name)+" "+V(a.last_name)+" "+V(a.father_name),9,Ya)):O("",!0)])),_:1},8,["no-header"]),d.data.length?(g(),b(v,{key:0,"current-page":Y(_),"onUpdate:current-page":t[0]||(t[0]=a=>F(_)?_.value=a:null),class:"mt-5","item-per-page":d.pagination.per_page,"total-items":d.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):O("",!0)])),_:1},8,["columns","data","limit","total"])])]),j(w,{"is-open":H.value,"onUpdate:is-open":t[1]||(t[1]=a=>H.value=a),patient:$},null,8,["is-open","patient"]),j(k,{"is-open":A.value,"onUpdate:is-open":t[2]||(t[2]=a=>A.value=a),patient:$},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-1dc97a66"]]);export{wa as default};
