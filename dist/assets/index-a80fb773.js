import{_ as e}from"./AuthLayout-91ea2cff.js";import{_ as s}from"./VButton.vue_vue_type_style_index_0_lang-8d9e700e.js";import{_ as a,a as l}from"./VControl-f7fb3a1b.js";import{_ as t}from"./VInput.vue_vue_type_script_setup_true_lang-66ceaea3.js";import{_ as o}from"./AnimatedLogo-562b37d4.js";import{q as n,C as r,x as i,D as d,E as u,G as c,H as p,I as m,r as h,J as g,j as _,o as v,a as f,w as b,e as y,k as x,s as w,m as k,K as j,f as $,t as C,i as I,L,M as z}from"./index-98bd5d96.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";const D=e=>(L("data-v-e5f13ffd"),e=e(),z(),e),O={class:"modern-login"},S=D((()=>y("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),U={class:"columns is-gapless is-vcentered"},V=D((()=>y("div",{class:"column is-relative is-8 h-hidden-mobile h-hidden-tablet-p"},[y("div",{class:"hero is-fullheight is-image",style:{background:"url('/images/clean-medical-background_53876-97927.webp')"}},[y("div",{class:"hero-body"},[y("div",{class:"container"},[y("div",{class:"columns"},[y("div",{class:"column"},[y("p",{class:"is-size-1 has-text-dark is-underlined has-text-weight-medium",style:{"text-shadow":"#0fa 1px 0 5px"}}," Автоматизированная информационная система по формированию и ведению базы данных по донорам и лицам, отведенным от донорства, и данных по учету и распределению донорской крови ")])])])])])],-1))),q={class:"column is-4 is-relative"},E=["checked"],K=D((()=>y("span",null,null,-1))),P={class:"is-form mt-3"},B={class:"hero-body"},F=["onSubmit"],G={class:"help has-text-danger"},H={class:"help has-text-danger"},J={class:"button-wrap has-help"},M=A(n({__name:"index",setup(n){const{t:L}=r(),z=i("login"),A=i(!1),D=d(),M=u(),R=c(),W=p(),{loginUser:Y,isLoggedIn:Z}=m(),N=R.query.redirect,Q=h({username:[],password:[]}),T=async e=>{var s,a,l,t,o,n,r;try{A.value=!0,Object.assign(Q,{username:[],password:[]});const a=Object.fromEntries(new FormData(e.target));await Y(a),W.dismissAll(),W.success(`${L("Welcome_back")}, ${null==(s=a.username)?void 0:s.toUpperCase()}`),N?M.push(N):M.push({name:"/app/dashboard"})}catch(i){Object.assign(Q,null==(l=null==(a=i.response)?void 0:a.data)?void 0:l.errors),(null==(o=null==(t=i.response)?void 0:t.data)?void 0:o.errors.message)&&W.error(null==(r=null==(n=i.response)?void 0:n.data)?void 0:r.errors.message)}finally{A.value=!1}};function X(e){Q[e]=[]}return g({title:L("auth_login")}),(n,r)=>{const i=o,d=_("RouterLink"),u=t,c=a,p=l,m=s,h=e;return v(),f(h,null,{default:b((()=>[y("div",O,[S,y("div",U,[V,y("div",q,[x(d,{to:"/",class:"top-logo"},{default:b((()=>[x(i,{size:75})])),_:1}),y("label",{class:"dark-mode ml-auto",tabindex:"0",onKeydown:r[1]||(r[1]=w(k((e=>e.target.click()),["prevent"]),["space"]))},[y("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!j(D).isDark,onChange:r[0]||(r[0]=(...e)=>j(D).onChange&&j(D).onChange(...e))},null,40,E),K],32),y("div",P,[y("div",B,[y("div",{class:$(["form-text has-text-centered",["login"!==j(z)&&"is-hidden"]])},[y("h2",null,C(n.$t("Sign_In")),1),y("p",null,C(n.$t("Please_sign_in_to_your_account")),1)],2),y("form",{"data-cy":"login-form",class:$([["login"!==j(z)&&"is-hidden"],"login-wrapper"]),onSubmit:k(T,["prevent"])},[x(p,null,{default:b((()=>[x(c,{icon:"feather:user"},{default:b((()=>[x(u,{type:"text",name:"username",placeholder:n.$t("Username"),autocomplete:"username",onInput:r[2]||(r[2]=e=>X("username"))},null,8,["placeholder"]),y("p",G,C(j(Q).username[0]),1)])),_:1})])),_:1}),x(p,null,{default:b((()=>[x(c,{icon:"feather:lock"},{default:b((()=>[x(u,{type:"password",name:"password",placeholder:n.$t("Password"),autocomplete:"current-password",onInput:r[3]||(r[3]=e=>X("current-password"))},null,8,["placeholder"]),y("p",H,C(j(Q).password[0]),1)])),_:1})])),_:1}),y("div",J,[x(m,{id:"login-button",loading:j(A),disabled:j(A),color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:b((()=>[I(C(n.$t("Confirm")),1)])),_:1},8,["loading","disabled"])])],42,F)])])])])])])),_:1})}}}),[["__scopeId","data-v-e5f13ffd"]]);export{M as default};
