import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-98b95306.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import{q as a,N as t,K as n,c as o,o as s,d as i,b as d,H as r,C as u,x as c,r as p,A as _,a as m,w as v,k as f,i as y,t as b,y as h,j as g,e as V,$ as w,aj as $,F as x,l as k,g as C,L as U,M as j,a7 as M,m as S,a6 as O,G as z,E as D,W as R,ag as Y,J as I,U as q}from"./index-202d6ef0.js";import{b as P,_ as E,a as W}from"./VControl-90e6c9df.js";import{_ as F}from"./VInput.vue_vue_type_script_setup_true_lang-6aad6843.js";import{s as B,f as T,c as A,d as L,e as N,g as G,p as H,h as J,u as K}from"./patient-4b952528.js";import{_ as Q}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as Z}from"./VCheckbox.vue_vue_type_style_index_0_lang-b85a5492.js";import{_ as X}from"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";import{_ as ee}from"./lodash-82655619.js";import{_ as le}from"./VFlexItem.vue_vue_type_style_index_0_lang-cfd608a5.js";import{f as ae,b as te,c as ne}from"./additional-b8f03a9c.js";import{_ as oe}from"./VTextarea.vue_vue_type_script_setup_true_lang-e4eeb86d.js";import{_ as se}from"./DatePicker.vue_vue_type_script_setup_true_lang-181de8a9.js";import{_ as ie}from"./VRadio.vue_vue_type_style_index_0_lang-24615d3d.js";import{_ as de}from"./VButtons.vue_vue_type_script_setup_true_lang-5f42cc67.js";import{_ as re}from"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import{_ as ue}from"./VIMaskInput.vue_vue_type_script_lang-ed3b3d4f.js";import{_ as ce}from"./VTabs.vue_vue_type_script_setup_true_lang-c5895131.js";import{_ as pe,a as _e,b as me}from"./PatientPassportForm.vue_vue_type_script_setup_true_lang-6db0e360.js";import{u as ve}from"./viewWrapper-93d6f948.js";import{m as fe}from"./moment-2a9c6de7.js";import"./ClientOnly.vue_vue_type_script_lang-3cf31693.js";import"./VIcon.vue_vue_type_script_setup_true_lang-773aac4a.js";const ye={class:"v-grid"},be=a({__name:"VGrid",props:{inline:{type:Boolean},gridTemplateColumns:{default:"none"},gridTemplateRows:{default:"none"},gridTemplateAreas:{default:"none"},columnGap:{default:"normal"},rowGap:{default:"normal"},justifyItems:{default:"initial"},alignItems:{default:"initial"},justifyContent:{default:"initial"},alignContent:{default:"initial"},placeContent:{default:"normal"},gridAutoColumns:{default:"auto"},gridAutoRows:{default:"auto"},gridAutoFlow:{default:"row"}},setup(e){const l=e;t((e=>({c9233fce:n(a),41529814:l.gridTemplateColumns,"4ac08460":l.gridTemplateRows,"0c618fdf":l.gridTemplateAreas,"9bbce60e":l.columnGap,"641aebe3":l.rowGap,"28966b17":l.justifyItems,"5f95d4fc":l.alignItems,"173c3e10":l.justifyContent,"51d9f9bb":l.alignContent,"2afad179":l.placeContent,"3c8fbea1":l.gridAutoColumns,"5b7c7195":l.gridAutoRows,"5b76f0ea":l.gridAutoFlow})));const a=o((()=>l.inline?"inline-grid":"grid"));return(e,l)=>(s(),i("div",ye,[d(e.$slots,"default")]))}}),he={class:"v-grid-item"},ge=a({__name:"VGridItem",props:{gridColumnStart:{default:"auto"},gridColumnEnd:{default:"auto"},gridRowStart:{default:"auto"},gridRowEnd:{default:"auto"},justifySelf:{default:"auto"},alignSelf:{default:"auto"},placeSelf:{default:"auto"}},setup(e){const l=e;return t((e=>({"1401e278":l.gridColumnStart,"2b6903bd":l.gridColumnEnd,41478190:l.gridRowStart,"0387b989":l.gridRowEnd,"032f283a":l.justifySelf,dd16eca2:l.alignSelf,da1a0a9e:l.placeSelf}))),(e,l)=>(s(),i("div",he,[d(e.$slots,"default")]))}}),Ve=Q(a({__name:"DirectionForDonationModal",props:{isOpen:{type:Boolean,default:!1},visitcard:null},emits:["update:isOpen","submit"],setup(a,{emit:t}){const o=a,i=r(),{t:d}=u(),h=c(!1),g=c(d("Direction_for_donation")),V=p({donation_code:null,recommended_blood_capacity:""}),w=p({donation_code:[],recommended_blood_capacity:[]});async function $(){var e,l,a;try{h.value=!0,await B(null==(e=o.visitcard)?void 0:e.id,V),i.success(d("Data_saved_successfully")),x()}catch(t){i.error(t.message),Object.assign(w,null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.errors)}finally{h.value=!1}}function x(){t("update:isOpen",!1)}return _((()=>{var e;V.donation_code=null==(e=o.visitcard)?void 0:e.donation_code})),(t,o)=>{const i=P,d=F,r=E,u=W,c=ge,p=be,_=l,w=e;return s(),m(w,{open:a.isOpen,title:n(g),actions:"right",onClose:x},{content:v((()=>[f(p,{"row-gap":"1rem"},{default:v((()=>[f(c,null,{default:v((()=>[f(u,{horizontal:""},{default:v((()=>[f(i,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_code")),1)])),_:1}),f(r,{class:"ml-auto"},{default:v((()=>[f(d,{value:n(V).donation_code},null,8,["value"])])),_:1})])),_:1})])),_:1}),f(c,null,{default:v((()=>[f(u,{horizontal:""},{default:v((()=>[f(i,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Recommended_blood_capacity")),1)])),_:1}),f(r,{class:"ml-auto"},{default:v((()=>[f(d,{modelValue:n(V).recommended_blood_capacity,"onUpdate:modelValue":o[0]||(o[0]=e=>n(V).recommended_blood_capacity=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),action:v((()=>[f(_,{type:"button",loading:n(h),onClick:$},{default:v((()=>[y(b(t.$t("For_donation")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-3327696d"]]),we={class:"help has-text-danger"},$e={class:"help has-text-danger"},xe={class:"help has-text-danger"},ke=(e=>(U("data-v-756caf02"),e=e(),j(),e))((()=>V("br",null,null,-1))),Ce={key:0,class:"table-container"},Ue={class:"table is-bordered is-fullwidth"},je={colspan:4,class:"has-text-centered"},Me=ee.flatten,Se=Q(a({__name:"LaboratoryResearchModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(a,{emit:t}){const o=a,d=r(),{t:U}=u(),j=c(!1),M=c(U("Direction_for_laboratory_research")),S=c([]),O=c([]),z=c([]),D=p({donation_code:null,donation_type_id:null,immunization_id:null,laboratory_researches:[]}),R=p({donation_type_id:[],immunization_id:[],donation_code:[]});async function Y(){var e,l;try{j.value=!0,Object.assign(R,{donation_type_id:[],immunization_id:[],donation_code:[]}),D.laboratory_researches=Me(z.value.map((e=>e.laboratory_researches.filter((e=>e.value)).map((e=>e.id))))),await A(o.visitcard.id,D),d.success(U("Data_saved_successfully")),I()}catch(a){d.error(a.message),Object.assign(R,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{j.value=!1}}function I(){t("update:isOpen",!1)}return _((async()=>{D.donation_code=o.visitcard.donation_code,D.donation_type_id=o.visitcard.donation_type_id,D.immunization_id=o.visitcard.immunization_id,O.value=await ae().then((e=>e.result)),S.value=await te().then((e=>e.result))})),h((()=>D.donation_type_id),(async e=>{1!==e&&2!==e||await async function(){z.value=await T(o.visitcard.id).then((e=>e.result))}()})),(t,o)=>{const d=P,r=g("Multiselect"),u=E,c=W,p=F,_=X,h=Z,U=l,q=e;return s(),m(q,{open:a.isOpen,size:"extra-big",title:n(M),actions:"right",onClose:I},{content:v((()=>[f(_,{"flex-wrap":"wrap","column-gap":"5rem"},{default:v((()=>[f(le,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_types_list")),1)])),_:1}),f(u,null,{default:v((()=>[f(r,{modelValue:n(D).donation_type_id,"onUpdate:modelValue":o[0]||(o[0]=e=>n(D).donation_type_id=e),style:{"min-width":"15rem"},options:n(O),placeholder:t.$t("Select_donation_type"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"])])),_:1}),V("p",we,b(n(R).donation_type_id[0]),1)])),_:1})])),_:1}),f(le,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Immunization")),1)])),_:1}),f(u,null,{default:v((()=>[f(r,{modelValue:n(D).immunization_id,"onUpdate:modelValue":o[1]||(o[1]=e=>n(D).immunization_id=e),style:{"min-width":"15rem"},options:n(S),placeholder:t.$t("Not_required"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),V("p",$e,b(n(R).immunization_id[0]),1)])),_:1})])),_:1})])),_:1}),w(f(le,null,{default:v((()=>[f(c,{horizontal:""},{default:v((()=>[f(d,{class:"my-auto mr-5"},{default:v((()=>[y(b(t.$t("Donation_code")),1)])),_:1}),f(u,null,{default:v((()=>[f(p,{value:n(D).donation_code,disabled:""},null,8,["value"]),V("p",xe,b(n(R).donation_code[0]),1)])),_:1})])),_:1})])),_:1},512),[[$,3!==n(D).donation_type_id]])])),_:1}),ke,1!==n(D).donation_type_id&&2!==n(D).donation_type_id||!n(z).length?C("",!0):(s(),i("div",Ce,[V("table",Ue,[V("thead",null,[V("tr",null,[V("th",je,b(t.$t("Laboratory_research_types")),1)]),V("tr",null,[(s(!0),i(x,null,k(n(z),(e=>(s(),i("th",{key:e.id},b(e.name),1)))),128))])]),V("tbody",null,[V("tr",null,[V("td",null,[(s(!0),i(x,null,k(n(z)[0].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(u,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(z)[1].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(u,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(z)[2].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(u,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))]),V("td",null,[(s(!0),i(x,null,k(n(z)[3].laboratory_researches,(e=>(s(),m(c,{key:e.id},{default:v((()=>[f(u,null,{default:v((()=>[f(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"p-0",color:"primary",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)))),128))])])])])]))])),action:v((()=>[f(U,{type:"button",loading:n(j),onClick:Y},{default:v((()=>[y(b(t.$t("Submit_for_research")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-756caf02"]]),Oe=["onSubmit"],ze={class:"column is-12"},De={class:"help has-text-danger"},Re={class:"help has-text-danger"},Ye={class:"help has-text-danger"},Ie=a({__name:"WithdrawalFormModal",props:{isOpen:{type:Boolean,default:!1},patientId:{default:null}},emits:["update:isOpen","update:list"],setup(a,{emit:t}){const o=a,i=r(),{t:d}=u(),y=c(d("Withdrawal")),h=c(!1);u();const g=c({input:"YYYY-MM-DD"});p({type:"string",mask:g.value.input});const w=c([]),$=p({type:"temporary",reason_text:"",start_date:M(new Date,"YYYY-MM-DD"),end_date:"",source:""}),x=p({type:[],reason_text:[],start_date:[],end_date:[],source:[]});async function k(){var e,l,a,n;try{h.value=!0,await L(o.patientId,$),t("update:list"),U()}catch(s){(null==(e=s.response)?void 0:e.data.error)?i.error(null==(l=s.response)?void 0:l.data.error):Object.assign(x,null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.errors)}finally{h.value=!1}}function U(){Object.assign($,{type:"temporary",reason_text:null,start_date:M(new Date,"YYYY-MM-DD"),end_date:"",source:""}),Object.assign(x,{type:[],reason_text:[],start_date:[],end_date:[],source:[]}),t("update:isOpen",!1)}function j(e){x[e]=[]}return p({start:new Date,end:new Date}),_((async()=>{const e=await ne();w.value=e.result})),(t,o)=>{const i=ie,r=E,u=W,c=F,p=se,_=oe,g=l,w=e;return s(),m(w,{open:a.isOpen,size:"large",title:y.value,actions:"right",onClose:U},{content:v((()=>[V("form",{id:"withdrawal-form",class:"modal-form",onSubmit:S(k,["prevent"])},[V("div",ze,[f(u,{label:t.$t("Withdrawal_type"),required:""},{default:v((()=>[f(r,null,{default:v((()=>[f(i,{modelValue:$.type,"onUpdate:modelValue":o[0]||(o[0]=e=>$.type=e),value:"permanent",label:t.$t("Permanent"),onChange:o[1]||(o[1]=e=>j("type"))},null,8,["modelValue","label"]),f(i,{modelValue:$.type,"onUpdate:modelValue":o[2]||(o[2]=e=>$.type=e),value:"temporary",label:t.$t("Temporary"),onChange:o[3]||(o[3]=e=>j("type"))},null,8,["modelValue","label"]),V("p",De,b(x.type[0]),1)])),_:1})])),_:1},8,["label"]),f(u,{class:"is-curved-select"},{default:v((()=>[f(r,null,{default:v((()=>[f(c,{modelValue:$.reason_text,"onUpdate:modelValue":o[4]||(o[4]=e=>$.reason_text=e),placeholder:t.$t("Select_reason")},null,8,["modelValue","placeholder"]),V("span",Re,b(x.reason_text[0]),1)])),_:1})])),_:1}),f(p,{modelValue:$.start_date,"onUpdate:modelValue":o[5]||(o[5]=e=>$.start_date=e),label:t.$t("Start_date"),"error-text":x.start_date[0],onEditing:o[6]||(o[6]=e=>j("start_date"))},null,8,["modelValue","label","error-text"]),"temporary"===$.type?(s(),m(p,{key:0,modelValue:$.end_date,"onUpdate:modelValue":o[7]||(o[7]=e=>$.end_date=e),label:t.$t("End_date"),"error-text":x.start_date[0],onEditing:o[8]||(o[8]=e=>j("start_date"))},null,8,["modelValue","label","error-text"])):C("",!0),f(u,{label:t.$t("Source"),required:""},{default:v((()=>[f(r,null,{default:v((()=>[f(_,{modelValue:$.source,"onUpdate:modelValue":o[9]||(o[9]=e=>$.source=e),placeholder:n(d)("Enter_source"),rows:3,onInput:o[10]||(o[10]=e=>j("source"))},null,8,["modelValue","placeholder"]),V("p",Ye,b(x.source[0]),1)])),_:1})])),_:1},8,["label"])])],40,Oe)])),action:v((({close:e})=>[f(g,{loading:h.value,form:"withdrawal-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),qe=O();const Pe={class:"columns"},Ee={class:"column"},We={class:"table-container"},Fe={class:"table is-bordered is-fullwidth"},Be={class:""},Te={class:""},Ae={class:""},Le={class:""},Ne={class:""},Ge={class:""},He={class:""},Je={class:"columns"},Ke={class:"column"},Qe={class:"column"},Ze={class:""},Xe={class:"columns"},el={class:"column"},ll={class:"column"},al={class:""},tl={class:"columns"},nl={class:"column"},ol={class:"column"},sl={class:""},il={class:"columns"},dl={class:"column"},rl={class:"column"},ul=Q(a({__name:"MedicalInspectionFormModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","donation","withdrawal"],setup(a,{emit:t}){const o=a;z(),D();const{locale:i,t:d}=u(),_=r(),h=c(!1),g=c(d("Medical_inspection")),w=c({weight:"",height:"",temperature:"",blood_pressure:"",pulse:"",lymph_node:0,liver:0,skin:0,lung:0,heart:0}),$=p({weight:[],height:[],temperature:[],blood_pressure:[],pulse:[],lymph_node:[],liver:[],skin:[],lung:[],heart:[]});function x(){t("update:isOpen",!1)}async function k(){var e,l;try{h.value=!0;await async function(e,l){try{const{data:a}=await qe({url:`/visit-cards/${e}/medical-examinations`,method:"POST",data:l});return a}catch(a){throw a}}(o.visitcard.id,w.value);_.success(d("Data_saved_successfully"))}catch(a){_.error(d("Something_went_wrong")),Object.assign($,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{h.value=!1}}return R((()=>{o.visitcard&&o.visitcard.medical_examination&&(w.value=o.visitcard.medical_examination)})),(t,o)=>{const i=F,d=E,r=W,u=ue,c=ie,p=l,_=re,$=de,C=e;return s(),m(C,{open:a.isOpen,size:"big",title:n(g),actions:"right",onClose:x},{content:v((()=>[V("div",Pe,[V("div",Ee,[V("div",We,[V("table",Fe,[V("tbody",null,[V("tr",null,[V("td",null,[V("p",Be,b(t.$t("Weight_kg")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).weight,"onUpdate:modelValue":o[0]||(o[0]=e=>n(w).weight=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Te,b(t.$t("Height_sm")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).height,"onUpdate:modelValue":o[1]||(o[1]=e=>n(w).height=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:300},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ae,b(t.$t("Temperature")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).temperature,"onUpdate:modelValue":o[2]||(o[2]=e=>n(w).temperature=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:50},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Le,b(t.$t("blood_pressure")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[f(u,{modelValue:n(w).blood_pressure,"onUpdate:modelValue":o[3]||(o[3]=e=>n(w).blood_pressure=e),modelModifiers:{trim:!0},class:"input",options:{mask:"000 / 000",pattern:/^$|^\d{3}$/},placeholder:"000 / 000"},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ne,b(t.$t("Pulse_beats_min")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[f(i,{modelValue:n(w).pulse,"onUpdate:modelValue":o[4]||(o[4]=e=>n(w).pulse=e),modelModifiers:{trim:!0},class:"text-hover-primary",type:"number",min:10,step:".1",max:100},null,8,["modelValue"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ge,b(t.$t("Lymph_nodes")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,{raw:""},{default:v((()=>[f(c,{modelValue:n(w).lymph_node,"onUpdate:modelValue":o[5]||(o[5]=e=>n(w).lymph_node=e),value:!1,label:t.$t("Not_increased"),color:"primary"},null,8,["modelValue","label"]),f(c,{modelValue:n(w).lymph_node,"onUpdate:modelValue":o[6]||(o[6]=e=>n(w).lymph_node=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",He,b(t.$t("Liver_spleen")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",Je,[V("div",Ke,[f(c,{modelValue:n(w).liver,"onUpdate:modelValue":o[7]||(o[7]=e=>n(w).liver=e),value:!1,label:t.$t("Not_palpated"),color:"primary"},null,8,["modelValue","label"])]),V("div",Qe,[f(c,{modelValue:n(w).liver,"onUpdate:modelValue":o[8]||(o[8]=e=>n(w).liver=e),value:!0,label:t.$t("Increased"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",Ze,b(t.$t("Skin and visible mucous membranes")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",Xe,[V("div",el,[f(c,{modelValue:n(w).skin,"onUpdate:modelValue":o[9]||(o[9]=e=>n(w).skin=e),value:!1,label:t.$t("Pure"),color:"primary"},null,8,["modelValue","label"])]),V("div",ll,[f(c,{modelValue:n(w).skin,"onUpdate:modelValue":o[10]||(o[10]=e=>n(w).skin=e),value:!0,label:t.$t("With signs of damage"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",al,b(t.$t("In_lungs")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",tl,[V("div",nl,[f(c,{modelValue:n(w).lung,"onUpdate:modelValue":o[11]||(o[11]=e=>n(w).lung=e),value:!1,label:t.$t("No_wheezing"),color:"primary"},null,8,["modelValue","label"])]),V("div",ol,[f(c,{modelValue:n(w).lung,"onUpdate:modelValue":o[12]||(o[12]=e=>n(w).lung=e),value:!0,label:t.$t("Wheezing"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])]),V("tr",null,[V("td",null,[V("p",sl,b(t.$t("Heart")),1)]),V("td",null,[f(r,null,{default:v((()=>[f(d,null,{default:v((()=>[V("div",il,[V("div",dl,[f(c,{modelValue:n(w).heart,"onUpdate:modelValue":o[13]||(o[13]=e=>n(w).heart=e),value:!1,label:t.$t("Fine"),color:"primary"},null,8,["modelValue","label"])]),V("div",rl,[f(c,{modelValue:n(w).heart,"onUpdate:modelValue":o[14]||(o[14]=e=>n(w).heart=e),value:!0,label:t.$t("Not_fine"),color:"primary"},null,8,["modelValue","label"])])])])),_:1})])),_:1})])])])])])])])])),action:v((({close:e})=>[f($,null,{default:v((()=>[f(p,{type:"button",loading:n(h),onClick:k},null,8,["loading"]),f(_,{type:"button",color:"primary",outlined:"",disabled:n(h),onClick:()=>{e(),t.$emit("donation")}},{default:v((()=>[y(b(t.$t("For_donation")),1)])),_:2},1032,["disabled","onClick"]),f(_,{type:"button",color:"danger",outlined:"",disabled:n(h),onClick:()=>{e(),t.$emit("withdrawal")}},{default:v((()=>[y(b(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4b9f6e51"]]),cl=e=>(U("data-v-4fb28ee5"),e=e(),j(),e),pl={class:"has-text-centered is-size-4"},_l=cl((()=>V("br",null,null,-1))),ml={class:"columns"},vl={class:"column"},fl={class:"table-container"},yl={class:"table is-bordered"},bl={class:""},hl={class:"has-text-centered"},gl={class:"has-text-centered"},Vl={class:"has-text-centered"},wl={class:"has-text-centered"},$l={class:"has-text-centered"},xl={class:""},kl={class:""},Cl={class:""},Ul={class:""},jl={class:"has-text-primary"},Ml={class:""},Sl=cl((()=>V("strong",null,"06.03.2013",-1))),Ol={class:""},zl=cl((()=>V("strong",null,"Specialist",-1))),Dl={class:""},Rl=cl((()=>V("strong",null,"06.03.2013",-1))),Yl={class:""},Il=cl((()=>V("strong",null,"Specialist",-1))),ql={class:""},Pl=cl((()=>V("strong",null,"06.03.2013",-1))),El={class:""},Wl=cl((()=>V("strong",null,"Specialist",-1))),Fl={class:""},Bl=cl((()=>V("strong",null,"06.03.2013",-1))),Tl={class:""},Al=cl((()=>V("strong",null,"Specialist",-1))),Ll=Q(a({__name:"LaboratoryTestResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l,o=c(!1),i=c(""),d=c(null);function r(){a("update:isOpen",!1)}return R((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const u=re,c=de,p=e;return s(),m(p,{open:l.isOpen,size:"extra-big",title:n(i),actions:"right",onClose:r},{content:v((()=>{var e,l,t,o;return[V("h4",pl,b(a.$t("Laboratory_test_results")),1),_l,V("div",ml,[V("div",vl,[V("div",fl,[V("table",yl,[V("thead",bl,[V("tr",null,[V("th",hl,b(a.$t("Primary_screening_results")),1),V("th",gl,b(a.$t("Hemotransmission_research_results")),1),V("th",Vl,b(a.$t("clinical_biochemical_research_results")),1),V("th",wl,b(a.$t("Serological_research_results")),1),V("th",$l,b(a.$t("Immunological_research_results")),1)])]),V("tbody",null,[V("tr",null,[V("td",null,[V("p",xl,[y(b(a.$t("Researched_at"))+": ",1),V("strong",null,b(null==(e=n(d))?void 0:e.date),1)]),V("p",kl,[y(b(a.$t("Researched_by"))+": ",1),V("strong",null,b(a.$t("Specialist")),1)]),V("p",Cl,[y(b(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,b(null==(t=null==(l=n(d))?void 0:l.blood_type)?void 0:t.label),1)]),V("p",Ul,[y(b(a.$t("Hemoglobin_gl"))+": ",1),V("strong",jl,b(null==(o=n(d))?void 0:o.value),1)])]),V("td",null,[V("p",Ml,[y(b(a.$t("Researched_at"))+": ",1),Sl]),V("p",Ol,[y(b(a.$t("Researched_by"))+": ",1),zl])]),V("td",null,[V("p",Dl,[y(b(a.$t("Researched_at"))+": ",1),Rl]),V("p",Yl,[y(b(a.$t("Researched_by"))+": ",1),Il])]),V("td",null,[V("p",ql,[y(b(a.$t("Researched_at"))+": ",1),Pl]),V("p",El,[y(b(a.$t("Researched_by"))+": ",1),Wl])]),V("td",null,[V("p",Fl,[y(b(a.$t("Researched_at"))+": ",1),Bl]),V("p",Tl,[y(b(a.$t("Researched_by"))+": ",1),Al])])])])])])])])]})),action:v((({close:e})=>[f(c,null,{default:v((()=>[f(u,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:v((()=>[y(b(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),f(u,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:v((()=>[y(b(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-4fb28ee5"]]),Nl={class:"has-text-centered is-size-3"},Gl=V("br",null,null,-1),Hl={class:"columns"},Jl={class:"column"},Kl={class:"is-size-5"},Ql={class:"is-size-5"},Zl={class:"is-size-5"},Xl={class:"is-size-5"},ea={class:"has-text-primary"},la=a({__name:"PrimaryScreeningResultsModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","medicalExamination","withdrawal"],setup(l,{emit:a}){const t=l;z(),D(),r(),u();const o=c(!1),i=c(""),d=c(null);function p(){a("update:isOpen",!1)}return R((()=>{t.visitcard&&(d.value=t.visitcard.primary_screening_result)})),(a,t)=>{const r=re,u=de,c=e;return s(),m(c,{open:l.isOpen,title:n(i),actions:"center",onClose:p},{content:v((()=>{var e,l,t,o,s;return[V("h1",Nl,b(a.$t("Primary_screening_results")),1),Gl,V("div",Hl,[V("div",Jl,[V("p",Kl,[y(b(a.$t("Researched_at"))+": ",1),V("strong",null,b(null==(e=n(d))?void 0:e.date),1)]),V("p",Ql,[y(b(a.$t("Researched_by"))+": ",1),V("strong",null,b((null==(l=n(d))?void 0:l.created_by)??a.$t("Specialist")),1)]),V("p",Zl,[y(b(a.$t("Preliminary_blood_type"))+": ",1),V("strong",null,b(null==(o=null==(t=n(d))?void 0:t.blood_type)?void 0:o.label),1)]),V("p",Xl,[y(b(a.$t("Hemoglobin_gl"))+": ",1),V("strong",ea,b(null==(s=n(d))?void 0:s.value),1)])])])]})),action:v((({close:e})=>[f(u,null,{default:v((()=>[f(r,{type:"button",color:"primary",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("medicalExamination")}},{default:v((()=>[y(b(a.$t("For_medical_examination")),1)])),_:2},1032,["disabled","onClick"]),f(r,{type:"button",color:"danger",outlined:"",disabled:n(o),onClick:()=>{e(),a.$emit("withdrawal")}},{default:v((()=>[y(b(a.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["open","title"])}}}),aa=["onSubmit"],ta={class:"table is-bordered is-fullwidth"},na={class:"has-text-centered"},oa={class:"has-text-centered"},sa={class:"has-text-centered"},ia=ee.flatten,da=Q(a({__name:"MedicalQuestionnaireModal",props:{visitcard:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","laboratoryResearch","withdrawal"],async setup(a,{emit:t}){let o,d;const p=a;z(),D();const h=r(),{t:g}=u(),w=c(!1),$=g("Medical_questionnaire_before_donation"),U=c([]),j=c(!1);async function M(){var e;try{w.value=!0;const l=ia(U.value.map((e=>e.questions.map((e=>({question_id:e.id,value:e.question_answer}))))));await G(null==(e=p.visitcard)?void 0:e.id,{answers:l}),j.value=!0,h.success(g("Success"))}catch(l){h.error(l.message)}finally{w.value=!1}}function O(){t("update:isOpen",!1)}return[o,d]=Y((()=>async function(){var e;const l=await N(null==(e=p.visitcard)?void 0:e.id);U.value=l.result}())),await o,d(),_((()=>{var e;j.value=!!(null==(e=p.visitcard)?void 0:e.questionnaire)})),(t,o)=>{const d=oe,r=Z,u=E,c=W,p=re,_=l,h=de,g=e;return s(),m(g,{open:a.isOpen,size:"extra-big",title:n($),actions:"right",onClose:O},{content:v((()=>[V("form",{id:"questionnaire-form",onSubmit:S(M,["prevent"])},[V("table",ta,[(s(!0),i(x,null,k(n(U),((e,l)=>(s(),i(x,{key:e.id},[V("thead",null,[V("tr",null,[V("th",na,b(e.name),1),V("th",oa,b(t.$t("Answer")),1)])]),V("tbody",null,[(s(!0),i(x,null,k(e.questions,((e,a)=>(s(),i("tr",{key:e.id},[V("td",null,b(e.name),1),V("td",sa,[f(c,null,{default:v((()=>[f(u,null,{default:v((()=>["text"===e.answer_type?(s(),m(d,{key:0,modelValue:n(U)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(U)[l].questions[a].question_answer=e,rows:1},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),"boolean"===e.answer_type?(s(),m(r,{key:1,modelValue:n(U)[l].questions[a].question_answer,"onUpdate:modelValue":e=>n(U)[l].questions[a].question_answer=e,"true-value":"1","false-value":null,color:"primary",class:"p-0"},null,8,["modelValue","onUpdate:modelValue"])):C("",!0)])),_:2},1024)])),_:2},1024)])])))),128))])],64)))),128))])],40,aa)])),action:v((({close:e})=>[f(h,null,{default:v((()=>[f(p,{type:"button",color:"warning",disabled:n(w)||!n(j),onClick:()=>{e(),t.$emit("laboratoryResearch")}},{default:v((()=>[y(b(t.$t("Send_for_examination")),1)])),_:2},1032,["disabled","onClick"]),f(p,{type:"button",color:"danger",disabled:n(w)||!n(j),onClick:()=>{e(),t.$emit("withdrawal")}},{default:v((()=>[y(b(t.$t("Withdrawal")),1)])),_:2},1032,["disabled","onClick"]),f(_,{form:"questionnaire-form",loading:n(w)},{default:v((()=>[y(b(n(j)?t.$t("Update"):t.$t("Save")),1)])),_:1},8,["loading"])])),_:2},1024)])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-45b9e682"]]),ra={class:"patient-detail-wrapper"},ua=["onSubmit"],ca={class:"columns mt-5"},pa={class:"column"},_a={class:"title is-size-5"},ma={class:"column"},va={class:"title is-size-5"},fa=(e=>(U("data-v-ee3bbee0"),e=e(),j(),e))((()=>V("br",null,null,-1))),ya={class:"help has-text-danger"},ba={class:"column"},ha={class:"title is-size-5"},ga={class:"navigation-buttons"},Va={class:"buttons is-right"},wa={key:1,class:"mt-5"},$a={class:"box"},xa={class:"is-size-6"},ka={class:"is-size-6"},Ca={class:"is-size-6"},Ua={class:"table is-bordered is-fullwidth"},ja={key:0},Ma={key:1},Sa=fe.__esModule?fe.default:fe,Oa=Q(a({__name:"[id]",async setup(e){var l;let a,t;const d=z();D();const h=r(),{t:w}=u(),$=p({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:"",gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:"",region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),x=p({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),k=c(!1),U=(null==(l=d.params)?void 0:l.id)||null,j=c([{label:w("Patient_details"),value:"#details",icon:"feather:info"},{label:w("Medical_information"),value:"#medical_information",icon:"feather:file-text"}]),M=c([]),O=c(!1),R=c(!1),P=c(!1),F=c(!1),B=c(!1),T=c(!1),A=c(!1),L=c("#details");function N(e){x[e]=[]}async function G(){var e,l;try{k.value=!0;await K(U,$);h.success(w("Updated_successfully"))}catch(a){(null==(e=a.response)?void 0:e.data.errors)?Object.assign(x,null==(l=a.response)?void 0:l.data.errors):h.error(w("Something_went_wrong"))}finally{k.value=!1}}function Q(){O.value=!0}function Z(){R.value=!0}function ee(){P.value=!0}function ae(){F.value=!0}function te(){B.value=!0}function ne(){T.value=!0}function oe(){A.value=!0}function se(){}return ve().setPageTitle(w("Patient_info")),I({title:o((()=>w("Patient_info")))}),[a,t]=Y((()=>async function(){try{const e=await J(Number(U));Object.assign($,e.result),$.pinfl??($.pinfl=""),$.phone_home??($.phone_home=""),$.phone_number??($.phone_number=""),$.phone_work??($.phone_work=""),$.birth_date=$.birth_date?Sa($.birth_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"",$.when_issued=$.when_issued?Sa($.when_issued,"YYYY-MM-DD").format("YYYY-MM-DD"):""}catch(e){h.error(e.message)}}())),await a,t(),_((async()=>{const e=await H();M.value=e.result})),(e,l)=>{var a;const t=pe,o=_e,d=g("Multiselect"),r=E,u=W,c=me,p=re,_=le,h=X,w=ce,z=da,D=la,Y=Ll,I=ul,H=Ie,J=Se,K=Ve;return s(),i("div",ra,[f(w,{selected:n(L),tabs:n(j)},{tab:v((({activeValue:a})=>{var m,g;return["#details"===a?(s(),i("form",{key:0,onSubmit:S(G,["prevent"])},[V("div",ca,[V("div",pa,[V("p",_a,b(e.$t("Passport_info")),1),f(t,{patient:n($),errors:n(x),onEditing:N},null,8,["patient","errors"])]),V("div",ma,[V("p",va,b(e.$t("Personal_Info")),1),f(o,{patient:n($),errors:n(x),onEditing:N},null,8,["patient","errors"]),fa,f(u,{label:e.$t("Category"),required:""},{default:v((()=>[f(r,null,{default:v((()=>[f(d,{modelValue:n($).patient_category_id,"onUpdate:modelValue":l[0]||(l[0]=e=>n($).patient_category_id=e),options:n(M),placeholder:e.$t("Select_category"),label:"name","value-prop":"id",onChange:l[1]||(l[1]=e=>N("patient_category_id"))},null,8,["modelValue","options","placeholder"]),V("p",ya,b(n(x).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),V("div",ba,[V("p",ha,b(e.$t("Address")),1),f(c,{patient:n($),errors:n(x),onEditing:N},null,8,["patient","errors"])])]),V("div",ga,[V("div",Va,[f(p,{type:"submit",color:"primary",bold:"",loading:n(k),disabled:n(k),tabindex:"0"},{default:v((()=>[y(b(e.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,ua)):"#medical_information"===a?(s(),i("div",wa,[V("div",$a,[f(h,{class:"mb-3","justify-content":"space-between"},{default:v((()=>[f(_,null,{default:v((()=>{var l,a;return[V("p",xa,b(e.$t("Directed_by"))+": "+b(null==(a=null==(l=n($).last_visit)?void 0:l.medical_organization)?void 0:a.name),1)]})),_:1}),f(_,null,{default:v((()=>{var l,a;return[V("p",ka,b(e.$t("Personalized_donation"))+": "+b((null==(l=n($).last_visit)?void 0:l.is_personalized_donation)?null==(a=n($).last_visit)?void 0:a.personalized_donation:e.$t("No")),1)]})),_:1}),f(_,null,{default:v((()=>{var l;return[V("p",Ca,b(e.$t("Blood_collect_condition"))+": "+b((null==(l=n($).last_visit)?void 0:l.is_mobile_team)?e.$t("Mobile_team"):e.$t("Stationary")),1)]})),_:1})])),_:1}),V("table",Ua,[V("tbody",null,[V("tr",null,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:Q},b(e.$t("Medical_questionnaire")),1)])]),(null==(m=n($).last_visit)?void 0:m.primary_screening_result)?(s(),i("tr",ja,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:Z},b(e.$t("Primary_screening_results")),1)])])):C("",!0),(null==(g=n($).last_visit)?void 0:g.visit_status_id)>=3?(s(),i("tr",Ma,[V("td",null,[V("a",{href:"javascript:;",class:"has-text-primary is-uppercase",onClick:ee},b(e.$t("Laboratory_test_results")),1)])])):C("",!0)])])])])):C("",!0)]})),_:1},8,["selected","tabs"]),f(z,{"is-open":n(O),"onUpdate:is-open":l[2]||(l[2]=e=>q(O)?O.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onLaboratoryResearch:ne},null,8,["is-open","visitcard"]),(null==(a=n($).last_visit)?void 0:a.visit_status_id)>=3?(s(),m(D,{key:0,"is-open":n(R),"onUpdate:is-open":l[3]||(l[3]=e=>q(R)?R.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onMedicalExamination:ae},null,8,["is-open","visitcard"])):C("",!0),f(Y,{"is-open":n(P),"onUpdate:is-open":l[4]||(l[4]=e=>q(P)?P.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onMedicalExamination:ae},null,8,["is-open","visitcard"]),f(I,{"is-open":n(F),"onUpdate:is-open":l[5]||(l[5]=e=>q(F)?F.value=e:null),visitcard:n($).last_visit,onWithdrawal:te,onDonation:oe},null,8,["is-open","visitcard"]),f(H,{"is-open":n(B),"onUpdate:is-open":l[6]||(l[6]=e=>q(B)?B.value=e:null),"patient-id":Number(n(U))},null,8,["is-open","patient-id"]),f(J,{"is-open":n(T),"onUpdate:is-open":l[7]||(l[7]=e=>q(T)?T.value=e:null),visitcard:n($).last_visit},null,8,["is-open","visitcard"]),f(K,{"is-open":n(A),"onUpdate:is-open":l[8]||(l[8]=e=>q(A)?A.value=e:null),visitcard:n($).last_visit,onSubmit:se},null,8,["is-open","visitcard"])])}}}),[["__scopeId","data-v-ee3bbee0"]]);export{Oa as default};
