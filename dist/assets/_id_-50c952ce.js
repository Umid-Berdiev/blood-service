import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-b35d55fc.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as t,a as l,b as i}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-ebd47023.js";import{_ as s,a as n}from"./VControl-fc151345.js";import{b as o,u as r}from"./chunk-DRAQDPQ2-4514f14e.js";import{a as d,b as _,r as u,o as p,D as c,s as m,l as b,t as y,q as v,Q as g,X as f,p as h,u as z,V,m as j,M as k,W as x,y as w,v as $,c as P,ac as U,w as C,i as I,$ as D,a0 as E}from"./chunk-BGPNDDXN-dcda8805.js";import{u as M}from"./@vueuse_head-0d019878.js";import{u as O}from"./viewWrapper-c60f0ce7.js";import{u as S}from"./chunk-3UEUFEGV-d557e6b1.js";import{_ as N}from"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import{_ as T}from"./SubmitButton.vue_vue_type_script_setup_true_lang-e5001c63.js";import{_ as q}from"./VCheckbox.vue_vue_type_style_index_0_lang-25f2733c.js";import{_ as A}from"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import{_ as F}from"./VRadio.vue_vue_type_style_index_0_lang-03da69fa.js";import{_ as B}from"./lodash-94527813.js";import{u as R}from"./useNotyf-1536ae84.js";import{a as G,u as H,c as Q,v as W,r as X}from"./index-10ca0661.js";import{f as K}from"./additional-e5508e19.js";import{_ as J}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-f3f542ff.js";import{_ as L,a as Y,b as Z}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{c as ee,d as ae,_ as te,a as le,b as ie}from"./search-7-dark-f0facebe.js";import{_ as se}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-1dc8c767.js";import{_ as ne}from"./VIcon.vue_vue_type_script_setup_true_lang-287aecd9.js";import{_ as oe}from"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import{u as re}from"./main-a3a6220c.js";import{p as de,h as _e,u as ue}from"./patient-3eef0e53.js";import{_ as pe}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VPlaceload-2a65ae53.js";import"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-a017671a.js";import"./pinia-3af6ce52.js";import"./userSession-0c0e9684.js";import"./@vueuse_core-098eb702.js";import"./VDropdown.vue_vue_type_style_index_0_lang-a9625316.js";const ce=["onSubmit"],me={class:"help has-text-danger"},be=g("br",null,null,-1),ye={class:"help has-text-danger"},ve={class:"help has-text-danger"},ge={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},je={class:"column is-6"},ke=B.isEmpty,xe=d({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const l=e,i=o(),r=R(),{t:d}=S(),P=_(d("Add")),U=(null==(t=i.params)?void 0:t.id)||null,C=_(!1),I=u({patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),D=_([{value:"gratuitous",label:d("Gratuitous")},{value:"chargeable",label:d("Chargeable")}]),E=_([{value:"medical_organization",label:d("Healthcare_facilities")},{value:"public_organization",label:d("Public_organizations")},{value:"independently",label:d("Independently")}]),M=_([]),O=u({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function B(){var e,t;try{C.value=!0,l.cardId?await H(l.cardId,I):await Q(I),a("update:list"),r.success(d("Updated_successfully")),W()}catch(i){Object.assign(O,null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors),r.error(i.message)}finally{C.value=!1}}function W(){P.value=d("Add"),Object.assign(I,{patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(O,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return p((async()=>{const e=await K();ke(e.result)||(M.value=e.result)})),c((async()=>{if(Number(l.cardId)){P.value=d("Edit");const{result:e}=await G(Number(l.cardId),U);Object.assign(I,{patient_id:e.patient_id,visit_type:e.visit_type,directed_by:e.directed_by,medical_organization_id:e.medical_organization_id,public_organization:e.public_organization,is_personalized_donation:e.is_personalized_donation,is_mobile_team:e.is_mobile_team,personalized_donation:e.personalized_donation,mobile_team:e.mobile_team})}})),(a,t)=>{const l=m("Multiselect"),i=s,o=n,r=F,d=A,_=q,u=T,p=N;return b(),y(p,{open:e.isOpen,size:"large",title:z(P),actions:"right",onClose:W},{content:v((()=>[g("form",{id:"visitcard-form",class:"modal-form",onSubmit:f(B,["prevent"])},[h(o,{label:a.$t("Visit_type"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[h(l,{modelValue:z(I).visit_type,"onUpdate:modelValue":t[0]||(t[0]=e=>z(I).visit_type=e),options:z(D),placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),g("p",me,V(z(O).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,h(o,{label:a.$t("Directed_by"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[(b(!0),j(k,null,x(z(E),((e,a)=>(b(),y(r,{key:a,modelValue:z(I).directed_by,"onUpdate:modelValue":t[1]||(t[1]=e=>z(I).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===z(I).directed_by?(b(),y(o,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[h(l,{modelValue:z(I).medical_organization_id,"onUpdate:modelValue":t[2]||(t[2]=e=>z(I).medical_organization_id=e),options:z(M),placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),g("p",ye,V(z(O).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):w("",!0),"public_organization"===z(I).directed_by?(b(),y(o,{key:1,label:a.$t("Public_organization_title"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[h(d,{modelValue:z(I).public_organization,"onUpdate:modelValue":t[3]||(t[3]=e=>z(I).public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),g("p",ve,V(z(O).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):w("",!0),g("div",ge,[g("div",fe,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[h(_,{modelValue:z(I).is_personalized_donation,"onUpdate:modelValue":t[4]||(t[4]=e=>z(I).is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),g("div",he,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[z(I).is_personalized_donation?(b(),y(d,{key:0,modelValue:z(I).personalized_donation,"onUpdate:modelValue":t[5]||(t[5]=e=>z(I).personalized_donation=e)},null,8,["modelValue"])):w("",!0)])),_:1})])),_:1})])]),g("div",ze,[g("div",Ve,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[h(_,{modelValue:z(I).is_mobile_team,"onUpdate:modelValue":t[6]||(t[6]=e=>z(I).is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),g("div",je,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[z(I).is_mobile_team?(b(),y(d,{key:0,modelValue:z(I).mobile_team,"onUpdate:modelValue":t[7]||(t[7]=e=>z(I).mobile_team=e)},null,8,["modelValue"])):w("",!0)])),_:1})])),_:1})])])],40,ce)])),action:v((({close:e})=>[h(u,{loading:z(C),form:"visitcard-form"},{default:v((()=>[$(V(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),we={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ue={key:0,class:"is-flex-grow-0",textContent:"#"},Ce={key:0,class:"flex-list-inner"},Ie={key:1,class:"flex-list-inner"},De=g("img",{class:"light-image",src:ee,alt:""},null,-1),Ee=g("img",{class:"dark-image",src:ae,alt:""},null,-1),Me={key:0,class:"dark-text"},Oe={key:1,class:"dark-text"},Se={key:3},Ne={key:4},Te=d({__name:"PatientVisitCardTable",async setup(e){var t;let l,i;const s=o();r();const n=R(),{t:d}=S(),p=re();O().setPageTitle(d("Patient_cards_list")),M({title:`${d("Patient_cards")} - ${p.app.name}`});const c=u({current_page:1,per_page:10,total:10,data:[]}),m=_(null),f=(null==(t=s.params)?void 0:t.id)||null,D=_(!1),E=P({get:()=>c.current_page,set:async e=>{await q(e)}}),N={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:d("Visit_type")},directed_by:{label:d("Directed_by")},medical_organization:{label:d("Healthcare_facilities")},public_organization:{label:d("Public_organizations")},independently:{label:d("Independently")},is_personalized_donation:{label:d("Personalized_donation")},is_mobile_team:{label:d("Mobile_team")},actions:{label:"",align:"end"}},T=_(!1);async function q(e=1){try{T.value=!0;const a=await W(f,{page:e,per_page:c.per_page});Object.assign(c,a.result)}catch(a){n.error(d(a.message))}finally{T.value=!1}}function A(e){m.value=e,D.value=!0}async function F(){await X(f,m.value),q()}function B(){q(),m.value=null}return _(),[l,i]=U((()=>q())),await l,i(),C((()=>c.per_page),(async()=>{await q()})),(e,t)=>{const l=a,i=oe,s=te,n=L,o=le,r=ne,d=se,_=Y,u=ie,f=Z,P=J,U=xe;return b(),j("div",we,[h(i,null,{default:v((()=>[h(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>A(null))},{default:v((()=>[$(V(e.$t("Add")),1)])),_:1})])),_:1}),g("div",$e,[g("div",Pe,[h(f,{class:"mt-4",columns:z(N),data:z(c).data,limit:z(c).per_page,total:z(c).total},{default:v((()=>[h(_,{rounded:"","no-header":!z(T)&&0===z(c).data.length},{"header-column":v((({column:e})=>["orderNumber"===e.key?(b(),j("span",Ue)):w("",!0)])),body:v((()=>[z(T)?(b(),j("div",Ce,[(b(!0),j(k,null,x(z(c).per_page,(e=>(b(),j("div",{key:e,class:"flex-table-item"},[h(n,null,{default:v((()=>[h(s,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===z(c).data.length?(b(),j("div",Ie,[h(o,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:v((()=>[De,Ee])),_:1},8,["title","subtitle"])])):w("",!0)])),"body-cell":v((({row:a,column:t,value:l})=>["visit_type"===t.key?(b(),j("span",Me,V(e.$t(l)),1)):w("",!0),"directed_by"===t.key?(b(),j("span",Oe,V(e.$t(l)),1)):w("",!0),"independently"===t.key?(b(),j(k,{key:2},["independently"===a.directed_by?(b(),y(r,{key:0,class:"has-text-primary",icon:"feather:check"})):(b(),y(r,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):w("",!0),"is_personalized_donation"===t.key?(b(),j("span",Se,V(a.personalized_donation),1)):w("",!0),"is_mobile_team"===t.key?(b(),j("span",Ne,V(a.mobile_team),1)):w("",!0),"actions"===t.key?(b(),y(d,{key:5,onEdit:e=>A(a.id),onRemove:e=>async function(e){m.value=e,p.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):w("",!0)])),_:1},8,["no-header"]),z(c).data.length?(b(),y(u,{key:0,"current-page":z(E),"onUpdate:current-page":t[1]||(t[1]=e=>I(E)?E.value=e:null),class:"mt-5","item-per-page":z(c).per_page,"total-items":z(c).total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):w("",!0)])),_:1},8,["columns","data","limit","total"])])]),h(P,{onConfirmAction:F}),h(U,{"is-open":z(D),"onUpdate:is-open":t[2]||(t[2]=e=>I(D)?D.value=e:null),"card-id":z(m),"onUpdate:list":B,onClose:t[3]||(t[3]=e=>m.value=null)},null,8,["is-open","card-id"])])}}}),qe={class:"patient-detail-wrapper"},Ae=["onSubmit"],Fe={class:"columns mt-5"},Be={class:"column"},Re={class:"is-size-5"},Ge=(e=>(D("data-v-d3d20e9f"),e=e(),E(),e))((()=>g("br",null,null,-1))),He={class:"help has-text-danger"},Qe={class:"column"},We={class:"is-size-5"},Xe={class:"column"},Ke={class:"is-size-5"},Je={class:"navigation-buttons"},Le={class:"buttons is-right"},Ye={key:1,class:"mt-5"},Ze=pe(d({__name:"[id]",async setup(d){var c;let y,k;const x=o();r();const C=R(),{t:I}=S(),D=u({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),E=u({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),N=_(!1),T=(null==(c=x.params)?void 0:c.id)||null,q=_([{label:I("Patient_details"),value:"#details",icon:"feather:info",to:`${x.path}#details`},{label:I("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${x.path}#patient_visit_cards`}]),A=_([]),F=_(x.hash||"#details");function B(e){E[e]=""}async function G(){var e,a;try{N.value=!0;await ue(T,D);C.success(I("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(E,null==(a=t.response)?void 0:a.data.errors):C.error(I("Something_went_wrong"))}finally{N.value=!1}}return O().setPageTitle(I("Patient_info")),M({title:P((()=>I("Patient_info")))}),[y,k]=U((()=>async function(){try{const e=await _e(T);Object.assign(D,e.result)}catch(e){C.error(e.message)}}())),await y,k(),p((async()=>{const e=await de();A.value=e.result})),(o,r)=>{const d=t,_=m("Multiselect"),u=s,p=n,c=l,y=i,k=a,x=e;return b(),j("div",qe,[h(x,{selected:z(F),tabs:z(q)},{tab:v((({activeValue:e})=>["#details"===e?(b(),j("form",{key:0,onSubmit:f(G,["prevent"])},[g("div",Fe,[g("div",Be,[g("p",Re,V(o.$t("Personal_Info")),1),h(d,{patient:z(D),errors:z(E),onEditing:B},null,8,["patient","errors"]),Ge,h(p,{label:o.$t("Category"),required:""},{default:v((()=>[h(u,null,{default:v((()=>[h(_,{modelValue:z(D).patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>z(D).patient_category_id=e),options:z(A),placeholder:o.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),g("p",He,V(z(E).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),g("div",Qe,[g("p",We,V(o.$t("Passport_info")),1),h(c,{patient:z(D),errors:z(E),onEditing:B},null,8,["patient","errors"])]),g("div",Xe,[g("p",Ke,V(o.$t("Address")),1),h(y,{patient:z(D),errors:z(E),onEditing:B},null,8,["patient","errors"])])]),g("div",Je,[g("div",Le,[h(k,{type:"submit",color:"primary",bold:"",loading:z(N),disabled:z(N),tabindex:"0"},{default:v((()=>[$(V(o.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Ae)):"#patient_visit_cards"===e?(b(),j("div",Ye,[h(Te)])):w("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-d3d20e9f"]]);export{Ze as default};
