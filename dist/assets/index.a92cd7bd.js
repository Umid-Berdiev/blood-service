import{f as a,g as e,_ as t,a as s,b as r,c as l,d as n,e as i}from"./search-7-dark.607cbb05.js";import{_ as o}from"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import{_ as u}from"./VButtons.vue_vue_type_script_setup_true_lang.8b787511.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang.61c9c78b.js";import{_ as p}from"./VFlexItem.vue_vue_type_style_index_0_lang.c03e68c9.js";import{_}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.141f26f3.js";import{q as c,E as m,H as g,C as f,x as v,r as b,J as h,ag as y,o as w,d as j,k as x,w as k,K as $,m as V,i as C,t as F,e as I,g as D,F as P,l as W,a as B}from"./index.5e313a07.js";import{u as E}from"./viewWrapper.74d08f31.js";import{_ as O}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang.7d0a75f0.js";import{u as R}from"./main.a14c778c.js";import{k as q}from"./patient.83d02e12.js";import{_ as T}from"./lodash.6f8ef5ec.js";import"./VPlaceload.726b7e5d.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VCard.vue_vue_type_script_setup_true_lang.1f6b49b7.js";import"./VInput.vue_vue_type_script_setup_true_lang.132fca0f.js";import"./VControl.a4292c49.js";import"./VIMaskInput.vue_vue_type_script_lang.1ef138ed.js";const G={class:"page-content-inner"},H={class:"columns mt-1"},J={class:"column"},K={class:"columns"},L={class:"column is-12"},M={key:0,class:"is-flex-grow-0",textContent:"#"},N={key:0,class:"flex-list-inner"},S={key:1,class:"flex-list-inner"},U=I("img",{class:"light-image",src:a,alt:""},null,-1),z=I("img",{class:"dark-image",src:e,alt:""},null,-1),A=T.isEmpty,Q=c({__name:"index",async setup(a){let e,c;m();const T=g(),{t:Q}=f(),X=R(),Y=v(!1),Z=b({lastname:"",firstname:"",middlename:"",passpordId:""});E().setPageTitle(Q("Registration")),h({title:`${Q("Donation-diverted-register")} - ${X.app.name}`});const aa=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),ea=b({page:1}),ta={"#":{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:Q("Fullname"),format:(a,e)=>`${e.first_name} ${e.last_name}`},birth_date:{label:Q("Date-of-birth")},gender:{label:Q("Gender"),format:a=>Q(a)},passport:{label:Q("Passport_series_number"),format:(a,e)=>`${e.passport_series}${e.passport_number}`},withdrawal_end_date:{label:Q("Withdrawal_end_date"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.end_date}},withdrawal_reason:{label:Q("Withdrawal_reason"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.reason}},withdrawal_created_by:{label:Q("Withdrawal_created_by"),format:(a,e)=>{var t;return null==(t=e.withdrawal)?void 0:t.created_by}}};async function sa(a){var e,t;try{Object.assign(ea,a),Y.value=!0;const e=await q(a);Object.assign(aa,e.result),A(e.result.data)?T.warning(Q("Data_not_found")):T.success(`${Q("Found")}: ${e.result.pagination.total} ${Q("records")}`)}catch(s){Object.assign(Z,null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.errors)}finally{Y.value=!1}}function ra(a){Z[a]=""}async function la(){aa.data=[]}function na(){}return v(),[e,c]=y((()=>sa(ea))),await e,c(),(a,e)=>{const c=_,m=p,g=d,f=u,v=o,b=t,h=s,y=r,E=l,R=n,q=i;return w(),j("div",G,[x(v,{"justify-content":"space-between","flex-wrap":"wrap"},{default:k((()=>[x(m,null,{default:k((()=>[x(c,{"with-icons":"",separator:"bullet",items:[{label:$(X).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Registration")},{label:a.$t("Donation-diverted-register"),to:{name:"/app/registration/donation-diverted-register/"}}]},null,8,["items"])])),_:1}),x(m,null,{default:k((()=>[x(f,null,{default:k((()=>[x(g,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:V(na,["prevent"])},{default:k((()=>[C(F(a.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),I("div",H,[I("div",J,[x(O,{"is-loading":Y.value,errors:Z,onSearch:sa,onClearForm:la,onClearError:ra},null,8,["is-loading","errors"])])]),I("div",K,[I("div",L,[x(q,{columns:$(ta),data:aa.data,limit:aa.pagination.per_page,total:aa.pagination.total},{default:k((()=>[x(E,{rounded:"","no-header":!Y.value&&0===aa.data.length},{"header-column":k((({column:a})=>["#"===a.key?(w(),j("span",M)):D("",!0)])),body:k((()=>[Y.value?(w(),j("div",N,[(w(!0),j(P,null,W(aa.pagination.per_page,(a=>(w(),j("div",{key:a,class:"flex-table-item"},[x(h,null,{default:k((()=>[x(b,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):D("",!0),0===aa.data.length?(w(),j("div",S,[x(y,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:k((()=>[U,z])),_:1})])):D("",!0)])),_:1},8,["no-header"]),aa.data.length?(w(),B(R,{key:0,"current-page":aa.pagination.current_page,"onUpdate:current-page":e[0]||(e[0]=a=>aa.pagination.current_page=a),class:"mt-5","item-per-page":aa.pagination.per_page,"total-items":aa.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):D("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Q as default};
