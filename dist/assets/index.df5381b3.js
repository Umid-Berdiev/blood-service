import{f as e,g as a,_ as t,a as s,b as r,c as n,d as l,e as o}from"./search-7-dark.c0e73d3f.js";import{_ as i}from"./VProgress.vue_vue_type_style_index_0_lang.f7b30e9f.js";import{_ as u}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang.7e5d9058.js";import{_ as d}from"./VFlex.vue_vue_type_style_index_0_lang.872f6df6.js";import{_ as p}from"./VButtons.vue_vue_type_script_setup_true_lang.28ce558f.js";import{_}from"./VButton.vue_vue_type_style_index_0_lang.31eed629.js";import{_ as m}from"./VFlexItem.vue_vue_type_style_index_0_lang.e28ce857.js";import{_ as c}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.f307b05f.js";import{q as g,E as f,H as v,C as y,x as b,r as h,J as j,c as x,j as k,o as w,d as $,k as C,w as V,K as F,m as I,i as P,t as D,e as R,g as B,F as E,l as O,a as U,S as q}from"./index.0abd75ed.js";import{u as A}from"./viewWrapper.04cc5e32.js";import{k as L}from"./patient.051aee9f.js";import{u as S}from"./main.e5d49235.js";import{_ as T}from"./lodash.55c10af6.js";import"./VPlaceload.5ce3c270.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VCard.vue_vue_type_script_setup_true_lang.f34ac11d.js";import"./VInput.vue_vue_type_script_setup_true_lang.bea9a7b4.js";import"./VControl.93d0bd46.js";import"./VIMaskInput.vue_vue_type_script_lang.931d2ba1.js";const z={class:"page-content-inner"},G={class:"columns mt-1"},H={class:"column"},J={class:"columns"},K={class:"column is-12"},M={key:0,class:"is-flex-grow-0",textContent:"#"},N={key:0,class:"flex-list-inner"},W={key:1,class:"flex-list-inner"},Q=R("img",{class:"light-image",src:e,alt:""},null,-1),X=R("img",{class:"dark-image",src:a,alt:""},null,-1),Y=T.isEmpty,Z=g({__name:"index",setup(e){const a=f(),g=v(),{t:T}=y(),Z=S(),ee=b(!1),ae=h({lastname:"",firstname:"",middlename:"",passpordId:""});A().setPageTitle(T("Registration")),j({title:`${T("Unified-donor-register")} - ${Z.app.name}`});const te=h({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),se=x({get:()=>te.pagination.current_page,set:async e=>{re.page=e,await oe(re)}}),re=h({page:1}),ne={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:T("Category"),format:e=>e.name},name:{label:T("Fullname")},gender:{label:T("Gender"),format:e=>T(e)},birth_date:{label:T("Date-of-birth")},full_address:{label:T("Address")},phone_number:{label:T("Phone_number")},isDiverted:{label:T("Diverted_from_donation")}},le=b();async function oe(e){var a,t;try{Object.assign(re,e),ee.value=!0;const a=await L(e);Object.assign(te,a.result),Y(a.result.data)?g.warning(T("Data_not_found")):g.success(`${T("Found")}: ${a.result.pagination.total} ${T("records")}`)}catch(s){Object.assign(ae,null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.errors)}finally{ee.value=!1}}function ie(e){ae[e]=""}async function ue(){te.data=[]}function de(){a.push("/app/registration/register-donors")}function pe(){}return(e,a)=>{const g=c,f=m,v=_,y=p,b=d,h=u,j=t,x=s,A=r,L=i,S=k("RouterLink"),T=n,Y=l,re=o;return w(),$("div",z,[C(b,{"justify-content":"space-between","flex-wrap":"wrap"},{default:V((()=>[C(f,null,{default:V((()=>[C(g,{"with-icons":"",separator:"bullet",items:[{label:F(Z).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Registration")},{label:e.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),C(f,null,{default:V((()=>[C(y,null,{default:V((()=>[C(v,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:I(de,["prevent"])},{default:V((()=>[P(D(e.$t("Add")),1)])),_:1},8,["onClick"]),C(v,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:I(pe,["prevent"])},{default:V((()=>[P(D(e.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),R("div",G,[R("div",H,[C(h,{"is-loading":ee.value,errors:ae,onSearch:oe,onClearForm:ue,onClearError:ie},null,8,["is-loading","errors"])])]),R("div",J,[R("div",K,[C(re,{columns:F(ne),data:te.data,limit:te.pagination.per_page,total:te.pagination.total},{default:V((()=>[C(T,{rounded:"","no-header":!ee.value&&0===te.data.length},{"header-column":V((({column:e})=>["#"===e.key?(w(),$("span",M)):B("",!0)])),body:V((()=>[ee.value?(w(),$("div",N,[(w(!0),$(E,null,O(te.pagination.per_page,(e=>(w(),$("div",{key:e,class:"flex-table-item"},[C(x,null,{default:V((()=>[C(j,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):B("",!0),0===te.data.length?(w(),$("div",W,[C(A,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:V((()=>[Q,X])),_:1})])):B("",!0)])),"body-row-pre":V((({row:e})=>[e.id===le.value?(w(),U(L,{key:0,size:"tiny",class:"m-0 mb-1"})):B("",!0)])),"body-cell":V((({row:a,column:t,value:s})=>["name"===t.key?(w(),U(S,{key:0,class:"has-text-primary",to:`${e.$route.path}/${a.id}#details`},{default:V((()=>[P(D(a.first_name)+" "+D(a.last_name)+" "+D(a.father_name),1)])),_:2},1032,["to"])):B("",!0)])),_:1},8,["no-header"]),te.data.length?(w(),U(Y,{key:0,"current-page":F(se),"onUpdate:current-page":a[0]||(a[0]=e=>q(se)?se.value=e:null),class:"mt-5","item-per-page":te.pagination.per_page,"total-items":te.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):B("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Z as default};
