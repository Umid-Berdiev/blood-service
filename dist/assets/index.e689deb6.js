import{g as e,h as a,_ as t,a as s,b as l,c as r,d as n,e as o,f as i}from"./search-7-dark.f40bb9f7.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang.9024072c.js";import{q as c,E as d,H as p,C as m,x as _,r as g,J as f,c as b,j as v,o as y,d as h,k as j,w as k,K as x,m as w,i as $,t as C,e as F,g as V,F as I,l as A,a as D,Q as E,_ as O,aN as P}from"./index.c63bfefe.js";import{_ as S}from"./VFlexItem.vue_vue_type_style_index_0_lang.633f7dbb.js";import{_ as q}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.31119acd.js";import{u as L}from"./viewWrapper.c89515a2.js";import{_ as N}from"./FilterForm.vue_vue_type_script_setup_true_lang.153dafe2.js";import{p as R}from"./patient.0a2597b8.js";import{u as T}from"./main.fb0b2bc3.js";import{_ as U}from"./lodash.3c9c43e7.js";import"./VInput.vue_vue_type_script_setup_true_lang.4047524f.js";import"./VControl.aaed4574.js";import"./VIMaskInput.vue_vue_type_script_lang.ef30de37.js";const z={class:"page-content-inner"},B={class:"columns mt-1"},G={class:"column"},H={class:"columns"},J={class:"column is-12"},K={key:0,class:"is-flex-grow-0",textContent:"#"},M={key:0,class:"flex-list-inner"},Q={key:1,class:"flex-list-inner"},W=F("img",{class:"light-image",src:e,alt:""},null,-1),X=F("img",{class:"dark-image",src:a,alt:""},null,-1),Y=U.isEmpty,Z=c({__name:"index",setup(e){const a=d(),c=p(),{t:U}=m(),Z=T(),ee=_(!1),ae=g({lastname:"",firstname:"",middlename:"",passpordId:""});L().setPageTitle(U("Advanced_Search")),f({title:`${U("Advanced_Search")} - ${Z.app.name}`});const te=g({result:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),se=b({get:()=>te.pagination.current_page,set:async e=>{le.page=e,await oe(le)}}),le=g({page:1}),re={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:U("Category"),format:e=>e.name},name:{label:U("Fullname")},gender:{label:U("Gender"),format:e=>U(e)},birth_date:{label:U("Date-of-birth")},full_address:{label:U("Address")},phone_number:{label:U("Phone_number")},isDiverted:{label:U("Diverted_from_donation")}},ne=_();async function oe(e){var a,t;try{Object.assign(le,e),ee.value=!0;const a=await R(e);Object.assign(te,a.result),Y(a.result.result)?c.warning(U("Data_not_found")):c.success(`${U("Found")}: ${a.result.pagination.total} ${U("records")}`)}catch(s){Object.assign(ae,null==(t=null==(a=s.response)?void 0:a.result)?void 0:t.errors)}finally{ee.value=!1}}function ie(e){ae[e]=""}async function ue(){te.result=[]}function ce(){a.push("/app/registration/register-donors")}function de(){}return(e,a)=>{const c=q,d=S,p=O,m=P,_=u,g=t,f=s,b=l,L=r,R=v("RouterLink"),T=n,U=o,Y=i;return y(),h("div",z,[j(_,{"justify-content":"space-between","flex-wrap":"wrap"},{default:k((()=>[j(d,null,{default:k((()=>[j(c,{"with-icons":"",separator:"bullet",items:[{label:x(Z).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Registration")},{label:e.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),j(d,null,{default:k((()=>[j(m,null,{default:k((()=>[j(p,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:w(ce,["prevent"])},{default:k((()=>[$(C(e.$t("Add")),1)])),_:1},8,["onClick"]),j(p,{outlined:"",rounded:"",color:"light",icon:"feather:printer",onClick:w(de,["prevent"])},{default:k((()=>[$(C(e.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),F("div",B,[F("div",G,[j(N,{"is-loading":ee.value,errors:ae,onSearch:oe,onClearForm:ue,onClearError:ie},null,8,["is-loading","errors"])])]),F("div",H,[F("div",J,[j(Y,{columns:x(re),data:te.result,limit:te.pagination.per_page,total:te.pagination.total},{default:k((()=>[j(T,{rounded:"","no-header":!ee.value&&0===te.result.length},{"header-column":k((({column:e})=>["#"===e.key?(y(),h("span",K)):V("",!0)])),body:k((()=>[ee.value?(y(),h("div",M,[(y(!0),h(I,null,A(te.pagination.per_page,(e=>(y(),h("div",{key:e,class:"flex-table-item"},[j(f,null,{default:k((()=>[j(g,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):V("",!0),0===te.result.length?(y(),h("div",Q,[j(b,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:k((()=>[W,X])),_:1})])):V("",!0)])),"body-row-pre":k((({row:e})=>[e.id===ne.value?(y(),D(L,{key:0,size:"tiny",class:"m-0 mb-1"})):V("",!0)])),"body-cell":k((({row:a,column:t,value:s})=>["name"===t.key?(y(),D(R,{key:0,class:"has-text-primary",to:`${e.$route.path}/${a.id}#details`},{default:k((()=>[$(C(a.first_name)+" "+C(a.last_name)+" "+C(a.father_name),1)])),_:2},1032,["to"])):V("",!0)])),_:1},8,["no-header"]),te.result.length?(y(),D(U,{key:0,"current-page":x(se),"onUpdate:current-page":a[0]||(a[0]=e=>E(se)?se.value=e:null),class:"mt-5","item-per-page":te.pagination.per_page,"total-items":te.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):V("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{Z as default};
