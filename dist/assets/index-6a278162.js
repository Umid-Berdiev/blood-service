import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-9e54e133.js";import{c as s,d as l,_ as n,a as r,b as i}from"./search-7-dark-e44eeced.js";import{_ as o}from"./RegistrationFilterForm.vue_vue_type_script_setup_true_lang-ed4f86e5.js";import{_ as u}from"./VFlex.vue_vue_type_style_index_0_lang-4effb675.js";import{_}from"./VButtons.vue_vue_type_script_setup_true_lang-14e66269.js";import{_ as p}from"./VButton.vue_vue_type_style_index_0_lang-73c8b1df.js";import{_ as d}from"./VFlexItem.vue_vue_type_style_index_0_lang-cf815e4d.js";import{_ as m}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d2aaa355.js";import{q as c,E as g,H as f,C as v,x as y,r as b,J as h,c as j,j as x,o as k,d as $,k as w,w as C,K as V,m as F,i as I,t as P,e as R,g as B,F as D,l as O,a as T,S as U}from"./index-10a7bb68.js";import{u as q}from"./viewWrapper-dc426096.js";import{k as A}from"./patient-d766edf9.js";import{u as E}from"./main-e68c1ccc.js";import"./VPlaceload-686e62ec.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VCard.vue_vue_type_script_setup_true_lang-2f7124ba.js";import"./VInput.vue_vue_type_script_setup_true_lang-88e8cbff.js";import"./VControl-5569cf53.js";import"./VIMaskInput.vue_vue_type_script_lang-dbe9f41c.js";import"./lodash-2e82d605.js";const L={class:"page-content-inner"},S={class:"columns mt-1"},z={class:"column"},G={class:"columns"},H={class:"column is-12"},J={key:0,class:"is-flex-grow-0",textContent:"#"},K={key:0,class:"flex-list-inner"},M={key:1,class:"flex-list-inner"},N=R("img",{class:"light-image",src:s,alt:""},null,-1),W=R("img",{class:"dark-image",src:l,alt:""},null,-1),X=c({__name:"index",setup(s){const l=g();f();const{t:c}=v(),X=E(),Y=y(!1),Z=b({lastname:"",firstname:"",middlename:"",passpordId:""});q().setPageTitle(c("Registration")),h({title:`${c("Unified-donor-register")} - ${X.app.name}`});const Q=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),ee=j({get:()=>Q.pagination.current_page,set:async e=>{ae.page=e,await se(ae)}}),ae=b({page:1}),te={"#":{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},category:{label:c("Category"),format:e=>e.name},name:{label:c("Fullname")},gender:{label:c("Gender"),format:e=>c(e)},birth_date:{label:c("Date-of-birth")},full_address:{label:c("Address")},phone_number:{label:c("Phone_number")},isDiverted:{label:c("Diverted_from_donation")}};async function se(e){var a,t;try{Object.assign(ae,e),Y.value=!0;const a=await A(e);Object.assign(Q,a.result)}catch(s){Object.assign(Z,null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.errors)}finally{Y.value=!1}}function le(e){Z[e]=""}async function ne(){Q.data=[]}function re(){l.push("/app/registration/register-donors")}function ie(){}return y(),(s,l)=>{const c=m,g=d,f=p,v=_,y=u,b=o,h=n,j=e,q=r,A=x("RouterLink"),E=a,ae=i,oe=t;return k(),$("div",L,[w(y,{"justify-content":"space-between","flex-wrap":"wrap"},{default:C((()=>[w(g,null,{default:C((()=>[w(c,{"with-icons":"",separator:"bullet",items:[{label:V(X).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:s.$t("Registration")},{label:s.$t("Unified-donor-register"),to:{name:"/app/registration/unified-donor-register/"}}]},null,8,["items"])])),_:1}),w(g,null,{default:C((()=>[w(v,null,{default:C((()=>[w(f,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:F(re,["prevent"])},{default:C((()=>[I(P(s.$t("Add")),1)])),_:1},8,["onClick"]),w(f,{outlined:"",rounded:"",color:"info",icon:"feather:printer",onClick:F(ie,["prevent"])},{default:C((()=>[I(P(s.$t("Print")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),R("div",S,[R("div",z,[w(b,{"is-loading":V(Y),errors:V(Z),onSearch:se,onClearForm:ne,onClearError:le},null,8,["is-loading","errors"])])]),R("div",G,[R("div",H,[w(oe,{columns:V(te),data:V(Q).data,limit:V(Q).pagination.per_page,total:V(Q).pagination.total},{default:C((()=>[w(E,{rounded:"","no-header":!V(Y)&&0===V(Q).data.length},{"header-column":C((({column:e})=>["#"===e.key?(k(),$("span",J)):B("",!0)])),body:C((()=>[V(Y)?(k(),$("div",K,[(k(!0),$(D,null,O(V(Q).pagination.per_page,(e=>(k(),$("div",{key:e,class:"flex-table-item"},[w(j,null,{default:C((()=>[w(h,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):B("",!0),0===V(Q).data.length?(k(),$("div",M,[w(q,{title:s.$t("No_data"),subtitle:s.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:C((()=>[N,W])),_:1},8,["title","subtitle"])])):B("",!0)])),"body-cell":C((({row:e,column:a,value:t})=>["name"===a.key?(k(),T(A,{key:0,class:"has-text-primary",to:`${s.$route.path}/${e.id}#details`},{default:C((()=>[I(P(e.first_name)+" "+P(e.last_name)+" "+P(e.father_name),1)])),_:2},1032,["to"])):B("",!0)])),_:1},8,["no-header"]),V(Q).data.length?(k(),T(ae,{key:0,"current-page":V(ee),"onUpdate:current-page":l[0]||(l[0]=e=>U(ee)?ee.value=e:null),class:"mt-5","item-per-page":V(Q).pagination.per_page,"total-items":V(Q).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):B("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}});export{X as default};
