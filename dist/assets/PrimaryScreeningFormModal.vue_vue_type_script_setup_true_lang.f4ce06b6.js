import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang.e01de1da.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang.ff8c9853.js";import{_ as t}from"./VFlex.vue_vue_type_style_index_0_lang.19debbcb.js";import{_ as a}from"./VFlexItem.vue_vue_type_style_index_0_lang.c03e68c9.js";import{_ as n,a as s}from"./VControl.a4292c49.js";import{_ as i}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang.2fa4ff12.js";import{q as o,H as r,C as u,x as d,r as _,j as m,o as p,a as b,w as y,e as c,t as f,m as v,k as h}from"./index.5e313a07.js";import{m as g}from"./moment.bb668042.js";import{b as x}from"./patient.83d02e12.js";const V={class:"columns"},$={class:"column"},j={class:"is-size-5 has-text-weight-medium"},w={class:"column"},I={class:"is-size-5 has-text-weight-medium"},M={class:"table"},D=["onSubmit"],O={class:"is-size-5 has-text-weight-medium"},Y={class:"table is-fullwidth"},B={class:"help has-text-danger"},P={class:"help has-text-danger"},q=["value"],z={class:"help has-text-danger"},F=g.__esModule?g.default:g,S=o({__name:"PrimaryScreeningFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list"],setup(o,{emit:g}){const S=o,A=r(),{t:C}=u(),U=d(C("Primary_screening_form")),k=d(!1),H=d([{value:"o1",label:"O(I)"},{value:"a2",label:"A(II)"},{value:"b3",label:"B(III)"},{value:"ab4",label:"AB(IV)"}]),G=d([{value:"normal",label:C("Normal")},{value:"below_normal",label:C("Below_normal")},{value:"above_normal",label:C("Above_normal")}]),L=_({analysis_date:F().format("YYYY-MM-DD"),preliminary_blood_type:"o1",hemoglobin:"normal"}),N=_({analysis_date:[],preliminary_blood_type:[],hemoglobin:[]});async function E(){var e,l,t,a,n;try{k.value=!0,await x(null==(e=S.patient)?void 0:e.id,L),g("update:list"),J()}catch(s){(null==(l=s.response)?void 0:l.data.error)?A.error(null==(t=s.response)?void 0:t.data.error):Object.assign(N,null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.errors)}finally{k.value=!1}}function J(){Object.assign(L,{analysis_date:F().format("YYYY-MM-DD"),preliminary_blood_type:"o1",hemoglobin:"normal"}),Object.assign(N,{analysis_date:[],preliminary_blood_type:[],hemoglobin:[]}),g("update:isOpen",!1)}return(r,u)=>{const d=i,_=n,g=s,x=m("Multiselect"),F=a,S=t,A=l,C=e;return p(),b(C,{open:o.isOpen,size:"big",title:U.value,actions:"right",onClose:J},{content:y((()=>{var e;return[c("div",V,[c("div",$,[c("h5",j,f(r.$t("Information_about_donor"))+" # "+f(o.patient.id),1)]),c("div",w,[c("h5",I,f(r.$t("Visit_date"))+": "+f(o.patient.created_at),1)])]),c("table",M,[c("tbody",null,[c("tr",null,[c("th",null,f(r.$t("Last_name")),1),c("td",null,f(o.patient.last_name),1)]),c("tr",null,[c("th",null,f(r.$t("First_name")),1),c("td",null,f(o.patient.first_name),1)]),c("tr",null,[c("th",null,f(r.$t("Middlename")),1),c("td",null,f(o.patient.father_name),1)]),c("tr",null,[c("th",null,f(r.$t("Date-of-birth")),1),c("td",null,f(o.patient.birth_date),1)]),c("tr",null,[c("th",null,f(r.$t("Gender")),1),c("td",null,f(o.patient.gender),1)]),c("tr",null,[c("th",null,f(r.$t("Visit_type")),1),c("td",null,f(null==(e=o.patient.visit)?void 0:e.visit_type),1)]),c("tr",null,[c("th",null,f(r.$t("Donor_category")),1),c("td",null,f(o.patient.patient_category_id),1)]),c("tr",null,[c("th",null,f(r.$t("Passport_series_number")),1),c("td",null,f(o.patient.passport_series)+f(o.patient.passport_number)+", "+f(o.patient.issued_by)+", "+f(o.patient.when_issued),1)])])]),c("form",{id:"primary-screening-form",class:"modal-form",onSubmit:v(E,["prevent"])},[c("h5",O,f(r.$t("Primary_screening_results")),1),c("table",Y,[c("tbody",null,[c("tr",null,[c("th",null,f(r.$t("Date_of_an_analysis")),1),c("td",null,[h(g,{required:""},{default:y((()=>[h(_,null,{default:y((()=>[h(d,{modelValue:L.analysis_date,"onUpdate:modelValue":u[0]||(u[0]=e=>L.analysis_date=e)},null,8,["modelValue"]),c("p",B,f(N.analysis_date[0]),1)])),_:1})])),_:1})])]),c("tr",null,[c("th",null,f(r.$t("Preliminary_blood_type")),1),c("td",null,[h(g,{required:""},{default:y((()=>[h(_,null,{default:y((()=>[h(x,{modelValue:L.preliminary_blood_type,"onUpdate:modelValue":u[1]||(u[1]=e=>L.preliminary_blood_type=e),options:H.value},null,8,["modelValue","options"]),c("p",P,f(N.analysis_date[0]),1)])),_:1})])),_:1})])]),c("tr",null,[c("th",null,f(r.$t("Hemoglobin")),1),c("td",null,[h(g,{required:""},{default:y((()=>[h(_,null,{default:y((()=>[h(S,null,{default:y((()=>[h(F,{"flex-grow":1},{default:y((()=>[h(x,{modelValue:L.hemoglobin,"onUpdate:modelValue":u[2]||(u[2]=e=>L.hemoglobin=e),options:G.value},null,8,["modelValue","options"])])),_:1}),h(F,null,{default:y((()=>[c("input",{class:"input",type:"text",value:r.$t("g/l"),style:{width:"3rem"}},null,8,q)])),_:1})])),_:1}),c("p",z,f(N.analysis_date[0]),1)])),_:1})])),_:1})])])])])],40,D)]})),action:y((({close:e})=>[h(A,{loading:k.value,form:"primary-screening-form"},null,8,["loading"])])),_:1},8,["open","title"])}}});export{S as _};
