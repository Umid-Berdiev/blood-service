import{_ as a,a as e,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-a0c1a611.js";import{_ as l,a as n,b as s,c as i,d as o}from"./search-7-dark-8086cfd0.js";import{_ as r}from"./VCard.vue_vue_type_script_setup_true_lang-bb96f312.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-8d9e700e.js";import{_ as u,a as _,b as c}from"./VControl-f7fb3a1b.js";import{_ as p}from"./ClientOnly.vue_vue_type_script_lang-c4665ea8.js";import{q as m,C as v,x as g,r as y,c as f,j as b,o as h,a as x,w as V,k,K as j,U as $,e as D,p as w,aj as C,H as Y,a8 as M,i as F,t as P,E as U,J as E,a7 as L,y as O,d as B,g as A,F as N,l as T,L as q,M as z}from"./index-98bd5d96.js";import{p as R,i as S}from"./patient-81564020.js";import{_ as W}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e0d2add1.js";import{u as G}from"./main-f6ba09a2.js";import{u as H}from"./viewWrapper-68c9a3c0.js";import{_ as I}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-d4822231.js";const J=["value"],K=D("i",{class:"fas fa-angle-double-right","aria-hidden":"true"},null,-1),Z=["value"],Q=m({__name:"DateRangePicker",props:{start:null,end:null},emits:["update:start","update:end"],setup(a,{emit:e}){const t=a,{locale:l}=v(),n=g({input:"DD.MM.YYYY"}),s=y({type:"string",mask:"YYYY-MM-DD"}),i=f({get:()=>({start:t.start,end:t.end}),set(a){e("update:start",a.start),e("update:end",a.end)}});return(a,e)=>{const t=u,o=d,r=_,c=b("VDatePicker"),m=p;return h(),x(m,null,{default:V((()=>[k(c,{modelValue:j(i),"onUpdate:modelValue":e[0]||(e[0]=a=>$(i)?i.value=a:null),locale:j(l),"is-range":"",color:"green","trim-weeks":"",masks:j(n),"model-config":j(s)},{default:V((({inputValue:a,inputEvents:e})=>[k(r,{addons:""},{default:V((()=>[k(t,{expanded:"",icon:"feather:corner-down-right"},{default:V((()=>[D("input",w({class:"input v-input",type:"text",value:a.start},C(e.start,!0)),null,16,J)])),_:2},1024),k(t,null,{default:V((()=>[k(o,{static:""},{default:V((()=>[K])),_:1})])),_:1}),k(t,{expanded:"",icon:"feather:corner-right-up",subcontrol:""},{default:V((()=>[D("input",w({class:"input v-input",type:"text",value:a.end},C(e.end,!0)),null,16,Z)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","locale","masks","model-config"])])),_:1})}}}),X={class:"columns"},aa={class:"column"},ea={class:"column"},ta={class:"help has-text-danger"},la={class:"column"},na={class:"help has-text-danger"},sa={class:"column"},ia={class:"help has-text-danger"},oa={class:"navigation-buttons"},ra={class:"buttons is-right"},da=m({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:n}=v();Y();const s=y({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),i=([t,l]=M((()=>R().then((a=>a.result)))),t=await t,l(),t),o=g([{value:"gratuitous",label:n("Gratuitous")},{value:"chargeable",label:n("Chargeable")}]),p=g([{id:1,name:n("Whole_blood_donation")},{id:2,name:n("Plasmapheresis")},{id:3,name:n("Plateletpheresis")}]),m=async()=>{e("search",s)},f=async()=>{Object.assign(s,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),e("clearForm")};return(e,t)=>{const l=c,n=Q,v=_,g=b("Multiselect"),y=u,$=d,w=r;return h(),x(w,null,{default:V((()=>[D("div",null,[D("div",X,[D("div",aa,[k(v,null,{default:V((()=>[k(l,null,{default:V((()=>[F(P(e.$t("Period")),1)])),_:1}),k(n,{start:j(s).start_date,"onUpdate:start":t[0]||(t[0]=a=>j(s).start_date=a),end:j(s).end_date,"onUpdate:end":t[1]||(t[1]=a=>j(s).end_date=a)},null,8,["start","end"])])),_:1})]),D("div",ea,[k(v,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:V((({id:l})=>[k(y,null,{default:V((()=>[k(g,{modelValue:j(s).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>j(s).donor_category_id=a),attrs:{id:l},options:j(i),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),D("p",ta,P(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",la,[k(v,{class:"is-curved-select",label:e.$t("Visit_type")},{default:V((({id:l})=>[k(y,null,{default:V((()=>[k(g,{modelValue:j(s).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>j(s).visit_type_id=a),attrs:{id:l},options:j(o),placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),D("p",na,P(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),D("div",sa,[k(v,{class:"is-curved-select",label:e.$t("Donation_type")},{default:V((({id:l})=>[k(y,null,{default:V((()=>[k(g,{modelValue:j(s).donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=a=>j(s).donation_type_id=a),attrs:{id:l},options:j(p),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),D("p",ia,P(a.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),D("div",oa,[D("div",ra,[k($,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:f},{default:V((()=>[F(P(e.$t("Clear")),1)])),_:1},8,["disabled"]),k($,{type:"button",color:"primary",bold:"",loading:a.isLoading,tabindex:"0",onClick:m},{default:V((()=>[F(P(e.$t("Search")),1)])),_:1},8,["loading"])])])])])),_:1})}}}),ua=a=>(q("data-v-f12d0c59"),a=a(),z(),a),_a={class:"page-content-inner"},ca={class:"columns mb-3"},pa={class:"column"},ma={class:"columns mt-1"},va={class:"column"},ga={class:"columns"},ya={class:"column is-12"},fa={key:0,class:"is-flex-grow-0",textContent:"#"},ba={key:0,class:"flex-list-inner"},ha={key:1,class:"flex-list-inner"},xa=ua((()=>D("img",{class:"light-image",src:i,alt:""},null,-1))),Va=ua((()=>D("img",{class:"dark-image",src:o,alt:""},null,-1))),ka=I(m({__name:"index",setup(i){U();const o=Y(),{t:r}=v(),d=G(),u=g(!1);H().setPageTitle(r("Physician-therapist")),E({title:`${r("Donors-list-for-examination")} - ${d.app.name}`});const _=y({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),c={orderNumber:{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:r("Fullname")},birth_date:{label:r("Date-of-birth")},visit_date:{label:r("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&L(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:r("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&r(null==(l=e.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:r("Medical_inspection_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.directed_by)&&r(null==(l=e.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:r("Medical_inspection_conclusion"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},donation_code:{label:r("Donation_code"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.donation_code}},donation_type:{label:r("Donation_type"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:r("Blood_component_amount"),format:(a,e)=>{var t;return null==(t=e.status)?void 0:t.name}}};g();const p=y({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),m=y({status:6});async function f(a){var e,t;try{Object.assign(m,{...m,...a,page:_.pagination.current_page}),u.value=!0;const e=await S(m);Object.assign(_,e.result)}catch(l){o.error(l.message),Object.assign(p,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{u.value=!1}}function $(a){p[a]=""}async function w(){_.data=[]}return O((()=>_.pagination.current_page),(async function(a){a&&await f(m)})),(i,o)=>{const r=W,m=da,v=l,g=a,y=n,C=b("RouterLink"),Y=e,M=s,U=t;return h(),B("div",_a,[D("div",ca,[D("div",pa,[k(r,{"with-icons":"",separator:"bullet",items:[{label:j(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Physician-therapist")},{label:i.$t("Examined-donor-register")}]},null,8,["items"])])]),D("div",ma,[D("div",va,[k(m,{"is-loading":j(u),errors:j(p),onSearch:f,onClearForm:w,onClearError:$},null,8,["is-loading","errors"])])]),D("div",ga,[D("div",ya,[k(U,{columns:j(c),data:j(_).data,limit:j(_).pagination.per_page,total:j(_).pagination.total},{default:V((()=>[k(Y,{rounded:"","no-header":!j(u)&&0===j(_).data.length},{"header-column":V((({column:a})=>["orderNumber"===a.key?(h(),B("span",fa)):A("",!0)])),body:V((()=>[j(u)?(h(),B("div",ba,[(h(!0),B(N,null,T(j(_).pagination.per_page,(a=>(h(),B("div",{key:a,class:"flex-table-item"},[k(g,null,{default:V((()=>[k(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):A("",!0),0===j(_).data.length?(h(),B("div",ha,[k(y,{title:i.$t("No_data"),subtitle:i.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:V((()=>[xa,Va])),_:1},8,["title","subtitle"])])):A("",!0)])),"body-cell":V((({row:a,column:e})=>["name"===e.key?(h(),x(C,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${a.id}`},{default:V((()=>[F(P(a.first_name)+" "+P(a.last_name)+" "+P(a.father_name)+" ",1)])),_:2},1032,["to"])):A("",!0)])),_:1},8,["no-header"]),j(_).data.length?(h(),x(M,{key:0,"current-page":j(_).pagination.current_page,"onUpdate:current-page":o[0]||(o[0]=a=>j(_).pagination.current_page=a),class:"mt-5","item-per-page":j(_).pagination.per_page,"total-items":j(_).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):A("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-f12d0c59"]]);export{ka as default};
