import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-52241399.js";import{_ as l}from"./SubmitButton.vue_vue_type_script_setup_true_lang-9075dd9c.js";import{_ as a}from"./VCheckbox.vue_vue_type_style_index_0_lang-494fdb99.js";import{_ as t}from"./DatePicker.vue_vue_type_script_setup_true_lang-30441cda.js";import{_ as n}from"./VInput.vue_vue_type_script_setup_true_lang-fcf9b43c.js";import{_ as s,a as o,b as i}from"./VControl-c4bfd6d4.js";import{q as d,H as u,C as r,x as _,r as c,A as p,j as m,o as f,a as b,w as v,e as g,t as y,k as h,K as V,i as $,g as x,d as j,F as w,L as k,M as C,y as U,m as S,E as O,J as z,l as D,U as F}from"./index-c5546e3f.js";import{a as B}from"./additional-2c3a91bb.js";import{_ as E}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as P}from"./VCard.vue_vue_type_script_setup_true_lang-9ddefd9d.js";import{_ as I,a as L}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-1679fcf5.js";import{_ as M}from"./NoDataPlaceholder-02547c33.js";import{_ as R}from"./ClearButton.vue_vue_type_script_setup_true_lang-e2cdf555.js";import{_ as T}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d20f193a.js";import{u as W}from"./main-94385ff1.js";import{u as q}from"./viewWrapper-911093a6.js";import"./VButton.vue_vue_type_style_index_0_lang-6deaaf11.js";import"./ClientOnly.vue_vue_type_script_lang-fed4a332.js";import"./VFlex.vue_vue_type_style_index_0_lang-84415715.js";const A=e=>(k("data-v-b709ab91"),e=e(),C(),e),H={class:"box"},N={class:"table is-fullwidth"},Q={class:""},G={class:"has-text-info"},J={class:""},K={class:"has-text-info"},Z={class:""},X={class:"has-text-info"},Y={class:""},ee={class:"has-text-info"},le={class:""},ae={class:"has-text-info"},te=A((()=>g("hr",{class:"is-divider"},null,-1))),ne={class:"box"},se={class:"table is-fullwidth"},oe={class:"is-flex is-align-items-center"},ie={class:"mr-5"},de=A((()=>g("br",null,null,-1))),ue={class:"is-flex is-align-items-center"},re={class:"is-flex is-align-items-center"},_e=E(d({__name:"ProductReleaseFormModal",props:{product:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(d,{emit:k}){const C=u(),{t:U}=r(),S=_(!1),O=_(U("Product_release")),z=c({sent_to_id:null,medical_organization_id:null,subdivision_id:null,issue_date:"",basis_id:null,received_by:"",sent_by:"",tsgsen:"",transfer_date:"",defect_reasons:[]}),D=c({sent_to_id:[],medical_organization_id:[],subdivision_id:[],issue_date:[],basis_id:[],received_by:[],sent_by:[],tsgsen:[],transfer_date:[],defect_reasons:[]}),F=_([]),E=_([{id:1,name:"Отдел перепаратов"},{id:2,name:"Имуннологическое отделение"},{id:3,name:"Отдел переработки"}]),P=_([{id:1,name:"На трансфузию"},{id:2,name:"На переработку"},{id:3,name:"В ЦГСЭН"},{id:4,name:"На списание"}]),I=_([{id:1,name:"По требованию"},{id:2,name:"За наличный расчет"},{id:4,name:"По справке"}]);async function L(){var e,l;try{S.value=!0,C.success(U("Data_saved_successfully")),M()}catch(a){C.error(a.message),Object.assign(D,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{S.value=!1}}function M(){k("update:isOpen",!1)}return p((async()=>{await B().then((e=>F.value=e.result))})),(u,r)=>{const _=m("Multiselect"),c=s,p=o,k=i,C=n,U=t,D=a,B=l,R=e;return f(),b(R,{open:d.isOpen,size:"big",title:V(O),actions:"right",onClose:M},{content:v((()=>[g("div",H,[g("table",N,[g("tbody",null,[g("tr",null,[g("td",null,[g("span",Q,y(u.$t("Component_name"))+": ",1),g("span",G,y(d.product.component_name),1)]),g("td",null,[g("span",J,y(u.$t("Donation_code"))+": ",1),g("span",K,y(d.product.donation_code),1)])]),g("tr",null,[g("td",null,[g("span",Z,y(u.$t("Donation_date"))+": ",1),g("span",X,y(d.product.donation_date),1)]),g("td",null,[g("span",Y,y(u.$t("Expiry_date"))+": ",1),g("span",ee,y(d.product.expiry_date),1)])]),g("tr",null,[g("td",null,[g("span",le,y(u.$t("Quantity_ml"))+": ",1),g("span",ae,y(d.product.quantity),1)])])])])]),te,g("div",ne,[g("table",se,[g("tbody",null,[g("tr",null,[g("td",null,[g("div",oe,[g("div",ie,y(u.$t("Send_to")),1),h(p,null,{default:v((()=>[h(c,null,{default:v((()=>[h(_,{modelValue:V(z).sent_to_id,"onUpdate:modelValue":r[0]||(r[0]=e=>V(z).sent_to_id=e),options:V(P),placeholder:u.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})]),de,1===V(z).sent_to_id?(f(),b(p,{key:0},{default:v((()=>[h(k,null,{default:v((()=>[$(y(u.$t("Healthcare_facilities_list")),1)])),_:1}),h(c,null,{default:v((()=>[h(_,{modelValue:V(z).medical_organization_id,"onUpdate:modelValue":r[1]||(r[1]=e=>V(z).medical_organization_id=e),options:V(F),placeholder:u.$t("Select"),label:"name",searchable:"","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})):x("",!0),2===V(z).sent_to_id?(f(),b(p,{key:1},{default:v((()=>[h(k,null,{default:v((()=>[$(y(u.$t("Subdivision")),1)])),_:1}),h(c,null,{default:v((()=>[h(_,{modelValue:V(z).subdivision_id,"onUpdate:modelValue":r[2]||(r[2]=e=>V(z).subdivision_id=e),options:V(E),placeholder:u.$t("Select"),label:"name",searchable:"","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1})):x("",!0),3===V(z).sent_to_id?(f(),b(p,{key:2,label:u.$t("TsGSEN")},{default:v((()=>[h(c,null,{default:v((()=>[h(C,{modelValue:V(z).tsgsen,"onUpdate:modelValue":r[3]||(r[3]=e=>V(z).tsgsen=e),placeholder:u.$t("Enter_tsgsen_title")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])):x("",!0),4===V(z).sent_to_id?(f(),j(w,{key:3},[g("div",ue,[g("div",null,y(u.$t("Transfer_date_for_debiting")),1),h(U,{modelValue:V(z).transfer_date,"onUpdate:modelValue":r[4]||(r[4]=e=>V(z).transfer_date=e),class:"ml-5"},null,8,["modelValue"])]),g("div",re,[g("div",null,y(u.$t("Defect_reasons")),1),h(p,{class:"ml-auto"},{default:v((()=>[h(c,{raw:"",subcontrol:""},{default:v((()=>[h(D,{modelValue:V(z).defect_reasons,"onUpdate:modelValue":r[5]||(r[5]=e=>V(z).defect_reasons=e),label:u.$t("Shelf_life_expired"),value:"shelf_life_expired"},null,8,["modelValue","label"])])),_:1}),h(c,{raw:"",subcontrol:""},{default:v((()=>[h(D,{modelValue:V(z).defect_reasons,"onUpdate:modelValue":r[6]||(r[6]=e=>V(z).defect_reasons=e),label:u.$t("Container_damage"),value:"container_damage"},null,8,["modelValue","label"])])),_:1}),h(c,{raw:"",subcontrol:""},{default:v((()=>[h(D,{modelValue:V(z).defect_reasons,"onUpdate:modelValue":r[7]||(r[7]=e=>V(z).defect_reasons=e),label:u.$t("Other"),value:"other"},null,8,["modelValue","label"])])),_:1})])),_:1})])],64)):x("",!0)]),g("td",null,[h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[h(k,null,{default:v((()=>[$(y(u.$t("Issue_date")),1)])),_:1}),h(U,{modelValue:V(z).issue_date,"onUpdate:modelValue":r[8]||(r[8]=e=>V(z).issue_date=e)},null,8,["modelValue"])])),_:1}),h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[h(k,null,{default:v((()=>[$(y(u.$t("Basis_for_issuance")),1)])),_:1}),h(c,null,{default:v((()=>[h(_,{modelValue:V(z).basis_id,"onUpdate:modelValue":r[9]||(r[9]=e=>V(z).basis_id=e),options:V(I),placeholder:u.$t("Select"),label:"name","value-prop":"id",style:{minWidth:"15rem"}},null,8,["modelValue","options","placeholder"])])),_:1})])),_:1}),h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[h(k,null,{default:v((()=>[$(y(u.$t("Received_by")),1)])),_:1}),h(c,null,{default:v((()=>[h(C,{modelValue:V(z).received_by,"onUpdate:modelValue":r[10]||(r[10]=e=>V(z).received_by=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),h(p,{horizontal:"",class:"is-align-items-center is-justify-content-space-between"},{default:v((()=>[h(k,null,{default:v((()=>[$(y(u.$t("Sent_by")),1)])),_:1}),h(c,null,{default:v((()=>[h(C,{modelValue:V(z).sent_by,"onUpdate:modelValue":r[11]||(r[11]=e=>V(z).sent_by=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1})])])])])])])),action:v((()=>[h(B,{type:"button",loading:V(S),onClick:L},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-b709ab91"]]),ce=["onSubmit"],pe={class:"columns"},me={class:"column is-3"},fe={class:"help has-text-danger"},be={class:"column is-3"},ve={class:"help has-text-danger"},ge={class:"column is-narrow mt-auto ml-auto pb-4"},ye={class:"buttons"},he=d({__name:"StorageTransferredProductsFilter",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],setup(e,{emit:a}){r(),u();const t=c({component_id:null,donation_code:""}),i=_([]),d=_(!1);U(t,(e=>{e&&(d.value=Object.values(e).some((e=>!!e)))}),{deep:!0});const p=async()=>{a("search",t)},x=async()=>{Object.assign(t,{component_id:null,donation_code:""}),a("clearForm")};return(a,u)=>{const r=m("Multiselect"),_=s,c=o,j=n,w=R,k=l,C=P;return f(),b(C,null,{default:v((()=>[g("form",{onSubmit:S(p,["prevent"])},[g("div",pe,[g("div",me,[h(c,{class:"is-curved-select",label:a.$t("Component_name")},{default:v((({id:l})=>[h(_,null,{default:v((()=>[h(r,{modelValue:V(t).component_id,"onUpdate:modelValue":u[0]||(u[0]=e=>V(t).component_id=e),attrs:{id:l},options:V(i),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),g("p",fe,y(e.errors.component_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),g("div",be,[h(c,{class:"is-curved-select",label:a.$t("Donation_code")},{default:v((({id:l})=>[h(_,null,{default:v((()=>[h(j,{modelValue:V(t).donation_code,"onUpdate:modelValue":u[1]||(u[1]=e=>V(t).donation_code=e),attrs:{id:l},placeholder:a.$t("Donation_code")},null,8,["modelValue","attrs","placeholder"]),g("p",ve,y(e.errors.donation_code[0]),1)])),_:2},1024)])),_:1},8,["label"])]),g("div",ge,[g("div",ye,[h(w,{disabled:e.isLoading||!V(d),onClear:x},null,8,["disabled"]),h(k,{loading:e.isLoading},{default:v((()=>[$(y(a.$t("Search")),1)])),_:1},8,["loading"])])])])],40,ce)])),_:1})}}}),Ve={class:"page-content-inner"},$e={class:"columns mb-5"},xe={class:"column is-narrow"},je={class:"columns"},we={class:"column"},ke={class:"columns"},Ce={class:"column"},Ue={class:"table-container"},Se={key:1,class:"table is-hoverable is-fullwidth"},Oe={colspan:"10"},ze=["onClick"],De=E(d({__name:"index",setup(e){O(),u();const{t:l}=r(),a=W(),t=_(!1),n=q();_(null),n.setPageTitle(l("Forwarding")),z({title:`${l("Storage_transferred_products")} - ${a.app.name}`});const s=c({data:[{id:11,donation_date:"10.12.2022",donation_code:"130100123400",blood_type:"O(I)",rh_factor:"Rh+",component_name:"Эритроцитная масса",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),o=c({}),i=_(!1),d=c({donation_code:[],component_id:[]});async function p(){var e,l;try{t.value=!0;s.pagination.current_page}catch(a){Object.assign(d,null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.errors)}finally{t.value=!1}}function m(e){errors[e]=""}async function $(){await p()}return U((()=>s.pagination.current_page),(async e=>{e&&await p()}),{immediate:!0}),U(i,(function(e){!1===e&&Object.assign(o,{})})),(e,l)=>{const n=T,u=he,r=M,_=I,c=L,k=P,C=_e;return f(),j("div",Ve,[g("div",$e,[g("div",xe,[h(n,{"with-icons":"",separator:"bullet",items:[{label:V(a).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:e.$t("Forwarding")},{label:e.$t("Storage_transferred_products")}]},null,8,["items"])])]),g("div",je,[g("div",we,[h(u,{"is-loading":V(t),errors:V(d),onSearch:p,onClearForm:$,onClearError:m},null,8,["is-loading","errors"])])]),g("div",ke,[g("div",Ce,[h(k,null,{default:v((()=>[g("div",Ue,[0===V(s).data.length?(f(),b(r,{key:0})):(f(),j("table",Se,[g("thead",null,[g("tr",null,[g("th",null,y(e.$t("Donation_date")),1),g("th",null,y(e.$t("Donation_code")),1),g("th",null,y(e.$t("Blood_type")),1),g("th",null,y(e.$t("Rh_factor")),1),g("th",null,y(e.$t("Component_name")),1),g("th",null,y(e.$t("Dose")),1),g("th",null,y(e.$t("Quantity_ml")),1),g("th",null,y(e.$t("Come_from")),1),g("th",null,y(e.$t("Recipient_surname")),1),g("th",null,y(e.$t("Expiry_date")),1)])]),g("tbody",null,[V(t)?(f(!0),j(w,{key:0},D(V(s).pagination.per_page,(e=>(f(),j("tr",{key:e},[g("td",Oe,[h(_,{lines:2,"last-line-width":"70%"})])])))),128)):(f(!0),j(w,{key:1},D(V(s).data,((e,l)=>(f(),j("tr",{key:l},[g("td",null,y(e.donation_date),1),g("td",null,[g("a",{href:"javascript:;",class:"has-text-primary",onClick:l=>function(e){Object.assign(o,e),i.value=!0}(e)},y(e.donation_code),9,ze)]),g("td",null,y(e.blood_type),1),g("td",null,y(e.rh_factor),1),g("td",null,y(e.component_name),1),g("td",null,y(e.dose),1),g("td",null,y(e.quantity),1),g("td",null,y(e.come_from),1),g("td",null,y(e.personalized_donation),1),g("td",null,y(e.expiry_date),1)])))),128))])]))]),V(s).data.length?(f(),b(c,{key:0,"current-page":V(s).pagination.current_page,"onUpdate:current-page":l[0]||(l[0]=e=>V(s).pagination.current_page=e),class:"mt-5","item-per-page":V(s).pagination.per_page,"total-items":V(s).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):x("",!0)])),_:1})])]),h(C,{"is-open":V(i),"onUpdate:is-open":l[1]||(l[1]=e=>F(i)?i.value=e:null),product:V(o),"onUpdate:list":p},null,8,["is-open","product"])])}}}),[["__scopeId","data-v-f1ed6bbc"]]);export{De as default};
