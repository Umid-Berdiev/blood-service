import{_ as t}from"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import{_ as e}from"./SubmitButton.vue_vue_type_script_setup_true_lang-e5001c63.js";import{_ as a}from"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import{_ as l,a as o}from"./VControl-fc151345.js";import{_ as s}from"./VCheckbox.vue_vue_type_style_index_0_lang-25f2733c.js";import{a as n,b as i,r,o as u,l as d,t as _,q as c,Q as p,V as m,p as y,u as f,m as v,M as g,y as h,$ as b,a0 as V,w as j,W as $,i as x}from"./chunk-BGPNDDXN-dcda8805.js";import{u as k}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as D}from"./useNotyf-1536ae84.js";import{f as q}from"./additional-00c211e1.js";import{_ as U}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as C}from"./VCard.vue_vue_type_script_setup_true_lang-a9232da9.js";import{a as P,_ as O,b as w,c as z,d as F}from"./search-7-dark-f0facebe.js";import{_ as B}from"./DonationForProcessingFilter.vue_vue_type_script_setup_true_lang-e0cacafc.js";import{_ as S}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as I}from"./chunk-DRAQDPQ2-4514f14e.js";import{u as E}from"./@vueuse_head-0d019878.js";import{u as N}from"./main-a3a6220c.js";import{u as Q}from"./viewWrapper-c60f0ce7.js";import"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import"./VPlaceload-2a65ae53.js";import"./userSession-0c0e9684.js";import"./pinia-3af6ce52.js";import"./@vueuse_core-098eb702.js";import"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import"./additionals-5276c916.js";import"./app-a24ed2b3.js";import"./darkmode-b70c06f1.js";const G=t=>(b("data-v-37874315"),t=t(),V(),t),M={class:"box"},R={class:"table is-fullwidth"},T={class:""},W={class:"has-text-info"},A={class:""},L={class:"has-text-info"},X={class:""},H={class:"has-text-info"},J={class:""},K={class:"has-text-info"},Y={class:""},Z={class:"has-text-info"},tt=G((()=>p("hr",{class:"is-divider"},null,-1))),et={class:"box"},at={class:"is-size-5"},lt=G((()=>p("br",null,null,-1))),ot={class:"table is-fullwidth"},st={class:""},nt={class:"mr-3"},it={class:"mr-3"},rt={class:"mr-3"},ut={class:"mr-3"},dt=U(n({__name:"ProcessingCardModal",props:{product:null,isOpen:{type:Boolean,default:!1}},emits:["update:isOpen","update:status"],setup(n,{emit:b}){const V=D(),{t:j}=k(),$=i(!1),x=i(j("Processing_card")),U=r({divided_into_doses:!1,plasma:{value:"",sent_for_quality_control:!1},erythrocyte_mass:{value:"",sent_for_quality_control:!1,sent_for_sterility_control:!1},dose:{first:"",second:""}}),C=r({plasma:[],erythrocyte_mass:[],sent_for_quality_control:[],divided_into_doses:[],sent_for_sterility_control:[]}),P=i([]);async function O(){var t,e;try{$.value=!0,V.success(j("Data_saved_successfully")),w()}catch(a){V.error(a.message),Object.assign(C,null==(e=null==(t=a.response)?void 0:t.data)?void 0:e.errors)}finally{$.value=!1}}function w(){b("update:isOpen",!1)}return u((async()=>{await q().then((t=>P.value=t.result))})),(i,r)=>{const u=s,b=l,V=o,j=a,k=e,D=t;return d(),_(D,{open:n.isOpen,size:"big",title:f(x),actions:"right",onClose:w},{content:c((()=>[p("div",M,[p("table",R,[p("tbody",null,[p("tr",null,[p("td",null,[p("span",T,m(i.$t("Donation_type"))+": ",1),p("span",W,m(n.product.donation_type),1)]),p("td",null,[p("span",A,m(i.$t("Donation_code"))+": ",1),p("span",L,m(n.product.donation_code),1)])]),p("tr",null,[p("td",null,[p("span",X,m(i.$t("Donation_date"))+": ",1),p("span",H,m(n.product.donation_date),1)]),p("td",null,[p("span",J,m(i.$t("Visit_type"))+": ",1),p("span",K,m(n.product.visit_type),1)])]),p("tr",null,[p("td",null,[p("span",Y,m(i.$t("Quantity_ml"))+": ",1),p("span",Z,m(n.product.quantity),1)])]),p("tr",null,[p("td",null,[y(V,{class:"is-align-items-center"},{default:c((()=>[y(b,{subcontrol:""},{default:c((()=>[y(u,{modelValue:f(U).divided_into_doses,"onUpdate:modelValue":r[0]||(r[0]=t=>f(U).divided_into_doses=t),label:i.$t("Divided_into_doses")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])])]),tt,p("div",et,["Донация цельной крови"===n.product.donation_type?(d(),v(g,{key:0},[p("h5",at,m(i.$t("Components_received"))+":",1),lt,p("table",ot,[p("tbody",null,[p("tr",null,[p("td",st,[y(V,{horizontal:"",class:"is-align-items-center"},{default:c((()=>[p("h5",nt,m(i.$t("Plasma_FFP_ml")),1),y(b,{subcontrol:""},{default:c((()=>[y(j,{modelValue:f(U).plasma.value,"onUpdate:modelValue":r[1]||(r[1]=t=>f(U).plasma.value=t)},null,8,["modelValue"])])),_:1}),y(b,{subcontrol:""},{default:c((()=>[y(u,{modelValue:f(U).plasma.sent_for_quality_control,"onUpdate:modelValue":r[2]||(r[2]=t=>f(U).plasma.sent_for_quality_control=t),label:i.$t("Sample_sent_for_quality_control")},null,8,["modelValue","label"])])),_:1})])),_:1})])]),p("tr",null,[p("td",null,[y(V,{horizontal:"",class:"is-align-items-center"},{default:c((()=>[p("h5",it,m(i.$t("Erythrocyte_mass_ml")),1),y(b,{subcontrol:""},{default:c((()=>[y(j,{modelValue:f(U).erythrocyte_mass.value,"onUpdate:modelValue":r[3]||(r[3]=t=>f(U).erythrocyte_mass.value=t)},null,8,["modelValue"])])),_:1}),y(b,{subcontrol:""},{default:c((()=>[y(u,{modelValue:f(U).erythrocyte_mass.sent_for_quality_control,"onUpdate:modelValue":r[4]||(r[4]=t=>f(U).erythrocyte_mass.sent_for_quality_control=t),label:i.$t("Sample_sent_for_quality_control")},null,8,["modelValue","label"])])),_:1}),y(b,{subcontrol:""},{default:c((()=>[y(u,{modelValue:f(U).erythrocyte_mass.sent_for_sterility_control,"onUpdate:modelValue":r[5]||(r[5]=t=>f(U).erythrocyte_mass.sent_for_sterility_control=t),label:i.$t("Sample_sent_for_sterility_control")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])])],64)):h("",!0),"Плазмаферез"===n.product.donation_type?(d(),v(g,{key:1},[y(V,{horizontal:"",class:"is-align-items-center"},{default:c((()=>[p("h5",rt,m(i.$t("Dose"))+" 1, ml",1),y(b,{subcontrol:""},{default:c((()=>[y(j,{modelValue:f(U).dose.first,"onUpdate:modelValue":r[6]||(r[6]=t=>f(U).dose.first=t)},null,8,["modelValue"])])),_:1})])),_:1}),y(V,{horizontal:"",class:"is-align-items-center"},{default:c((()=>[p("h5",ut,m(i.$t("Dose"))+" 2, ml",1),y(b,{subcontrol:""},{default:c((()=>[y(j,{modelValue:f(U).dose.second,"onUpdate:modelValue":r[7]||(r[7]=t=>f(U).dose.second=t)},null,8,["modelValue"])])),_:1})])),_:1})],64)):h("",!0)])])),action:c((()=>[y(k,{type:"button",loading:f($),onClick:O},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-37874315"]]),_t=t=>(b("data-v-a1df28d3"),t=t(),V(),t),ct={class:"page-content-inner"},pt={class:"columns mb-5"},mt={class:"column is-narrow"},yt={class:"columns"},ft={class:"column"},vt={class:"columns"},gt={class:"column"},ht={class:"table-container"},bt={key:0,class:"flex-list-inner"},Vt=_t((()=>p("img",{class:"light-image",src:z,alt:""},null,-1))),jt=_t((()=>p("img",{class:"dark-image",src:F,alt:""},null,-1))),$t={key:1,class:"table is-hoverable is-fullwidth"},xt={colspan:"3"},kt=["onClick"],Dt=U(n({__name:"index",setup(t){I(),D();const{t:e}=k(),a=N(),l=i(!1),o=Q();i(null),o.setPageTitle(e("Processing")),E({title:`${e("Donations_list_for_processing")} - ${a.app.name}`});const s=r({data:[{id:11,donation_code:"130100123400",donation_date:"10.12.2022",blood_type:"O(I)",visit_type:"Безвозмезные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Донация цельной крови",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"},{id:21,donation_code:"130100987300",donation_date:"18.12.2022",blood_type:"O(I)",visit_type:"Платные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Плазмаферез",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),n=r({}),u=i(!1),b=r({donation_code:[],donation_type_id:[]});async function V(t){var e,a;try{l.value=!0;s.pagination.current_page}catch(o){Object.assign(b,null==(a=null==(e=o.response)?void 0:e.data)?void 0:a.errors)}finally{l.value=!1}}function q(t){errors[t]=""}async function U(){s.data=[]}return j(u,(function(t){!1===t&&Object.assign(n,{})})),(t,e)=>{const o=S,i=B,r=P,j=O,k=w,D=C,z=dt;return d(),v("div",ct,[p("div",pt,[p("div",mt,[y(o,{"with-icons":"",separator:"bullet",items:[{label:f(a).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:t.$t("Processing")},{label:t.$t("Donations_list_for_processing")}]},null,8,["items"])])]),p("div",yt,[p("div",ft,[y(i,{"is-loading":f(l),errors:f(b),onSearch:V,onClearForm:U,onClearError:q},null,8,["is-loading","errors"])])]),p("div",vt,[p("div",gt,[y(D,null,{default:c((()=>[p("div",ht,[0===f(s).data.length?(d(),v("div",bt,[y(r,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:c((()=>[Vt,jt])),_:1})])):(d(),v("table",$t,[p("thead",null,[p("tr",null,[p("th",null,m(t.$t("Donation_code")),1),p("th",null,m(t.$t("Donation_date")),1),p("th",null,m(t.$t("Donation_type")),1)])]),p("tbody",null,[f(l)?(d(!0),v(g,{key:0},$(f(s).pagination.per_page,(t=>(d(),v("tr",{key:t},[p("td",xt,[y(j,{lines:2,"last-line-width":"70%"})])])))),128)):(d(!0),v(g,{key:1},$(f(s).data,((t,e)=>(d(),v("tr",{key:e},[p("td",null,[p("a",{href:"javascript:;",class:"has-text-primary",onClick:e=>function(t){Object.assign(n,t),u.value=!0}(t)},m(t.donation_code),9,kt)]),p("td",null,m(t.donation_date),1),p("td",null,m(t.donation_type),1)])))),128))])]))]),f(s).data.length?(d(),_(k,{key:0,"current-page":f(s).pagination.current_page,"onUpdate:current-page":e[0]||(e[0]=t=>f(s).pagination.current_page=t),class:"mt-5","item-per-page":f(s).pagination.per_page,"total-items":f(s).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):h("",!0)])),_:1})])]),y(z,{"is-open":f(u),"onUpdate:is-open":e[1]||(e[1]=t=>x(u)?u.value=t:null),product:f(n),"onUpdate:list":V},null,8,["is-open","product"])])}}}),[["__scopeId","data-v-a1df28d3"]]);export{Dt as default};
