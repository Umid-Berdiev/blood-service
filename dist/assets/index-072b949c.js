import{_ as e,a}from"./FilterForm.vue_vue_type_script_setup_true_lang-a8f421f8.js";import{_ as l}from"./VModal.vue_vue_type_style_index_0_lang-1ec5e12b.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang-ca217c20.js";import{_ as s}from"./VCheckbox.vue_vue_type_style_index_0_lang-1a73654b.js";import{_ as n}from"./VFlex.vue_vue_type_style_index_0_lang-8f30b873.js";import{_ as o}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-38070980.js";import{_ as i}from"./VFlexItem.vue_vue_type_style_index_0_lang-ce376e13.js";import{b as u,_,a as r}from"./VControl-b713a764.js";import{_ as d}from"./VInput.vue_vue_type_script_setup_true_lang-dccc8f42.js";import{q as m,H as p,C as c,x as f,r as g,o as v,a as y,w as b,e as h,t as V,k as j,i as x,K as Y,a6 as D,L as $,M as w,E as k,J as M,c as z,ag as U,d as C,g as O,F as B,l as I,S as F}from"./index-568ad137.js";import{m as T}from"./moment-78dc6435.js";import{f as H}from"./patient-33059bc9.js";import{_ as S}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as A,a as R,b as W}from"./VFlexTable.vue_vue_type_style_index_0_lang-68179e43.js";import{_ as E,a as N,b as q,c as L,d as P}from"./search-7-dark-b6479367.js";import{_ as J}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-faf20e2b.js";import{_ as K}from"./lodash-c54dbb06.js";import{u as X}from"./main-7fc6984e.js";import{u as Z}from"./viewWrapper-feca89b2.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-2a7f6a68.js";import"./VRadio.vue_vue_type_style_index_0_lang-96440a75.js";import"./VCard.vue_vue_type_script_setup_true_lang-3b674ece.js";import"./VButton.vue_vue_type_style_index_0_lang-fc4409cd.js";import"./VPlaceload-33f57994.js";import"./VIMaskInput.vue_vue_type_script_lang-6492e1cb.js";const G=e=>($("data-v-73efce38"),e=e(),w(),e),Q={class:"columns"},ee={class:"column"},ae={class:"is-size-5 has-text-weight-medium"},le={class:"box"},te={class:"has-text-weight-bold"},se=G((()=>h("br",null,null,-1))),ne={class:"table-container"},oe={class:"table box is-fullwidth"},ie=G((()=>h("p",{class:"has-text-danger"}," Красным цветом указаны показатели, заданные врачом-терапевтом, как обязательные для определения ",-1))),ue=T.__esModule?T.default:T,_e=S(m({__name:"ResearchAimedFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){p();const{t:m}=c(),$=f(m("Hemotransmission_research_results")),w=f(!1),k=g({blood_samples_taken_date:ue().format("YYYY-MM-DD"),analysis_date:ue().format("YYYY-MM-DD")}),M=g({blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]});function z(){Object.assign(k,{blood_samples_taken_date:ue().format("YYYY-MM-DD"),analysis_date:ue().format("YYYY-MM-DD"),clinical_biochemical_laboratory_date:ue().format("YYYY-MM-DD")}),Object.assign(M,{blood_samples_taken_date:[],analysis_date:[],clinical_biochemical_laboratory_date:[]}),a("update:isOpen",!1)}return(a,m)=>{const p=u,c=d,f=_,g=r,M=i,U=o,C=n,O=s,B=t,I=l;return v(),y(I,{open:e.isOpen,size:"big",title:$.value,actions:"right",onClose:z},{content:b((()=>{var l;return[h("div",Q,[h("div",ee,[h("h5",ae,V(a.$t("Donor_code"))+": "+V(null==(l=e.patient.last_visit)?void 0:l.donation_code),1)])]),h("div",le,[j(C,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:b((()=>[j(M,{"flex-basis":"45%"},{default:b((()=>[j(g,{horizontal:""},{default:b((()=>[j(p,{class:"my-auto mr-3 is-size-6"},{default:b((()=>[x(V(a.$t("Blood_sampling_date")),1)])),_:1}),j(f,null,{default:b((()=>{var a;return[j(c,{value:Y(D)(new Date(null==(a=e.patient.last_visit)?void 0:a.updated_at),"YYYY-MM-DD"),disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),j(M,{"flex-basis":"45%"},{default:b((()=>[j(g,{horizontal:""},{default:b((()=>[j(p,{class:"my-auto mr-3 is-size-6"},{default:b((()=>[x(V(a.$t("Blood_samples_taken_date")),1)])),_:1}),j(f,null,{default:b((()=>[j(U,{modelValue:k.blood_samples_taken_date,"onUpdate:modelValue":m[0]||(m[0]=e=>k.blood_samples_taken_date=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),j(M,{"flex-basis":"45%"},{default:b((()=>[j(g,{horizontal:""},{default:b((()=>[j(p,{class:"my-auto mr-3 is-size-6"},{default:b((()=>[x(V(a.$t("Analysis_date")),1)])),_:1}),j(f,null,{default:b((()=>[j(U,{modelValue:k.analysis_date,"onUpdate:modelValue":m[1]||(m[1]=e=>k.analysis_date=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),j(M,{"flex-basis":"45%"},{default:b((()=>{var l;return[h("h5",null,[h("span",te,V(a.$t("Visit_stage")),1),h("span",null,V(null==(l=e.patient.last_visit)?void 0:l.stage),1)])]})),_:1})])),_:1})]),se,h("div",ne,[h("table",oe,[h("tbody",null,[h("tr",null,[h("td",null,[j(g,null,{default:b((()=>[j(f,null,{default:b((()=>[j(O,{modelValue:k.hbsag,"onUpdate:modelValue":m[2]||(m[2]=e=>k.hbsag=e),class:"p-2",color:"primary",label:"HBsAg"},null,8,["modelValue"])])),_:1})])),_:1})]),h("td",null,[j(g,{horizontal:"",class:"is-justify-content-end"},{default:b((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:b((()=>[x(V(a.$t("Testing_system"))+" (HBsAg)",1)])),_:1}),j(f,null,{default:b((()=>[j(c,{modelValue:k.testing_system_hbsag,"onUpdate:modelValue":m[3]||(m[3]=e=>k.testing_system_hbsag=e)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(g,null,{default:b((()=>[j(f,null,{default:b((()=>[j(O,{modelValue:k.oids,"onUpdate:modelValue":m[4]||(m[4]=e=>k.oids=e),class:"p-2",color:"primary",label:a.$t("OIDS")},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("td",null,[j(g,{horizontal:"",class:"is-justify-content-end"},{default:b((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:b((()=>[x(V(a.$t("Testing_system"))+" ("+V(a.$t("OIDS"))+")",1)])),_:1}),j(f,null,{default:b((()=>[j(c,{modelValue:k.testing_system_oids,"onUpdate:modelValue":m[5]||(m[5]=e=>k.testing_system_oids=e)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(g,null,{default:b((()=>[j(f,null,{default:b((()=>[j(O,{modelValue:k.antihcv,"onUpdate:modelValue":m[6]||(m[6]=e=>k.antihcv=e),class:"has-text-danger p-2",color:"danger",label:a.$t("AntiHCV")},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("td",null,[j(g,{horizontal:"",class:"is-justify-content-end"},{default:b((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:b((()=>[x(V(a.$t("Testing_system"))+" ("+V(a.$t("AntiHCV"))+")",1)])),_:1}),j(f,null,{default:b((()=>[j(c,{modelValue:k.testing_system_antihcv,"onUpdate:modelValue":m[7]||(m[7]=e=>k.testing_system_antihcv=e)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(g,null,{default:b((()=>[j(f,null,{default:b((()=>[j(O,{modelValue:k.rw,"onUpdate:modelValue":m[8]||(m[8]=e=>k.rw=e),class:"p-2",color:"primary",label:a.$t("RW")},null,8,["modelValue","label"])])),_:1})])),_:1})]),h("td",null,[j(g,{horizontal:"",class:"is-justify-content-end"},{default:b((()=>[j(p,{class:"is-size-6 my-auto mr-3"},{default:b((()=>[x(V(a.$t("Testing_system"))+" ("+V(a.$t("RW"))+")",1)])),_:1}),j(f,null,{default:b((()=>[j(c,{modelValue:k.testing_system_rw,"onUpdate:modelValue":m[9]||(m[9]=e=>k.testing_system_rw=e)},null,8,["modelValue"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(g,null,{default:b((()=>[j(f,null,{default:b((()=>[j(O,{modelValue:k.hemolis,"onUpdate:modelValue":m[10]||(m[10]=e=>k.hemolis=e),class:"p-2",color:"primary",label:a.$t("Hemolis")},null,8,["modelValue","label"])])),_:1})])),_:1})])]),h("tr",null,[h("td",null,[j(g,null,{default:b((()=>[j(f,null,{default:b((()=>[j(O,{modelValue:k.hiles,"onUpdate:modelValue":m[11]||(m[11]=e=>k.hiles=e),class:"p-2",color:"primary",label:a.$t("Hiles")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])]),ie])]})),action:b((()=>[j(B,{loading:w.value,form:"blood-sampling-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-73efce38"]]),re=e=>($("data-v-b47b86cb"),e=e(),w(),e),de={class:"page-content-inner"},me={class:"columns mb-3"},pe={class:"column"},ce={class:"columns mt-1"},fe={class:"column"},ge={class:"columns"},ve={class:"column is-12"},ye={key:0,class:"is-flex-grow-0",textContent:"#"},be={key:0,class:"flex-list-inner"},he={key:1,class:"flex-list-inner"},Ve=re((()=>h("img",{class:"light-image",src:L,alt:""},null,-1))),je=re((()=>h("img",{class:"dark-image",src:P,alt:""},null,-1))),xe=["onClick"],Ye=K.isEmpty,De=S(m({__name:"index",async setup(l){let t,s;k();const n=p(),{t:o}=c(),i=X(),u=f(!1);Z().setPageTitle(o("Bloodborne-infections-laboratory")),M({title:`${o("Donor_list_for_blood_sampling")} - ${i.app.name}`});const _=g({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),r=z({get:()=>_.pagination.current_page,set:async e=>{x.page=e,await S(x)}}),d={orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:o("Donation_code")},blood_sampling_date:{label:o("Blood_sampling_date")},name:{label:o("Donor_fullname")},birth_date:{label:o("Date-of-birth")},visit_type:{label:o("Visit_type"),format:(e,a)=>{var l,t;return(null==(l=a.last_visit)?void 0:l.visit_type)&&o(null==(t=a.last_visit)?void 0:t.visit_type)}},visit_date:{label:o("Visit_date"),format:(e,a)=>{var l,t;return(null==(l=a.last_visit)?void 0:l.created_at)&&D(new Date(null==(t=a.last_visit)?void 0:t.created_at),"YYYY-MM-DD")}},donation_type:{label:o("Donation_type"),format:(e,a)=>{var l;return null==(l=a.last_visit)?void 0:l.personalized_donation}},visit_stage:{label:o("Visit_stage"),format:(e,a)=>{var l,t;return null==(t=null==(l=a.last_visit)?void 0:l.stage)?void 0:t.name}}};f();const m=g({visit_type_id:[],donation_type_id:[],donation_code:[]}),x=g({page:1}),$=g({}),w=f(!1),T=f(!0);async function S(e){var a,l;try{Object.assign(x,e),u.value=!0;const a=await H(e);Object.assign(_,a.result),Ye(a.result.data)?n.warning(o("Data_not_found")):n.success(`${o("Found")}: ${a.result.pagination.total} ${o("records")}`)}catch(t){Object.assign(m,null==(l=null==(a=t.response)?void 0:a.data)?void 0:l.errors)}finally{u.value=!1}}function L(e){m[e]=""}async function P(){_.data=[]}return[t,s]=U((()=>S(x))),await t,s(),(l,t)=>{const s=J,n=E,o=A,p=N,c=R,f=q,g=W,x=_e,D=a;return v(),C("div",de,[h("div",me,[h("div",pe,[j(s,{"with-icons":"",separator:"bullet",items:[{label:Y(i).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:l.$t("Screening")},{label:l.$t("Donor_list_for_blood_sampling")}]},null,8,["items"])])]),h("div",ce,[h("div",fe,[j(e,{"is-loading":Y(u),errors:Y(m),onSearch:S,onClearForm:P,onClearError:L},null,8,["is-loading","errors"])])]),h("div",ge,[h("div",ve,[j(g,{columns:Y(d),data:Y(_).data,limit:Y(_).pagination.per_page,total:Y(_).pagination.total},{default:b((()=>[j(c,{rounded:"","no-header":!Y(u)&&0===Y(_).data.length},{"header-column":b((({column:e})=>["orderNumber"===e.key?(v(),C("span",ye)):O("",!0)])),body:b((()=>[Y(u)?(v(),C("div",be,[(v(!0),C(B,null,I(Y(_).pagination.per_page,(e=>(v(),C("div",{key:e,class:"flex-table-item"},[j(o,null,{default:b((()=>[j(n,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):O("",!0),0===Y(_).data.length?(v(),C("div",he,[j(p,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:b((()=>[Ve,je])),_:1})])):O("",!0)])),"body-cell":b((({row:e,column:a})=>["name"===a.key?(v(),C("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:a=>{return l=e,Object.assign($,l),void(w.value=!0);var l}},V(e.first_name)+" "+V(e.last_name)+" "+V(e.father_name)+" ",9,xe)):O("",!0)])),_:1},8,["no-header"]),Y(_).data.length?(v(),y(f,{key:0,"current-page":Y(r),"onUpdate:current-page":t[0]||(t[0]=e=>F(r)?r.value=e:null),class:"mt-5","item-per-page":Y(_).pagination.per_page,"total-items":Y(_).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):O("",!0)])),_:1},8,["columns","data","limit","total"])])]),j(x,{"is-open":Y(w),"onUpdate:is-open":t[1]||(t[1]=e=>F(w)?w.value=e:null),patient:Y($)},null,8,["is-open","patient"]),j(D,{"is-open":Y(T),"onUpdate:is-open":t[2]||(t[2]=e=>F(T)?T.value=e:null),patient:Y($)},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-b47b86cb"]]);export{De as default};
