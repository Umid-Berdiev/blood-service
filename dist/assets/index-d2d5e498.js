import{_ as e}from"./ComponentDistributionProcessingCardModal-715296c1.js";import{_ as t}from"./VCard.vue_vue_type_script_setup_true_lang-8d45bf90.js";import{_ as a,a as o}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-8916ac45.js";import{_ as n}from"./VCheckbox.vue_vue_type_style_index_0_lang-b85a5492.js";import{_ as l}from"./NoDataPlaceholder-50105cc5.js";import{_ as i}from"./VButtons.vue_vue_type_script_setup_true_lang-5f42cc67.js";import{_ as s}from"./VButton.vue_vue_type_style_index_0_lang-8a17f68b.js";import{_ as r}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e8162493.js";import{q as _,E as d,H as p,C as u,x as c,J as m,r as y,c as g,y as v,o as f,d as h,e as b,k as j,K as x,w as V,i as $,t as k,a as P,U as w,F as C,l as F,g as O}from"./index-202d6ef0.js";import{u as U}from"./main-1fdef032.js";import{u as q}from"./viewWrapper-93d6f948.js";import{_ as B}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VModal.vue_vue_type_style_index_0_lang-98b95306.js";import"./SubmitButton.vue_vue_type_script_setup_true_lang-dc9d0236.js";import"./VControl-90e6c9df.js";import"./VInput.vue_vue_type_script_setup_true_lang-6aad6843.js";import"./additional-b8f03a9c.js";import"./VFlex.vue_vue_type_style_index_0_lang-5c9a78f5.js";const D={class:"page-content-inner"},I={class:"columns mb-5"},R={class:"column is-narrow"},z={class:"columns"},T={class:"column"},E={class:"columns"},M={class:"column"},S={class:"table-container"},A={key:1,class:"table is-hoverable is-fullwidth"},G={colspan:"3"},H=B(_({__name:"index",setup(_){d(),p();const{t:B}=u(),H=U(),J=c(!1),K=q();c(null),K.setPageTitle(B("Processing")),m({title:`${B("FFPs-in-storage")} - ${H.app.name}`});const L=y({data:[{id:11,donation_code:"130100123400",donation_date:"10.12.2022",blood_type:"O(I)",visit_type:"Безвозмезные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Донация цельной крови",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"},{id:17,donation_code:"130100456500",donation_date:"18.12.2022",blood_type:"O(I)",visit_type:"Платные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Тромбоцитаферез",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"},{id:21,donation_code:"130100987300",donation_date:"18.12.2022",blood_type:"O(I)",visit_type:"Платные донации",rh_factor:"Rh+",component_name:"Эритроцитная масса",donation_type:"Плазмаферез",dose:"0",quantity:"340",come_from:"Республиканский центр крови",personalized_donation:"Николай Резанов",expiry_date:"01.03.2023"}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),N=y({}),W=c([]),Z=c(!1),Q=y({donation_code:[],donation_type_id:[]}),X=g({get:()=>W.value.length>0&&W.value.length===L.data.length,set(e){W.value=e?L.data.map((e=>e.id)):[]}}),Y=y({donation_type_id:null,donation_code:"",page:1});async function ee(e){var t,a;try{J.value=!0,Object.assign(Y,e)}catch(o){Object.assign(Q,null==(a=null==(t=o.response)?void 0:t.data)?void 0:a.errors)}finally{J.value=!1}}return v(Z,(function(e){!1===e&&Object.assign(N,{})})),v((()=>L.pagination.current_page),(async e=>{e&&(Y.page=e,await ee(Y))}),{immediate:!0}),(_,d)=>{const p=r,u=s,c=i,m=l,y=n,g=a,v=o,U=t,q=e;return f(),h("div",D,[b("div",I,[b("div",R,[j(p,{"with-icons":"",separator:"bullet",items:[{label:x(H).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:_.$t("Processing")},{label:_.$t("FFPs-in-storage")}]},null,8,["items"])])]),b("div",z,[b("div",T,[j(c,null,{default:V((()=>[j(u,{type:"button",color:"primary",disabled:0===x(W).length},{default:V((()=>[$(k(_.$t("Generate_cryoprecipitate_series")),1)])),_:1},8,["disabled"]),j(u,{type:"button",color:"primary",disabled:0===x(W).length},{default:V((()=>[$(k(_.$t("Submit_series_for_processing")),1)])),_:1},8,["disabled"])])),_:1})])]),b("div",E,[b("div",M,[j(U,null,{default:V((()=>[b("div",S,[0===x(L).data.length?(f(),P(m,{key:0})):(f(),h("table",A,[b("thead",null,[b("tr",null,[b("th",null,[j(y,{modelValue:x(X),"onUpdate:modelValue":d[0]||(d[0]=e=>w(X)?X.value=e:null),color:"primary"},null,8,["modelValue"])]),b("th",null,k(_.$t("Donation_date")),1),b("th",null,k(_.$t("Donation_code")),1),b("th",null,k(_.$t("Dose")),1),b("th",null,k(_.$t("Plasma_amount_ml")),1),b("th",null,k(_.$t("Blood_type"))+" && "+k(_.$t("Rh_factor")),1),b("th",null,k(_.$t("Actions")),1)])]),b("tbody",null,[x(J)?(f(!0),h(C,{key:0},F(x(L).pagination.per_page,(e=>(f(),h("tr",{key:e},[b("td",G,[j(g,{lines:2,"last-line-width":"70%"})])])))),128)):(f(!0),h(C,{key:1},F(x(L).data,((e,t)=>(f(),h("tr",{key:t},[b("td",null,[j(y,{modelValue:x(W),"onUpdate:modelValue":d[1]||(d[1]=e=>w(W)?W.value=e:null),value:e.id,color:"primary"},null,8,["modelValue","value"])]),b("td",null,k(e.donation_date),1),b("td",null,k(e.donation_code),1),b("td",null,k(e.dose),1),b("td",null,k(e.quantity),1),b("td",null,k(e.blood_type)+" "+k(e.rh_factor),1),b("td",null,[j(u,{type:"button",color:"primary"},{default:V((()=>[$(k(_.$t("To_forwarding")),1)])),_:1})])])))),128))])]))]),x(L).data.length?(f(),P(v,{key:0,"current-page":x(L).pagination.current_page,"onUpdate:current-page":d[2]||(d[2]=e=>x(L).pagination.current_page=e),class:"mt-5","item-per-page":x(L).pagination.per_page,"total-items":x(L).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):O("",!0)])),_:1})])]),j(q,{"is-open":x(Z),"onUpdate:is-open":d[3]||(d[3]=e=>w(Z)?Z.value=e:null),product:x(N),"onUpdate:list":ee},null,8,["is-open","product"])])}}}),[["__scopeId","data-v-226ebfce"]]);export{H as default};
