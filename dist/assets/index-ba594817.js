import{_ as e,a,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-03a54f1c.js";import{_ as l,a as s,b as n,c as i,d as o}from"./search-7-dark-81286176.js";import{_ as r}from"./VCard.vue_vue_type_script_setup_true_lang-1043f916.js";import{_ as d}from"./SubmitButton.vue_vue_type_script_setup_true_lang-96021f2c.js";import{_ as u}from"./ClearButton.vue_vue_type_script_setup_true_lang-7aff0300.js";import{_,a as p,b as c}from"./VControl-e7b2630d.js";import{_ as m}from"./ClientOnly.vue_vue_type_script_lang-52200b90.js";import{_ as v}from"./VButton.vue_vue_type_style_index_0_lang-b78df6f3.js";import{q as g,C as y,x as f,r as b,c as h,j as x,o as V,a as j,w as k,k as $,K as D,U as w,e as C,p as F,al as M,H as P,af as U,y as Y,m as B,i as E,t as L,E as O,J as S,d as A,g as N,F as T,l as q,L as z,M as R}from"./index-21286bdb.js";import{p as W,i as G}from"./patient-26cab0f6.js";import{_ as H}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-69f615bd.js";import{u as I}from"./main-16751c88.js";import{u as J}from"./viewWrapper-6ae5f61c.js";import{_ as K}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-57370b27.js";const Z=["value"],Q=C("i",{class:"fas fa-angle-double-right","aria-hidden":"true"},null,-1),X=["value"],ee=g({__name:"DateRangePicker",props:{start:null,end:null},emits:["update:start","update:end"],setup(e,{emit:a}){const t=e,{locale:l}=y(),s=f({input:"DD.MM.YYYY"}),n=b({type:"string",mask:"YYYY-MM-DD"}),i=h({get:()=>({start:t.start,end:t.end}),set(e){a("update:start",e.start),a("update:end",e.end)}});return(e,a)=>{const t=_,o=v,r=p,d=x("VDatePicker"),u=m;return V(),j(u,null,{default:k((()=>[$(d,{modelValue:D(i),"onUpdate:modelValue":a[0]||(a[0]=e=>w(i)?i.value=e:null),locale:D(l),"is-range":"",color:"green","trim-weeks":"",masks:D(s),"model-config":D(n)},{default:k((({inputValue:e,inputEvents:a})=>[$(r,{addons:""},{default:k((()=>[$(t,{expanded:"",icon:"feather:corner-down-right"},{default:k((()=>[C("input",F({class:"input v-input",type:"text",value:e.start},M(a.start,!0)),null,16,Z)])),_:2},1024),$(t,null,{default:k((()=>[$(o,{static:""},{default:k((()=>[Q])),_:1})])),_:1}),$(t,{expanded:"",icon:"feather:corner-right-up",subcontrol:""},{default:k((()=>[C("input",F({class:"input v-input",type:"text",value:e.end},M(a.end,!0)),null,16,X)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","locale","masks","model-config"])])),_:1})}}}),ae=["onSubmit"],te={class:"columns"},le={class:"column"},se={class:"column"},ne={class:"help has-text-danger"},ie={class:"column"},oe={class:"help has-text-danger"},re={class:"column"},de={class:"help has-text-danger"},ue={class:"navigation-buttons"},_e={class:"buttons is-right"},pe=g({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(e,{emit:a}){let t,l;const{t:s}=y();P();const n=b({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),i=([t,l]=U((()=>W().then((e=>e.result)))),t=await t,l(),t),o=f([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),m=f([{id:1,name:s("Whole_blood_donation")},{id:2,name:s("Plasmapheresis")},{id:3,name:s("Plateletpheresis")}]),v=f(!1);Y(n,(e=>{e&&(v.value=Object.values(e).some((e=>!!e)))}),{deep:!0});const g=async()=>{a("search",n)},h=async()=>{Object.assign(n,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),a("clearForm")};return(a,t)=>{const l=c,s=ee,y=p,f=x("Multiselect"),b=_,w=u,F=d,M=r;return V(),j(M,null,{default:k((()=>[C("form",{onSubmit:B(g,["prevent"])},[C("div",te,[C("div",le,[$(y,null,{default:k((()=>[$(l,null,{default:k((()=>[E(L(a.$t("Period")),1)])),_:1}),$(s,{start:D(n).start_date,"onUpdate:start":t[0]||(t[0]=e=>D(n).start_date=e),end:D(n).end_date,"onUpdate:end":t[1]||(t[1]=e=>D(n).end_date=e)},null,8,["start","end"])])),_:1})]),C("div",se,[$(y,{class:"is-curved-select",label:a.$t("Donor_categories")},{default:k((({id:l})=>[$(b,null,{default:k((()=>[$(f,{modelValue:D(n).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=e=>D(n).donor_category_id=e),attrs:{id:l},options:D(i),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),C("p",ne,L(e.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),C("div",ie,[$(y,{class:"is-curved-select",label:a.$t("Visit_type")},{default:k((({id:l})=>[$(b,null,{default:k((()=>[$(f,{modelValue:D(n).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=e=>D(n).visit_type_id=e),attrs:{id:l},options:D(o),placeholder:a.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),C("p",oe,L(e.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),C("div",re,[$(y,{class:"is-curved-select",label:a.$t("Donation_type")},{default:k((({id:l})=>[$(b,null,{default:k((()=>[$(f,{modelValue:D(n).donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=e=>D(n).donation_type_id=e),attrs:{id:l},options:D(m),placeholder:a.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),C("p",de,L(e.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),C("div",ue,[C("div",_e,[$(w,{disabled:e.isLoading||!D(v),onClear:h},null,8,["disabled"]),$(F,{loading:e.isLoading},{default:k((()=>[E(L(a.$t("Search")),1)])),_:1},8,["loading"])])])],40,ae)])),_:1})}}}),ce=e=>(z("data-v-a686d8c7"),e=e(),R(),e),me={class:"page-content-inner"},ve={class:"columns mb-3"},ge={class:"column"},ye={class:"columns mt-1"},fe={class:"column"},be={class:"columns"},he={class:"column is-12"},xe={key:0,class:"is-flex-grow-0",textContent:"#"},Ve={key:0,class:"flex-list-inner"},je={key:1,class:"flex-list-inner"},ke=ce((()=>C("img",{class:"light-image",src:i,alt:""},null,-1))),$e=ce((()=>C("img",{class:"dark-image",src:o,alt:""},null,-1))),De=K(g({__name:"index",setup(i){O();const o=P(),{t:r}=y(),d=I(),u=f(!1);J().setPageTitle(r("Physician-therapist")),S({title:`${r("Donors-list-for-examination")} - ${d.app.name}`});const _=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:r("Fullname")},birth_date:{label:r("Date-of-birth")},visit_date:{label:r("Visit_date"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.created_at}},visit_type:{label:r("Visit_type"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.visit_type)&&r(null==(l=a.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:r("Medical_inspection_date"),format:(e,a)=>{var t,l;return(null==(t=a.last_visit)?void 0:t.directed_by)&&r(null==(l=a.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:r("Medical_inspection_conclusion"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.personalized_donation}},donation_code:{label:r("Donation_code"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.donation_code}},donation_type:{label:r("Donation_type"),format:(e,a)=>{var t;return null==(t=a.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:r("Blood_component_amount"),format:(e,a)=>{var t;return null==(t=a.status)?void 0:t.name}}};f();const c=b({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),m=b({status:6});async function v(e){var a,t;try{Object.assign(m,{...m,...e,page:_.pagination.current_page}),u.value=!0;const a=await G(m);Object.assign(_,a.result)}catch(l){o.error(l.message),Object.assign(c,null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.errors)}finally{u.value=!1}}function g(e){c[e]=""}async function h(){_.data=[]}return Y((()=>_.pagination.current_page),(async function(e){e&&await v(m)})),(i,o)=>{const r=H,m=pe,y=l,f=e,b=s,w=x("RouterLink"),F=a,M=n,P=t;return V(),A("div",me,[C("div",ve,[C("div",ge,[$(r,{"with-icons":"",separator:"bullet",items:[{label:D(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:i.$t("Physician-therapist")},{label:i.$t("Examined-donor-register")}]},null,8,["items"])])]),C("div",ye,[C("div",fe,[$(m,{"is-loading":D(u),errors:D(c),onSearch:v,onClearForm:h,onClearError:g},null,8,["is-loading","errors"])])]),C("div",be,[C("div",he,[$(P,{columns:D(p),data:D(_).data,limit:D(_).pagination.per_page,total:D(_).pagination.total},{default:k((()=>[$(F,{rounded:"","no-header":!D(u)&&0===D(_).data.length},{"header-column":k((({column:e})=>["orderNumber"===e.key?(V(),A("span",xe)):N("",!0)])),body:k((()=>[D(u)?(V(),A("div",Ve,[(V(!0),A(T,null,q(D(_).pagination.per_page,(e=>(V(),A("div",{key:e,class:"flex-table-item"},[$(f,null,{default:k((()=>[$(y,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):N("",!0),0===D(_).data.length?(V(),A("div",je,[$(b,{title:i.$t("No_data"),subtitle:i.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:k((()=>[ke,$e])),_:1},8,["title","subtitle"])])):N("",!0)])),"body-cell":k((({row:e,column:a})=>["name"===a.key?(V(),j(w,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${e.id}`},{default:k((()=>[E(L(e.first_name)+" "+L(e.last_name)+" "+L(e.father_name)+" ",1)])),_:2},1032,["to"])):N("",!0)])),_:1},8,["no-header"]),D(_).data.length?(V(),j(M,{key:0,"current-page":D(_).pagination.current_page,"onUpdate:current-page":o[0]||(o[0]=e=>D(_).pagination.current_page=e),class:"mt-5","item-per-page":D(_).pagination.per_page,"total-items":D(_).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):N("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-a686d8c7"]]);export{De as default};
