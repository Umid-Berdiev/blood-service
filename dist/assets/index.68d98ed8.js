import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.f9efca3f.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang.fd577c83.js";import{q as l,H as t,C as s,x as n,r as o,y as i,o as r,a as u,w as d,e as c,m as p,k as m,d as _,K as f,t as v,g,i as b,_ as y,j as h,E as V,c as w,J as j,aO as x,Q as z,F as k,l as $,aJ as C}from"./index.cd1be135.js";import{_ as U}from"./VTabs.vue_vue_type_script_setup_true_lang.9752e081.js";import{_ as I}from"./VTextarea.vue_vue_type_script_setup_true_lang.a79bfa8f.js";import{_ as R,a as A}from"./VControl.19d1d169.js";import{_ as O}from"./VInput.vue_vue_type_script_setup_true_lang.4104c862.js";import{f as N,u as T,c as D,a as E,s as S,r as q}from"./index.899be7a3.js";import{g as M,h as F,_ as P,a as B,b as J,c as L,d as H,e as K,f as Q}from"./search-7-dark.edd88865.js";import{_ as W}from"./VDropdown.vue_vue_type_style_index_0_lang.cd855e33.js";import{_ as G,a as X,b as Y}from"./SearchInput.441463b7.js";import{_ as Z}from"./VFlex.vue_vue_type_style_index_0_lang.b47b9c51.js";import{_ as ee}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.f0addd39.js";import{u as ae}from"./viewWrapper.c9136749.js";import{u as le}from"./main.4345c7ff.js";import"./VIcon.vue_vue_type_script_setup_true_lang.f93a4e89.js";const te=["onSubmit"],se={key:0,class:"columns is-multiline pt-5"},ne={class:"column is-12"},oe={class:"help has-text-danger"},ie={class:"help has-text-danger"},re={key:1,class:"columns is-multiline pt-5"},ue={class:"column is-12"},de={key:2,class:"columns is-multiline pt-5"},ce={class:"column is-12"},pe=l({__name:"RoleFormModal",props:{modelValue:{type:Boolean,default:!1},roleId:{default:null}},emits:["update:modelValue","update:list"],setup(e,{emit:l}){const h=e,V=t(),{t:w}=s(),j=n(w("Add")),x=n(!1),z=o({uz:"",ru:"",en:""}),k=o({uz:"",ru:"",en:""}),$=o({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});async function C(){var e,a,t,s;try{x.value=!0,h.roleId?await T(h.roleId,{name:z,description:k}):await D({name:z,description:k}),l("update:list"),E()}catch(n){(null==(e=n.response)?void 0:e.data.error)?V.error(null==(a=n.response)?void 0:a.data.error):Object.assign($,null==(s=null==(t=n.response)?void 0:t.data)?void 0:s.errors)}finally{x.value=!1}}function E(){j.value=w("Add"),Object.assign(z,{uz:"",ru:"",en:""}),Object.assign(k,{uz:"",ru:"",en:""}),Object.assign($,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]}),l("update:modelValue",!1)}return i((()=>h.roleId),(async e=>{if(e){console.log(e),j.value=w("Edit");const a=await N(Number(h.roleId));Object.assign(z,a.name),Object.assign(k,a.description)}}),{deep:!0}),(l,t)=>{const s=O,n=R,o=A,i=I,h=U,V=y,N=a;return r(),u(N,{open:e.modelValue,size:"large",title:j.value,actions:"right",onClose:E},{content:d((()=>[c("form",{id:"role-form",class:"modal-form",onSubmit:p(C,["prevent"])},[m(h,{type:"boxed",selected:"uz",tabs:[{label:l.$t("Uzbek"),value:"uz"},{label:l.$t("Russian"),value:"ru"},{label:l.$t("English"),value:"en"}]},{tab:d((({activeValue:e})=>["uz"===e?(r(),_("div",se,[c("div",ne,[m(o,{label:l.$t("Name_uz"),required:""},{default:d((()=>[m(n,null,{default:d((()=>[m(s,{modelValue:z.uz,"onUpdate:modelValue":t[0]||(t[0]=e=>z.uz=e),name:"name_uz",type:"text",placeholder:f(w)("Type_name_uz")},null,8,["modelValue","placeholder"]),c("p",oe,v($["name.uz"][0]),1)])),_:1})])),_:1},8,["label"]),m(o,{label:l.$t("Description_uz"),required:""},{default:d((()=>[m(n,null,{default:d((()=>[m(i,{modelValue:k.uz,"onUpdate:modelValue":t[1]||(t[1]=e=>k.uz=e),name:"description_uz",placeholder:f(w)("Add_description_uz")},null,8,["modelValue","placeholder"]),c("p",ie,v($["description.uz"][0]),1)])),_:1})])),_:1},8,["label"])])])):"ru"===e?(r(),_("div",re,[c("div",ue,[m(o,{label:l.$t("Name_ru")},{default:d((()=>[m(n,null,{default:d((()=>[m(s,{modelValue:z.ru,"onUpdate:modelValue":t[2]||(t[2]=e=>z.ru=e),name:"name_ru",type:"text",placeholder:f(w)("Type_name_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),m(o,{label:l.$t("Description_ru")},{default:d((()=>[m(n,null,{default:d((()=>[m(i,{modelValue:k.ru,"onUpdate:modelValue":t[3]||(t[3]=e=>k.ru=e),name:"description_ru",placeholder:f(w)("Add_description_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):"en"===e?(r(),_("div",de,[c("div",ce,[m(o,{label:l.$t("Name_en")},{default:d((()=>[m(n,null,{default:d((()=>[m(s,{modelValue:z.en,"onUpdate:modelValue":t[4]||(t[4]=e=>z.en=e),name:"name_en",type:"text",placeholder:f(w)("Type_name_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),m(o,{label:l.$t("Description_en")},{default:d((()=>[m(n,null,{default:d((()=>[m(i,{modelValue:k.en,"onUpdate:modelValue":t[5]||(t[5]=e=>k.en=e),name:"description_en",placeholder:f(w)("Add_description_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):g("",!0)])),_:1},8,["tabs"])],40,te)])),action:d((({close:e})=>[m(V,{loading:x.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:x.value},{default:d((()=>[b(v(l.$t("Save")),1)])),_:1},8,["loading","disabled"])])),_:1},8,["open","title"])}}}),me=["onClick"],_e={class:"icon"},fe={class:"meta"},ve=["onClick"],ge={class:"icon"},be={class:"meta"},ye=c("hr",{class:"dropdown-divider"},null,-1),he=["onClick"],Ve={class:"icon"},we={class:"meta"},je=l({__name:"RoleDropdown",emits:["edit","remove","permissions"],setup:(e,{emit:a})=>(e,l)=>{const t=h("VueIconify"),s=W;return r(),u(s,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:d((({close:l})=>[c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:p((()=>{a("edit"),l()}),["prevent"])},[c("div",_e,[m(t,{icon:"feather:edit-2"})]),c("div",fe,[c("span",null,v(e.$t("Edit")),1)])],8,me),c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:p((()=>{a("permissions"),l()}),["prevent"])},[c("div",ge,[m(t,{icon:"feather:shield"})]),c("div",be,[c("span",null,v(e.$t("Role_permissions")),1)])],8,ve),ye,c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:p((()=>{a("remove"),l()}),["prevent"])},[c("div",Ve,[m(t,{icon:"feather:trash"})]),c("div",we,[c("span",null,v(e.$t("Remove")),1)])],8,he)])),_:1})}}),xe={class:"applicant-list-wrapper"},ze={class:"columns"},ke={class:"column is-12"},$e={key:0,class:"is-flex-grow-0",textContent:"#"},Ce={key:0,class:"flex-list-inner"},Ue={key:1,class:"flex-list-inner"},Ie=c("img",{class:"light-image",src:M,alt:""},null,-1),Re=c("img",{class:"dark-image",src:F,alt:""},null,-1),Ae=l({__name:"index",async setup(a){let l,h;const U=t(),I=V(),{t:R}=s(),A=le(),O=o({pagination:{current_page:1,per_page:10,total:10},result:[]}),N=n(!1),T=n(null),D=w({get:()=>"",async set(e){await async function(e){const a=await S(e);Object.assign(O,a)}(e)}}),M=w((()=>({orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},name:{label:R("Name"),searchable:!0},description:{label:R("Description")},actions:{label:R("Actions"),align:"center"}}))),F=n(!1),W=n(),te=ae(),se=w({get:()=>O.pagination.current_page,set:async e=>{await ie(e)}});function ne(e=null){console.log({rowId:e}),N.value=!0,T.value=e}async function oe(){await q(T.value),await ie(),re()}async function ie(e=1){var a;try{F.value=!0;const a=await E({page:e,per_page:O.pagination.per_page});Object.assign(O,a)}catch(l){U.error(R(null==(a=l.response)?void 0:a.data.error.message))}finally{F.value=!1}}function re(){U.success(R("Success"))}return te.setPageTitle(R("Roles_List")),j({title:R("Roles")}),[l,h]=x((()=>ie())),await l,h(),i((()=>O.pagination.per_page),(async()=>{await ie()})),(a,l)=>{const t=ee,s=y,n=Z,o=G,i=X,h=Y,V=P,w=B,j=C,x=J,U=L,R=je,E=H,S=K,q=Q,ae=pe,le=e;return r(),_("div",xe,[m(n,{"justify-content":"space-between"},{default:d((()=>[m(t,{"with-icons":"",separator:"bullet",items:[{label:"Vuero",hideLabel:!0,icon:"feather:home",to:{name:"/app"}},{label:a.$t("Roles"),to:{name:"/app/roles/"}}]},null,8,["items"]),m(s,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:l[0]||(l[0]=p((e=>ne(null)),["prevent"]))},{default:d((()=>[b(v(a.$t("Add")),1)])),_:1})])),_:1}),c("div",ze,[c("div",ke,[m(q,{class:"mt-4",columns:f(M),data:O.result,limit:O.pagination.per_page,total:O.pagination.total},{default:d((e=>[m(h,null,{left:d((()=>[m(o,{modelValue:f(D),"onUpdate:modelValue":l[1]||(l[1]=e=>z(D)?D.value=e:null)},null,8,["modelValue"])])),right:d((()=>[m(i,{modelValue:O.pagination.per_page,"onUpdate:modelValue":l[2]||(l[2]=e=>O.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),m(E,{rounded:"","no-header":!F.value&&0===O.result.length},{"header-column":d((({column:e})=>["orderNumber"===e.key?(r(),_("span",$e)):g("",!0)])),body:d((()=>[F.value?(r(),_("div",Ce,[(r(!0),_(k,null,$(O.pagination.per_page,(e=>(r(),_("div",{key:e,class:"flex-table-item"},[m(w,null,{default:d((()=>[m(V,{lines:2,width:"40%","last-line-width":"20%",class:"mx-2"})])),_:1}),m(w,null,{default:d((()=>[m(j,{class:"mx-1"})])),_:1}),m(w,{column:{align:"center"}},{default:d((()=>[m(j,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===O.result.length?(r(),_("div",Ue,[m(x,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:d((()=>[Ie,Re])),_:1})])):g("",!0)])),"body-row-pre":d((({row:e})=>[e.id===W.value?(r(),u(U,{key:0,size:"tiny",class:"m-0 mb-1"})):g("",!0)])),"body-cell":d((({row:e,column:a})=>["actions"===a.key?(r(),u(R,{key:0,onEdit:a=>ne(e.id),onRemove:a=>async function(e){T.value=e,A.$patch({confirmModalState:!0})}(e.id),onPermissions:a=>{return l=e.id,void I.push(`/app/roles/${l}/permissions`);var l}},null,8,["onEdit","onRemove","onPermissions"])):g("",!0)])),_:1},8,["no-header"]),m(S,{"current-page":f(se),"onUpdate:current-page":l[3]||(l[3]=e=>z(se)?se.value=e:null),class:"mt-5","item-per-page":O.pagination.per_page,"total-items":O.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])])),_:1},8,["columns","data","limit","total"])])]),m(ae,{modelValue:N.value,"onUpdate:modelValue":l[4]||(l[4]=e=>N.value=e),"role-id":T.value,"onUpdate:list":l[5]||(l[5]=()=>{ie(),re(),T.value=null}),onClose:l[6]||(l[6]=e=>T.value=null)},null,8,["modelValue","role-id"]),m(le,{onConfirmAction:oe})])}}});export{Ae as default};
