import{_ as a,a as e}from"./FilterForm.vue_vue_type_script_setup_true_lang-b8ccb85a.js";import{_ as l}from"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import{_ as t}from"./SubmitButton.vue_vue_type_script_setup_true_lang-e5001c63.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-25f2733c.js";import{_ as s}from"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import{_ as o}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-5ce26ef4.js";import{_ as n}from"./VFlexItem.vue_vue_type_style_index_0_lang-ff50e60d.js";import{b as d,_ as r,a as u}from"./VControl-fc151345.js";import{_}from"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import{a as p,b as m,r as c,s as v,l as f,t as b,q as g,Q as h,V as y,p as V,v as x,u as j,a5 as U,ae as I,a6 as k,$ as w,a0 as $,c as z,m as D,y as M,M as B,W as O,i as Y}from"./chunk-BGPNDDXN-dcda8805.js";import{f as C}from"./@vueuse_core-098eb702.js";import{m as R}from"./moment-e00bdeae.js";import{u as A}from"./chunk-3UEUFEGV-d557e6b1.js";import{u as F}from"./useNotyf-1536ae84.js";import{_ as N}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as P,a as E,b as T}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{_ as Q,a as S,b as q,c as G,d as W}from"./search-7-dark-f0facebe.js";import{_ as H}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d3c7c667.js";import{u as L}from"./@vueuse_head-0d019878.js";import{_ as X}from"./lodash-94527813.js";import{u as J}from"./main-a3a6220c.js";import{u as K}from"./viewWrapper-c60f0ce7.js";import{f as Z}from"./patient-7cc4d60d.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-a017671a.js";import"./VRadio.vue_vue_type_style_index_0_lang-03da69fa.js";import"./VCard.vue_vue_type_script_setup_true_lang-a9232da9.js";import"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import"./chunk-DRAQDPQ2-4514f14e.js";import"./VPlaceload-2a65ae53.js";import"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import"./pinia-3af6ce52.js";import"./userSession-0c0e9684.js";const aa=a=>(w("data-v-32d3fadf"),a=a(),$(),a),ea={class:"columns"},la={class:"column"},ta={class:"is-size-5 has-text-weight-medium"},ia={class:"box"},sa={class:"has-text-weight-bold mr-3"},oa={class:"has-text-weight-bold mr-3"},na=aa((()=>h("br",null,null,-1))),da={class:"is-size-5 has-text-weight-medium"},ra={class:"box mt-5"},ua={class:"columns is-multiline"},_a={class:"column is-6"},pa={class:"is-flex"},ma={class:"has-text-danger mr-5"},ca={class:"field"},va={class:"control"},fa=aa((()=>h("label",{for:"oab1",class:"radio p-2"},[x("O"),h("sub",null,"αβ"),x("(I)")],-1))),ba={class:"control"},ga=aa((()=>h("label",{for:"ab2",class:"radio p-2"},[x("A"),h("sub",null,"β"),x("(II)")],-1))),ha={class:"control"},ya=aa((()=>h("label",{for:"a2b2",class:"radio p-2"},[x("A"),h("sub",null,"2β"),x("(II)")],-1))),Va={class:"control"},xa=aa((()=>h("label",{for:"a2a1b2",class:"radio p-2"},[x("A"),h("sub",null,"2α1β"),x("(II)")],-1))),ja={class:"control"},Ua=aa((()=>h("label",{for:"ba3",class:"radio p-2"},[x("B"),h("sub",null,"α"),x("(III)")],-1))),Ia={class:"control"},ka=aa((()=>h("label",{for:"ab04",class:"radio p-2"},[x("AB"),h("sub",null,"0"),x("(IV)")],-1))),wa={class:"control"},$a=aa((()=>h("label",{for:"a2b04",class:"radio p-2"},[x("A"),h("sub",null,"2"),x("B"),h("sub",null,"0"),x("(IV)")],-1))),za={class:"control"},Da=aa((()=>h("label",{for:"a2ba14",class:"radio p-2"},[x("A"),h("sub",null,"2"),x("B"),h("sub",null,"α1"),x("(IV)")],-1))),Ma={class:"control"},Ba={for:"not_recognized",class:"radio p-2"},Oa={class:"control"},Ya={for:"panagglutination",class:"radio p-2"},Ca={class:"column is-6"},Ra={class:"is-flex"},Aa={class:"has-text-danger mr-5"},Fa={class:"field"},Na={class:"control"},Pa=aa((()=>h("label",{for:"rh+",class:"radio p-2"},"Rh+",-1))),Ea={class:"control"},Ta=aa((()=>h("label",{for:"rh-",class:"radio p-2"},"Rh-",-1))),Qa={class:"control"},Sa=aa((()=>h("label",{for:"du",class:"radio p-2"},[x("D"),h("sup",{class:"is-underlined"},"u")],-1))),qa={class:"control"},Ga=aa((()=>h("label",{for:"rh1",class:"radio p-2"},"Rh'",-1))),Wa={class:"control"},Ha=aa((()=>h("label",{for:"rh2",class:"radio p-2"},'Rh"',-1))),La={class:"field"},Xa={for:"comment"},Ja={class:"control"},Ka={class:"column is-6"},Za={class:"has-text-danger mr-5"},ae={class:"is-flex"},ee={class:"is-flex is-horizontal is-align-items-center"},le=aa((()=>h("div",{class:"field-label is-normal"},[h("label",{class:"has-text-danger"},"α 1:")],-1))),te={class:"field-body"},ie={class:"field"},se={class:"control"},oe={class:"is-flex is-horizontal is-align-items-center"},ne=aa((()=>h("div",{class:"field-label is-normal"},[h("label",{class:"has-text-danger"},"β 1:")],-1))),de={class:"field-body"},re={class:"field"},ue={class:"control"},_e={class:"column is-6"},pe={class:"has-text-danger mr-5"},me=aa((()=>h("h5",{class:"ml-3 has-text-danger",for:""},"1:",-1))),ce={class:"control"},ve=R.__esModule?R.default:R,fe=N(p({__name:"ImmunologicalResearchFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list","emergency-noticing"],setup(a,{emit:e}){F();const{t:p}=A(),w=m(p("Hemotransmission_research_results")),$=m(!1),z=c({definitive_blood_group:"oab1",rhesus_affiliation:"rh+",natural_antibodies_titer:{value:"",a1:"",b1:""}}),D=c({blood_samples_taken_date:[],analysis_date:[]}),M=[{value:1,label:"detected"},{value:2,label:"not_detected"}],B=[{value:1,label:"detected"},{value:2,label:"not_detected"}];function O(){Object.assign(z,{blood_samples_taken_date:ve().format("YYYY-MM-DD"),analysis_date:ve().format("YYYY-MM-DD")}),Object.assign(D,{blood_samples_taken_date:[],analysis_date:[]}),e("update:isOpen",!1)}return(e,p)=>{const m=d,c=_,D=r,Y=u,R=n,A=o,F=s,N=v("Multiselect"),P=i,E=t,T=l;return f(),b(T,{open:a.isOpen,size:"big",title:w.value,actions:"right",onClose:O},{content:g((()=>{var l;return[h("div",ea,[h("div",la,[h("h5",ta,y(e.$t("Donor_code"))+": "+y(null==(l=a.patient.last_visit)?void 0:l.donation_code),1)])]),h("div",ia,[V(F,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:g((()=>[V(R,{"flex-basis":"45%"},{default:g((()=>[V(Y,{horizontal:""},{default:g((()=>[V(m,{class:"my-auto mr-3 is-size-6"},{default:g((()=>[x(y(e.$t("Blood_sampling_date")),1)])),_:1}),V(D,null,{default:g((()=>{var e;return[V(c,{value:j(C)(new Date(null==(e=a.patient.last_visit)?void 0:e.updated_at),"YYYY-MM-DD"),disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),V(R,{"flex-basis":"45%"},{default:g((()=>[V(Y,{horizontal:""},{default:g((()=>[V(m,{class:"my-auto mr-3 is-size-6"},{default:g((()=>[x(y(e.$t("Blood_samples_taken_date")),1)])),_:1}),V(D,null,{default:g((()=>[V(A,{modelValue:z.blood_samples_taken_date,"onUpdate:modelValue":p[0]||(p[0]=a=>z.blood_samples_taken_date=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),V(R,{"flex-basis":"45%"},{default:g((()=>[V(Y,{horizontal:""},{default:g((()=>[V(m,{class:"my-auto mr-3 is-size-6"},{default:g((()=>[x(y(e.$t("Analysis_date")),1)])),_:1}),V(D,null,{default:g((()=>[V(A,{modelValue:z.analysis_date,"onUpdate:modelValue":p[1]||(p[1]=a=>z.analysis_date=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),V(R,{"flex-basis":"45%"},{default:g((()=>{var l;return[h("h5",null,[h("span",sa,y(e.$t("Visit_stage"))+":",1),h("span",null,y(null==(l=a.patient.last_visit)?void 0:l.stage),1)])]})),_:1}),V(R,{"flex-basis":"45%"},{default:g((()=>{var l;return[h("h5",null,[h("span",oa,y(e.$t("Preliminary_blood_type"))+":",1),h("span",null,y((null==(l=a.patient.last_visit)?void 0:l.preliminary_blood_type)??"O(I)"),1)])]})),_:1})])),_:1})]),na,h("h5",da,y(e.$t("Analysis_results")),1),h("div",ra,[h("div",ua,[h("div",_a,[h("div",pa,[h("h5",ma,y(e.$t("Окончательная группа крови")),1),h("div",ca,[h("div",va,[U(h("input",{id:"oab1","onUpdate:modelValue":p[2]||(p[2]=a=>z.definitive_blood_group=a),type:"radio",value:"oab1"},null,512),[[I,z.definitive_blood_group]]),fa]),h("div",ba,[U(h("input",{id:"ab2","onUpdate:modelValue":p[3]||(p[3]=a=>z.definitive_blood_group=a),type:"radio",value:"ab2"},null,512),[[I,z.definitive_blood_group]]),ga]),h("div",ha,[U(h("input",{id:"a2b2","onUpdate:modelValue":p[4]||(p[4]=a=>z.definitive_blood_group=a),type:"radio",value:"a2b2"},null,512),[[I,z.definitive_blood_group]]),ya]),h("div",Va,[U(h("input",{id:"a2a1b2","onUpdate:modelValue":p[5]||(p[5]=a=>z.definitive_blood_group=a),type:"radio",value:"a2a1b2"},null,512),[[I,z.definitive_blood_group]]),xa]),h("div",ja,[U(h("input",{id:"ba3","onUpdate:modelValue":p[6]||(p[6]=a=>z.definitive_blood_group=a),type:"radio",value:"ba3"},null,512),[[I,z.definitive_blood_group]]),Ua]),h("div",Ia,[U(h("input",{id:"ab04","onUpdate:modelValue":p[7]||(p[7]=a=>z.definitive_blood_group=a),type:"radio",value:"ab04"},null,512),[[I,z.definitive_blood_group]]),ka]),h("div",wa,[U(h("input",{id:"a2b04","onUpdate:modelValue":p[8]||(p[8]=a=>z.definitive_blood_group=a),type:"radio",value:"a2b04"},null,512),[[I,z.definitive_blood_group]]),$a]),h("div",za,[U(h("input",{id:"a2ba14","onUpdate:modelValue":p[9]||(p[9]=a=>z.definitive_blood_group=a),type:"radio",value:"a2ba14"},null,512),[[I,z.definitive_blood_group]]),Da]),h("div",Ma,[U(h("input",{id:"not_recognized","onUpdate:modelValue":p[10]||(p[10]=a=>z.definitive_blood_group=a),type:"radio",value:"not_recognized"},null,512),[[I,z.definitive_blood_group]]),h("label",Ba,y(e.$t("Группа крови не определяется")),1)]),h("div",Oa,[U(h("input",{id:"panagglutination","onUpdate:modelValue":p[11]||(p[11]=a=>z.definitive_blood_group=a),type:"radio",value:"panagglutination"},null,512),[[I,z.definitive_blood_group]]),h("label",Ya,y(e.$t("Panagglutination")),1)])])])]),h("div",Ca,[h("div",Ra,[h("h5",Aa,y(e.$t("Rhesus_affiliation")),1),h("div",Fa,[h("div",Na,[U(h("input",{id:"rh+","onUpdate:modelValue":p[12]||(p[12]=a=>z.rhesus_affiliation=a),type:"radio",value:"rh+"},null,512),[[I,z.rhesus_affiliation]]),Pa]),h("div",Ea,[U(h("input",{id:"rh-","onUpdate:modelValue":p[13]||(p[13]=a=>z.rhesus_affiliation=a),type:"radio",value:"rh-"},null,512),[[I,z.rhesus_affiliation]]),Ta]),h("div",Qa,[U(h("input",{id:"du","onUpdate:modelValue":p[14]||(p[14]=a=>z.rhesus_affiliation=a),type:"radio",value:"du"},null,512),[[I,z.rhesus_affiliation]]),Sa]),h("div",qa,[U(h("input",{id:"rh1","onUpdate:modelValue":p[15]||(p[15]=a=>z.rhesus_affiliation=a),type:"radio",value:"rh1"},null,512),[[I,z.rhesus_affiliation]]),Ga]),h("div",Wa,[U(h("input",{id:"rh2","onUpdate:modelValue":p[16]||(p[16]=a=>z.rhesus_affiliation=a),type:"radio",value:"rh2"},null,512),[[I,z.rhesus_affiliation]]),Ha])])]),h("div",null,[h("div",La,[h("label",Xa,y(e.$t("Comment")),1),h("div",Ja,[U(h("textarea",{id:"comment","onUpdate:modelValue":p[17]||(p[17]=a=>z.comment=a),class:"textarea",rows:3},null,512),[[k,z.comment]])])])])]),h("div",Ka,[V(Y,{horizontal:"",class:"is-align-items-center is-justify-content-end"},{default:g((()=>[h("h5",Za,y(e.$t("Natural_antibodies_titer")),1),V(D,null,{default:g((()=>[V(N,{modelValue:z.natural_antibodies_titer.value,"onUpdate:modelValue":p[18]||(p[18]=a=>z.natural_antibodies_titer.value=a),options:M,label:"label","value-prop":"value",style:{width:"15rem"}},null,8,["modelValue"])])),_:1})])),_:1}),h("div",ae,[h("div",ee,[le,h("div",te,[h("div",ie,[h("p",se,[U(h("input",{"onUpdate:modelValue":p[19]||(p[19]=a=>z.natural_antibodies_titer.a1=a),class:"input",type:"text"},null,512),[[k,z.natural_antibodies_titer.a1]])])])])]),h("div",oe,[ne,h("div",de,[h("div",re,[h("p",ue,[U(h("input",{"onUpdate:modelValue":p[20]||(p[20]=a=>z.natural_antibodies_titer.b1=a),class:"input",type:"text"},null,512),[[k,z.natural_antibodies_titer.b1]])])])])])])]),h("div",_e,[V(Y,{horizontal:"",class:"is-align-items-center"},{default:g((()=>[h("h5",pe,y(e.$t("Incomplete_immune_antibodies")),1),V(D,{class:"is-flex"},{default:g((()=>[V(N,{modelValue:z.incomplete_immune_antibodies,"onUpdate:modelValue":p[21]||(p[21]=a=>z.incomplete_immune_antibodies=a),options:B,label:"label","value-prop":"value",style:{"min-width":"15rem"}},null,8,["modelValue"])])),_:1}),me,h("p",ce,[U(h("input",{"onUpdate:modelValue":p[22]||(p[22]=a=>z.natural_antibodies_titer.a1=a),class:"input",type:"text",style:{width:"3rem"}},null,512),[[k,z.natural_antibodies_titer.a1]])])])),_:1}),V(Y,{horizontal:"",class:""},{default:g((()=>[V(D,null,{default:g((()=>[V(P,{modelValue:z.hilez,"onUpdate:modelValue":p[23]||(p[23]=a=>z.hilez=a),color:"primary",label:"Хилез"},null,8,["modelValue"])])),_:1})])),_:1}),V(Y,{horizontal:"",class:""},{default:g((()=>[V(D,null,{default:g((()=>[V(P,{modelValue:z.gemoliz,"onUpdate:modelValue":p[24]||(p[24]=a=>z.gemoliz=a),color:"primary",label:"Гемолиз"},null,8,["modelValue"])])),_:1})])),_:1})])])])]})),action:g((()=>[V(E,{loading:$.value,form:"blood-sampling-form"},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-32d3fadf"]]),be=a=>(w("data-v-7916e5fa"),a=a(),$(),a),ge={class:"page-content-inner"},he={class:"columns mb-3"},ye={class:"column"},Ve={class:"columns mt-1"},xe={class:"column"},je={class:"columns"},Ue={class:"column is-12"},Ie={key:0,class:"is-flex-grow-0",textContent:"#"},ke={key:0,class:"flex-list-inner"},we={key:1,class:"flex-list-inner"},$e=be((()=>h("img",{class:"light-image",src:G,alt:""},null,-1))),ze=be((()=>h("img",{class:"dark-image",src:W,alt:""},null,-1))),De=["onClick"],Me=X.isEmpty,Be=N(p({__name:"index",setup(l){const t=F(),{t:i}=A(),s=J(),o=m(!1);K().setPageTitle(i("Immunological-Research-Department")),L({title:`${i("Immunological_research_specimens_list")} - ${s.app.name}`});const n=c({data:[{id:11,donation_code:130100111800,blood_sampling_date:"22.05.2022",first_name:"Ренат",last_name:"Ахмеджанов",father_name:"Шамильевич",birth_date:"24.01.1990",last_visit:{visit_type:"Безвозмезные донации",created_at:"06.05.2022",donation_type:"Тромбоцитаферез",stage:"Мед. освидетельствование"}},{id:55,donation_code:130100111869,blood_sampling_date:"23.05.2022",first_name:"Аркадий",last_name:"Богданов",father_name:"Ильич",birth_date:"12.08.1993",last_visit:{visit_type:"Безвозмезные донации",created_at:"05.12.2022",donation_type:"Донация цельной крови",stage:"Донация"}}],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),d=z({get:()=>n.pagination.current_page,set:async a=>{_.page=a,await U(_)}}),r={orderNumber:{format:(a,e,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:i("Donation_code")},blood_sampling_date:{label:i("Blood_sampling_date")},name:{label:i("Donor_fullname")},birth_date:{label:i("Date-of-birth")},visit_type:{label:i("Visit_type"),format:(a,e)=>{var l,t;return(null==(l=e.last_visit)?void 0:l.visit_type)&&i(null==(t=e.last_visit)?void 0:t.visit_type)}},visit_date:{label:i("Visit_date"),format:(a,e)=>{var l;return null==(l=e.last_visit)?void 0:l.created_at}},donation_type:{label:i("Donation_type"),format:(a,e)=>{var l;return null==(l=e.last_visit)?void 0:l.donation_type}},visit_stage:{label:i("Visit_stage"),format:(a,e)=>{var l;return null==(l=e.last_visit)?void 0:l.stage}}},u=c({visit_type_id:[],donation_type_id:[],donation_code:[]}),_=c({page:1}),p=c({}),v=m(!1),x=m(!1);async function U(a){var e,l;try{Object.assign(_,a),o.value=!0;const e=await Z(a);Object.assign(n,e.result),Me(e.result.data)?t.warning(i("Data_not_found")):t.success(`${i("Found")}: ${e.result.pagination.total} ${i("records")}`)}catch(s){Object.assign(u,null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.errors)}finally{o.value=!1}}function I(a){u[a]=""}async function k(){n.data=[]}return(l,t)=>{const i=H,_=Q,m=P,c=S,w=E,$=q,z=T,C=fe,R=e;return f(),D("div",ge,[h("div",he,[h("div",ye,[V(i,{"with-icons":"",separator:"bullet",items:[{label:j(s).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:l.$t("Immunological-Research-Department")},{label:l.$t("Immunological_research_specimens_list")}]},null,8,["items"])])]),h("div",Ve,[h("div",xe,[V(a,{"is-loading":j(o),errors:j(u),onSearch:U,onClearForm:k,onClearError:I},null,8,["is-loading","errors"])])]),h("div",je,[h("div",Ue,[V(z,{columns:j(r),data:j(n).data,limit:j(n).pagination.per_page,total:j(n).pagination.total},{default:g((()=>[V(w,{rounded:"","no-header":!j(o)&&0===j(n).data.length},{"header-column":g((({column:a})=>["orderNumber"===a.key?(f(),D("span",Ie)):M("",!0)])),body:g((()=>[j(o)?(f(),D("div",ke,[(f(!0),D(B,null,O(j(n).pagination.per_page,(a=>(f(),D("div",{key:a,class:"flex-table-item"},[V(m,null,{default:g((()=>[V(_,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):M("",!0),0===j(n).data.length?(f(),D("div",we,[V(c,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:g((()=>[$e,ze])),_:1})])):M("",!0)])),"body-cell":g((({row:a,column:e})=>["name"===e.key?(f(),D("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:e=>{return l=a,Object.assign(p,l),void(v.value=!0);var l}},y(a.first_name)+" "+y(a.last_name)+" "+y(a.father_name)+" ",9,De)):M("",!0)])),_:1},8,["no-header"]),j(n).total_pages>1?(f(),b($,{key:0,"current-page":j(d),"onUpdate:current-page":t[0]||(t[0]=a=>Y(d)?d.value=a:null),class:"mt-5","item-per-page":j(n).pagination.per_page,"total-items":j(n).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):M("",!0)])),_:1},8,["columns","data","limit","total"])])]),V(C,{"is-open":j(v),"onUpdate:is-open":t[1]||(t[1]=a=>Y(v)?v.value=a:null),patient:j(p),onEmergencyNoticing:t[2]||(t[2]=a=>x.value=!j(x))},null,8,["is-open","patient"]),V(R,{"is-open":j(x),"onUpdate:is-open":t[3]||(t[3]=a=>Y(x)?x.value=a:null),patient:j(p)},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-7916e5fa"]]);export{Be as default};
