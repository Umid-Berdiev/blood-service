import{_ as a,a as e,b as t}from"./VFlexTable.vue_vue_type_style_index_0_lang-68179e43.js";import{_ as l,a as s,b as o,c as n,d as i}from"./search-7-dark-b6479367.js";import{_ as r}from"./VCard.vue_vue_type_script_setup_true_lang-3b674ece.js";import{_ as d}from"./VButton.vue_vue_type_style_index_0_lang-fc4409cd.js";import{_,a as u}from"./VControl-b713a764.js";import{_ as p}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-38070980.js";import{q as c,C as m,H as v,r as g,ag as y,x as b,j as f,o as h,a as x,w as V,e as j,m as $,k,K as D,t as w,i as F,E as C,J as E,c as M,a6 as L,d as S,g as P,F as U,l as I,S as B,L as O,M as T}from"./index-568ad137.js";import{_ as Y}from"./lodash-c54dbb06.js";import{p as z,f as A}from"./patient-33059bc9.js";import{_ as N}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-faf20e2b.js";import{u as W}from"./main-7fc6984e.js";import{u as q}from"./viewWrapper-feca89b2.js";import{_ as G}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-8f30b873.js";import"./VPlaceload-33f57994.js";import"./VIMaskInput.vue_vue_type_script_lang-6492e1cb.js";import"./moment-78dc6435.js";const H=["onSubmit"],J={class:"columns"},K={class:"column"},R={class:"help has-text-danger"},X={class:"column"},Z={class:"help has-text-danger"},Q={class:"column"},aa={class:"help has-text-danger"},ea={class:"column"},ta={class:"help has-text-danger"},la={class:"column"},sa={class:"help has-text-danger"},oa={class:"navigation-buttons"},na={class:"buttons is-right"},ia=Y.isEmpty,ra=Y.values,da=c({__name:"ExaminedDonorsFilterForm",props:{isLoading:{type:Boolean},errors:null},emits:["search","clearError","clearForm"],async setup(a,{emit:e}){let t,l;const{t:s}=m(),o=v(),n=g({start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),i=([t,l]=y((()=>z().then((a=>a.result)))),t=await t,l(),t),c=b([{value:"gratuitous",label:s("Gratuitous")},{value:"chargeable",label:s("Chargeable")}]),C=b([{id:1,name:s("Whole_blood_donation")},{id:2,name:s("Plasmapheresis")},{id:3,name:s("Plateletpheresis")}]),E=async()=>{ra(n).every(ia)?o.error(s("Form_fields_are_empty")):e("search",n)},M=async()=>{Object.assign(n,{start_date:"",end_date:"",donor_category_id:"",visit_type_id:"",donation_type_id:""}),e("clearForm")};return(e,t)=>{const l=p,s=_,o=u,m=f("Multiselect"),v=d,g=r;return h(),x(g,null,{default:V((()=>[j("form",{onSubmit:$(E,["prevent"])},[j("div",J,[j("div",K,[k(o,{label:e.$t("Start_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:D(n).start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>D(n).start_date=a)},null,8,["modelValue"]),j("p",R,w(a.errors.start_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",X,[k(o,{label:e.$t("End_date")},{default:V((()=>[k(s,null,{default:V((()=>[k(l,{modelValue:D(n).end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>D(n).end_date=a)},null,8,["modelValue"]),j("p",Z,w(a.errors.end_date[0]),1)])),_:1})])),_:1},8,["label"])]),j("div",Q,[k(o,{class:"is-curved-select",label:e.$t("Donor_categories")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:D(n).donor_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>D(n).donor_category_id=a),attrs:{id:l},options:D(i),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",aa,w(a.errors.donor_category_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",ea,[k(o,{class:"is-curved-select",label:e.$t("Visit_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:D(n).visit_type_id,"onUpdate:modelValue":t[3]||(t[3]=a=>D(n).visit_type_id=a),attrs:{id:l},options:D(c),placeholder:e.$t("All")},null,8,["modelValue","attrs","options","placeholder"]),j("p",ta,w(a.errors.visit_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])]),j("div",la,[k(o,{class:"is-curved-select",label:e.$t("Donation_type")},{default:V((({id:l})=>[k(s,null,{default:V((()=>[k(m,{modelValue:D(n).donation_type_id,"onUpdate:modelValue":t[4]||(t[4]=a=>D(n).donation_type_id=a),attrs:{id:l},options:D(C),placeholder:e.$t("All"),label:"name","value-prop":"id"},null,8,["modelValue","attrs","options","placeholder"]),j("p",sa,w(a.errors.donation_type_id[0]),1)])),_:2},1024)])),_:1},8,["label"])])]),j("div",oa,[j("div",na,[k(v,{type:"button",color:"warning",bold:"",disabled:a.isLoading,tabindex:"0",onClick:M},{default:V((()=>[F(w(e.$t("Clear")),1)])),_:1},8,["disabled"]),k(v,{type:"submit",color:"primary",bold:"",loading:a.isLoading,tabindex:"0"},{default:V((()=>[F(w(e.$t("Search")),1)])),_:1},8,["loading"])])])],40,H)])),_:1})}}}),_a=a=>(O("data-v-4264f806"),a=a(),T(),a),ua={class:"page-content-inner"},pa={class:"columns mb-3"},ca={class:"column"},ma={class:"columns mt-1"},va={class:"column"},ga={class:"columns"},ya={class:"column is-12"},ba=["textContent"],fa={key:0,class:"flex-list-inner"},ha={key:1,class:"flex-list-inner"},xa=_a((()=>j("img",{class:"light-image",src:n,alt:""},null,-1))),Va=_a((()=>j("img",{class:"dark-image",src:i,alt:""},null,-1))),ja=Y.isEmpty,$a=G(c({__name:"index",setup(n){C();const i=v(),{t:r}=m(),d=W(),_=b(!1);q().setPageTitle(r("Physician-therapist")),E({title:`${r("Donors-list-for-examination")} - ${d.app.name}`});const u=g({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),p=M({get:()=>u.pagination.current_page,set:async a=>{$.page=a,await O($)}}),c={orderNumber:{format:(a,e,t)=>`${t+1}`},name:{label:r("Fullname")},birth_date:{label:r("Date-of-birth")},visit_date:{label:r("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&L(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},visit_type:{label:r("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&r(null==(l=e.last_visit)?void 0:l.visit_type)}},medical_inspection_date:{label:r("Medical_inspection_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.directed_by)&&r(null==(l=e.last_visit)?void 0:l.directed_by)}},medical_inspection_conclusion:{label:r("Medical_inspection_conclusion"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},linked_donation_number:{label:r("Linked_donation_number"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},donation_type:{label:r("Donation_type"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.personalized_donation}},blood_component_amount:{label:r("Blood_component_amount"),format:(a,e)=>{var t;return null==(t=e.status)?void 0:t.name}}};b();const y=g({start_date:[],end_date:[],donor_category_id:[],visit_type_id:[],donation_type_id:[]}),$=g({page:1});async function O(a){var e,t;try{Object.assign($,a),_.value=!0;const e=await A(a);Object.assign(u,e.result),ja(e.result.data)?i.warning(r("Data_not_found")):i.success(`${r("Found")}: ${e.result.pagination.total} ${r("records")}`)}catch(l){Object.assign(y,null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.errors)}finally{_.value=!1}}function T(a){y[a]=""}async function Y(){u.data=[]}return(n,i)=>{const r=N,m=da,v=l,g=a,b=s,$=f("RouterLink"),C=e,E=o,M=t;return h(),S("div",ua,[j("div",pa,[j("div",ca,[k(r,{"with-icons":"",separator:"bullet",items:[{label:D(d).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:n.$t("Physician-therapist")},{label:n.$t("Examined-donor-register")}]},null,8,["items"])])]),j("div",ma,[j("div",va,[k(m,{"is-loading":D(_),errors:D(y),onSearch:O,onClearForm:Y,onClearError:T},null,8,["is-loading","errors"])])]),j("div",ga,[j("div",ya,[k(M,{columns:D(c),data:D(u).data,limit:D(u).pagination.per_page,total:D(u).pagination.total},{default:V((()=>[k(C,{rounded:"","no-header":!D(_)&&0===D(u).data.length},{"header-column":V((({column:a})=>["orderNumber"===a.key?(h(),S("span",{key:0,textContent:w(n.$t("Donor_register_number"))},null,8,ba)):P("",!0)])),body:V((()=>[D(_)?(h(),S("div",fa,[(h(!0),S(U,null,I(D(u).pagination.per_page,(a=>(h(),S("div",{key:a,class:"flex-table-item"},[k(g,null,{default:V((()=>[k(v,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):P("",!0),0===D(u).data.length?(h(),S("div",ha,[k(b,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:V((()=>[xa,Va])),_:1})])):P("",!0)])),"body-cell":V((({row:a,column:e})=>["name"===e.key?(h(),x($,{key:0,class:"table_link",to:`/app/physician-therapist/donors-for-examination/${a.id}`},{default:V((()=>[F(w(a.first_name)+" "+w(a.last_name)+" "+w(a.father_name)+" ",1)])),_:2},1032,["to"])):P("",!0)])),_:1},8,["no-header"]),D(u).data.length?(h(),x(E,{key:0,"current-page":D(p),"onUpdate:current-page":i[0]||(i[0]=a=>B(p)?p.value=a:null),class:"mt-5","item-per-page":D(u).pagination.per_page,"total-items":D(u).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):P("",!0)])),_:1},8,["columns","data","limit","total"])])])])}}}),[["__scopeId","data-v-4264f806"]]);export{$a as default};
