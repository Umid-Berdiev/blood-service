import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.4f05a8f1.js";import{g as a,h as t,_ as l,a as s,b as n,c as o,d as r,e as i,f as u}from"./search-7-dark.2060a6ab.js";import{_ as p}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang.f60c4662.js";import{_ as m}from"./VAvatar.vue_vue_type_style_index_0_lang.347b8a75.js";import{_ as c}from"./VPlaceload.a3525941.js";import{f as d,r as _,_ as g}from"./index.97626a89.js";import{_ as v,a as y,b as f}from"./SearchInput.afab9484.js";import{_ as b}from"./VBreadcrumb.vue_vue_type_style_index_0_lang.4a253439.js";import{q as h,E as x,H as w,C as j,J as k,r as V,x as C,c as U,y as $,o as E,d as F,k as z,K as A,e as D,w as M,P as N,g as P,F as R,l as T,a as q,t as B}from"./index.ce4ddab7.js";import{u as I}from"./main.ee4a9c05.js";import{u as L}from"./viewWrapper.5a2b502f.js";import"./VModal.vue_vue_type_style_index_0_lang.51ace3e0.js";import"./VButton.vue_vue_type_style_index_0_lang.ea1f05cd.js";import"./VFlex.vue_vue_type_style_index_0_lang.33b5caf8.js";import"./VDropdown.vue_vue_type_style_index_0_lang.f136a41c.js";import"./VIcon.vue_vue_type_script_setup_true_lang.ceee89bc.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./VControl.5631d0ee.js";const S={class:"page-content-inner"},H={class:"columns"},J={class:"column is-12"},K={key:0,class:"is-flex-grow-0",textContent:"#"},O={key:0,class:"flex-list-inner"},W={key:1,class:"flex-list-inner"},G=D("img",{class:"light-image",src:a,alt:""},null,-1),Q=D("img",{class:"dark-image",src:t,alt:""},null,-1),X={class:"dark-text"},Y={key:1},Z={class:"dark-text"},ee=h({__name:"index",setup(a){const t=x(),h=w(),{t:ee}=j(),ae=I();L().setPageTitle(ee("Users_List")),k({title:`${ee("Users")} - ${ae.app.name}`});const te=V({pagination:{current_page:1,per_page:10,total:10,total_pages:1},result:[]}),le=C(),se=U({get:()=>te.pagination.current_page,set:async e=>{await ue(e)}}),ne={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},name:{label:"Fullname",media:!0,grow:!0,sortable:!0},email:{label:"Email",sortable:!0},role:{label:"Role",sortable:!0},department:{label:"Department",grow:!0,sortable:!0},actions:{label:"",align:"end"}},oe=C(!1),re=U({get:()=>"",async set(e){console.log(e)}}),ie=C();async function ue(e=1){var a,t,l;try{oe.value=!0;const a=await d({page:e,per_page:te.pagination.per_page});Object.assign(te,a)}catch(s){h.error(ee(null==(l=null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.error)?void 0:l.message))}finally{oe.value=!1}}async function pe(){await _(le.value),ue()}return $((()=>te.pagination.per_page),(async()=>{await ue()})),(a,d)=>{const _=b,h=v,x=y,w=f,j=g,k=l,V=s,C=c,U=n,$=o,I=m,L=p,ee=r,ue=i,me=u,ce=e;return E(),F("div",S,[z(_,{"with-icons":"",separator:"bullet",items:[{label:A(ae).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Users"),to:{name:"/app/users/"}}]},null,8,["items"]),D("div",H,[D("div",J,[z(me,{class:"mt-4",columns:A(ne),data:te.result,limit:te.pagination.per_page,total:te.pagination.total},{default:M((e=>[z(w,null,{left:M((()=>[z(h,{modelValue:A(re),"onUpdate:modelValue":d[0]||(d[0]=e=>N(re)?re.value=e:null)},null,8,["modelValue"])])),right:M((()=>[z(x,{modelValue:te.pagination.per_page,"onUpdate:modelValue":d[1]||(d[1]=e=>te.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),z(ee,{rounded:"","no-header":!oe.value&&0===te.result.length},{"header-column":M((({column:e})=>["orderNumber"===e.key?(E(),F("span",K)):P("",!0)])),body:M((()=>[oe.value?(E(),F("div",O,[(E(!0),F(R,null,T(te.pagination.per_page,(e=>(E(),F("div",{key:e,class:"flex-table-item"},[z(V,{column:{grow:!0,media:!0}},{default:M((()=>[z(j,{size:"medium"}),z(k,{lines:2,width:"60%","last-line-width":"20%",class:"mx-2"})])),_:1}),z(V,null,{default:M((()=>[z(C,{width:"60%",class:"mx-1"})])),_:1}),z(V,null,{default:M((()=>[z(C,{width:"60%",class:"mx-1"})])),_:1}),z(V,{column:{align:"end"}},{default:M((()=>[z(C,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===te.result.length?(E(),F("div",W,[z(U,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:M((()=>[G,Q])),_:1})])):P("",!0)])),"body-row-pre":M((({row:e})=>[e.id===ie.value?(E(),q($,{key:0,size:"tiny",class:"m-0 mb-1"})):P("",!0)])),"body-cell":M((({row:e,column:a})=>["name"===a.key?(E(),F(R,{key:0},[z(I,{size:"medium",picture:e.avatar},null,8,["picture"]),D("div",null,[D("span",X,B(e.firstname)+" "+B(e.lastname),1)])],64)):P("",!0),"role"===a.key?(E(),F("div",Y,[D("span",Z,B(e.role.name),1)])):P("",!0),"actions"===a.key?(E(),q(L,{key:2,onEdit:a=>{return l=e.id,le.value=l,void t.push(`/app/users/${l}`);var l},onRemove:a=>async function(e){le.value=e,ae.$patch({confirmModalState:!0})}(e.id)},null,8,["onEdit","onRemove"])):P("",!0)])),_:1},8,["no-header"]),te.result.length?(E(),q(ue,{key:0,"current-page":A(se),"onUpdate:current-page":d[2]||(d[2]=e=>N(se)?se.value=e:null),class:"mt-5","item-per-page":te.pagination.per_page,"total-items":te.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):P("",!0)])),_:1},8,["columns","data","limit","total"])])]),z(ce,{onConfirmAction:pe})])}}});export{ee as default};
