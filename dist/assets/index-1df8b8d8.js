import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-efced053.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-7e83e39e.js";import{_ as l}from"./VButton.vue_vue_type_style_index_0_lang-43587e05.js";import{_ as t}from"./VTabs.vue_vue_type_script_setup_true_lang-982cdd14.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-1ec71c6f.js";import{_ as s,a as o}from"./VControl-786e135c.js";import{_ as i}from"./VInput.vue_vue_type_script_setup_true_lang-705097fe.js";import{q as r,H as u,C as d,x as p,r as m,y as c,o as _,a as v,w as f,e as g,m as y,k as b,d as h,K as V,t as j,g as x,i as w,j as z,E as k,c as $,J as C,a8 as U,S as I,F as R,l as A}from"./index-e3f64991.js";import{f as N,u as O,c as T,a as E,s as S,r as D}from"./index-7c8165be.js";import{_ as F,a as q,b as M}from"./VFlexTable.vue_vue_type_style_index_0_lang-963b0d23.js";import{c as P,d as B,_ as L,a as H,b as J}from"./search-7-dark-47707eb8.js";import{_ as K}from"./VDropdown.vue_vue_type_style_index_0_lang-8c5b1d5b.js";import{_ as W}from"./VPlaceload-d2cb982c.js";import{_ as Y,a as Z,b as G}from"./SearchInput-f6755a88.js";import{_ as Q}from"./VFlex.vue_vue_type_style_index_0_lang-71ef6e79.js";import{_ as X}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-09742679.js";import{u as ee}from"./viewWrapper-5fb27d85.js";import{u as ae}from"./main-7469f747.js";import"./VIcon.vue_vue_type_script_setup_true_lang-dc97bca3.js";import"./_plugin-vue_export-helper-1b428a4d.js";const le=["onSubmit"],te={key:0,class:"columns is-multiline pt-5"},ne={class:"column is-12"},se={class:"help has-text-danger"},oe={class:"help has-text-danger"},ie={key:1,class:"columns is-multiline pt-5"},re={class:"column is-12"},ue={key:2,class:"columns is-multiline pt-5"},de={class:"column is-12"},pe=r({__name:"RoleFormModal",props:{modelValue:{type:Boolean,default:!1},roleId:{default:null}},emits:["update:modelValue","update:list"],setup(e,{emit:r}){const z=e,k=u(),{t:$}=d(),C=p($("Add")),U=p(!1),I=m({uz:"",ru:"",en:""}),R=m({uz:"",ru:"",en:""}),A=m({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});async function E(){var e,a,l,t;try{U.value=!0,z.roleId?await O(z.roleId,{name:I,description:R}):await T({name:I,description:R}),r("update:list"),S()}catch(n){(null==(e=n.response)?void 0:e.data.error)?k.error(null==(a=n.response)?void 0:a.data.error):Object.assign(A,null==(t=null==(l=n.response)?void 0:l.data)?void 0:t.errors)}finally{U.value=!1}}function S(){C.value=$("Add"),Object.assign(I,{uz:"",ru:"",en:""}),Object.assign(R,{uz:"",ru:"",en:""}),Object.assign(A,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]}),r("update:modelValue",!1)}return c((()=>z.roleId),(async e=>{if(e){console.log(e),C.value=$("Edit");const a=await N(Number(z.roleId));Object.assign(I,a.name),Object.assign(R,a.description)}}),{deep:!0}),(r,u)=>{const d=i,p=s,m=o,c=n,z=t,k=l,N=a;return _(),v(N,{open:e.modelValue,size:"large",title:C.value,actions:"right",onClose:S},{content:f((()=>[g("form",{id:"role-form",class:"modal-form",onSubmit:y(E,["prevent"])},[b(z,{type:"boxed",selected:"uz",tabs:[{label:r.$t("Uzbek"),value:"uz"},{label:r.$t("Russian"),value:"ru"},{label:r.$t("English"),value:"en"}]},{tab:f((({activeValue:e})=>["uz"===e?(_(),h("div",te,[g("div",ne,[b(m,{label:r.$t("Name_uz"),required:""},{default:f((()=>[b(p,null,{default:f((()=>[b(d,{modelValue:I.uz,"onUpdate:modelValue":u[0]||(u[0]=e=>I.uz=e),name:"name_uz",type:"text",placeholder:V($)("Type_name_uz")},null,8,["modelValue","placeholder"]),g("p",se,j(A["name.uz"][0]),1)])),_:1})])),_:1},8,["label"]),b(m,{label:r.$t("Description_uz"),required:""},{default:f((()=>[b(p,null,{default:f((()=>[b(c,{modelValue:R.uz,"onUpdate:modelValue":u[1]||(u[1]=e=>R.uz=e),name:"description_uz",placeholder:V($)("Add_description_uz")},null,8,["modelValue","placeholder"]),g("p",oe,j(A["description.uz"][0]),1)])),_:1})])),_:1},8,["label"])])])):"ru"===e?(_(),h("div",ie,[g("div",re,[b(m,{label:r.$t("Name_ru")},{default:f((()=>[b(p,null,{default:f((()=>[b(d,{modelValue:I.ru,"onUpdate:modelValue":u[2]||(u[2]=e=>I.ru=e),name:"name_ru",type:"text",placeholder:V($)("Type_name_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),b(m,{label:r.$t("Description_ru")},{default:f((()=>[b(p,null,{default:f((()=>[b(c,{modelValue:R.ru,"onUpdate:modelValue":u[3]||(u[3]=e=>R.ru=e),name:"description_ru",placeholder:V($)("Add_description_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):"en"===e?(_(),h("div",ue,[g("div",de,[b(m,{label:r.$t("Name_en")},{default:f((()=>[b(p,null,{default:f((()=>[b(d,{modelValue:I.en,"onUpdate:modelValue":u[4]||(u[4]=e=>I.en=e),name:"name_en",type:"text",placeholder:V($)("Type_name_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),b(m,{label:r.$t("Description_en")},{default:f((()=>[b(p,null,{default:f((()=>[b(c,{modelValue:R.en,"onUpdate:modelValue":u[5]||(u[5]=e=>R.en=e),name:"description_en",placeholder:V($)("Add_description_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):x("",!0)])),_:1},8,["tabs"])],40,le)])),action:f((({close:e})=>[b(k,{loading:U.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:U.value},{default:f((()=>[w(j(r.$t("Save")),1)])),_:1},8,["loading","disabled"])])),_:1},8,["open","title"])}}}),me=["onClick"],ce={class:"icon"},_e={class:"meta"},ve=["onClick"],fe={class:"icon"},ge={class:"meta"},ye=g("hr",{class:"dropdown-divider"},null,-1),be=["onClick"],he={class:"icon"},Ve={class:"meta"},je=r({__name:"RoleDropdown",emits:["edit","remove","permissions"],setup:(e,{emit:a})=>(e,l)=>{const t=z("VueIconify"),n=K;return _(),v(n,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:f((({close:l})=>[g("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:y((()=>{a("edit"),l()}),["prevent"])},[g("div",ce,[b(t,{icon:"feather:edit-2"})]),g("div",_e,[g("span",null,j(e.$t("Edit")),1)])],8,me),g("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:y((()=>{a("permissions"),l()}),["prevent"])},[g("div",fe,[b(t,{icon:"feather:shield"})]),g("div",ge,[g("span",null,j(e.$t("Role_permissions")),1)])],8,ve),ye,g("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:y((()=>{a("remove"),l()}),["prevent"])},[g("div",he,[b(t,{icon:"feather:trash"})]),g("div",Ve,[g("span",null,j(e.$t("Remove")),1)])],8,be)])),_:1})}}),xe={class:"applicant-list-wrapper"},we={class:"columns"},ze={class:"column is-12"},ke={key:0,class:"is-flex-grow-0",textContent:"#"},$e={key:0,class:"flex-list-inner"},Ce={key:1,class:"flex-list-inner"},Ue=g("img",{class:"light-image",src:P,alt:""},null,-1),Ie=g("img",{class:"dark-image",src:B,alt:""},null,-1),Re=r({__name:"index",async setup(a){let t,n;const s=u(),o=k(),{t:i}=d(),r=ae(),z=m({pagination:{current_page:1,per_page:10,total:10},result:[]}),N=p(!1),O=p(null),T=$({get:()=>"",async set(e){await async function(e){const a=await S(e);Object.assign(z,a)}(e)}}),P=$((()=>({orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},name:{label:i("Name"),searchable:!0},description:{label:i("Description")},actions:{label:i("Actions"),align:"center"}}))),B=p(!1);p();const K=ee(),le=$({get:()=>z.pagination.current_page,set:async e=>{await se(e)}});function te(e=null){console.log({rowId:e}),N.value=!0,O.value=e}async function ne(){await D(O.value),await se(),oe()}async function se(e=1){var a;try{B.value=!0;const a=await E({page:e,per_page:z.pagination.per_page});Object.assign(z,a)}catch(l){s.error(i(null==(a=l.response)?void 0:a.data.error.message))}finally{B.value=!1}}function oe(){s.success(i("Success"))}return K.setPageTitle(i("Roles_List")),C({title:i("Roles")}),[t,n]=U((()=>se())),await t,n(),c((()=>z.pagination.per_page),(async()=>{await se()})),(a,t)=>{const n=X,s=l,i=Q,u=Y,d=Z,p=G,m=L,c=F,k=W,$=H,C=je,U=q,E=J,S=M,D=pe,K=e;return _(),h("div",xe,[b(i,{"justify-content":"space-between"},{default:f((()=>[b(n,{"with-icons":"",separator:"bullet",items:[{label:"Vuero",hideLabel:!0,icon:"feather:home",to:{name:"/app"}},{label:a.$t("Roles"),to:{name:"/app/roles/"}}]},null,8,["items"]),b(s,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:t[0]||(t[0]=y((e=>te(null)),["prevent"]))},{default:f((()=>[w(j(a.$t("Add")),1)])),_:1})])),_:1}),g("div",we,[g("div",ze,[b(S,{class:"mt-4",columns:V(P),data:z.result,limit:z.pagination.per_page,total:z.pagination.total},{default:f((e=>[b(p,null,{left:f((()=>[b(u,{modelValue:V(T),"onUpdate:modelValue":t[1]||(t[1]=e=>I(T)?T.value=e:null)},null,8,["modelValue"])])),right:f((()=>[b(d,{modelValue:z.pagination.per_page,"onUpdate:modelValue":t[2]||(t[2]=e=>z.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),b(U,{rounded:"","no-header":!B.value&&0===z.result.length},{"header-column":f((({column:e})=>["orderNumber"===e.key?(_(),h("span",ke)):x("",!0)])),body:f((()=>[B.value?(_(),h("div",$e,[(_(!0),h(R,null,A(z.pagination.per_page,(e=>(_(),h("div",{key:e,class:"flex-table-item"},[b(c,null,{default:f((()=>[b(m,{lines:2,width:"40%","last-line-width":"20%",class:"mx-2"})])),_:1}),b(c,null,{default:f((()=>[b(k,{class:"mx-1"})])),_:1}),b(c,{column:{align:"center"}},{default:f((()=>[b(k,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===z.result.length?(_(),h("div",Ce,[b($,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:f((()=>[Ue,Ie])),_:1},8,["title","subtitle"])])):x("",!0)])),"body-cell":f((({row:e,column:a})=>["actions"===a.key?(_(),v(C,{key:0,onEdit:a=>te(e.id),onRemove:a=>async function(e){O.value=e,r.$patch({confirmModalState:!0})}(e.id),onPermissions:a=>{return l=e.id,void o.push(`/app/roles/${l}/permissions`);var l}},null,8,["onEdit","onRemove","onPermissions"])):x("",!0)])),_:1},8,["no-header"]),z.result.length?(_(),v(E,{key:0,"current-page":V(le),"onUpdate:current-page":t[3]||(t[3]=e=>I(le)?le.value=e:null),class:"mt-5","item-per-page":z.pagination.per_page,"total-items":z.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):x("",!0)])),_:1},8,["columns","data","limit","total"])])]),b(D,{modelValue:N.value,"onUpdate:modelValue":t[4]||(t[4]=e=>N.value=e),"role-id":O.value,"onUpdate:list":t[5]||(t[5]=()=>{se(),oe(),O.value=null}),onClose:t[6]||(t[6]=e=>O.value=null)},null,8,["modelValue","role-id"]),b(K,{onConfirmAction:ne})])}}});export{Re as default};
