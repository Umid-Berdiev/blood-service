import{f as a,s as e,a as t,_ as l,b as s}from"./FilterForm.vue_vue_type_script_setup_true_lang-096ef984.js";import{_ as i}from"./VModal.vue_vue_type_style_index_0_lang-5d90c6b2.js";import{_ as n}from"./SubmitButton.vue_vue_type_script_setup_true_lang-6d2139a4.js";import{_ as o}from"./VFlex.vue_vue_type_style_index_0_lang-d4822231.js";import{_ as d}from"./IMaskDateInput.vue_vue_type_script_setup_true_lang-6474213d.js";import{_ as u}from"./VFlexItem.vue_vue_type_style_index_0_lang-e1345c6d.js";import{b as r,_,a as c}from"./VControl-f7fb3a1b.js";import{_ as p}from"./VInput.vue_vue_type_script_setup_true_lang-66ceaea3.js";import{q as m,H as v,C as y,x as h,r as b,y as f,o as g,a as x,w as V,e as j,t as k,k as w,i as $,$ as z,ah as C,d as U,g as D,L as O,M as B,E as I,J as F,c as H,a7 as T,a8 as q,K as M,F as A,l as R,U as S}from"./index-98bd5d96.js";import{_ as Y}from"./_plugin-vue_export-helper-1b428a4d.js";import{_ as L,a as N,b as W}from"./VFlexTable.vue_vue_type_style_index_0_lang-a0c1a611.js";import{_ as E,a as J,b as K,c as P,d as Z}from"./search-7-dark-8086cfd0.js";import{_ as G}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-e0d2add1.js";import{u as Q}from"./main-f6ba09a2.js";import{u as X}from"./viewWrapper-68c9a3c0.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-a7c6e41e.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-bf75b12c.js";import"./VRadio.vue_vue_type_style_index_0_lang-6dace82f.js";import"./moment-29978768.js";import"./VCard.vue_vue_type_script_setup_true_lang-bb96f312.js";import"./VButton.vue_vue_type_style_index_0_lang-8d9e700e.js";import"./additional-acd45769.js";import"./VIMaskInput.vue_vue_type_script_lang-760644c4.js";const aa=a=>(O("data-v-d1336204"),a=a(),B(),a),ea={class:"columns"},ta={class:"column"},la={class:"is-size-5 has-text-weight-medium"},sa={class:"box"},ia={class:"has-text-weight-bold"},na=aa((()=>j("br",null,null,-1))),oa={class:"table-container"},da={class:"table box is-fullwidth"},ua={for:"hbsag"},ra=["disabled"],_a={class:"ml-2"},ca={key:0,class:"has-text-danger ml-2"},pa={for:"hiv"},ma=["disabled"],va={class:"ml-2"},ya={key:0,class:"has-text-danger ml-2"},ha={for:"antihcv"},ba=["disabled"],fa={class:"ml-2"},ga={key:0,class:"has-text-danger ml-2"},xa={for:"rw"},Va=["disabled"],ja={class:"ml-2"},ka={key:0,class:"has-text-danger ml-2"},wa={for:"hemolysis"},$a={class:"ml-2"},za={for:"chilez"},Ca={class:"ml-2"},Ua=aa((()=>j("p",{class:"has-text-danger"}," Красным цветом указаны показатели, заданные врачом-терапевтом, как обязательные для определения ",-1))),Da=Y(m({__name:"ResearchAimedFormModal",props:{isOpen:{type:Boolean,default:!1},patient:null},emits:["update:isOpen","update:list"],setup(t,{emit:l}){const s=t,m=v(),{t:O}=y(),B=h(O("Hemotransmission_research_results")),I=h(!1),F=b({date_analysis:[]}),H=b({data:{date_analysis:"",hbsag:!1,hbsag_test_system:"",hiv:!1,hiv_test_system:"",antihcv:!1,antihcv_test_system:"",rw:!1,rw_test_system:"",hemolysis:!1,chilez:!1},required_fields:[]}),T=h(!1);async function q(){var a,t,i,n,o,d;try{I.value=!0,await e(null==(t=null==(a=s.patient)?void 0:a.last_visit)?void 0:t.id,H.data),m.success(O("Data_saved_successfully")),l("update:list"),M()}catch(u){(null==(i=u.response)?void 0:i.data.error)?m.error(null==(n=u.response)?void 0:n.data.error):Object.assign(F,null==(d=null==(o=u.response)?void 0:o.data)?void 0:d.errors)}finally{I.value=!1}}function M(){H.data.date_analysis="",Object.assign(F,{date_analysis:[]}),l("update:isOpen",!1)}return f((()=>{var a,e;return null==(e=null==(a=s.patient)?void 0:a.last_visit)?void 0:e.id}),(async e=>{if(e){const t=await a(e);Object.assign(H,t.result)}})),f([()=>H.data.hemolysis,()=>H.data.chilez],(async a=>{a.includes(!0)?(H.data.hbsag=!1,H.data.hiv=!1,H.data.antihcv=!1,H.data.rw=!1,T.value=!0):T.value=!1})),(a,e)=>{const l=r,s=p,m=_,v=c,y=u,h=d,b=o,f=n,O=i;return g(),x(O,{ref:"hemotransmissionLaboratoryForm",open:t.isOpen,size:"big",title:B.value,actions:"right",onClose:M},{content:V((()=>{var i,n;return[j("div",ea,[j("div",ta,[j("h5",la,k(a.$t("Donation_code"))+": "+k(null==(n=null==(i=t.patient)?void 0:i.last_visit)?void 0:n.donation_code),1)])]),j("div",sa,[w(b,{"flex-wrap":"wrap","row-gap":"2rem","justify-content":"space-between"},{default:V((()=>[w(y,{"flex-basis":"45%"},{default:V((()=>[w(v,{horizontal:""},{default:V((()=>[w(l,{class:"my-auto mr-3 is-size-6"},{default:V((()=>[$(k(a.$t("Blood_sampling_date")),1)])),_:1}),w(m,null,{default:V((()=>{var a,e,l;return[w(s,{value:null==(l=null==(e=null==(a=t.patient)?void 0:a.last_visit)?void 0:e.blood_sample)?void 0:l.date,disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),w(y,{"flex-basis":"45%"},{default:V((()=>[w(v,{horizontal:""},{default:V((()=>[w(l,{class:"my-auto mr-3 is-size-6"},{default:V((()=>[$(k(a.$t("Blood_samples_taken_date")),1)])),_:1}),w(m,null,{default:V((()=>{var a,e,l;return[w(s,{value:null==(l=null==(e=null==(a=t.patient)?void 0:a.last_visit)?void 0:e.blood_sample)?void 0:l.hemotransmissible_date,disabled:""},null,8,["value"])]})),_:1})])),_:1})])),_:1}),w(y,{"flex-basis":"45%"},{default:V((()=>[w(v,{horizontal:""},{default:V((()=>[w(l,{class:"my-auto mr-3 is-size-6"},{default:V((()=>[$(k(a.$t("Analysis_date")),1)])),_:1}),w(m,null,{default:V((()=>[w(h,{modelValue:H.data.date_analysis,"onUpdate:modelValue":e[0]||(e[0]=a=>H.data.date_analysis=a)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),w(y,{"flex-basis":"45%"},{default:V((()=>{var e,l;return[j("h5",null,[j("span",ia,k(a.$t("Visit_stage")),1),j("span",null,k(null==(l=null==(e=t.patient)?void 0:e.last_visit)?void 0:l.stage),1)])]})),_:1})])),_:1})]),na,j("div",oa,[j("table",da,[j("tbody",null,[j("tr",null,[j("td",null,[j("label",ua,[z(j("input",{id:"hbsag","onUpdate:modelValue":e[1]||(e[1]=a=>H.data.hbsag=a),class:"checkbox",type:"checkbox",disabled:T.value},null,8,ra),[[C,H.data.hbsag]]),j("span",_a,k(a.$t("HBsAg")),1),H.required_fields.includes("hbsag")?(g(),U("span",ca,"*")):D("",!0)])]),j("td",null,[w(v,{horizontal:"",class:"is-justify-content-end"},{default:V((()=>[w(l,{class:"is-size-6 my-auto mr-3"},{default:V((()=>[$(k(a.$t("Testing_system"))+" ("+k(a.$t("HBsAg"))+")",1)])),_:1}),w(m,null,{default:V((()=>[w(s,{modelValue:H.data.hbsag_test_system,"onUpdate:modelValue":e[2]||(e[2]=a=>H.data.hbsag_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),j("tr",null,[j("td",null,[j("label",pa,[z(j("input",{id:"hiv","onUpdate:modelValue":e[3]||(e[3]=a=>H.data.hiv=a),class:"checkbox",type:"checkbox",disabled:T.value},null,8,ma),[[C,H.data.hiv]]),j("span",va,k(a.$t("OIDS")),1),H.required_fields.includes("hiv")?(g(),U("span",ya,"*")):D("",!0)])]),j("td",null,[w(v,{horizontal:"",class:"is-justify-content-end"},{default:V((()=>[w(l,{class:"is-size-6 my-auto mr-3"},{default:V((()=>[$(k(a.$t("Testing_system"))+" ("+k(a.$t("OIDS"))+")",1)])),_:1}),w(m,null,{default:V((()=>[w(s,{modelValue:H.data.hiv_test_system,"onUpdate:modelValue":e[4]||(e[4]=a=>H.data.hiv_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),j("tr",null,[j("td",null,[j("label",ha,[z(j("input",{id:"antihcv","onUpdate:modelValue":e[5]||(e[5]=a=>H.data.antihcv=a),class:"checkbox",type:"checkbox",disabled:T.value},null,8,ba),[[C,H.data.antihcv]]),j("span",fa,k(a.$t("AntiHCV")),1),H.required_fields.includes("antihcv")?(g(),U("span",ga,"*")):D("",!0)])]),j("td",null,[w(v,{horizontal:"",class:"is-justify-content-end"},{default:V((()=>[w(l,{class:"is-size-6 my-auto mr-3"},{default:V((()=>[$(k(a.$t("Testing_system"))+" ("+k(a.$t("AntiHCV"))+")",1)])),_:1}),w(m,null,{default:V((()=>[w(s,{modelValue:H.data.antihcv_test_system,"onUpdate:modelValue":e[6]||(e[6]=a=>H.data.antihcv_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),j("tr",null,[j("td",null,[j("label",xa,[z(j("input",{id:"rw","onUpdate:modelValue":e[7]||(e[7]=a=>H.data.rw=a),class:"checkbox",type:"checkbox",disabled:T.value},null,8,Va),[[C,H.data.rw]]),j("span",ja,k(a.$t("RW")),1),H.required_fields.includes("rw")?(g(),U("span",ka,"*")):D("",!0)])]),j("td",null,[w(v,{horizontal:"",class:"is-justify-content-end"},{default:V((()=>[w(l,{class:"is-size-6 my-auto mr-3"},{default:V((()=>[$(k(a.$t("Testing_system"))+" ("+k(a.$t("RW"))+")",1)])),_:1}),w(m,null,{default:V((()=>[w(s,{modelValue:H.data.rw_test_system,"onUpdate:modelValue":e[8]||(e[8]=a=>H.data.rw_test_system=a)},null,8,["modelValue"])])),_:1})])),_:1})])]),j("tr",null,[j("td",null,[j("label",wa,[z(j("input",{id:"hemolysis","onUpdate:modelValue":e[9]||(e[9]=a=>H.data.hemolysis=a),class:"checkbox",type:"checkbox"},null,512),[[C,H.data.hemolysis]]),j("span",$a,k(a.$t("Hemolis")),1)])])]),j("tr",null,[j("td",null,[j("label",za,[z(j("input",{id:"chilez","onUpdate:modelValue":e[10]||(e[10]=a=>H.data.chilez=a),class:"checkbox",type:"checkbox"},null,512),[[C,H.data.chilez]]),j("span",Ca,k(a.$t("Hiles")),1)])])])])]),Ua])]})),action:V((()=>[w(f,{loading:I.value,onClick:q},null,8,["loading"])])),_:1},8,["open","title"])}}}),[["__scopeId","data-v-d1336204"]]),Oa=a=>(O("data-v-4ba7bb50"),a=a(),B(),a),Ba={class:"page-content-inner"},Ia={class:"columns mb-3"},Fa={class:"column"},Ha={class:"columns mt-1"},Ta={class:"column"},qa={class:"columns"},Ma={class:"column is-12"},Aa={key:0,class:"is-flex-grow-0",textContent:"#"},Ra={key:0,class:"flex-list-inner"},Sa={key:1,class:"flex-list-inner"},Ya=Oa((()=>j("img",{class:"light-image",src:P,alt:""},null,-1))),La=Oa((()=>j("img",{class:"dark-image",src:Z,alt:""},null,-1))),Na=["onClick"],Wa=Y(m({__name:"index",async setup(a){let e,i;I(),v();const{t:n}=y(),o=Q(),d=h(!1);X().setPageTitle(n("Bloodborne-infections-laboratory")),F({title:`${n("Research-aimed-donations-list")} - ${o.app.name}`});const u=b({data:[],pagination:{total:10,count:10,per_page:10,current_page:1,total_pages:1}}),r=H({get:()=>u.pagination.current_page,set:async a=>{await z(p)}}),_={orderNumber:{format:(a,e,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},donation_code:{label:n("Donation_code"),format:(a,e)=>{var t;return null==(t=e.last_visit)?void 0:t.donation_code}},blood_sampling_date:{label:n("Blood_sampling_date"),format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.blood_sample)?void 0:l.date}},name:{label:n("Donor_fullname")},birth_date:{label:n("Date-of-birth")},visit_type:{label:n("Visit_type"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.visit_type)&&n(null==(l=e.last_visit)?void 0:l.visit_type)}},visit_date:{label:n("Visit_date"),format:(a,e)=>{var t,l;return(null==(t=e.last_visit)?void 0:t.created_at)&&T(new Date(null==(l=e.last_visit)?void 0:l.created_at),"YYYY-MM-DD")}},donation_type:{label:n("Donation_type"),format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.donation_type)?void 0:l.name}},visit_stage:{label:n("Visit_stage"),format:(a,e)=>{var t,l;return null==(l=null==(t=e.last_visit)?void 0:t.stage)?void 0:l.name}}},c=b({visit_type_id:[],donation_type_id:[],donation_code:[]}),p=b({visit_type_id:"",donation_type_id:null,donation_code:""}),m=h(null),f=h(!1),$=h(!1);async function z(a){var e,l;try{d.value=!0,Object.assign(p,a);const e={...a,page:r.value},l=await t(e);Object.assign(u,l.result)}catch(s){Object.assign(c,null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.errors)}finally{d.value=!1}}function C(a){c[a]=""}async function O(){u.data=[]}function B(){m.value=null}return[e,i]=q((()=>z(p))),await e,i(),(a,e)=>{const t=G,i=E,n=L,p=J,v=N,y=K,h=W,b=Da,I=s;return g(),U("div",Ba,[j("div",Ia,[j("div",Fa,[w(t,{"with-icons":"",separator:"bullet",items:[{label:M(o).app.name,hideLabel:!0,icon:"feather:home",to:{name:"/app/dashboard"}},{label:a.$t("Bloodborne-infections-laboratory")},{label:a.$t("Research-aimed-donations-list")}]},null,8,["items"])])]),j("div",Ha,[j("div",Ta,[w(l,{"is-loading":M(d),errors:M(c),onSearch:z,onClearForm:O,onClearError:C},null,8,["is-loading","errors"])])]),j("div",qa,[j("div",Ma,[w(h,{columns:M(_),data:M(u).data,limit:M(u).pagination.per_page,total:M(u).pagination.total},{default:V((()=>[w(v,{rounded:"","no-header":!M(d)&&0===M(u).data.length},{"header-column":V((({column:a})=>["orderNumber"===a.key?(g(),U("span",Aa)):D("",!0)])),body:V((()=>[M(d)?(g(),U("div",Ra,[(g(!0),U(A,null,R(M(u).pagination.per_page,(a=>(g(),U("div",{key:a,class:"flex-table-item"},[w(n,null,{default:V((()=>[w(i,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):D("",!0),0===M(u).data.length?(g(),U("div",Sa,[w(p,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:V((()=>[Ya,La])),_:1},8,["title","subtitle"])])):D("",!0)])),"body-cell":V((({row:a,column:e})=>["name"===e.key?(g(),U("a",{key:0,href:"javascript:;",class:"has-text-primary",onClick:e=>{return t=a,m.value=t,void(f.value=!0);var t}},k(a.first_name)+" "+k(a.last_name)+" "+k(a.father_name)+" ",9,Na)):D("",!0)])),_:1},8,["no-header"]),M(u).data.length?(g(),x(y,{key:0,"current-page":M(r),"onUpdate:current-page":e[0]||(e[0]=a=>S(r)?r.value=a:null),class:"mt-5","item-per-page":M(u).pagination.per_page,"total-items":M(u).pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):D("",!0)])),_:1},8,["columns","data","limit","total"])])]),w(b,{"is-open":M(f),"onUpdate:is-open":e[1]||(e[1]=a=>S(f)?f.value=a:null),patient:M(m),onClose:B},null,8,["is-open","patient"]),w(I,{"is-open":M($),"onUpdate:is-open":e[2]||(e[2]=a=>S($)?$.value=a:null),patient:M(m)},null,8,["is-open","patient"])])}}}),[["__scopeId","data-v-4ba7bb50"]]);export{Wa as default};
