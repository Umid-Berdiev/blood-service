import{_ as e}from"./VTabs.vue_vue_type_script_setup_true_lang-b35d55fc.js";import{_ as a}from"./VButton.vue_vue_type_style_index_0_lang-27d6885c.js";import{_ as t,a as l,b as i}from"./PatientPersonalInfoForm.vue_vue_type_script_setup_true_lang-cdfa56d2.js";import{_ as s,a as n}from"./VControl-fc151345.js";import{b as o,u as r}from"./chunk-DRAQDPQ2-4514f14e.js";import{a as d,b as _,r as u,o as p,D as c,s as m,l as b,t as y,q as v,Q as g,X as f,p as h,u as z,V,m as k,M as j,W as w,y as x,v as $,c as P,ac as U,w as I,i as C,$ as D,a0 as E}from"./chunk-BGPNDDXN-dcda8805.js";import{u as M}from"./@vueuse_head-0d019878.js";import{u as O}from"./viewWrapper-c60f0ce7.js";import{u as S}from"./chunk-3UEUFEGV-d557e6b1.js";import{_ as q}from"./VModal.vue_vue_type_style_index_0_lang-b0507e96.js";import{_ as N}from"./SubmitButton.vue_vue_type_script_setup_true_lang-e5001c63.js";import{_ as T}from"./VCheckbox.vue_vue_type_style_index_0_lang-25f2733c.js";import{_ as A}from"./VInput.vue_vue_type_script_setup_true_lang-29181b77.js";import{_ as F}from"./VRadio.vue_vue_type_style_index_0_lang-03da69fa.js";import{_ as B}from"./lodash-94527813.js";import{u as R}from"./useNotyf-1536ae84.js";import{o as G,q as H,r as Q,v as W,t as X,p as J,k as K,u as L}from"./patient-7cc4d60d.js";import{f as Y}from"./additional-00c211e1.js";import{_ as Z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-f3f542ff.js";import{_ as ee,a as ae,b as te}from"./VFlexTable.vue_vue_type_style_index_0_lang-f8ff2f75.js";import{c as le,d as ie,_ as se,a as ne,b as oe}from"./search-7-dark-f0facebe.js";import{_ as re}from"./EmployeeFlexTableDropdown.vue_vue_type_script_setup_true_lang-1dc8c767.js";import{_ as de}from"./VIcon.vue_vue_type_script_setup_true_lang-287aecd9.js";import{_ as _e}from"./VFlex.vue_vue_type_style_index_0_lang-0938e556.js";import{u as ue}from"./main-a3a6220c.js";import{_ as pe}from"./_plugin-vue_export-helper-1b428a4d.js";import"./VPlaceload-2a65ae53.js";import"./VIMaskInput.vue_vue_type_script_lang-06d40a07.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-a017671a.js";import"./pinia-3af6ce52.js";import"./userSession-0c0e9684.js";import"./@vueuse_core-098eb702.js";import"./VDropdown.vue_vue_type_style_index_0_lang-a9625316.js";const ce=["onSubmit"],me={class:"help has-text-danger"},be=g("br",null,null,-1),ye={class:"help has-text-danger"},ve={class:"help has-text-danger"},ge={class:"columns"},fe={class:"column is-6"},he={class:"column is-6"},ze={class:"columns"},Ve={class:"column is-6"},ke={class:"column is-6"},je=B.isEmpty,we=d({__name:"PatientVisitCardFormModal",props:{isOpen:{type:Boolean},cardId:null},emits:["update:isOpen","update:list"],setup(e,{emit:a}){var t;const l=e,i=o(),r=R(),{t:d}=S(),P=_(d("Add")),U=(null==(t=i.params)?void 0:t.id)||null,I=_(!1),C=u({patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),D=_([{value:"gratuitous",label:d("Gratuitous")},{value:"chargeable",label:d("Chargeable")}]),E=_([{value:"medical_organization",label:d("Healthcare_facilities")},{value:"public_organization",label:d("Public_organizations")},{value:"independently",label:d("Independently")}]),M=_([]),O=u({visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]});async function B(){var e,t;try{I.value=!0,l.cardId?await H(l.cardId,C):await Q(C),a("update:list"),r.success(d("Updated_successfully")),W()}catch(i){Object.assign(O,null==(t=null==(e=i.response)?void 0:e.data)?void 0:t.errors),r.error(i.message)}finally{I.value=!1}}function W(){P.value=d("Add"),Object.assign(C,{patient_id:U,visit_type:"gratuitous",directed_by:"medical_organization",medical_organization_id:"",public_organization:"",is_personalized_donation:"",is_mobile_team:"",personalized_donation:"",mobile_team:""}),Object.assign(O,{visit_type:[],directed_by:[],medical_organization_id:[],public_organization:[],is_personalized_donation:[],is_mobile_team:[],personalized_donation:[],mobile_team:[]}),a("update:isOpen",!1)}return p((async()=>{const e=await Y();je(e.result)||(M.value=e.result)})),c((async()=>{if(Number(l.cardId)){P.value=d("Edit");const e=await G(Number(l.cardId),U);Object.assign(C,e.result)}})),(a,t)=>{const l=m("Multiselect"),i=s,o=n,r=F,d=A,_=T,u=N,p=q;return b(),y(p,{open:e.isOpen,size:"large",title:z(P),actions:"right",onClose:W},{content:v((()=>[g("form",{id:"visitcard-form",class:"modal-form",onSubmit:f(B,["prevent"])},[h(o,{label:a.$t("Visit_type"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[h(l,{modelValue:z(C).visit_type,"onUpdate:modelValue":t[0]||(t[0]=e=>z(C).visit_type=e),options:z(D),placeholder:a.$t("Visit_type"),label:"label","value-prop":"value"},null,8,["modelValue","options","placeholder"]),g("p",me,V(z(O).visit_type[0]),1)])),_:1})])),_:1},8,["label"]),be,h(o,{label:a.$t("Directed_by"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[(b(!0),k(j,null,w(z(E),((e,a)=>(b(),y(r,{key:a,modelValue:z(C).directed_by,"onUpdate:modelValue":t[1]||(t[1]=e=>z(C).directed_by=e),value:e.value,label:e.label,color:"primary"},null,8,["modelValue","value","label"])))),128))])),_:1})])),_:1},8,["label"]),"medical_organization"===z(C).directed_by?(b(),y(o,{key:0,label:a.$t("Healthcare_facilities_list"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[h(l,{modelValue:z(C).medical_organization_id,"onUpdate:modelValue":t[2]||(t[2]=e=>z(C).medical_organization_id=e),options:z(M),placeholder:a.$t("Medical_organizations_list"),label:"name",searchable:"","value-prop":"id"},null,8,["modelValue","options","placeholder"]),g("p",ye,V(z(O).medical_organization_id[0]),1)])),_:1})])),_:1},8,["label"])):x("",!0),"public_organization"===z(C).directed_by?(b(),y(o,{key:1,label:a.$t("Public_organization_title"),required:""},{default:v((()=>[h(i,null,{default:v((()=>[h(d,{modelValue:z(C).public_organization,"onUpdate:modelValue":t[3]||(t[3]=e=>z(C).public_organization=e),placeholder:a.$t("Public_organization_title")},null,8,["modelValue","placeholder"]),g("p",ve,V(z(O).public_organization[0]),1)])),_:1})])),_:1},8,["label"])):x("",!0),g("div",ge,[g("div",fe,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[h(_,{modelValue:z(C).is_personalized_donation,"onUpdate:modelValue":t[4]||(t[4]=e=>z(C).is_personalized_donation=e),label:a.$t("Personalized_donation"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),g("div",he,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[z(C).is_personalized_donation?(b(),y(d,{key:0,modelValue:z(C).personalized_donation,"onUpdate:modelValue":t[5]||(t[5]=e=>z(C).personalized_donation=e)},null,8,["modelValue"])):x("",!0)])),_:1})])),_:1})])]),g("div",ze,[g("div",Ve,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[h(_,{modelValue:z(C).is_mobile_team,"onUpdate:modelValue":t[6]||(t[6]=e=>z(C).is_mobile_team=e),label:a.$t("Mobile_team"),color:"primary"},null,8,["modelValue","label"])])),_:1})])),_:1})]),g("div",ke,[h(o,null,{default:v((()=>[h(i,null,{default:v((()=>[z(C).is_mobile_team?(b(),y(d,{key:0,modelValue:z(C).mobile_team,"onUpdate:modelValue":t[7]||(t[7]=e=>z(C).mobile_team=e)},null,8,["modelValue"])):x("",!0)])),_:1})])),_:1})])])],40,ce)])),action:v((({close:e})=>[h(u,{loading:z(I),form:"visitcard-form"},{default:v((()=>[$(V(a.$t("Send_for_examination")),1)])),_:1},8,["loading"])])),_:1},8,["open","title"])}}}),xe={class:"page-content-inner"},$e={class:"columns"},Pe={class:"column is-12"},Ue={key:0,class:"is-flex-grow-0",textContent:"#"},Ie={key:0,class:"flex-list-inner"},Ce={key:1,class:"flex-list-inner"},De=g("img",{class:"light-image",src:le,alt:""},null,-1),Ee=g("img",{class:"dark-image",src:ie,alt:""},null,-1),Me={key:0,class:"dark-text"},Oe={key:1,class:"dark-text"},Se={key:3},qe={key:4},Ne=d({__name:"PatientVisitCardTable",async setup(e){var t;let l,i;const s=o();r();const n=R(),{t:d}=S(),p=ue();O().setPageTitle(d("Patient_cards_list")),M({title:`${d("Patient_cards")} - ${p.app.name}`});const c=u({current_page:1,per_page:10,total:10,data:[]}),m=_(null),f=(null==(t=s.params)?void 0:t.id)||null,D=_(!1),E=P({get:()=>c.current_page,set:async e=>{await T(e)}}),q={orderNumber:{format:(e,a,t)=>`${t+1}`,cellClass:"is-flex-grow-0"},visit_type:{label:d("Visit_type")},directed_by:{label:d("Directed_by")},medical_organization:{label:d("Healthcare_facilities")},public_organization:{label:d("Public_organizations")},independently:{label:d("Independently")},is_personalized_donation:{label:d("Personalized_donation")},is_mobile_team:{label:d("Mobile_team")},actions:{label:"",align:"end"}},N=_(!1);async function T(e=1){try{N.value=!0;const a=await W(f,{page:e,per_page:c.per_page});Object.assign(c,a.result)}catch(a){n.error(d(a.message))}finally{N.value=!1}}function A(e){m.value=e,D.value=!0}async function F(){await X(f,m.value),T()}function B(){T(),m.value=null}return _(),[l,i]=U((()=>T())),await l,i(),I((()=>c.per_page),(async()=>{await T()})),(e,t)=>{const l=a,i=_e,s=se,n=ee,o=ne,r=de,d=re,_=ae,u=oe,f=te,P=Z,U=we;return b(),k("div",xe,[h(i,null,{default:v((()=>[h(l,{color:"primary",rounded:"",outlined:"",icon:"feather:plus",class:"ml-auto",onClick:t[0]||(t[0]=e=>A(null))},{default:v((()=>[$(V(e.$t("Add")),1)])),_:1})])),_:1}),g("div",$e,[g("div",Pe,[h(f,{class:"mt-4",columns:z(q),data:z(c).data,limit:z(c).per_page,total:z(c).total},{default:v((()=>[h(_,{rounded:"","no-header":!z(N)&&0===z(c).data.length},{"header-column":v((({column:e})=>["orderNumber"===e.key?(b(),k("span",Ue)):x("",!0)])),body:v((()=>[z(N)?(b(),k("div",Ie,[(b(!0),k(j,null,w(z(c).per_page,(e=>(b(),k("div",{key:e,class:"flex-table-item"},[h(n,null,{default:v((()=>[h(s,{lines:2,"last-line-width":"70%",class:"mx-2"})])),_:1})])))),128))])):0===z(c).data.length?(b(),k("div",Ce,[h(o,{title:"No matches",subtitle:"There is no data that match your query.",class:"my-6"},{image:v((()=>[De,Ee])),_:1})])):x("",!0)])),"body-cell":v((({row:a,column:t,value:l})=>["visit_type"===t.key?(b(),k("span",Me,V(e.$t(l)),1)):x("",!0),"directed_by"===t.key?(b(),k("span",Oe,V(e.$t(l)),1)):x("",!0),"independently"===t.key?(b(),k(j,{key:2},["independently"===a.directed_by?(b(),y(r,{key:0,class:"has-text-primary",icon:"feather:check"})):(b(),y(r,{key:1,class:"has-text-danger",icon:"feather:minus"}))],64)):x("",!0),"is_personalized_donation"===t.key?(b(),k("span",Se,V(a.personalized_donation),1)):x("",!0),"is_mobile_team"===t.key?(b(),k("span",qe,V(a.mobile_team),1)):x("",!0),"actions"===t.key?(b(),y(d,{key:5,onEdit:e=>A(a.id),onRemove:e=>async function(e){m.value=e,p.$patch({confirmModalState:!0})}(a.id)},null,8,["onEdit","onRemove"])):x("",!0)])),_:1},8,["no-header"]),z(c).data.length?(b(),y(u,{key:0,"current-page":z(E),"onUpdate:current-page":t[1]||(t[1]=e=>C(E)?E.value=e:null),class:"mt-5","item-per-page":z(c).per_page,"total-items":z(c).total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):x("",!0)])),_:1},8,["columns","data","limit","total"])])]),h(P,{onConfirmAction:F}),h(U,{"is-open":z(D),"onUpdate:is-open":t[2]||(t[2]=e=>C(D)?D.value=e:null),"card-id":z(m),"onUpdate:list":B,onClose:t[3]||(t[3]=e=>m.value=null)},null,8,["is-open","card-id"])])}}}),Te={class:"patient-detail-wrapper"},Ae=["onSubmit"],Fe={class:"columns mt-5"},Be={class:"column"},Re={class:"is-size-5"},Ge=(e=>(D("data-v-d3d20e9f"),e=e(),E(),e))((()=>g("br",null,null,-1))),He={class:"help has-text-danger"},Qe={class:"column"},We={class:"is-size-5"},Xe={class:"column"},Je={class:"is-size-5"},Ke={class:"navigation-buttons"},Le={class:"buttons is-right"},Ye={key:1,class:"mt-5"},Ze=pe(d({__name:"[id]",async setup(d){var c;let y,j;const w=o();r();const I=R(),{t:C}=S(),D=u({patient_category_id:null,last_name:"",first_name:"",father_name:"",birth_date:new Date,gender:"male",pinfl:"",passport_series:"",passport_number:"",issued_by:"",when_issued:new Date,region_id:null,district_id:null,work_study_place:"",email:"",phone_number:"",phone_home:"",phone_work:"",address:"",avatar:""}),E=u({patient_category_id:[],last_name:[],first_name:[],father_name:[],birth_date:[],gender:[],pinfl:[],passport_series:[],passport_number:[],issued_by:[],when_issued:[],region_id:[],district_id:[],work_study_place:[],email:[],phone_number:[],phone_home:[],phone_work:[],address:[],avatar:[]}),q=_(!1),N=(null==(c=w.params)?void 0:c.id)||null,T=_([{label:C("Patient_details"),value:"#details",icon:"feather:info",to:`${w.path}#details`},{label:C("Patient_card"),value:"#patient_visit_cards",icon:"feather:file-text",to:`${w.path}#patient_visit_cards`}]),A=_([]),F=_(w.hash||"#details");function B(e){E[e]=""}async function G(){var e,a;try{q.value=!0;await L(N,D);I.success(C("Updated_successfully"))}catch(t){(null==(e=t.response)?void 0:e.data.errors)?Object.assign(E,null==(a=t.response)?void 0:a.data.errors):I.error(C("Something_went_wrong"))}finally{q.value=!1}}return O().setPageTitle(C("Patient_info")),M({title:P((()=>C("Patient_info")))}),[y,j]=U((()=>async function(){try{const e=await K(N);Object.assign(D,e.result)}catch(e){I.error(e.message)}}())),await y,j(),p((async()=>{const e=await J();A.value=e.result})),(o,r)=>{const d=t,_=m("Multiselect"),u=s,p=n,c=l,y=i,j=a,w=e;return b(),k("div",Te,[h(w,{selected:z(F),tabs:z(T)},{tab:v((({activeValue:e})=>["#details"===e?(b(),k("form",{key:0,onSubmit:f(G,["prevent"])},[g("div",Fe,[g("div",Be,[g("p",Re,V(o.$t("Personal_Info")),1),h(d,{patient:z(D),errors:z(E),onEditing:B},null,8,["patient","errors"]),Ge,h(p,{label:o.$t("Category"),required:""},{default:v((()=>[h(u,null,{default:v((()=>[h(_,{modelValue:z(D).patient_category_id,"onUpdate:modelValue":r[0]||(r[0]=e=>z(D).patient_category_id=e),options:z(A),placeholder:o.$t("Select_category"),label:"name","value-prop":"id"},null,8,["modelValue","options","placeholder"]),g("p",He,V(z(E).patient_category_id[0]),1)])),_:1})])),_:1},8,["label"])]),g("div",Qe,[g("p",We,V(o.$t("Passport_info")),1),h(c,{patient:z(D),errors:z(E),onEditing:B},null,8,["patient","errors"])]),g("div",Xe,[g("p",Je,V(o.$t("Address")),1),h(y,{patient:z(D),errors:z(E),onEditing:B},null,8,["patient","errors"])])]),g("div",Ke,[g("div",Le,[h(j,{type:"submit",color:"primary",bold:"",loading:z(q),disabled:z(q),tabindex:"0"},{default:v((()=>[$(V(o.$t("Save")),1)])),_:1},8,["loading","disabled"])])])],40,Ae)):"#patient_visit_cards"===e?(b(),k("div",Ye,[h(Ne)])):x("",!0)])),_:1},8,["selected","tabs"])])}}}),[["__scopeId","data-v-d3d20e9f"]]);export{Ze as default};
