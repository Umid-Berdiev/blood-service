import{_ as e}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-6a39ce1b.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-52241399.js";import{_ as l,a as t}from"./VButton.vue_vue_type_style_index_0_lang-6deaaf11.js";import{_ as n}from"./VTabs.vue_vue_type_script_setup_true_lang-8bb94b98.js";import{_ as s}from"./VTextarea.vue_vue_type_script_setup_true_lang-5e0ed005.js";import{_ as o,a as i}from"./VControl-c4bfd6d4.js";import{_ as r}from"./VInput.vue_vue_type_script_setup_true_lang-fcf9b43c.js";import{q as u,H as d,C as p,x as c,r as m,y as _,o as v,a as g,w as f,e as y,m as b,k as h,d as V,K as x,t as j,g as w,i as z,j as k,E as $,c as C,J as U,ag as A,U as I,F as R,l as T}from"./index-c5546e3f.js";import{f as N,u as O,c as D,a as E,s as S,r as q}from"./index-5de0458e.js";import{_ as F,a as M,b as P}from"./VFlexTable.vue_vue_type_style_index_0_lang-0fb083a3.js";import{b as B,c as J,_ as K,d as L,a as H}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-1679fcf5.js";import{_ as W}from"./VDropdown.vue_vue_type_style_index_0_lang-8fce14c5.js";import{_ as Z,a as G,b as Q}from"./SearchInput-340e1451.js";import{_ as X}from"./VFlex.vue_vue_type_style_index_0_lang-84415715.js";import{_ as Y}from"./VBreadcrumb.vue_vue_type_style_index_0_lang-d20f193a.js";import{u as ee}from"./viewWrapper-911093a6.js";import{u as ae}from"./main-94385ff1.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./VIcon.vue_vue_type_script_setup_true_lang-82fecaaf.js";const le=["onSubmit"],te={key:0,class:"columns is-multiline pt-5"},ne={class:"column is-12"},se={class:"help has-text-danger"},oe={class:"help has-text-danger"},ie={key:1,class:"columns is-multiline pt-5"},re={class:"column is-12"},ue={key:2,class:"columns is-multiline pt-5"},de={class:"column is-12"},pe=u({__name:"RoleFormModal",props:{modelValue:{type:Boolean,default:!1},roleId:{default:null}},emits:["update:modelValue","update:list"],setup(e,{emit:t}){const u=e,k=d(),{t:$}=p(),C=c($("Add")),U=c(!1),A=m({uz:"",ru:"",en:""}),I=m({uz:"",ru:"",en:""}),R=m({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});async function T(){var e,a,l,n;try{U.value=!0,u.roleId?await O(u.roleId,{name:A,description:I}):await D({name:A,description:I}),t("update:list"),E()}catch(s){(null==(e=s.response)?void 0:e.data.error)?k.error(null==(a=s.response)?void 0:a.data.error):Object.assign(R,null==(n=null==(l=s.response)?void 0:l.data)?void 0:n.errors)}finally{U.value=!1}}function E(){C.value=$("Add"),Object.assign(A,{uz:"",ru:"",en:""}),Object.assign(I,{uz:"",ru:"",en:""}),Object.assign(R,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]}),t("update:modelValue",!1)}return _((()=>u.roleId),(async e=>{if(e){console.log(e),C.value=$("Edit");const a=await N(Number(u.roleId));Object.assign(A,a.name),Object.assign(I,a.description)}}),{deep:!0}),(t,u)=>{const d=r,p=o,c=i,m=s,_=n,k=l,N=a;return v(),g(N,{open:e.modelValue,size:"large",title:C.value,actions:"right",onClose:E},{content:f((()=>[y("form",{id:"role-form",class:"modal-form",onSubmit:b(T,["prevent"])},[h(_,{type:"boxed",selected:"uz",tabs:[{label:t.$t("Uzbek"),value:"uz"},{label:t.$t("Russian"),value:"ru"},{label:t.$t("English"),value:"en"}]},{tab:f((({activeValue:e})=>["uz"===e?(v(),V("div",te,[y("div",ne,[h(c,{label:t.$t("Name_uz"),required:""},{default:f((()=>[h(p,null,{default:f((()=>[h(d,{modelValue:A.uz,"onUpdate:modelValue":u[0]||(u[0]=e=>A.uz=e),name:"name_uz",type:"text",placeholder:x($)("Type_name_uz")},null,8,["modelValue","placeholder"]),y("p",se,j(R["name.uz"][0]),1)])),_:1})])),_:1},8,["label"]),h(c,{label:t.$t("Description_uz"),required:""},{default:f((()=>[h(p,null,{default:f((()=>[h(m,{modelValue:I.uz,"onUpdate:modelValue":u[1]||(u[1]=e=>I.uz=e),name:"description_uz",placeholder:x($)("Add_description_uz")},null,8,["modelValue","placeholder"]),y("p",oe,j(R["description.uz"][0]),1)])),_:1})])),_:1},8,["label"])])])):"ru"===e?(v(),V("div",ie,[y("div",re,[h(c,{label:t.$t("Name_ru")},{default:f((()=>[h(p,null,{default:f((()=>[h(d,{modelValue:A.ru,"onUpdate:modelValue":u[2]||(u[2]=e=>A.ru=e),name:"name_ru",type:"text",placeholder:x($)("Type_name_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),h(c,{label:t.$t("Description_ru")},{default:f((()=>[h(p,null,{default:f((()=>[h(m,{modelValue:I.ru,"onUpdate:modelValue":u[3]||(u[3]=e=>I.ru=e),name:"description_ru",placeholder:x($)("Add_description_ru")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):"en"===e?(v(),V("div",ue,[y("div",de,[h(c,{label:t.$t("Name_en")},{default:f((()=>[h(p,null,{default:f((()=>[h(d,{modelValue:A.en,"onUpdate:modelValue":u[4]||(u[4]=e=>A.en=e),name:"name_en",type:"text",placeholder:x($)("Type_name_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"]),h(c,{label:t.$t("Description_en")},{default:f((()=>[h(p,null,{default:f((()=>[h(m,{modelValue:I.en,"onUpdate:modelValue":u[5]||(u[5]=e=>I.en=e),name:"description_en",placeholder:x($)("Add_description_en")},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["label"])])])):w("",!0)])),_:1},8,["tabs"])],40,le)])),action:f((({close:e})=>[h(k,{loading:U.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:U.value},{default:f((()=>[z(j(t.$t("Save")),1)])),_:1},8,["loading","disabled"])])),_:1},8,["open","title"])}}}),ce=["onClick"],me={class:"icon"},_e={class:"meta"},ve=["onClick"],ge={class:"icon"},fe={class:"meta"},ye=y("hr",{class:"dropdown-divider"},null,-1),be=["onClick"],he={class:"icon"},Ve={class:"meta"},xe=u({__name:"RoleDropdown",emits:["edit","remove","permissions"],setup:(e,{emit:a})=>(e,l)=>{const t=k("VueIconify"),n=W;return v(),g(n,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:f((({close:l})=>[y("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:b((()=>{a("edit"),l()}),["prevent"])},[y("div",me,[h(t,{icon:"feather:edit-2"})]),y("div",_e,[y("span",null,j(e.$t("Edit")),1)])],8,ce),y("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:b((()=>{a("permissions"),l()}),["prevent"])},[y("div",ge,[h(t,{icon:"feather:shield"})]),y("div",fe,[y("span",null,j(e.$t("Role_permissions")),1)])],8,ve),ye,y("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:b((()=>{a("remove"),l()}),["prevent"])},[y("div",he,[h(t,{icon:"feather:trash"})]),y("div",Ve,[y("span",null,j(e.$t("Remove")),1)])],8,be)])),_:1})}}),je={class:"applicant-list-wrapper"},we={class:"columns"},ze={class:"column is-12"},ke={key:0,class:"is-flex-grow-0",textContent:"#"},$e={key:0,class:"flex-list-inner"},Ce={key:1,class:"flex-list-inner"},Ue=y("img",{class:"light-image",src:B,alt:""},null,-1),Ae=y("img",{class:"dark-image",src:J,alt:""},null,-1),Ie=u({__name:"index",async setup(a){let n,s;const o=d(),i=$(),{t:r}=p(),u=ae(),k=m({pagination:{current_page:1,per_page:10,total:10},result:[]}),N=c(!1),O=c(null),D=C({get:()=>"",async set(e){await async function(e){const a=await S(e);Object.assign(k,a)}(e)}}),B=C((()=>({orderNumber:{format:(e,a,l)=>`${l+1}`,cellClass:"is-flex-grow-0"},name:{label:r("Name"),searchable:!0},description:{label:r("Description")},actions:{label:r("Actions"),align:"center"}}))),J=c(!1);c();const W=ee(),le=C({get:()=>k.pagination.current_page,set:async e=>{await se(e)}});function te(e=null){console.log({rowId:e}),N.value=!0,O.value=e}async function ne(){await q(O.value),await se(),oe()}async function se(e=1){var a;try{J.value=!0;const a=await E({page:e,per_page:k.pagination.per_page});Object.assign(k,a)}catch(l){o.error(r(null==(a=l.response)?void 0:a.data.error.message))}finally{J.value=!1}}function oe(){o.success(r("Success"))}return W.setPageTitle(r("Roles_List")),U({title:r("Roles")}),[n,s]=A((()=>se())),await n,s(),_((()=>k.pagination.per_page),(async()=>{await se()})),(a,n)=>{const s=Y,o=l,r=X,d=Z,p=G,c=Q,m=K,_=F,$=t,C=L,U=xe,A=M,E=H,S=P,q=pe,W=e;return v(),V("div",je,[h(r,{"justify-content":"space-between"},{default:f((()=>[h(s,{"with-icons":"",separator:"bullet",items:[{label:"Vuero",hideLabel:!0,icon:"feather:home",to:{name:"/app"}},{label:a.$t("Roles"),to:{name:"/app/roles/"}}]},null,8,["items"]),h(o,{outlined:"",rounded:"",color:"primary",icon:"feather:plus",onClick:n[0]||(n[0]=b((e=>te(null)),["prevent"]))},{default:f((()=>[z(j(a.$t("Add")),1)])),_:1})])),_:1}),y("div",we,[y("div",ze,[h(S,{class:"mt-4",columns:x(B),data:k.result,limit:k.pagination.per_page,total:k.pagination.total},{default:f((e=>[h(c,null,{left:f((()=>[h(d,{modelValue:x(D),"onUpdate:modelValue":n[1]||(n[1]=e=>I(D)?D.value=e:null)},null,8,["modelValue"])])),right:f((()=>[h(p,{modelValue:k.pagination.per_page,"onUpdate:modelValue":n[2]||(n[2]=e=>k.pagination.per_page=e)},null,8,["modelValue"])])),_:1}),h(A,{rounded:"","no-header":!J.value&&0===k.result.length},{"header-column":f((({column:e})=>["orderNumber"===e.key?(v(),V("span",ke)):w("",!0)])),body:f((()=>[J.value?(v(),V("div",$e,[(v(!0),V(R,null,T(k.pagination.per_page,(e=>(v(),V("div",{key:e,class:"flex-table-item"},[h(_,null,{default:f((()=>[h(m,{lines:2,width:"40%","last-line-width":"20%",class:"mx-2"})])),_:1}),h(_,null,{default:f((()=>[h($,{class:"mx-1"})])),_:1}),h(_,{column:{align:"center"}},{default:f((()=>[h($,{width:"45%",class:"mx-1"})])),_:1})])))),128))])):0===k.result.length?(v(),V("div",Ce,[h(C,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},{image:f((()=>[Ue,Ae])),_:1},8,["title","subtitle"])])):w("",!0)])),"body-cell":f((({row:e,column:a})=>["actions"===a.key?(v(),g(U,{key:0,onEdit:a=>te(e.id),onRemove:a=>async function(e){O.value=e,u.$patch({confirmModalState:!0})}(e.id),onPermissions:a=>{return l=e.id,void i.push(`/app/roles/${l}/permissions`);var l}},null,8,["onEdit","onRemove","onPermissions"])):w("",!0)])),_:1},8,["no-header"]),k.result.length?(v(),g(E,{key:0,"current-page":x(le),"onUpdate:current-page":n[3]||(n[3]=e=>I(le)?le.value=e:null),class:"mt-5","item-per-page":k.pagination.per_page,"total-items":k.pagination.total,"no-router":""},null,8,["current-page","item-per-page","total-items"])):w("",!0)])),_:1},8,["columns","data","limit","total"])])]),h(q,{modelValue:N.value,"onUpdate:modelValue":n[4]||(n[4]=e=>N.value=e),"role-id":O.value,"onUpdate:list":n[5]||(n[5]=()=>{se(),oe(),O.value=null}),onClose:n[6]||(n[6]=e=>O.value=null)},null,8,["modelValue","role-id"]),h(W,{onConfirmAction:ne})])}}});export{Ie as default};
